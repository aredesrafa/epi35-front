import{S as Qe,i as Ge,s as Je,d as m,m as U,o as y,p as w,C as _e,q as ve,b as N,c as d,r as Q,u as E,v as Qa,h as A,e as $,f as I,w as De,x as G,k as F,j as b,y as J,_ as Ze,n as Ve,g as M,t as j,a as oe,B as Ce,R as He,L as $t,O as bt,P as Et,Q as kt,F as ar,J as ct,M as Dt,a1 as Ct,a6 as Ft,A as It,a3 as Me,a7 as je,a8 as xe,H as rr,l as Ga,z as Ja}from"../chunks/BwBa27U2.js";import"../chunks/IHki7fMi.js";import{f as vt}from"../chunks/7oAoWpZ2.js";import{U as Ye}from"../chunks/BM9Rxo7V.js";import{a as yt,E as Vt,T as lr,b as nr,c as or,R as Wa,d as pt,e as sr,f as ht,L as Ke,S as Ka,h as ir,g as cr}from"../chunks/AI5XSAlw.js";import{I as Pt,n as Oe,b as fr}from"../chunks/CW_GOkfj.js";import{b as Le,B as ze,e as Se,u as ot,o as ft,a as st,l as ur,g as dr,f as mr}from"../chunks/K6YgHZ2F.js";import{C as gr}from"../chunks/oVzYVp2u.js";import{C as pr}from"../chunks/BoMMM-o-.js";import{E as hr}from"../chunks/Dk1qpAHa.js";import{P as it}from"../chunks/BrDGBN_R.js";import{S as Xa}from"../chunks/ywxHNNOO.js";import{S as nt,T as _r}from"../chunks/C0bt7z_1.js";import{w as vr}from"../chunks/sdCM-dK-.js";import{a as ut,D as $r}from"../chunks/NtaOPkNA.js";import{I as Ya}from"../chunks/C1CZg8ii.js";import{E as qt}from"../chunks/eHhgGX3k.js";import{T as Za}from"../chunks/DHdW1b2-.js";import{C as br}from"../chunks/B2Xlhu43.js";import{C as er}from"../chunks/Cff8Z6EW.js";import{f as wt}from"../chunks/cmi2GAyx.js";import{T as Er,Q as kr,F as wr,G as Dr,P as Cr}from"../chunks/0vM48h24.js";import{M as Ir}from"../chunks/Bu3-ovug.js";class yr{async createDelivery(e){var t,a;if(console.log("üöö DeliveryProcessAdapter: Criando entrega via ficha espec√≠fica..."),console.log("üîç FichaEpiId:",e.fichaEpiId),console.log("üîç ResponsavelId:",e.responsavelId),console.log("üîç Itens count:",((t=e.itens)==null?void 0:t.length)||0),!e.fichaEpiId)throw new Error("fichaEpiId √© obrigat√≥rio");if(!e.responsavelId)throw new Error("responsavelId √© obrigat√≥rio");if(!e.itens||e.itens.length===0)throw new Error("Pelo menos um item √© obrigat√≥rio");try{const r=[];e.itens.forEach(o=>{for(let i=0;i<o.quantidade;i++)r.push({estoqueItemOrigemId:o.estoqueItemId,numeroSerie:`SER-${o.estoqueItemId}-${i+1}`})});const n={fichaEpiId:e.fichaEpiId,quantidade:r.length,itens:r,assinaturaColaborador:"placeholder_signature",observacoes:e.observacoes||"",usuarioId:e.responsavelId};console.log("üìã Payload formatado para backend:",n);const s=await Le.post(`/fichas-epi/${e.fichaEpiId}/entregas`,n);return console.log("‚úÖ Entrega criada via endpoint da ficha:"),console.log(`  - Ficha ID: ${e.fichaEpiId}`),console.log("  - Response:",s),s}catch(r){throw console.error("‚ùå Erro ao criar entrega via ficha:",r),(a=r.response)!=null&&a.data&&console.error("‚ùå Detalhes do erro do backend:",r.response.data),r}}async validateDelivery(e){console.log("üîç DeliveryProcessAdapter: Validando entrega antes de criar:",e);try{const t=await Le.post("/fichas-epi/entregas/validar",e);return console.log("‚úÖ Valida√ß√£o da entrega conclu√≠da:",t),t}catch(t){throw console.error("‚ùå Erro na valida√ß√£o da entrega:",t),t}}async confirmSignature(e,t){console.log("‚úçÔ∏è DeliveryProcessAdapter: Confirmando assinatura:",e);try{const a={assinaturaColaborador:t.assinatura,observacoes:"Entrega assinada pelo colaborador"};await Le.put(`/fichas-epi/entregas/${e}/assinar`,a),console.log("‚úÖ Assinatura confirmada")}catch(a){throw console.error("‚ùå Erro ao confirmar assinatura:",a),a}}async cancelDelivery(e,t){console.log("‚ùå DeliveryProcessAdapter: Cancelando entrega:",e);try{await Le.post(`/entregas/${e}/cancel`,t),console.log("‚úÖ Entrega cancelada")}catch(a){throw console.error("‚ùå Erro ao cancelar entrega:",a),a}}async printDelivery(e){console.log("üñ®Ô∏è DeliveryProcessAdapter: Gerando PDF da entrega:",e);try{const t=await Le.get(`/entregas/${e}/print`,{responseType:"blob"});return console.log("‚úÖ PDF gerado"),t}catch(t){throw console.error("‚ùå Erro ao gerar PDF:",t),t}}async updateDelivery(e,t){console.log("‚úèÔ∏è DeliveryProcessAdapter: Editando entrega:",e);try{const a=await Le.put(`/entregas/${e}`,t);return console.log("‚úÖ Entrega editada"),a}catch(a){throw console.error("‚ùå Erro ao editar entrega:",a),a}}async createDevolucao(e,t){console.log("üîÑ DeliveryProcessAdapter: Criando devolu√ß√£o:",e,t);try{const a=await Le.post(`/fichas-epi/entregas/${e}/devolucao`,t);return console.log("‚úÖ Devolu√ß√£o criada com sucesso:",a),a}catch(a){throw console.error("‚ùå Erro ao criar devolu√ß√£o:",a),a}}async validateDevolucao(e,t){console.log("üîç DeliveryProcessAdapter: Validando devolu√ß√£o:",e,t);try{const a=await Le.post(`/fichas-epi/entregas/${e}/devolucao/validar`,t);return console.log("‚úÖ Valida√ß√£o de devolu√ß√£o conclu√≠da:",a),a}catch(a){throw console.error("‚ùå Erro na valida√ß√£o de devolu√ß√£o:",a),a}}async processBatchDevolucao(e){console.log("üîÑ DeliveryProcessAdapter: Processando devolu√ß√µes em lote:",e);try{const t=await Le.post("/devolucoes/process-batch",e);return console.log("‚úÖ Devolu√ß√µes em lote processadas:",t),t}catch(t){throw console.error("‚ùå Erro ao processar devolu√ß√µes em lote:",t),t}}}const _t=new yr;class Pr{async processReturns(e){console.log("üîÑ ReturnProcessAdapter: Processando devolu√ß√µes em lote:",e),console.log(`  - Total de itens: ${e.devolucoes.length}`);try{const t=await Le.post("/devolucoes/process-batch",e);return console.log("‚úÖ Devolu√ß√µes processadas:"),console.log(`  - Processadas: ${t.data.processadas}`),console.log(`  - Erros: ${t.data.erros.length}`),console.log(`  - Fichas atualizadas: ${t.data.fichasAtualizadas.length}`),t}catch(t){throw console.error("‚ùå Erro ao processar devolu√ß√µes:",t),t}}async validateReturn(e){console.log("üîç ReturnProcessAdapter: Validando devolu√ß√£o:",e);try{const t=await Le.get(`/devolucoes/validate/${e}`);return t.podeDevolver?console.log("‚úÖ Equipamento pode ser devolvido"):console.log("‚ö†Ô∏è Equipamento n√£o pode ser devolvido:",t.motivo),t}catch(t){throw console.error("‚ùå Erro ao validar devolu√ß√£o:",t),t}}async getReturnHistory(e){console.log("üìã ReturnProcessAdapter: Buscando hist√≥rico de devolu√ß√µes:",e);try{const t=await Le.get(`/devolucoes/historico/${e}`);return console.log("‚úÖ Hist√≥rico de devolu√ß√µes carregado"),t}catch(t){throw console.error("‚ùå Erro ao buscar hist√≥rico de devolu√ß√µes:",t),t}}async cancelReturn(e,t){console.log("‚ùå ReturnProcessAdapter: Cancelando devolu√ß√£o:",e);try{await Le.post(`/devolucoes/${e}/cancel`,{motivo:t}),console.log("‚úÖ Devolu√ß√£o cancelada")}catch(a){throw console.error("‚ùå Erro ao cancelar devolu√ß√£o:",a),a}}}const Ar=new Pr;function Tt(l,e,t){const a=l.slice();return a[21]=e[t],a}function Fr(l){let e,t,a;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){J(e.$$.fragment),t=j(`
        Nova Ficha`)},l(r){G(e.$$.fragment,r),t=M(r,`
        Nova Ficha`)},m(r,n){Q(e,r,n),N(r,t,n),a=!0},p:Ve,i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),U(e,r)}}}function Vr(l){let e,t;return e=new gr({props:{size:"sm",class:"rounded-sm",$$slots:{default:[Or]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&16777232&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function qr(l){let e,t,a,r,n,s,o,i,c,f,u,p,g,h,C,D,P,z,O,T,q,L;n=new Xa({props:{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}}),o=new Pt({props:{type:"text",placeholder:"Buscar colaborador...",class:"pl-10 rounded-sm h-10 text-sm",value:l[4].searchTerm}}),o.$on("input",l[7]),c=new nt({props:{options:l[5].empresas,value:l[4].empresaFilter,placeholder:"Empresa"}}),c.$on("change",l[8]),u=new nt({props:{options:l[5].cargos,value:l[4].cargoFilter,placeholder:"Cargo"}}),u.$on("change",l[9]),h=new pr({props:{checked:l[4].devolucaoPendente,$$slots:{default:[Tr]},$$scope:{ctx:l}}}),h.$on("change",l[10]);const R=[Mr,Rr],x=[];function K(k,v){return k[4].hasActiveFilters?0:1}D=K(l),P=x[D]=R[D](l),T=new lr({props:{hoverable:!0,$$slots:{default:[el]},$$scope:{ctx:l}}});let _=l[3].totalPages>1&&Ht(l);return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("div"),J(n.$$.fragment),s=F(),J(o.$$.fragment),i=F(),J(c.$$.fragment),f=F(),J(u.$$.fragment),p=F(),g=b("div"),J(h.$$.fragment),C=F(),P.c(),z=F(),O=b("div"),J(T.$$.fragment),q=F(),_&&_.c(),this.h()},l(k){e=$(k,"DIV",{class:!0});var v=I(e);t=$(v,"DIV",{class:!0});var S=I(t);a=$(S,"DIV",{class:!0});var V=I(a);r=$(V,"DIV",{class:!0});var B=I(r);G(n.$$.fragment,B),s=A(B),G(o.$$.fragment,B),B.forEach(m),i=A(V),G(c.$$.fragment,V),f=A(V),G(u.$$.fragment,V),p=A(V),g=$(V,"DIV",{class:!0});var ee=I(g);G(h.$$.fragment,ee),ee.forEach(m),C=A(V),P.l(V),V.forEach(m),S.forEach(m),z=A(v),O=$(v,"DIV",{class:!0});var te=I(O);G(T.$$.fragment,te),te.forEach(m),q=A(v),_&&_.l(v),v.forEach(m),this.h()},h(){E(r,"class","relative"),E(g,"class","flex items-center"),E(a,"class","grid grid-cols-1 md:grid-cols-5 gap-4"),E(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),E(O,"class","min-w-[680px] overflow-x-auto"),E(e,"class","bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden")},m(k,v){N(k,e,v),d(e,t),d(t,a),d(a,r),Q(n,r,null),d(r,s),Q(o,r,null),d(a,i),Q(c,a,null),d(a,f),Q(u,a,null),d(a,p),d(a,g),Q(h,g,null),d(a,C),x[D].m(a,null),d(e,z),d(e,O),Q(T,O,null),d(e,q),_&&_.m(e,null),L=!0},p(k,v){const S={};v&16&&(S.value=k[4].searchTerm),o.$set(S);const V={};v&32&&(V.options=k[5].empresas),v&16&&(V.value=k[4].empresaFilter),c.$set(V);const B={};v&32&&(B.options=k[5].cargos),v&16&&(B.value=k[4].cargoFilter),u.$set(B);const ee={};v&16&&(ee.checked=k[4].devolucaoPendente),v&16777216&&(ee.$$scope={dirty:v,ctx:k}),h.$set(ee);let te=D;D=K(k),D===te?x[D].p(k,v):(_e(),y(x[te],1,1,()=>{x[te]=null}),ve(),P=x[D],P?P.p(k,v):(P=x[D]=R[D](k),P.c()),w(P,1),P.m(a,null));const re={};v&16777217&&(re.$$scope={dirty:v,ctx:k}),T.$set(re),k[3].totalPages>1?_?(_.p(k,v),v&8&&w(_,1)):(_=Ht(k),_.c(),w(_,1),_.m(e,null)):_&&(_e(),y(_,1,1,()=>{_=null}),ve())},i(k){L||(w(n.$$.fragment,k),w(o.$$.fragment,k),w(c.$$.fragment,k),w(u.$$.fragment,k),w(h.$$.fragment,k),w(P),w(T.$$.fragment,k),w(_),L=!0)},o(k){y(n.$$.fragment,k),y(o.$$.fragment,k),y(c.$$.fragment,k),y(u.$$.fragment,k),y(h.$$.fragment,k),y(P),y(T.$$.fragment,k),y(_),L=!1},d(k){k&&m(e),U(n),U(o),U(c),U(u),U(h),x[D].d(),U(T),_&&_.d()}}}function Nr(l){let e,t;return e=new Vt({props:{error:l[2],onRetry:l[15]}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&4&&(n.error=a[2]),r&8&&(n.onRetry=a[15]),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function Sr(l){let e,t;return e=new yt({}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function zr(l){let e,t,a=l[4].hasActiveFilters?"Nova Ficha":"Primeira Ficha",r,n;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){J(e.$$.fragment),t=F(),r=j(a)},l(s){G(e.$$.fragment,s),t=A(s),r=M(s,a)},m(s,o){Q(e,s,o),N(s,t,o),N(s,r,o),n=!0},p(s,o){(!n||o&16)&&a!==(a=s[4].hasActiveFilters?"Nova Ficha":"Primeira Ficha")&&oe(r,a)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){s&&(m(t),m(r)),U(e,s)}}}function Or(l){let e,t,a,r,n,s="Nenhuma ficha encontrada",o,i,c=l[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece cadastrando uma nova ficha de EPI",f,u,p,g;return a=new Xa({props:{class:"w-8 h-8 text-gray-400"}}),p=new ze({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[zr]},$$scope:{ctx:l}}}),p.$on("click",l[14]),{c(){e=b("div"),t=b("div"),J(a.$$.fragment),r=F(),n=b("h3"),n.textContent=s,o=F(),i=b("p"),f=j(c),u=F(),J(p.$$.fragment),this.h()},l(h){e=$(h,"DIV",{class:!0});var C=I(e);t=$(C,"DIV",{class:!0});var D=I(t);G(a.$$.fragment,D),D.forEach(m),r=A(C),n=$(C,"H3",{class:!0,"data-svelte-h":!0}),De(n)!=="svelte-qm1del"&&(n.textContent=s),o=A(C),i=$(C,"P",{class:!0});var P=I(i);f=M(P,c),P.forEach(m),u=A(C),G(p.$$.fragment,C),C.forEach(m),this.h()},h(){E(t,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"),E(n,"class","text-lg font-medium text-gray-900 dark:text-white mb-2"),E(i,"class","text-gray-500 dark:text-gray-400 mb-6"),E(e,"class","text-center py-12")},m(h,C){N(h,e,C),d(e,t),Q(a,t,null),d(e,r),d(e,n),d(e,o),d(e,i),d(i,f),d(e,u),Q(p,e,null),g=!0},p(h,C){(!g||C&16)&&c!==(c=h[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece cadastrando uma nova ficha de EPI")&&oe(f,c);const D={};C&16777232&&(D.$$scope={dirty:C,ctx:h}),p.$set(D)},i(h){g||(w(a.$$.fragment,h),w(p.$$.fragment,h),g=!0)},o(h){y(a.$$.fragment,h),y(p.$$.fragment,h),g=!1},d(h){h&&m(e),U(a),U(p)}}}function Tr(l){let e;return{c(){e=j("Pendentes devolu√ß√£o")},l(t){e=M(t,"Pendentes devolu√ß√£o")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Rr(l){let e;return{c(){e=b("div")},l(t){e=$(t,"DIV",{}),I(e).forEach(m)},m(t,a){N(t,e,a)},p:Ve,i:Ve,o:Ve,d(t){t&&m(e)}}}function Mr(l){let e,t;return e=new ze({props:{color:"alternative",class:"rounded-sm h-10 w-10 p-0 flex items-center justify-center",title:"Limpar Filtros",$$slots:{default:[jr]},$$scope:{ctx:l}}}),e.$on("click",l[11]),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&16777216&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function jr(l){let e,t;return e=new Wa({props:{class:"w-4 h-4"}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function xr(l){let e;return{c(){e=j("Colaborador")},l(t){e=M(t,"Colaborador")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Lr(l){let e;return{c(){e=j("Empresa")},l(t){e=M(t,"Empresa")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Hr(l){let e;return{c(){e=j("EPIs Ativos")},l(t){e=M(t,"EPIs Ativos")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Br(l){let e;return{c(){e=j("A√ß√µes")},l(t){e=M(t,"A√ß√µes")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Ur(l){let e,t,a,r,n,s,o,i;return e=new pt({props:{$$slots:{default:[xr]},$$scope:{ctx:l}}}),a=new pt({props:{$$slots:{default:[Lr]},$$scope:{ctx:l}}}),n=new pt({props:{$$slots:{default:[Hr]},$$scope:{ctx:l}}}),o=new pt({props:{$$slots:{default:[Br]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment),t=F(),J(a.$$.fragment),r=F(),J(n.$$.fragment),s=F(),J(o.$$.fragment)},l(c){G(e.$$.fragment,c),t=A(c),G(a.$$.fragment,c),r=A(c),G(n.$$.fragment,c),s=A(c),G(o.$$.fragment,c)},m(c,f){Q(e,c,f),N(c,t,f),Q(a,c,f),N(c,r,f),Q(n,c,f),N(c,s,f),Q(o,c,f),i=!0},p(c,f){const u={};f&16777216&&(u.$$scope={dirty:f,ctx:c}),e.$set(u);const p={};f&16777216&&(p.$$scope={dirty:f,ctx:c}),a.$set(p);const g={};f&16777216&&(g.$$scope={dirty:f,ctx:c}),n.$set(g);const h={};f&16777216&&(h.$$scope={dirty:f,ctx:c}),o.$set(h)},i(c){i||(w(e.$$.fragment,c),w(a.$$.fragment,c),w(n.$$.fragment,c),w(o.$$.fragment,c),i=!0)},o(c){y(e.$$.fragment,c),y(a.$$.fragment,c),y(n.$$.fragment,c),y(o.$$.fragment,c),i=!1},d(c){c&&(m(t),m(r),m(s)),U(e,c),U(a,c),U(n,c),U(o,c)}}}function Qr(l){let e,t,a=l[21].colaborador.nome+"",r,n,s,o=(l[21].colaborador.cpf||"CPF n√£o informado")+"",i;return{c(){e=b("div"),t=b("span"),r=j(a),n=F(),s=b("span"),i=j(o),this.h()},l(c){e=$(c,"DIV",{class:!0});var f=I(e);t=$(f,"SPAN",{class:!0});var u=I(t);r=M(u,a),u.forEach(m),n=A(f),s=$(f,"SPAN",{class:!0});var p=I(s);i=M(p,o),p.forEach(m),f.forEach(m),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white"),E(s,"class","text-sm text-gray-500 dark:text-gray-400"),E(e,"class","flex flex-col")},m(c,f){N(c,e,f),d(e,t),d(t,r),d(e,n),d(e,s),d(s,i)},p(c,f){f&1&&a!==(a=c[21].colaborador.nome+"")&&oe(r,a),f&1&&o!==(o=(c[21].colaborador.cpf||"CPF n√£o informado")+"")&&oe(i,o)},d(c){c&&m(e)}}}function Rt(l){let e,t=l[21].contratada.nome+"",a;return{c(){e=b("div"),a=j(t),this.h()},l(r){e=$(r,"DIV",{class:!0});var n=I(e);a=M(n,t),n.forEach(m),this.h()},h(){E(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&1&&t!==(t=r[21].contratada.nome+"")&&oe(a,t)},d(r){r&&m(e)}}}function Gr(l){let e,t,a=l[21].colaborador.empresa+"",r,n,s=l[21].contratada&&Rt(l);return{c(){e=b("div"),t=b("span"),r=j(a),n=F(),s&&s.c(),this.h()},l(o){e=$(o,"DIV",{});var i=I(e);t=$(i,"SPAN",{class:!0});var c=I(t);r=M(c,a),c.forEach(m),n=A(i),s&&s.l(i),i.forEach(m),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white")},m(o,i){N(o,e,i),d(e,t),d(t,r),d(e,n),s&&s.m(e,null)},p(o,i){i&1&&a!==(a=o[21].colaborador.empresa+"")&&oe(r,a),o[21].contratada?s?s.p(o,i):(s=Rt(o),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(o){o&&m(e),s&&s.d()}}}function Jr(l){var r;let e=(((r=l[21].episInfo)==null?void 0:r.totalEpisAtivos)||l[21].totalEpisAtivos||0)+"",t,a;return{c(){t=j(e),a=j(" EPIs")},l(n){t=M(n,e),a=M(n," EPIs")},m(n,s){N(n,t,s),N(n,a,s)},p(n,s){var o;s&1&&e!==(e=(((o=n[21].episInfo)==null?void 0:o.totalEpisAtivos)||n[21].totalEpisAtivos||0)+"")&&oe(t,e)},d(n){n&&(m(t),m(a))}}}function Mt(l){let e,t;return e=new st({props:{color:"red",class:"w-fit rounded-sm",$$slots:{default:[Wr]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&16777217&&(n.$$scope={dirty:r,ctx:a}),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function Wr(l){var r;let e=(((r=l[21].episInfo)==null?void 0:r.episExpirados)||l[21].totalEpisVencidos)+"",t,a;return{c(){t=j(e),a=j(" vencido(s)")},l(n){t=M(n,e),a=M(n," vencido(s)")},m(n,s){N(n,t,s),N(n,a,s)},p(n,s){var o;s&1&&e!==(e=(((o=n[21].episInfo)==null?void 0:o.episExpirados)||n[21].totalEpisVencidos)+"")&&oe(t,e)},d(n){n&&(m(t),m(a))}}}function jt(l){let e,t=l[21].episInfo.tiposEpisAtivos.slice(0,2).map(Bt).join(", ")+"",a,r,n=l[21].episInfo.tiposEpisAtivos.length>2&&xt(l);return{c(){e=b("div"),a=j(t),r=F(),n&&n.c(),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=I(e);a=M(o,t),r=A(o),n&&n.l(o),o.forEach(m),this.h()},h(){E(e,"class","text-xs text-gray-500 dark:text-gray-400 mt-1")},m(s,o){N(s,e,o),d(e,a),d(e,r),n&&n.m(e,null)},p(s,o){o&1&&t!==(t=s[21].episInfo.tiposEpisAtivos.slice(0,2).map(Bt).join(", ")+"")&&oe(a,t),s[21].episInfo.tiposEpisAtivos.length>2?n?n.p(s,o):(n=xt(s),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(s){s&&m(e),n&&n.d()}}}function xt(l){let e,t,a=l[21].episInfo.tiposEpisAtivos.length-2+"",r;return{c(){e=b("span"),t=j("... +"),r=j(a)},l(n){e=$(n,"SPAN",{});var s=I(e);t=M(s,"... +"),r=M(s,a),s.forEach(m)},m(n,s){N(n,e,s),d(e,t),d(e,r)},p(n,s){s&1&&a!==(a=n[21].episInfo.tiposEpisAtivos.length-2+"")&&oe(r,a)},d(n){n&&m(e)}}}function Kr(l){var c,f,u;let e,t,a,r,n,s;t=new st({props:{color:"blue",class:"w-fit rounded-sm",$$slots:{default:[Jr]},$$scope:{ctx:l}}});let o=(((c=l[21].episInfo)==null?void 0:c.episExpirados)||l[21].totalEpisVencidos)&&(((f=l[21].episInfo)==null?void 0:f.episExpirados)>0||l[21].totalEpisVencidos>0)&&Mt(l),i=((u=l[21].episInfo)==null?void 0:u.tiposEpisAtivos)&&l[21].episInfo.tiposEpisAtivos.length>0&&jt(l);return{c(){e=b("div"),J(t.$$.fragment),a=F(),o&&o.c(),r=F(),i&&i.c(),n=Ce(),this.h()},l(p){e=$(p,"DIV",{class:!0});var g=I(e);G(t.$$.fragment,g),a=A(g),o&&o.l(g),g.forEach(m),r=A(p),i&&i.l(p),n=Ce(),this.h()},h(){E(e,"class","flex flex-wrap gap-1")},m(p,g){N(p,e,g),Q(t,e,null),d(e,a),o&&o.m(e,null),N(p,r,g),i&&i.m(p,g),N(p,n,g),s=!0},p(p,g){var C,D,P;const h={};g&16777217&&(h.$$scope={dirty:g,ctx:p}),t.$set(h),((C=p[21].episInfo)!=null&&C.episExpirados||p[21].totalEpisVencidos)&&(((D=p[21].episInfo)==null?void 0:D.episExpirados)>0||p[21].totalEpisVencidos>0)?o?(o.p(p,g),g&1&&w(o,1)):(o=Mt(p),o.c(),w(o,1),o.m(e,null)):o&&(_e(),y(o,1,1,()=>{o=null}),ve()),(P=p[21].episInfo)!=null&&P.tiposEpisAtivos&&p[21].episInfo.tiposEpisAtivos.length>0?i?i.p(p,g):(i=jt(p),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i(p){s||(w(t.$$.fragment,p),w(o),s=!0)},o(p){y(t.$$.fragment,p),y(o),s=!1},d(p){p&&(m(e),m(r),m(n)),U(t),o&&o.d(),i&&i.d(p)}}}function Xr(l){let e,t,a,r,n,s;a=new hr({props:{class:"w-4 h-4"}});function o(...i){return l[16](l[21],...i)}return{c(){e=b("div"),t=b("button"),J(a.$$.fragment),this.h()},l(i){e=$(i,"DIV",{class:!0});var c=I(e);t=$(c,"BUTTON",{class:!0,title:!0});var f=I(t);G(a.$$.fragment,f),f.forEach(m),c.forEach(m),this.h()},h(){E(t,"class","p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-700"),E(t,"title","Ver Detalhes"),E(e,"class","flex space-x-1")},m(i,c){N(i,e,c),d(e,t),Q(a,t,null),r=!0,n||(s=He(t,"click",o),n=!0)},p(i,c){l=i},i(i){r||(w(a.$$.fragment,i),r=!0)},o(i){y(a.$$.fragment,i),r=!1},d(i){i&&m(e),U(a),n=!1,s()}}}function Yr(l){let e,t,a,r,n,s,o,i,c;return e=new ht({props:{$$slots:{default:[Qr]},$$scope:{ctx:l}}}),a=new ht({props:{$$slots:{default:[Gr]},$$scope:{ctx:l}}}),n=new ht({props:{$$slots:{default:[Kr]},$$scope:{ctx:l}}}),o=new ht({props:{$$slots:{default:[Xr]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment),t=F(),J(a.$$.fragment),r=F(),J(n.$$.fragment),s=F(),J(o.$$.fragment),i=F()},l(f){G(e.$$.fragment,f),t=A(f),G(a.$$.fragment,f),r=A(f),G(n.$$.fragment,f),s=A(f),G(o.$$.fragment,f),i=A(f)},m(f,u){Q(e,f,u),N(f,t,u),Q(a,f,u),N(f,r,u),Q(n,f,u),N(f,s,u),Q(o,f,u),N(f,i,u),c=!0},p(f,u){const p={};u&16777217&&(p.$$scope={dirty:u,ctx:f}),e.$set(p);const g={};u&16777217&&(g.$$scope={dirty:u,ctx:f}),a.$set(g);const h={};u&16777217&&(h.$$scope={dirty:u,ctx:f}),n.$set(h);const C={};u&16777217&&(C.$$scope={dirty:u,ctx:f}),o.$set(C)},i(f){c||(w(e.$$.fragment,f),w(a.$$.fragment,f),w(n.$$.fragment,f),w(o.$$.fragment,f),c=!0)},o(f){y(e.$$.fragment,f),y(a.$$.fragment,f),y(n.$$.fragment,f),y(o.$$.fragment,f),c=!1},d(f){f&&(m(t),m(r),m(s),m(i)),U(e,f),U(a,f),U(n,f),U(o,f)}}}function Lt(l,e){let t,a,r;function n(){return e[17](e[21])}return a=new sr({props:{class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer",$$slots:{default:[Yr]},$$scope:{ctx:e}}}),a.$on("click",n),{key:l,first:null,c(){t=Ce(),J(a.$$.fragment),this.h()},l(s){t=Ce(),G(a.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){N(s,t,o),Q(a,s,o),r=!0},p(s,o){e=s;const i={};o&16777217&&(i.$$scope={dirty:o,ctx:e}),a.$set(i)},i(s){r||(w(a.$$.fragment,s),r=!0)},o(s){y(a.$$.fragment,s),r=!1},d(s){s&&m(t),U(a,s)}}}function Zr(l){let e=[],t=new Map,a,r,n=Se(l[0]);const s=o=>o[21].id;for(let o=0;o<n.length;o+=1){let i=Tt(l,n,o),c=s(i);t.set(c,e[o]=Lt(c,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();a=Ce()},l(o){for(let i=0;i<e.length;i+=1)e[i].l(o);a=Ce()},m(o,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,i);N(o,a,i),r=!0},p(o,i){i&8193&&(n=Se(o[0]),_e(),e=ot(e,i,s,1,o,n,t,a.parentNode,ft,Lt,a,Tt),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)w(e[i]);r=!0}},o(o){for(let i=0;i<e.length;i+=1)y(e[i]);r=!1},d(o){o&&m(a);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function el(l){let e,t,a,r;return e=new nr({props:{$$slots:{default:[Ur]},$$scope:{ctx:l}}}),a=new or({props:{$$slots:{default:[Zr]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment),t=F(),J(a.$$.fragment)},l(n){G(e.$$.fragment,n),t=A(n),G(a.$$.fragment,n)},m(n,s){Q(e,n,s),N(n,t,s),Q(a,n,s),r=!0},p(n,s){const o={};s&16777216&&(o.$$scope={dirty:s,ctx:n}),e.$set(o);const i={};s&16777217&&(i.$$scope={dirty:s,ctx:n}),a.$set(i)},i(n){r||(w(e.$$.fragment,n),w(a.$$.fragment,n),r=!0)},o(n){y(e.$$.fragment,n),y(a.$$.fragment,n),r=!1},d(n){n&&m(t),U(e,n),U(a,n)}}}function Ht(l){let e,t,a,r=Math.min((l[3].currentPage-1)*l[3].pageSize+1,l[3].total)+"",n,s,o=Math.min(l[3].currentPage*l[3].pageSize,l[3].total)+"",i,c,f=l[3].total+"",u,p,g,h,C,D,P,z,O=l[3].currentPage+"",T,q,L=l[3].totalPages+"",R,x,K,_;return C=new ze({props:{color:"alternative",class:"rounded-sm",disabled:!l[3].hasPrev,$$slots:{default:[tl]},$$scope:{ctx:l}}}),C.$on("click",l[18]),K=new ze({props:{color:"alternative",class:"rounded-sm",disabled:!l[3].hasNext,$$slots:{default:[al]},$$scope:{ctx:l}}}),K.$on("click",l[19]),{c(){e=b("div"),t=b("div"),a=j("Mostrando "),n=j(r),s=j(" a "),i=j(o),c=j(" de "),u=j(f),p=j(" resultados"),g=F(),h=b("div"),J(C.$$.fragment),D=F(),P=b("span"),z=j("P√°gina "),T=j(O),q=j(" de "),R=j(L),x=F(),J(K.$$.fragment),this.h()},l(k){e=$(k,"DIV",{class:!0});var v=I(e);t=$(v,"DIV",{class:!0});var S=I(t);a=M(S,"Mostrando "),n=M(S,r),s=M(S," a "),i=M(S,o),c=M(S," de "),u=M(S,f),p=M(S," resultados"),S.forEach(m),g=A(v),h=$(v,"DIV",{class:!0});var V=I(h);G(C.$$.fragment,V),D=A(V),P=$(V,"SPAN",{class:!0});var B=I(P);z=M(B,"P√°gina "),T=M(B,O),q=M(B," de "),R=M(B,L),B.forEach(m),x=A(V),G(K.$$.fragment,V),V.forEach(m),v.forEach(m),this.h()},h(){E(t,"class","text-sm text-gray-500 dark:text-gray-400"),E(P,"class","flex items-center px-3 text-sm text-gray-500 dark:text-gray-400"),E(h,"class","flex space-x-2"),E(e,"class","flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700")},m(k,v){N(k,e,v),d(e,t),d(t,a),d(t,n),d(t,s),d(t,i),d(t,c),d(t,u),d(t,p),d(e,g),d(e,h),Q(C,h,null),d(h,D),d(h,P),d(P,z),d(P,T),d(P,q),d(P,R),d(h,x),Q(K,h,null),_=!0},p(k,v){(!_||v&8)&&r!==(r=Math.min((k[3].currentPage-1)*k[3].pageSize+1,k[3].total)+"")&&oe(n,r),(!_||v&8)&&o!==(o=Math.min(k[3].currentPage*k[3].pageSize,k[3].total)+"")&&oe(i,o),(!_||v&8)&&f!==(f=k[3].total+"")&&oe(u,f);const S={};v&8&&(S.disabled=!k[3].hasPrev),v&16777216&&(S.$$scope={dirty:v,ctx:k}),C.$set(S),(!_||v&8)&&O!==(O=k[3].currentPage+"")&&oe(T,O),(!_||v&8)&&L!==(L=k[3].totalPages+"")&&oe(R,L);const V={};v&8&&(V.disabled=!k[3].hasNext),v&16777216&&(V.$$scope={dirty:v,ctx:k}),K.$set(V)},i(k){_||(w(C.$$.fragment,k),w(K.$$.fragment,k),_=!0)},o(k){y(C.$$.fragment,k),y(K.$$.fragment,k),_=!1},d(k){k&&m(e),U(C),U(K)}}}function tl(l){let e;return{c(){e=j("Anterior")},l(t){e=M(t,"Anterior")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function al(l){let e;return{c(){e=j("Pr√≥ximo")},l(t){e=M(t,"Pr√≥ximo")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function rl(l){let e,t,a,r,n='<h1 class="text-xl font-medium text-gray-900 dark:text-white">Fichas de EPI</h1> <p class="text-sm text-gray-600 dark:text-gray-400">Gerencie as fichas individuais de equipamentos de prote√ß√£o</p>',s,o,i,c,f,u,p;i=new ze({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[Fr]},$$scope:{ctx:l}}}),i.$on("click",l[14]);const g=[Sr,Nr,qr,Vr],h=[];function C(D,P){return D[1]?0:D[2]?1:D[0].length>0?2:3}return f=C(l),u=h[f]=g[f](l),{c(){e=F(),t=b("div"),a=b("div"),r=b("div"),r.innerHTML=n,s=F(),o=b("div"),J(i.$$.fragment),c=F(),u.c(),this.h()},l(D){Qa("svelte-161hi6l",document.head).forEach(m),e=A(D),t=$(D,"DIV",{class:!0});var z=I(t);a=$(z,"DIV",{class:!0});var O=I(a);r=$(O,"DIV",{"data-svelte-h":!0}),De(r)!=="svelte-pifbsf"&&(r.innerHTML=n),s=A(O),o=$(O,"DIV",{class:!0});var T=I(o);G(i.$$.fragment,T),T.forEach(m),O.forEach(m),c=A(z),u.l(z),z.forEach(m),this.h()},h(){document.title="Fichas de EPI - DataLife EPI",E(o,"class","flex space-x-2"),E(a,"class","flex items-center justify-between"),E(t,"class","space-y-6")},m(D,P){N(D,e,P),N(D,t,P),d(t,a),d(a,r),d(a,s),d(a,o),Q(i,o,null),d(t,c),h[f].m(t,null),p=!0},p(D,[P]){const z={};P&16777216&&(z.$$scope={dirty:P,ctx:D}),i.$set(z);let O=f;f=C(D),f===O?h[f].p(D,P):(_e(),y(h[O],1,1,()=>{h[O]=null}),ve(),u=h[f],u?u.p(D,P):(u=h[f]=g[f](D),u.c()),w(u,1),u.m(t,null))},i(D){p||(w(i.$$.fragment,D),w(u),p=!0)},o(D){y(i.$$.fragment,D),y(u),p=!1},d(D){D&&(m(e),m(t)),U(i),h[f].d()}}}const Bt=l=>`${l.quantidade}x ${l.tipoEpiNome}`;function ll(l,e,t){let{items:a=[]}=e,{loading:r=!1}=e,{error:n=null}=e,{pagination:s}=e,{filters:o}=e,{filterOptions:i}=e;const c=Ze();function f(R){const x=R.target;c("searchChange",x.value)}function u(R){c("empresaFilterChange",R.detail)}function p(R){c("cargoFilterChange",R.detail)}function g(R){const x=R.target;c("devolucaoPendenteChange",x.checked)}function h(){c("clearFilters")}function C(R){c("pageChange",R)}function D(R){c("viewDetail",R)}function P(){c("novaFicha")}const z=()=>c("pageChange",s.currentPage),O=(R,x)=>{x.stopPropagation(),D(R.id)},T=R=>D(R.id),q=()=>C(s.currentPage-1),L=()=>C(s.currentPage+1);return l.$$set=R=>{"items"in R&&t(0,a=R.items),"loading"in R&&t(1,r=R.loading),"error"in R&&t(2,n=R.error),"pagination"in R&&t(3,s=R.pagination),"filters"in R&&t(4,o=R.filters),"filterOptions"in R&&t(5,i=R.filterOptions)},[a,r,n,s,o,i,c,f,u,p,g,h,C,D,P,z,O,T,q,L]}class nl extends Qe{constructor(e){super(),Ge(this,e,ll,rl,Je,{items:0,loading:1,error:2,pagination:3,filters:4,filterOptions:5})}}const ol=vr(new Map),sl=l=>({}),Ut=l=>({});function Qt(l){let e,t;return{c(){e=b("p"),t=j(l[2]),this.h()},l(a){e=$(a,"P",{class:!0});var r=I(e);t=M(r,l[2]),r.forEach(m),this.h()},h(){E(e,"class","text-xs mt-1 text-gray-400")},m(a,r){N(a,e,r),d(e,t)},p(a,r){r&4&&oe(t,a[2])},d(a){a&&m(e)}}}function il(l){let e,t,a,r,n,s,o,i,c;t=new Ya({props:{name:l[0],class:l[5][l[3]]+" mx-auto mb-2 text-gray-400"}});let f=l[2]&&Qt(l);const u=l[7].actions,p=$t(u,l,l[6],Ut);return{c(){e=b("div"),J(t.$$.fragment),a=F(),r=b("p"),n=j(l[1]),s=F(),f&&f.c(),o=F(),p&&p.c(),this.h()},l(g){e=$(g,"DIV",{class:!0});var h=I(e);G(t.$$.fragment,h),a=A(h),r=$(h,"P",{class:!0});var C=I(r);n=M(C,l[1]),C.forEach(m),s=A(h),f&&f.l(h),o=A(h),p&&p.l(h),h.forEach(m),this.h()},h(){E(r,"class","font-medium text-sm"),E(e,"class",i="text-center "+l[4][l[3]]+" text-gray-500 dark:text-gray-400")},m(g,h){N(g,e,h),Q(t,e,null),d(e,a),d(e,r),d(r,n),d(e,s),f&&f.m(e,null),d(e,o),p&&p.m(e,null),c=!0},p(g,[h]){const C={};h&1&&(C.name=g[0]),h&40&&(C.class=g[5][g[3]]+" mx-auto mb-2 text-gray-400"),t.$set(C),(!c||h&2)&&oe(n,g[1]),g[2]?f?f.p(g,h):(f=Qt(g),f.c(),f.m(e,o)):f&&(f.d(1),f=null),p&&p.p&&(!c||h&64)&&bt(p,u,g,g[6],c?kt(u,g[6],h,sl):Et(g[6]),Ut),(!c||h&24&&i!==(i="text-center "+g[4][g[3]]+" text-gray-500 dark:text-gray-400"))&&E(e,"class",i)},i(g){c||(w(t.$$.fragment,g),w(p,g),c=!0)},o(g){y(t.$$.fragment,g),y(p,g),c=!1},d(g){g&&m(e),U(t),f&&f.d(),p&&p.d(g)}}}function cl(l,e,t){let a,r,{$$slots:n={},$$scope:s}=e,{icon:o}=e,{message:i}=e,{description:c=""}=e,{size:f="md"}=e;return l.$$set=u=>{"icon"in u&&t(0,o=u.icon),"message"in u&&t(1,i=u.message),"description"in u&&t(2,c=u.description),"size"in u&&t(3,f=u.size),"$$scope"in u&&t(6,s=u.$$scope)},t(5,a={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"}),t(4,r={sm:"py-4",md:"py-8",lg:"py-12"}),[o,i,c,f,r,a,s,n]}class At extends Qe{constructor(e){super(),Ge(this,e,cl,il,Je,{icon:0,message:1,description:2,size:3})}}const fl=l=>({}),Gt=l=>({}),ul=l=>({}),Jt=l=>({}),dl=l=>({}),Wt=l=>({});function Kt(l){let e,t;const a=l[6].actions,r=$t(a,l,l[5],Jt);return{c(){e=b("div"),r&&r.c(),this.h()},l(n){e=$(n,"DIV",{class:!0});var s=I(e);r&&r.l(s),s.forEach(m),this.h()},h(){E(e,"class","flex-shrink-0 ml-4")},m(n,s){N(n,e,s),r&&r.m(e,null),t=!0},p(n,s){r&&r.p&&(!t||s&32)&&bt(r,a,n,n[5],t?kt(a,n[5],s,ul):Et(n[5]),Jt)},i(n){t||(w(r,n),t=!0)},o(n){y(r,n),t=!1},d(n){n&&m(e),r&&r.d(n)}}}function ml(l){let e,t,a,r,n,s,o,i;const c=l[6].content,f=$t(c,l,l[5],Wt);let u=l[1].actions&&Kt(l);const p=l[6].footer,g=$t(p,l,l[5],Gt);return{c(){e=b("div"),t=b("div"),a=b("div"),f&&f.c(),r=F(),u&&u.c(),n=F(),g&&g.c(),this.h()},l(h){e=$(h,"DIV",{class:!0});var C=I(e);t=$(C,"DIV",{class:!0});var D=I(t);a=$(D,"DIV",{class:!0});var P=I(a);f&&f.l(P),P.forEach(m),r=A(D),u&&u.l(D),D.forEach(m),n=A(C),g&&g.l(C),C.forEach(m),this.h()},h(){E(a,"class","flex-1 min-w-0"),E(t,"class","flex justify-between items-start"),E(e,"class",l[0])},m(h,C){N(h,e,C),d(e,t),d(t,a),f&&f.m(a,null),d(t,r),u&&u.m(t,null),d(e,n),g&&g.m(e,null),s=!0,o||(i=He(e,"click",l[7]),o=!0)},p(h,[C]){f&&f.p&&(!s||C&32)&&bt(f,c,h,h[5],s?kt(c,h[5],C,dl):Et(h[5]),Wt),h[1].actions?u?(u.p(h,C),C&2&&w(u,1)):(u=Kt(h),u.c(),w(u,1),u.m(t,null)):u&&(_e(),y(u,1,1,()=>{u=null}),ve()),g&&g.p&&(!s||C&32)&&bt(g,p,h,h[5],s?kt(p,h[5],C,fl):Et(h[5]),Gt),(!s||C&1)&&E(e,"class",h[0])},i(h){s||(w(f,h),w(u),w(g,h),s=!0)},o(h){y(f,h),y(u),y(g,h),s=!1},d(h){h&&m(e),f&&f.d(h),u&&u.d(),g&&g.d(h),o=!1,i()}}}function gl(l,e,t){let a,{$$slots:r={},$$scope:n}=e;const s=ar(r);let{className:o=""}=e,{hoverable:i=!1}=e,{clickable:c=!1}=e;function f(u){ct.call(this,l,u)}return l.$$set=u=>{"className"in u&&t(2,o=u.className),"hoverable"in u&&t(3,i=u.hoverable),"clickable"in u&&t(4,c=u.clickable),"$$scope"in u&&t(5,n=u.$$scope)},l.$$.update=()=>{l.$$.dirty&28&&t(0,a=["border border-gray-200 dark:border-gray-700 rounded-sm p-4",i?"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors":"",c?"cursor-pointer":"",o].filter(Boolean).join(" "))},[a,s,o,i,c,n,r,f]}class tr extends Qe{constructor(e){super(),Ge(this,e,gl,ml,Je,{className:2,hoverable:3,clickable:4})}}function Xt(l,e,t){const a=l.slice();return a[26]=e[t],a[27]=e,a[28]=t,a}function Yt(l){let e,t,a,r,n,s,o,i,c,f,u,p,g,h,C,D,P,z,O,T,q,L;r=new ut({props:{title:"Nova Entrega de EPI",objectType:"NOVA ENTREGA",iconName:"PlusOutline",primaryAction:{text:l[1]?"Salvando...":"Criar Entrega",icon:l[1]?"":"CheckOutline",disabled:!l[6]},secondaryAction:{text:"Cancelar",disabled:l[1]}}}),r.$on("close",l[14]),r.$on("primaryAction",l[13]),r.$on("secondaryAction",l[14]),i=new Ke({props:{for:"responsavel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[pl]},$$scope:{ctx:l}}}),f=new nt({props:{options:l[7],value:l[3],placeholder:"Selecione um respons√°vel...",disabled:l[1]}}),f.$on("change",l[17]),h=new Ke({props:{class:"text-sm font-medium text-gray-700 dark:text-gray-300",$$slots:{default:[hl]},$$scope:{ctx:l}}}),D=new ze({props:{size:"xs",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[_l]},$$scope:{ctx:l}}}),D.$on("click",l[8]);const R=[$l,vl],x=[];function K(_,k){return _[0].length===0?0:1}return z=K(l),O=x[z]=R[z](l),{c(){e=b("div"),t=F(),a=b("div"),J(r.$$.fragment),n=F(),s=b("div"),o=b("div"),J(i.$$.fragment),c=F(),J(f.$$.fragment),u=F(),p=b("div"),g=b("div"),J(h.$$.fragment),C=F(),J(D.$$.fragment),P=F(),O.c(),this.h()},l(_){e=$(_,"DIV",{class:!0,role:!0}),I(e).forEach(m),t=A(_),a=$(_,"DIV",{class:!0,role:!0,"aria-modal":!0});var k=I(a);G(r.$$.fragment,k),n=A(k),s=$(k,"DIV",{class:!0,style:!0});var v=I(s);o=$(v,"DIV",{class:!0});var S=I(o);G(i.$$.fragment,S),c=A(S),G(f.$$.fragment,S),S.forEach(m),u=A(v),p=$(v,"DIV",{class:!0});var V=I(p);g=$(V,"DIV",{class:!0});var B=I(g);G(h.$$.fragment,B),C=A(B),G(D.$$.fragment,B),B.forEach(m),P=A(V),O.l(V),V.forEach(m),v.forEach(m),k.forEach(m),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(o,"class","mb-6"),E(g,"class","flex items-center justify-between mb-4"),E(p,"class","mb-6"),E(s,"class","overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),Ft(s,"height","calc(100% - 80px)"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(_,k){N(_,e,k),N(_,t,k),N(_,a,k),Q(r,a,null),d(a,n),d(a,s),d(s,o),Q(i,o,null),d(o,c),Q(f,o,null),d(s,u),d(s,p),d(p,g),Q(h,g,null),d(g,C),Q(D,g,null),d(p,P),x[z].m(p,null),T=!0,q||(L=[He(e,"click",l[14]),He(a,"click",Ct(l[16]))],q=!0)},p(_,k){const v={};k&66&&(v.primaryAction={text:_[1]?"Salvando...":"Criar Entrega",icon:_[1]?"":"CheckOutline",disabled:!_[6]}),k&2&&(v.secondaryAction={text:"Cancelar",disabled:_[1]}),r.$set(v);const S={};k&536870912&&(S.$$scope={dirty:k,ctx:_}),i.$set(S);const V={};k&128&&(V.options=_[7]),k&8&&(V.value=_[3]),k&2&&(V.disabled=_[1]),f.$set(V);const B={};k&536870912&&(B.$$scope={dirty:k,ctx:_}),h.$set(B);const ee={};k&2&&(ee.disabled=_[1]),k&536870912&&(ee.$$scope={dirty:k,ctx:_}),D.$set(ee);let te=z;z=K(_),z===te?x[z].p(_,k):(_e(),y(x[te],1,1,()=>{x[te]=null}),ve(),O=x[z],O?O.p(_,k):(O=x[z]=R[z](_),O.c()),w(O,1),O.m(p,null))},i(_){T||(w(r.$$.fragment,_),w(i.$$.fragment,_),w(f.$$.fragment,_),w(h.$$.fragment,_),w(D.$$.fragment,_),w(O),T=!0)},o(_){y(r.$$.fragment,_),y(i.$$.fragment,_),y(f.$$.fragment,_),y(h.$$.fragment,_),y(D.$$.fragment,_),y(O),T=!1},d(_){_&&(m(e),m(t),m(a)),U(r),U(i),U(f),U(h),U(D),x[z].d(),q=!1,Dt(L)}}}function pl(l){let e;return{c(){e=j("Respons√°vel pela Entrega *")},l(t){e=M(t,"Respons√°vel pela Entrega *")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function hl(l){let e;return{c(){e=j("EPIs para Entrega *")},l(t){e=M(t,"EPIs para Entrega *")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function _l(l){let e,t,a;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){J(e.$$.fragment),t=j(`
              Adicionar Item`)},l(r){G(e.$$.fragment,r),t=M(r,`
              Adicionar Item`)},m(r,n){Q(e,r,n),N(r,t,n),a=!0},p:Ve,i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),U(e,r)}}}function vl(l){let e,t,a,r=Se(l[4]),n=[];for(let i=0;i<r.length;i+=1)n[i]=ta(Xt(l,r,i));const s=i=>y(n[i],1,1,()=>{n[i]=null});let o=l[4].length===0&&aa(l);return{c(){e=b("div");for(let i=0;i<n.length;i+=1)n[i].c();t=F(),o&&o.c(),this.h()},l(i){e=$(i,"DIV",{class:!0});var c=I(e);for(let f=0;f<n.length;f+=1)n[f].l(c);t=A(c),o&&o.l(c),c.forEach(m),this.h()},h(){E(e,"class","space-y-4")},m(i,c){N(i,e,c);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);d(e,t),o&&o.m(e,null),a=!0},p(i,c){if(c&3634){r=Se(i[4]);let f;for(f=0;f<r.length;f+=1){const u=Xt(i,r,f);n[f]?(n[f].p(u,c),w(n[f],1)):(n[f]=ta(u),n[f].c(),w(n[f],1),n[f].m(e,t))}for(_e(),f=r.length;f<n.length;f+=1)s(f);ve()}i[4].length===0?o?(o.p(i,c),c&16&&w(o,1)):(o=aa(i),o.c(),w(o,1),o.m(e,null)):o&&(_e(),y(o,1,1,()=>{o=null}),ve())},i(i){if(!a){for(let c=0;c<r.length;c+=1)w(n[c]);w(o),a=!0}},o(i){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)y(n[c]);y(o),a=!1},d(i){i&&m(e),It(n,i),o&&o.d()}}}function $l(l){let e,t,a,r,n,s="Nenhum EPI Dispon√≠vel",o,i,c="N√£o h√° EPIs dispon√≠veis para entrega no momento. Verifique o estoque ou entre em contato com o administrador.",f;return a=new qt({props:{class:"mx-auto mb-2 text-red-500 w-8 h-8"}}),{c(){e=b("div"),t=b("div"),J(a.$$.fragment),r=F(),n=b("h4"),n.textContent=s,o=F(),i=b("p"),i.textContent=c,this.h()},l(u){e=$(u,"DIV",{class:!0});var p=I(e);t=$(p,"DIV",{class:!0});var g=I(t);G(a.$$.fragment,g),r=A(g),n=$(g,"H4",{class:!0,"data-svelte-h":!0}),De(n)!=="svelte-1y6kxv5"&&(n.textContent=s),o=A(g),i=$(g,"P",{class:!0,"data-svelte-h":!0}),De(i)!=="svelte-4gen4i"&&(i.textContent=c),g.forEach(m),p.forEach(m),this.h()},h(){E(n,"class","text-sm font-medium text-red-800 dark:text-red-200 mb-1"),E(i,"class","text-sm text-red-600 dark:text-red-400"),E(t,"class","text-center"),E(e,"class","p-4 border-2 border-dashed border-red-300 rounded-lg bg-red-50 dark:bg-red-900/20")},m(u,p){N(u,e,p),d(e,t),Q(a,t,null),d(t,r),d(t,n),d(t,o),d(t,i),f=!0},p:Ve,i(u){f||(w(a.$$.fragment,u),f=!0)},o(u){y(a.$$.fragment,u),f=!1},d(u){u&&m(e),U(a)}}}function Zt(l){let e,t,a,r,n;t=new Za({props:{class:"w-4 h-4"}});function s(){return l[18](l[28])}return{c(){e=b("button"),J(t.$$.fragment),this.h()},l(o){e=$(o,"BUTTON",{class:!0,title:!0});var i=I(e);G(t.$$.fragment,i),i.forEach(m),this.h()},h(){E(e,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"),e.disabled=l[1],E(e,"title","Remover item")},m(o,i){N(o,e,i),Q(t,e,null),a=!0,r||(n=He(e,"click",s),r=!0)},p(o,i){l=o,(!a||i&2)&&(e.disabled=l[1])},i(o){a||(w(t.$$.fragment,o),a=!0)},o(o){y(t.$$.fragment,o),a=!1},d(o){o&&m(e),U(t),r=!1,n()}}}function bl(l){let e;return{c(){e=j("Equipamento")},l(t){e=M(t,"Equipamento")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function El(l){let e;return{c(){e=j("Quantidade")},l(t){e=M(t,"Quantidade")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function ea(l){let e,t,a,r,n=l[26].nomeEquipamento+"",s,o,i,c,f=l[26].registroCA+"",u,p,g,h,C,D=l[26].quantidade+"",P;return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),s=j(n),o=F(),i=b("p"),c=j("CA "),u=j(f),p=F(),g=b("div"),h=b("p"),C=j("Qtd: "),P=j(D),this.h()},l(z){e=$(z,"DIV",{class:!0});var O=I(e);t=$(O,"DIV",{class:!0});var T=I(t);a=$(T,"DIV",{});var q=I(a);r=$(q,"P",{class:!0});var L=I(r);s=M(L,n),L.forEach(m),o=A(q),i=$(q,"P",{class:!0});var R=I(i);c=M(R,"CA "),u=M(R,f),R.forEach(m),q.forEach(m),p=A(T),g=$(T,"DIV",{class:!0});var x=I(g);h=$(x,"P",{class:!0});var K=I(h);C=M(K,"Qtd: "),P=M(K,D),K.forEach(m),x.forEach(m),T.forEach(m),O.forEach(m),this.h()},h(){E(r,"class","text-sm font-medium text-gray-900 dark:text-white"),E(i,"class","text-xs text-gray-500 dark:text-gray-400"),E(h,"class","text-sm font-medium text-gray-900 dark:text-white"),E(g,"class","text-right"),E(t,"class","flex items-center justify-between"),E(e,"class","mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-sm")},m(z,O){N(z,e,O),d(e,t),d(t,a),d(a,r),d(r,s),d(a,o),d(a,i),d(i,c),d(i,u),d(t,p),d(t,g),d(g,h),d(h,C),d(h,P)},p(z,O){O&16&&n!==(n=z[26].nomeEquipamento+"")&&oe(s,n),O&16&&f!==(f=z[26].registroCA+"")&&oe(u,f),O&16&&D!==(D=z[26].quantidade+"")&&oe(P,D)},d(z){z&&m(e)}}}function ta(l){let e,t,a,r,n=l[28]+1+"",s,o,i,c,f,u,p,g,h,C,D,P,z,O,T,q,L,R=l[4].length>1&&Zt(l);u=new Ke({props:{for:"epi-"+l[28],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[bl]},$$scope:{ctx:l}}});function x(...S){return l[19](l[28],...S)}g=new nt({props:{options:l[5],value:l[26].episDisponivelId,placeholder:"Selecione um EPI...",disabled:l[1]}}),g.$on("change",x),D=new Ke({props:{for:"quantidade-"+l[28],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[El]},$$scope:{ctx:l}}});function K(S){l[20](S,l[26])}function _(...S){return l[21](l[28],...S)}let k={id:"quantidade-"+l[28],type:"number",min:"1",max:"100",class:"rounded-sm",disabled:l[1]};l[26].quantidade!==void 0&&(k.value=l[26].quantidade),z=new Pt({props:k}),Me.push(()=>je(z,"value",K)),z.$on("input",_);let v=l[26].nomeEquipamento&&ea(l);return{c(){e=b("div"),t=b("div"),a=b("h4"),r=j("Item "),s=j(n),o=F(),R&&R.c(),i=F(),c=b("div"),f=b("div"),J(u.$$.fragment),p=F(),J(g.$$.fragment),h=F(),C=b("div"),J(D.$$.fragment),P=F(),J(z.$$.fragment),T=F(),v&&v.c(),q=F(),this.h()},l(S){e=$(S,"DIV",{class:!0});var V=I(e);t=$(V,"DIV",{class:!0});var B=I(t);a=$(B,"H4",{class:!0});var ee=I(a);r=M(ee,"Item "),s=M(ee,n),ee.forEach(m),o=A(B),R&&R.l(B),B.forEach(m),i=A(V),c=$(V,"DIV",{class:!0});var te=I(c);f=$(te,"DIV",{class:!0});var re=I(f);G(u.$$.fragment,re),p=A(re),G(g.$$.fragment,re),re.forEach(m),h=A(te),C=$(te,"DIV",{});var le=I(C);G(D.$$.fragment,le),P=A(le),G(z.$$.fragment,le),le.forEach(m),te.forEach(m),T=A(V),v&&v.l(V),q=A(V),V.forEach(m),this.h()},h(){E(a,"class","text-sm font-medium text-gray-900 dark:text-white"),E(t,"class","flex items-start justify-between mb-4"),E(f,"class","md:col-span-2"),E(c,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),E(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4")},m(S,V){N(S,e,V),d(e,t),d(t,a),d(a,r),d(a,s),d(t,o),R&&R.m(t,null),d(e,i),d(e,c),d(c,f),Q(u,f,null),d(f,p),Q(g,f,null),d(c,h),d(c,C),Q(D,C,null),d(C,P),Q(z,C,null),d(e,T),v&&v.m(e,null),d(e,q),L=!0},p(S,V){l=S,l[4].length>1?R?(R.p(l,V),V&16&&w(R,1)):(R=Zt(l),R.c(),w(R,1),R.m(t,null)):R&&(_e(),y(R,1,1,()=>{R=null}),ve());const B={};V&536870912&&(B.$$scope={dirty:V,ctx:l}),u.$set(B);const ee={};V&32&&(ee.options=l[5]),V&16&&(ee.value=l[26].episDisponivelId),V&2&&(ee.disabled=l[1]),g.$set(ee);const te={};V&536870912&&(te.$$scope={dirty:V,ctx:l}),D.$set(te);const re={};V&2&&(re.disabled=l[1]),!O&&V&16&&(O=!0,re.value=l[26].quantidade,xe(()=>O=!1)),z.$set(re),l[26].nomeEquipamento?v?v.p(l,V):(v=ea(l),v.c(),v.m(e,q)):v&&(v.d(1),v=null)},i(S){L||(w(R),w(u.$$.fragment,S),w(g.$$.fragment,S),w(D.$$.fragment,S),w(z.$$.fragment,S),L=!0)},o(S){y(R),y(u.$$.fragment,S),y(g.$$.fragment,S),y(D.$$.fragment,S),y(z.$$.fragment,S),L=!1},d(S){S&&m(e),R&&R.d(),U(u),U(g),U(D),U(z),v&&v.d()}}}function aa(l){let e,t,a,r,n="Nenhum item adicionado",s,o,i;return t=new it({props:{class:"w-8 h-8 mx-auto mb-3 text-gray-400"}}),o=new ze({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[kl]},$$scope:{ctx:l}}}),o.$on("click",l[8]),{c(){e=b("div"),J(t.$$.fragment),a=F(),r=b("p"),r.textContent=n,s=F(),J(o.$$.fragment),this.h()},l(c){e=$(c,"DIV",{class:!0});var f=I(e);G(t.$$.fragment,f),a=A(f),r=$(f,"P",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-1e863on"&&(r.textContent=n),s=A(f),G(o.$$.fragment,f),f.forEach(m),this.h()},h(){E(r,"class","text-sm text-gray-500 dark:text-gray-400 mb-4"),E(e,"class","border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center")},m(c,f){N(c,e,f),Q(t,e,null),d(e,a),d(e,r),d(e,s),Q(o,e,null),i=!0},p(c,f){const u={};f&2&&(u.disabled=c[1]),f&536870912&&(u.$$scope={dirty:f,ctx:c}),o.$set(u)},i(c){i||(w(t.$$.fragment,c),w(o.$$.fragment,c),i=!0)},o(c){y(t.$$.fragment,c),y(o.$$.fragment,c),i=!1},d(c){c&&m(e),U(t),U(o)}}}function kl(l){let e;return{c(){e=j("Adicionar Primeiro Item")},l(t){e=M(t,"Adicionar Primeiro Item")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function wl(l){let e,t,a=l[2]&&Yt(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),N(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&w(a,1)):(a=Yt(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(w(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}function Dl(l,e,t){let a,r,n,{episDisponiveis:s=[]}=e,{usuarios:o=[]}=e,{loading:i=!1}=e,{show:c=!1}=e;const f=Ze();let u="",p="",g=[];function h(){u="",t(3,p=""),t(4,g=[])}function C(){t(4,g=[...g,{episDisponivelId:"",nomeEquipamento:"",registroCA:"",quantidade:1}])}function D(v){t(4,g=g.filter((S,V)=>V!==v))}function P(v,S){const V=s.find(B=>B.id===S);V&&t(4,g[v]={...g[v],episDisponivelId:S,nomeEquipamento:V.nomeEquipamento,registroCA:V.numeroCA||V.registroCA},g)}function z(v,S){t(4,g[v]={...g[v],quantidade:S},g)}function O(v){const S=o.find(V=>V.id===v);S&&(t(3,p=v),u=S.nome)}function T(){if(console.log("üìù NovaEntregaDrawer: Preparando dados do formul√°rio..."),console.log("üìã Itens selecionados originais:",g),console.log("üë§ Usuario respons√°vel ID:",p),console.log("üì¶ Validando itens..."),!p.trim()){console.error("‚ùå Erro: usu√°rio respons√°vel n√£o selecionado");return}if(g.length===0){console.error("‚ùå Erro: nenhum item selecionado");return}const v=g.filter(B=>B.episDisponivelId&&B.quantidade>0);if(v.length===0){console.error("‚ùå Erro: nenhum item v√°lido selecionado");return}const S={responsavel:u.trim(),usuarioResponsavelId:p.trim(),itens:v.map(B=>({episDisponivelId:B.episDisponivelId,nomeEquipamento:B.nomeEquipamento,registroCA:B.registroCA,quantidade:B.quantidade}))};console.log("‚úÖ FormData montado:",{responsavel:S.responsavel,usuarioId:S.usuarioResponsavelId,totalItens:S.itens.length,itens:S.itens.map((B,ee)=>({index:ee+1,id:B.episDisponivelId,nome:B.nomeEquipamento,ca:B.registroCA,quantidade:B.quantidade}))});const V=new Set(S.itens.map(B=>B.episDisponivelId));console.log(`üéØ Verifica√ß√£o de tipos √∫nicos: ${V.size} tipos √∫nicos de ${S.itens.length} itens totais`),V.size<S.itens.length&&console.warn("‚ö†Ô∏è ALERTA: Alguns itens t√™m o mesmo episDisponivelId - isso pode causar problemas na expans√£o"),f("salvar",S)}function q(){f("cancelar")}function L(v){ct.call(this,l,v)}const R=v=>O(v.detail),x=v=>D(v),K=(v,S)=>P(v,S.detail);function _(v,S){l.$$.not_equal(S.quantidade,v)&&(S.quantidade=v,t(4,g))}const k=(v,S)=>z(v,parseInt(S.target.value)||1);return l.$$set=v=>{"episDisponiveis"in v&&t(0,s=v.episDisponiveis),"usuarios"in v&&t(15,o=v.usuarios),"loading"in v&&t(1,i=v.loading),"show"in v&&t(2,c=v.show)},l.$$.update=()=>{l.$$.dirty&20&&c&&g.length===0&&(h(),C()),l.$$.dirty&32776&&o.length>0&&!p&&(t(3,p=o[0].id),u=o[0].nome),l.$$.dirty&1&&t(5,a=[{value:"",label:"Selecione um EPI..."},...s.map(v=>({value:v.id,label:`${v.nomeEquipamento} (CA ${v.numeroCA||v.registroCA}) - ${v.quantidadeDisponivel} dispon√≠veis`}))]),l.$$.dirty&33&&(s==null?void 0:s.length)>0&&(console.log("üéØ NovaEntregaDrawer: EPIs dispon√≠veis atualizados:",s.length),console.log("üì¶ Amostra de EPIs no drawer:",s.slice(0,2)),console.log("üîß Op√ß√µes do select:",a.slice(0,3))),l.$$.dirty&32768&&t(7,r=[{value:"",label:"Selecione um respons√°vel..."},...o.map(v=>({value:v.id,label:`${v.nome} (${v.email})`}))]),l.$$.dirty&27&&t(6,n=p.trim()&&g.length>0&&!i&&s.length>0)},[s,i,c,p,g,a,n,r,C,D,P,z,O,T,q,o,L,R,x,K,_,k]}class Cl extends Qe{constructor(e){super(),Ge(this,e,Dl,wl,Je,{episDisponiveis:0,usuarios:15,loading:1,show:2})}}function ra(l,e,t){const a=l.slice();return a[26]=e[t],a[27]=e,a[28]=t,a}function la(l){var $e;let e,t,a,r,n,s,o,i,c,f,u,p,g,h,C,D,P,z,O,T,q,L,R,x,K,_,k,v,S,V,B,ee,te,re;r=new ut({props:{title:"Editar Entrega #"+((($e=l[0])==null?void 0:$e.id)||"")}}),r.$on("close",l[13]);let le=l[0]&&na(l);f=new Ke({props:{for:"responsavel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Il]},$$scope:{ctx:l}}});function ae(H){l[16](H)}let ue={id:"responsavel",type:"text",placeholder:"Nome do respons√°vel pela entrega",class:"rounded-sm "+(l[5].responsavel?"border-red-500":""),disabled:l[1]};l[3]!==void 0&&(ue.value=l[3]),p=new Pt({props:ue}),Me.push(()=>je(p,"value",ae));let me=l[5].responsavel&&oa(l);z=new Ke({props:{class:"text-sm font-medium text-gray-700 dark:text-gray-300",$$slots:{default:[yl]},$$scope:{ctx:l}}}),T=new ze({props:{size:"xs",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Pl]},$$scope:{ctx:l}}}),T.$on("click",l[8]);let ge=l[5].items&&sa(l),pe=Se(l[4]),ce=[];for(let H=0;H<pe.length;H+=1)ce[H]=da(ra(l,pe,H));const X=H=>y(ce[H],1,1,()=>{ce[H]=null});let Y=l[4].length===0&&ma(l),se=l[4].length>0&&ga(l);return S=new ze({props:{color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[ql]},$$scope:{ctx:l}}}),S.$on("click",l[13]),B=new ze({props:{color:"primary",class:"rounded-sm",disabled:!l[6],$$slots:{default:[zl]},$$scope:{ctx:l}}}),B.$on("click",l[12]),{c(){e=b("div"),t=F(),a=b("div"),J(r.$$.fragment),n=F(),s=b("div"),o=b("div"),le&&le.c(),i=F(),c=b("div"),J(f.$$.fragment),u=F(),J(p.$$.fragment),h=F(),me&&me.c(),C=F(),D=b("div"),P=b("div"),J(z.$$.fragment),O=F(),J(T.$$.fragment),q=F(),ge&&ge.c(),L=F(),R=b("div");for(let H=0;H<ce.length;H+=1)ce[H].c();x=F(),Y&&Y.c(),K=F(),se&&se.c(),_=F(),k=b("div"),v=b("div"),J(S.$$.fragment),V=F(),J(B.$$.fragment),this.h()},l(H){e=$(H,"DIV",{class:!0,role:!0}),I(e).forEach(m),t=A(H),a=$(H,"DIV",{class:!0,role:!0,"aria-modal":!0});var ne=I(a);G(r.$$.fragment,ne),n=A(ne),s=$(ne,"DIV",{class:!0});var be=I(s);o=$(be,"DIV",{class:!0,style:!0});var Ee=I(o);le&&le.l(Ee),i=A(Ee),c=$(Ee,"DIV",{class:!0});var ke=I(c);G(f.$$.fragment,ke),u=A(ke),G(p.$$.fragment,ke),h=A(ke),me&&me.l(ke),ke.forEach(m),C=A(Ee),D=$(Ee,"DIV",{class:!0});var qe=I(D);P=$(qe,"DIV",{class:!0});var W=I(P);G(z.$$.fragment,W),O=A(W),G(T.$$.fragment,W),W.forEach(m),q=A(qe),ge&&ge.l(qe),L=A(qe),R=$(qe,"DIV",{class:!0});var de=I(R);for(let ie=0;ie<ce.length;ie+=1)ce[ie].l(de);x=A(de),Y&&Y.l(de),de.forEach(m),qe.forEach(m),K=A(Ee),se&&se.l(Ee),Ee.forEach(m),_=A(be),k=$(be,"DIV",{class:!0});var Ie=I(k);v=$(Ie,"DIV",{class:!0});var Pe=I(v);G(S.$$.fragment,Pe),V=A(Pe),G(B.$$.fragment,Pe),Pe.forEach(m),Ie.forEach(m),be.forEach(m),ne.forEach(m),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(c,"class","mb-6"),E(P,"class","flex items-center justify-between mb-4"),E(R,"class","space-y-4"),E(D,"class","mb-6"),E(o,"class","flex-1 overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),Ft(o,"height","calc(100% - 80px)"),E(v,"class","flex items-center justify-end space-x-3"),E(k,"class","flex-shrink-0 bg-gray-50 dark:bg-gray-800 px-6 py-4 border-t border-gray-200 dark:border-gray-700"),E(s,"class","flex flex-col h-full"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(H,ne){N(H,e,ne),N(H,t,ne),N(H,a,ne),Q(r,a,null),d(a,n),d(a,s),d(s,o),le&&le.m(o,null),d(o,i),d(o,c),Q(f,c,null),d(c,u),Q(p,c,null),d(c,h),me&&me.m(c,null),d(o,C),d(o,D),d(D,P),Q(z,P,null),d(P,O),Q(T,P,null),d(D,q),ge&&ge.m(D,null),d(D,L),d(D,R);for(let be=0;be<ce.length;be+=1)ce[be]&&ce[be].m(R,null);d(R,x),Y&&Y.m(R,null),d(o,K),se&&se.m(o,null),d(s,_),d(s,k),d(k,v),Q(S,v,null),d(v,V),Q(B,v,null),ee=!0,te||(re=[He(e,"click",l[13]),He(a,"click",Ct(l[15]))],te=!0)},p(H,ne){var Pe;const be={};ne&1&&(be.title="Editar Entrega #"+(((Pe=H[0])==null?void 0:Pe.id)||"")),r.$set(be),H[0]?le?le.p(H,ne):(le=na(H),le.c(),le.m(o,i)):le&&(le.d(1),le=null);const Ee={};ne&536870912&&(Ee.$$scope={dirty:ne,ctx:H}),f.$set(Ee);const ke={};ne&32&&(ke.class="rounded-sm "+(H[5].responsavel?"border-red-500":"")),ne&2&&(ke.disabled=H[1]),!g&&ne&8&&(g=!0,ke.value=H[3],xe(()=>g=!1)),p.$set(ke),H[5].responsavel?me?me.p(H,ne):(me=oa(H),me.c(),me.m(c,null)):me&&(me.d(1),me=null);const qe={};ne&536870912&&(qe.$$scope={dirty:ne,ctx:H}),z.$set(qe);const W={};if(ne&2&&(W.disabled=H[1]),ne&536870912&&(W.$$scope={dirty:ne,ctx:H}),T.$set(W),H[5].items?ge?ge.p(H,ne):(ge=sa(H),ge.c(),ge.m(D,L)):ge&&(ge.d(1),ge=null),ne&3762){pe=Se(H[4]);let ie;for(ie=0;ie<pe.length;ie+=1){const Ne=ra(H,pe,ie);ce[ie]?(ce[ie].p(Ne,ne),w(ce[ie],1)):(ce[ie]=da(Ne),ce[ie].c(),w(ce[ie],1),ce[ie].m(R,x))}for(_e(),ie=pe.length;ie<ce.length;ie+=1)X(ie);ve()}H[4].length===0?Y?(Y.p(H,ne),ne&16&&w(Y,1)):(Y=ma(H),Y.c(),w(Y,1),Y.m(R,null)):Y&&(_e(),y(Y,1,1,()=>{Y=null}),ve()),H[4].length>0?se?se.p(H,ne):(se=ga(H),se.c(),se.m(o,null)):se&&(se.d(1),se=null);const de={};ne&2&&(de.disabled=H[1]),ne&536870912&&(de.$$scope={dirty:ne,ctx:H}),S.$set(de);const Ie={};ne&64&&(Ie.disabled=!H[6]),ne&536870914&&(Ie.$$scope={dirty:ne,ctx:H}),B.$set(Ie)},i(H){if(!ee){w(r.$$.fragment,H),w(f.$$.fragment,H),w(p.$$.fragment,H),w(z.$$.fragment,H),w(T.$$.fragment,H);for(let ne=0;ne<pe.length;ne+=1)w(ce[ne]);w(Y),w(S.$$.fragment,H),w(B.$$.fragment,H),ee=!0}},o(H){y(r.$$.fragment,H),y(f.$$.fragment,H),y(p.$$.fragment,H),y(z.$$.fragment,H),y(T.$$.fragment,H),ce=ce.filter(Boolean);for(let ne=0;ne<ce.length;ne+=1)y(ce[ne]);y(Y),y(S.$$.fragment,H),y(B.$$.fragment,H),ee=!1},d(H){H&&(m(e),m(t),m(a)),U(r),le&&le.d(),U(f),U(p),me&&me.d(),U(z),U(T),ge&&ge.d(),It(ce,H),Y&&Y.d(),se&&se.d(),U(S),U(B),te=!1,Dt(re)}}}function na(l){let e,t,a="Informa√ß√µes da Entrega Original",r,n,s,o,i=new Date(l[0].dataEntrega).toLocaleDateString("pt-BR")+"",c,f,u,p,g=l[0].status==="assinado"?"Assinado":"Pendente Assinatura",h,C,D,P,z=l[0].id+"",O;return{c(){e=b("div"),t=b("h4"),t.textContent=a,r=F(),n=b("div"),s=b("p"),o=j("‚Ä¢ Data: "),c=j(i),f=F(),u=b("p"),p=j("‚Ä¢ Status: "),h=j(g),C=F(),D=b("p"),P=j("‚Ä¢ ID: #"),O=j(z),this.h()},l(T){e=$(T,"DIV",{class:!0});var q=I(e);t=$(q,"H4",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-1p8cqi4"&&(t.textContent=a),r=A(q),n=$(q,"DIV",{class:!0});var L=I(n);s=$(L,"P",{});var R=I(s);o=M(R,"‚Ä¢ Data: "),c=M(R,i),R.forEach(m),f=A(L),u=$(L,"P",{});var x=I(u);p=M(x,"‚Ä¢ Status: "),h=M(x,g),x.forEach(m),C=A(L),D=$(L,"P",{});var K=I(D);P=M(K,"‚Ä¢ ID: #"),O=M(K,z),K.forEach(m),L.forEach(m),q.forEach(m),this.h()},h(){E(t,"class","text-sm font-medium text-blue-900 dark:text-blue-100 mb-2"),E(n,"class","text-sm text-blue-800 dark:text-blue-200"),E(e,"class","mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800")},m(T,q){N(T,e,q),d(e,t),d(e,r),d(e,n),d(n,s),d(s,o),d(s,c),d(n,f),d(n,u),d(u,p),d(u,h),d(n,C),d(n,D),d(D,P),d(D,O)},p(T,q){q&1&&i!==(i=new Date(T[0].dataEntrega).toLocaleDateString("pt-BR")+"")&&oe(c,i),q&1&&g!==(g=T[0].status==="assinado"?"Assinado":"Pendente Assinatura")&&oe(h,g),q&1&&z!==(z=T[0].id+"")&&oe(O,z)},d(T){T&&m(e)}}}function Il(l){let e;return{c(){e=j("Respons√°vel pela Entrega *")},l(t){e=M(t,"Respons√°vel pela Entrega *")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function oa(l){let e,t=l[5].responsavel+"",a;return{c(){e=b("p"),a=j(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=I(e);a=M(n,t),n.forEach(m),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5].responsavel+"")&&oe(a,t)},d(r){r&&m(e)}}}function yl(l){let e;return{c(){e=j("EPIs da Entrega *")},l(t){e=M(t,"EPIs da Entrega *")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Pl(l){let e,t,a;return e=new it({props:{class:"mr-2 w-4 h-4"}}),{c(){J(e.$$.fragment),t=j(`
              Adicionar Item`)},l(r){G(e.$$.fragment,r),t=M(r,`
              Adicionar Item`)},m(r,n){Q(e,r,n),N(r,t,n),a=!0},p:Ve,i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),U(e,r)}}}function sa(l){let e,t=l[5].items+"",a;return{c(){e=b("p"),a=j(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=I(e);a=M(n,t),n.forEach(m),this.h()},h(){E(e,"class","mb-3 text-sm text-red-600 dark:text-red-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5].items+"")&&oe(a,t)},d(r){r&&m(e)}}}function ia(l){let e,t,a,r,n;t=new Za({props:{class:"w-4 h-4"}});function s(){return l[17](l[28])}return{c(){e=b("button"),J(t.$$.fragment),this.h()},l(o){e=$(o,"BUTTON",{class:!0,title:!0});var i=I(e);G(t.$$.fragment,i),i.forEach(m),this.h()},h(){E(e,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"),e.disabled=l[1],E(e,"title","Remover item")},m(o,i){N(o,e,i),Q(t,e,null),a=!0,r||(n=He(e,"click",s),r=!0)},p(o,i){l=o,(!a||i&2)&&(e.disabled=l[1])},i(o){a||(w(t.$$.fragment,o),a=!0)},o(o){y(t.$$.fragment,o),a=!1},d(o){o&&m(e),U(t),r=!1,n()}}}function Al(l){let e;return{c(){e=j("Equipamento")},l(t){e=M(t,"Equipamento")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function ca(l){let e,t=l[5][`item-${l[28]}`]+"",a;return{c(){e=b("p"),a=j(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=I(e);a=M(n,t),n.forEach(m),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5][`item-${r[28]}`]+"")&&oe(a,t)},d(r){r&&m(e)}}}function Fl(l){let e;return{c(){e=j("Quantidade")},l(t){e=M(t,"Quantidade")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function fa(l){let e,t=l[5][`quantidade-${l[28]}`]+"",a;return{c(){e=b("p"),a=j(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=I(e);a=M(n,t),n.forEach(m),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5][`quantidade-${r[28]}`]+"")&&oe(a,t)},d(r){r&&m(e)}}}function ua(l){let e,t,a,r,n=l[26].nomeEquipamento+"",s,o,i,c,f=l[26].registroCA+"",u,p,g,h,C,D=l[26].quantidade+"",P;return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),s=j(n),o=F(),i=b("p"),c=j("CA "),u=j(f),p=F(),g=b("div"),h=b("p"),C=j("Qtd: "),P=j(D),this.h()},l(z){e=$(z,"DIV",{class:!0});var O=I(e);t=$(O,"DIV",{class:!0});var T=I(t);a=$(T,"DIV",{});var q=I(a);r=$(q,"P",{class:!0});var L=I(r);s=M(L,n),L.forEach(m),o=A(q),i=$(q,"P",{class:!0});var R=I(i);c=M(R,"CA "),u=M(R,f),R.forEach(m),q.forEach(m),p=A(T),g=$(T,"DIV",{class:!0});var x=I(g);h=$(x,"P",{class:!0});var K=I(h);C=M(K,"Qtd: "),P=M(K,D),K.forEach(m),x.forEach(m),T.forEach(m),O.forEach(m),this.h()},h(){E(r,"class","text-sm font-medium text-gray-900 dark:text-white"),E(i,"class","text-xs text-gray-500 dark:text-gray-400"),E(h,"class","text-sm font-medium text-gray-900 dark:text-white"),E(g,"class","text-right"),E(t,"class","flex items-center justify-between"),E(e,"class","mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-sm")},m(z,O){N(z,e,O),d(e,t),d(t,a),d(a,r),d(r,s),d(a,o),d(a,i),d(i,c),d(i,u),d(t,p),d(t,g),d(g,h),d(h,C),d(h,P)},p(z,O){O&16&&n!==(n=z[26].nomeEquipamento+"")&&oe(s,n),O&16&&f!==(f=z[26].registroCA+"")&&oe(u,f),O&16&&D!==(D=z[26].quantidade+"")&&oe(P,D)},d(z){z&&m(e)}}}function da(l){let e,t,a,r,n=l[28]+1+"",s,o,i,c,f,u,p,g,h,C,D,P,z,O,T,q,L,R,x,K,_=l[4].length>1&&ia(l);u=new Ke({props:{for:"epi-"+l[28],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Al]},$$scope:{ctx:l}}});function k(ae){l[18](ae,l[26])}function v(...ae){return l[19](l[28],...ae)}let S={id:"epi-"+l[28],items:l[7],class:"rounded-sm "+(l[5][`item-${l[28]}`]?"border-red-500":""),disabled:l[1]};l[26].episDisponivelId!==void 0&&(S.value=l[26].episDisponivelId),g=new Ka({props:S}),Me.push(()=>je(g,"value",k)),g.$on("change",v);let V=l[5][`item-${l[28]}`]&&ca(l);z=new Ke({props:{for:"quantidade-"+l[28],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Fl]},$$scope:{ctx:l}}});function B(ae){l[20](ae,l[26])}function ee(...ae){return l[21](l[28],...ae)}let te={id:"quantidade-"+l[28],type:"number",min:"1",max:"100",class:"rounded-sm "+(l[5][`quantidade-${l[28]}`]?"border-red-500":""),disabled:l[1]};l[26].quantidade!==void 0&&(te.value=l[26].quantidade),T=new Pt({props:te}),Me.push(()=>je(T,"value",B)),T.$on("input",ee);let re=l[5][`quantidade-${l[28]}`]&&fa(l),le=l[26].nomeEquipamento&&ua(l);return{c(){e=b("div"),t=b("div"),a=b("h4"),r=j("Item "),s=j(n),o=F(),_&&_.c(),i=F(),c=b("div"),f=b("div"),J(u.$$.fragment),p=F(),J(g.$$.fragment),C=F(),V&&V.c(),D=F(),P=b("div"),J(z.$$.fragment),O=F(),J(T.$$.fragment),L=F(),re&&re.c(),R=F(),le&&le.c(),x=F(),this.h()},l(ae){e=$(ae,"DIV",{class:!0});var ue=I(e);t=$(ue,"DIV",{class:!0});var me=I(t);a=$(me,"H4",{class:!0});var ge=I(a);r=M(ge,"Item "),s=M(ge,n),ge.forEach(m),o=A(me),_&&_.l(me),me.forEach(m),i=A(ue),c=$(ue,"DIV",{class:!0});var pe=I(c);f=$(pe,"DIV",{class:!0});var ce=I(f);G(u.$$.fragment,ce),p=A(ce),G(g.$$.fragment,ce),C=A(ce),V&&V.l(ce),ce.forEach(m),D=A(pe),P=$(pe,"DIV",{});var X=I(P);G(z.$$.fragment,X),O=A(X),G(T.$$.fragment,X),L=A(X),re&&re.l(X),X.forEach(m),pe.forEach(m),R=A(ue),le&&le.l(ue),x=A(ue),ue.forEach(m),this.h()},h(){E(a,"class","text-sm font-medium text-gray-900 dark:text-white"),E(t,"class","flex items-start justify-between mb-4"),E(f,"class","md:col-span-2"),E(c,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),E(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4")},m(ae,ue){N(ae,e,ue),d(e,t),d(t,a),d(a,r),d(a,s),d(t,o),_&&_.m(t,null),d(e,i),d(e,c),d(c,f),Q(u,f,null),d(f,p),Q(g,f,null),d(f,C),V&&V.m(f,null),d(c,D),d(c,P),Q(z,P,null),d(P,O),Q(T,P,null),d(P,L),re&&re.m(P,null),d(e,R),le&&le.m(e,null),d(e,x),K=!0},p(ae,ue){l=ae,l[4].length>1?_?(_.p(l,ue),ue&16&&w(_,1)):(_=ia(l),_.c(),w(_,1),_.m(t,null)):_&&(_e(),y(_,1,1,()=>{_=null}),ve());const me={};ue&536870912&&(me.$$scope={dirty:ue,ctx:l}),u.$set(me);const ge={};ue&128&&(ge.items=l[7]),ue&32&&(ge.class="rounded-sm "+(l[5][`item-${l[28]}`]?"border-red-500":"")),ue&2&&(ge.disabled=l[1]),!h&&ue&16&&(h=!0,ge.value=l[26].episDisponivelId,xe(()=>h=!1)),g.$set(ge),l[5][`item-${l[28]}`]?V?V.p(l,ue):(V=ca(l),V.c(),V.m(f,null)):V&&(V.d(1),V=null);const pe={};ue&536870912&&(pe.$$scope={dirty:ue,ctx:l}),z.$set(pe);const ce={};ue&32&&(ce.class="rounded-sm "+(l[5][`quantidade-${l[28]}`]?"border-red-500":"")),ue&2&&(ce.disabled=l[1]),!q&&ue&16&&(q=!0,ce.value=l[26].quantidade,xe(()=>q=!1)),T.$set(ce),l[5][`quantidade-${l[28]}`]?re?re.p(l,ue):(re=fa(l),re.c(),re.m(P,null)):re&&(re.d(1),re=null),l[26].nomeEquipamento?le?le.p(l,ue):(le=ua(l),le.c(),le.m(e,x)):le&&(le.d(1),le=null)},i(ae){K||(w(_),w(u.$$.fragment,ae),w(g.$$.fragment,ae),w(z.$$.fragment,ae),w(T.$$.fragment,ae),K=!0)},o(ae){y(_),y(u.$$.fragment,ae),y(g.$$.fragment,ae),y(z.$$.fragment,ae),y(T.$$.fragment,ae),K=!1},d(ae){ae&&m(e),_&&_.d(),U(u),U(g),V&&V.d(),U(z),U(T),re&&re.d(),le&&le.d()}}}function ma(l){let e,t,a,r,n="Nenhum item na entrega",s,o,i;return t=new it({props:{class:"mx-auto mb-3 text-gray-400 w-8 h-8"}}),o=new ze({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Vl]},$$scope:{ctx:l}}}),o.$on("click",l[8]),{c(){e=b("div"),J(t.$$.fragment),a=F(),r=b("p"),r.textContent=n,s=F(),J(o.$$.fragment),this.h()},l(c){e=$(c,"DIV",{class:!0});var f=I(e);G(t.$$.fragment,f),a=A(f),r=$(f,"P",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-iymvfb"&&(r.textContent=n),s=A(f),G(o.$$.fragment,f),f.forEach(m),this.h()},h(){E(r,"class","text-sm text-gray-500 dark:text-gray-400 mb-4"),E(e,"class","border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center")},m(c,f){N(c,e,f),Q(t,e,null),d(e,a),d(e,r),d(e,s),Q(o,e,null),i=!0},p(c,f){const u={};f&2&&(u.disabled=c[1]),f&536870912&&(u.$$scope={dirty:f,ctx:c}),o.$set(u)},i(c){i||(w(t.$$.fragment,c),w(o.$$.fragment,c),i=!0)},o(c){y(t.$$.fragment,c),y(o.$$.fragment,c),i=!1},d(c){c&&m(e),U(t),U(o)}}}function Vl(l){let e;return{c(){e=j("Adicionar Primeiro Item")},l(t){e=M(t,"Adicionar Primeiro Item")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function ga(l){let e,t,a="Resumo das Altera√ß√µes",r,n,s,o,i=l[4].length+"",c,f,u,p,g=l[4].reduce(pa,0)+"",h,C,D,P,z,O=(l[3]||"N√£o informado")+"",T;return{c(){e=b("div"),t=b("h4"),t.textContent=a,r=F(),n=b("div"),s=b("p"),o=j("‚Ä¢ Total de itens: "),c=j(i),f=F(),u=b("p"),p=j("‚Ä¢ Quantidade total: "),h=j(g),C=j(" unidades"),D=F(),P=b("p"),z=j("‚Ä¢ Respons√°vel: "),T=j(O),this.h()},l(q){e=$(q,"DIV",{class:!0});var L=I(e);t=$(L,"H4",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-sxfnj2"&&(t.textContent=a),r=A(L),n=$(L,"DIV",{class:!0});var R=I(n);s=$(R,"P",{});var x=I(s);o=M(x,"‚Ä¢ Total de itens: "),c=M(x,i),x.forEach(m),f=A(R),u=$(R,"P",{});var K=I(u);p=M(K,"‚Ä¢ Quantidade total: "),h=M(K,g),C=M(K," unidades"),K.forEach(m),D=A(R),P=$(R,"P",{});var _=I(P);z=M(_,"‚Ä¢ Respons√°vel: "),T=M(_,O),_.forEach(m),R.forEach(m),L.forEach(m),this.h()},h(){E(t,"class","text-sm font-medium text-yellow-900 dark:text-yellow-100 mb-2"),E(n,"class","text-sm text-yellow-800 dark:text-yellow-200"),E(e,"class","mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800")},m(q,L){N(q,e,L),d(e,t),d(e,r),d(e,n),d(n,s),d(s,o),d(s,c),d(n,f),d(n,u),d(u,p),d(u,h),d(u,C),d(n,D),d(n,P),d(P,z),d(P,T)},p(q,L){L&16&&i!==(i=q[4].length+"")&&oe(c,i),L&16&&g!==(g=q[4].reduce(pa,0)+"")&&oe(h,g),L&8&&O!==(O=(q[3]||"N√£o informado")+"")&&oe(T,O)},d(q){q&&m(e)}}}function ql(l){let e;return{c(){e=j("Cancelar")},l(t){e=M(t,"Cancelar")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Nl(l){let e,t,a;return e=new br({props:{class:"mr-2 w-4 h-4"}}),{c(){J(e.$$.fragment),t=j(`
              Salvar Altera√ß√µes`)},l(r){G(e.$$.fragment,r),t=M(r,`
              Salvar Altera√ß√µes`)},m(r,n){Q(e,r,n),N(r,t,n),a=!0},i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),U(e,r)}}}function Sl(l){let e,t,a;return e=new Wa({props:{class:"mr-2 animate-spin w-4 h-4"}}),{c(){J(e.$$.fragment),t=j(`
              Salvando...`)},l(r){G(e.$$.fragment,r),t=M(r,`
              Salvando...`)},m(r,n){Q(e,r,n),N(r,t,n),a=!0},i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),U(e,r)}}}function zl(l){let e,t,a,r;const n=[Sl,Nl],s=[];function o(i,c){return i[1]?0:1}return e=o(l),t=s[e]=n[e](l),{c(){t.c(),a=Ce()},l(i){t.l(i),a=Ce()},m(i,c){s[e].m(i,c),N(i,a,c),r=!0},p(i,c){let f=e;e=o(i),e!==f&&(_e(),y(s[f],1,1,()=>{s[f]=null}),ve(),t=s[e],t||(t=s[e]=n[e](i),t.c()),w(t,1),t.m(a.parentNode,a))},i(i){r||(w(t),r=!0)},o(i){y(t),r=!1},d(i){i&&m(a),s[e].d(i)}}}function Ol(l){let e,t,a=l[2]&&la(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),N(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&w(a,1)):(a=la(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(w(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}const pa=(l,e)=>l+e.quantidade;function Tl(l,e,t){let a,r,{episDisponiveis:n=[]}=e,{entrega:s=null}=e,{loading:o=!1}=e,{show:i=!1}=e;const c=Ze();let f="",u=[],p={};function g(){s&&(t(3,f="Respons√°vel da Entrega"),t(4,u=[{episDisponivelId:"1",nomeEquipamento:"Capacete de Seguran√ßa",registroCA:"31469",quantidade:1}]),t(5,p={}))}function h(){t(4,u=[...u,{episDisponivelId:"",nomeEquipamento:"",registroCA:"",quantidade:1}])}function C(v){t(4,u=u.filter((S,V)=>V!==v))}function D(v,S){const V=n.find(B=>B.id===S);V&&(t(4,u[v]={...u[v],episDisponivelId:S,nomeEquipamento:V.nomeEquipamento,registroCA:V.registroCA},u),delete p[`item-${v}`],t(5,p={...p}))}function P(v,S){t(4,u[v]={...u[v],quantidade:S},u),delete p[`quantidade-${v}`],t(5,p={...p})}function z(){const v={};return f.trim()||(v.responsavel="Respons√°vel √© obrigat√≥rio"),u.length===0&&(v.items="Adicione pelo menos um item"),u.forEach((S,V)=>{S.episDisponivelId||(v[`item-${V}`]="Selecione um EPI"),S.quantidade<1&&(v[`quantidade-${V}`]="Quantidade deve ser maior que 0")}),t(5,p=v),Object.keys(v).length===0}function O(){if(!z())return;const v={responsavel:f.trim(),itens:u.map(S=>({episDisponivelId:S.episDisponivelId,nomeEquipamento:S.nomeEquipamento,registroCA:S.registroCA,quantidade:S.quantidade}))};c("salvar",v)}function T(){c("cancelar")}function q(v){ct.call(this,l,v)}function L(v){f=v,t(3,f)}const R=v=>C(v);function x(v,S){l.$$.not_equal(S.episDisponivelId,v)&&(S.episDisponivelId=v,t(4,u))}const K=(v,S)=>D(v,S.target.value);function _(v,S){l.$$.not_equal(S.quantidade,v)&&(S.quantidade=v,t(4,u))}const k=(v,S)=>P(v,parseInt(S.target.value)||1);return l.$$set=v=>{"episDisponiveis"in v&&t(14,n=v.episDisponiveis),"entrega"in v&&t(0,s=v.entrega),"loading"in v&&t(1,o=v.loading),"show"in v&&t(2,i=v.show)},l.$$.update=()=>{l.$$.dirty&5&&i&&s&&g(),l.$$.dirty&16384&&t(7,a=[{value:"",label:"Selecione um EPI..."},...n.filter(v=>v.disponivel).map(v=>({value:v.id,label:`${v.nomeEquipamento} (CA ${v.registroCA})${v.quantidade?` - ${v.quantidade} dispon√≠veis`:""}`}))]),l.$$.dirty&26&&t(6,r=f.trim()&&u.length>0&&!o)},[s,o,i,f,u,p,r,a,h,C,D,P,O,T,n,q,L,R,x,K,_,k]}class Rl extends Qe{constructor(e){super(),Ge(this,e,Tl,Ol,Je,{episDisponiveis:14,entrega:0,loading:1,show:2})}}function ha(l){let e,t,a,r,n,s,o,i,c;r=new ut({props:{title:l[0]?`Devolver ${l[0].nomeEquipamento}`:"Devolver Equipamento",objectType:"DEVOLU√á√ÉO EPI",iconName:"TrashBinOutline",primaryAction:{text:l[1]?"Processando...":"Confirmar Devolu√ß√£o",icon:l[1]?"":"CheckOutline",disabled:!l[8]}}}),r.$on("close",l[11]),r.$on("primaryAction",l[10]);let f=l[0]&&_a(l);return{c(){e=b("div"),t=F(),a=b("div"),J(r.$$.fragment),n=F(),s=b("div"),f&&f.c(),this.h()},l(u){e=$(u,"DIV",{class:!0,role:!0}),I(e).forEach(m),t=A(u),a=$(u,"DIV",{class:!0,role:!0,"aria-modal":!0});var p=I(a);G(r.$$.fragment,p),n=A(p),s=$(p,"DIV",{class:!0});var g=I(s);f&&f.l(g),g.forEach(m),p.forEach(m),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(s,"class","flex-1 overflow-y-auto p-6 custom-scrollbar svelte-fw4j42"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(u,p){N(u,e,p),N(u,t,p),N(u,a,p),Q(r,a,null),d(a,n),d(a,s),f&&f.m(s,null),o=!0,i||(c=[He(e,"click",l[11]),He(a,"click",Ct(l[12]))],i=!0)},p(u,p){const g={};p&1&&(g.title=u[0]?`Devolver ${u[0].nomeEquipamento}`:"Devolver Equipamento"),p&258&&(g.primaryAction={text:u[1]?"Processando...":"Confirmar Devolu√ß√£o",icon:u[1]?"":"CheckOutline",disabled:!u[8]}),r.$set(g),u[0]?f?(f.p(u,p),p&1&&w(f,1)):(f=_a(u),f.c(),w(f,1),f.m(s,null)):f&&(_e(),y(f,1,1,()=>{f=null}),ve())},i(u){o||(w(r.$$.fragment,u),w(f),o=!0)},o(u){y(r.$$.fragment,u),y(f),o=!1},d(u){u&&(m(e),m(t),m(a)),U(r),f&&f.d(),i=!1,Dt(c)}}}function _a(l){let e,t,a,r="1",n,s,o,i=l[0].nomeEquipamento+"",c,f,u,p,g=l[0].registroCA+"",h,C,D=l[0].entregaId+"",P,z,O,T,q,L,R="Prazo de Devolu√ß√£o",x,K,_=wt(l[0].prazoMaximoDevolucao)+"",k,v,S,V,B,ee,te,re,le,ae,ue,me,ge,pe,ce,X,Y,se,$e,H,ne="Campo opcional para detalhes espec√≠ficos da devolu√ß√£o",be,Ee,ke;const qe=[jl,Ml],W=[];function de(fe,we){return fe[7]?0:1}V=de(l),B=W[V]=qe[V](l),re=new Ke({props:{for:"motivo",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[xl]},$$scope:{ctx:l}}});function Ie(fe){l[13](fe)}let Pe={id:"motivo",class:"rounded-sm "+(l[5].motivo?"border-red-500":""),disabled:l[1],items:l[9]};l[3]!==void 0&&(Pe.value=l[3]),ae=new Ka({props:Pe}),Me.push(()=>je(ae,"value",Ie));let ie=l[5].motivo&&va(l);ce=new Ke({props:{for:"observacoes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Ll]},$$scope:{ctx:l}}});function Ne(fe){l[14](fe)}let Z={id:"observacoes",placeholder:"Observa√ß√µes adicionais sobre a devolu√ß√£o...",rows:2,class:"rounded-sm",disabled:l[1]};l[4]!==void 0&&(Z.value=l[4]),Y=new _r({props:Z}),Me.push(()=>je(Y,"value",Ne));let ye=l[7]&&$a(l);return{c(){e=b("div"),t=b("div"),a=b("div"),a.textContent=r,n=F(),s=b("div"),o=b("h4"),c=j(i),f=F(),u=b("p"),p=j("CA "),h=j(g),C=j(" ‚Ä¢ Entrega #"),P=j(D),z=F(),O=b("div"),T=b("div"),q=b("div"),L=b("p"),L.textContent=R,x=F(),K=b("p"),k=j(_),v=F(),S=b("div"),B.c(),ee=F(),te=b("div"),J(re.$$.fragment),le=F(),J(ae.$$.fragment),me=F(),ie&&ie.c(),ge=F(),pe=b("div"),J(ce.$$.fragment),X=F(),J(Y.$$.fragment),$e=F(),H=b("p"),H.textContent=ne,be=F(),ye&&ye.c(),Ee=Ce(),this.h()},l(fe){e=$(fe,"DIV",{class:!0});var we=I(e);t=$(we,"DIV",{class:!0});var Te=I(t);a=$(Te,"DIV",{class:!0,"data-svelte-h":!0}),De(a)!=="svelte-bog2zm"&&(a.textContent=r),n=A(Te),s=$(Te,"DIV",{class:!0});var Re=I(s);o=$(Re,"H4",{class:!0});var Ae=I(o);c=M(Ae,i),Ae.forEach(m),f=A(Re),u=$(Re,"P",{class:!0});var he=I(u);p=M(he,"CA "),h=M(he,g),C=M(he," ‚Ä¢ Entrega #"),P=M(he,D),he.forEach(m),Re.forEach(m),Te.forEach(m),z=A(we),O=$(we,"DIV",{class:!0});var Fe=I(O);T=$(Fe,"DIV",{class:!0});var Be=I(T);q=$(Be,"DIV",{});var Ue=I(q);L=$(Ue,"P",{class:!0,"data-svelte-h":!0}),De(L)!=="svelte-13u3t5e"&&(L.textContent=R),x=A(Ue),K=$(Ue,"P",{class:!0});var tt=I(K);k=M(tt,_),tt.forEach(m),Ue.forEach(m),v=A(Be),S=$(Be,"DIV",{class:!0});var et=I(S);B.l(et),et.forEach(m),Be.forEach(m),Fe.forEach(m),we.forEach(m),ee=A(fe),te=$(fe,"DIV",{class:!0});var Xe=I(te);G(re.$$.fragment,Xe),le=A(Xe),G(ae.$$.fragment,Xe),me=A(Xe),ie&&ie.l(Xe),Xe.forEach(m),ge=A(fe),pe=$(fe,"DIV",{class:!0});var We=I(pe);G(ce.$$.fragment,We),X=A(We),G(Y.$$.fragment,We),$e=A(We),H=$(We,"P",{class:!0,"data-svelte-h":!0}),De(H)!=="svelte-1gkgsxh"&&(H.textContent=ne),We.forEach(m),be=A(fe),ye&&ye.l(fe),Ee=Ce(),this.h()},h(){E(a,"class","flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-md flex items-center justify-center font-semibold text-sm"),E(o,"class","font-medium text-gray-900 dark:text-white"),E(u,"class","text-sm text-gray-500 dark:text-gray-400"),E(s,"class","flex-1"),E(t,"class","flex items-start space-x-3 mb-3"),E(L,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(K,"class","text-sm text-gray-900 dark:text-white"),E(S,"class","text-right"),E(T,"class","flex items-center justify-between"),E(O,"class","pt-3 border-t border-gray-200 dark:border-gray-700"),E(e,"class","mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"),E(te,"class","mb-6"),E(H,"class","mt-1 text-xs text-gray-500 dark:text-gray-400"),E(pe,"class","mb-6")},m(fe,we){N(fe,e,we),d(e,t),d(t,a),d(t,n),d(t,s),d(s,o),d(o,c),d(s,f),d(s,u),d(u,p),d(u,h),d(u,C),d(u,P),d(e,z),d(e,O),d(O,T),d(T,q),d(q,L),d(q,x),d(q,K),d(K,k),d(T,v),d(T,S),W[V].m(S,null),N(fe,ee,we),N(fe,te,we),Q(re,te,null),d(te,le),Q(ae,te,null),d(te,me),ie&&ie.m(te,null),N(fe,ge,we),N(fe,pe,we),Q(ce,pe,null),d(pe,X),Q(Y,pe,null),d(pe,$e),d(pe,H),N(fe,be,we),ye&&ye.m(fe,we),N(fe,Ee,we),ke=!0},p(fe,we){(!ke||we&1)&&i!==(i=fe[0].nomeEquipamento+"")&&oe(c,i),(!ke||we&1)&&g!==(g=fe[0].registroCA+"")&&oe(h,g),(!ke||we&1)&&D!==(D=fe[0].entregaId+"")&&oe(P,D),(!ke||we&1)&&_!==(_=wt(fe[0].prazoMaximoDevolucao)+"")&&oe(k,_);let Te=V;V=de(fe),V===Te?W[V].p(fe,we):(_e(),y(W[Te],1,1,()=>{W[Te]=null}),ve(),B=W[V],B?B.p(fe,we):(B=W[V]=qe[V](fe),B.c()),w(B,1),B.m(S,null));const Re={};we&262144&&(Re.$$scope={dirty:we,ctx:fe}),re.$set(Re);const Ae={};we&32&&(Ae.class="rounded-sm "+(fe[5].motivo?"border-red-500":"")),we&2&&(Ae.disabled=fe[1]),!ue&&we&8&&(ue=!0,Ae.value=fe[3],xe(()=>ue=!1)),ae.$set(Ae),fe[5].motivo?ie?ie.p(fe,we):(ie=va(fe),ie.c(),ie.m(te,null)):ie&&(ie.d(1),ie=null);const he={};we&262144&&(he.$$scope={dirty:we,ctx:fe}),ce.$set(he);const Fe={};we&2&&(Fe.disabled=fe[1]),!se&&we&16&&(se=!0,Fe.value=fe[4],xe(()=>se=!1)),Y.$set(Fe),fe[7]?ye?(ye.p(fe,we),we&128&&w(ye,1)):(ye=$a(fe),ye.c(),w(ye,1),ye.m(Ee.parentNode,Ee)):ye&&(_e(),y(ye,1,1,()=>{ye=null}),ve())},i(fe){ke||(w(B),w(re.$$.fragment,fe),w(ae.$$.fragment,fe),w(ce.$$.fragment,fe),w(Y.$$.fragment,fe),w(ye),ke=!0)},o(fe){y(B),y(re.$$.fragment,fe),y(ae.$$.fragment,fe),y(ce.$$.fragment,fe),y(Y.$$.fragment,fe),y(ye),ke=!1},d(fe){fe&&(m(e),m(ee),m(te),m(ge),m(pe),m(be),m(Ee)),W[V].d(),U(re),U(ae),ie&&ie.d(),U(ce),U(Y),ye&&ye.d(fe)}}}function Ml(l){let e,t,a,r;return t=new er({props:{class:"mr-1 w-3 h-3"}}),{c(){e=b("div"),J(t.$$.fragment),a=j(`
                  No prazo`),this.h()},l(n){e=$(n,"DIV",{class:!0});var s=I(e);G(t.$$.fragment,s),a=M(s,`
                  No prazo`),s.forEach(m),this.h()},h(){E(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200")},m(n,s){N(n,e,s),Q(t,e,null),d(e,a),r=!0},p:Ve,i(n){r||(w(t.$$.fragment,n),r=!0)},o(n){y(t.$$.fragment,n),r=!1},d(n){n&&m(e),U(t)}}}function jl(l){let e,t,a,r,n,s;return t=new qt({props:{class:"mr-1 w-3 h-3"}}),{c(){e=b("div"),J(t.$$.fragment),a=j(`
                  Vencido h√° `),r=j(l[6]),n=j(" dias"),this.h()},l(o){e=$(o,"DIV",{class:!0});var i=I(e);G(t.$$.fragment,i),a=M(i,`
                  Vencido h√° `),r=M(i,l[6]),n=M(i," dias"),i.forEach(m),this.h()},h(){E(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200")},m(o,i){N(o,e,i),Q(t,e,null),d(e,a),d(e,r),d(e,n),s=!0},p(o,i){(!s||i&64)&&oe(r,o[6])},i(o){s||(w(t.$$.fragment,o),s=!0)},o(o){y(t.$$.fragment,o),s=!1},d(o){o&&m(e),U(t)}}}function xl(l){let e;return{c(){e=j("Motivo da Devolu√ß√£o *")},l(t){e=M(t,"Motivo da Devolu√ß√£o *")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function va(l){let e,t=l[5].motivo+"",a;return{c(){e=b("p"),a=j(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=I(e);a=M(n,t),n.forEach(m),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n&32&&t!==(t=r[5].motivo+"")&&oe(a,t)},d(r){r&&m(e)}}}function Ll(l){let e;return{c(){e=j("Observa√ß√µes (opcional)")},l(t){e=M(t,"Observa√ß√µes (opcional)")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function $a(l){let e,t,a,r,n,s,o="Equipamento com prazo vencido",i,c,f,u,p,g;return a=new qt({props:{class:"text-red-600 dark:text-red-400 mt-0.5 mr-3 w-5 h-5"}}),{c(){e=b("div"),t=b("div"),J(a.$$.fragment),r=F(),n=b("div"),s=b("h4"),s.textContent=o,i=F(),c=b("p"),f=j("Este equipamento est√° "),u=j(l[6]),p=j(" dias em atraso para devolu√ß√£o."),this.h()},l(h){e=$(h,"DIV",{class:!0});var C=I(e);t=$(C,"DIV",{class:!0});var D=I(t);G(a.$$.fragment,D),r=A(D),n=$(D,"DIV",{});var P=I(n);s=$(P,"H4",{class:!0,"data-svelte-h":!0}),De(s)!=="svelte-1l5do2t"&&(s.textContent=o),i=A(P),c=$(P,"P",{class:!0});var z=I(c);f=M(z,"Este equipamento est√° "),u=M(z,l[6]),p=M(z," dias em atraso para devolu√ß√£o."),z.forEach(m),P.forEach(m),D.forEach(m),C.forEach(m),this.h()},h(){E(s,"class","text-sm font-medium text-red-800 dark:text-red-200"),E(c,"class","text-sm text-red-700 dark:text-red-300 mt-1"),E(t,"class","flex items-start"),E(e,"class","mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800")},m(h,C){N(h,e,C),d(e,t),Q(a,t,null),d(t,r),d(t,n),d(n,s),d(n,i),d(n,c),d(c,f),d(c,u),d(c,p),g=!0},p(h,C){(!g||C&64)&&oe(u,h[6])},i(h){g||(w(a.$$.fragment,h),g=!0)},o(h){y(a.$$.fragment,h),g=!1},d(h){h&&m(e),U(a)}}}function Hl(l){let e,t,a=l[2]&&ha(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),N(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&w(a,1)):(a=ha(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(w(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}function Bl(l,e,t){let a,r,n,{equipamento:s=null}=e,{loading:o=!1}=e,{show:i=!1}=e;const c=Ze();let f="devolu√ß√£o padr√£o",u="",p={};const g=[{value:"devolu√ß√£o padr√£o",name:"Devolu√ß√£o Padr√£o - Fim do per√≠odo de uso"},{value:"danificado",name:"Danificado - EPI com defeito ou quebrado"},{value:"troca",name:"Troca - Substitui√ß√£o por outro equipamento"},{value:"outros",name:"Outros - Outro motivo espec√≠fico"}];function h(){t(3,f="devolu√ß√£o padr√£o"),t(4,u=""),t(5,p={})}function C(){const q={};return f||(q.motivo="Motivo da devolu√ß√£o √© obrigat√≥rio"),t(5,p=q),Object.keys(q).length===0}function D(){C()&&c("confirmar",{motivo:f,observacoes:u.trim()||void 0})}function P(){c("cancelar")}function z(q){ct.call(this,l,q)}function O(q){f=q,t(3,f)}function T(q){u=q,t(4,u)}return l.$$set=q=>{"equipamento"in q&&t(0,s=q.equipamento),"loading"in q&&t(1,o=q.loading),"show"in q&&t(2,i=q.show)},l.$$.update=()=>{l.$$.dirty&5&&i&&s&&h(),l.$$.dirty&10&&t(8,a=f&&!o),l.$$.dirty&1&&t(7,r=(s==null?void 0:s.vencido)||!1),l.$$.dirty&1&&t(6,n=(s==null?void 0:s.diasVencido)||0)},[s,o,i,f,u,p,n,r,a,g,D,P,z,O,T]}class Ul extends Qe{constructor(e){super(),Ge(this,e,Bl,Hl,Je,{equipamento:0,loading:1,show:2})}}function ba(l){let e,t,a,r,n,s,o,i,c;r=new ut({props:{title:l[0]?`Assinatura da Entrega #${l[0].id}`:"Confirmar Assinatura Digital",objectType:"ASSINATURA DIGITAL",iconName:"TabletOutline",primaryAction:{text:l[1]?"Processando...":l[3]?"Assinatura Confirmada":"Foi assinado",icon:l[1]?"":l[3]?"CheckOutline":"CheckCircleOutline",disabled:!l[4]},secondaryAction:{text:"Cancelar",disabled:l[1]}}}),r.$on("close",l[5]),r.$on("primaryAction",l[6]),r.$on("secondaryAction",l[5]);let f=l[0]&&Ea(l);return{c(){e=b("div"),t=F(),a=b("div"),J(r.$$.fragment),n=F(),s=b("div"),f&&f.c(),this.h()},l(u){e=$(u,"DIV",{class:!0,role:!0}),I(e).forEach(m),t=A(u),a=$(u,"DIV",{class:!0,role:!0,"aria-modal":!0});var p=I(a);G(r.$$.fragment,p),n=A(p),s=$(p,"DIV",{class:!0,style:!0});var g=I(s);f&&f.l(g),g.forEach(m),p.forEach(m),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(s,"class","overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),Ft(s,"height","calc(100% - 80px)"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(u,p){N(u,e,p),N(u,t,p),N(u,a,p),Q(r,a,null),d(a,n),d(a,s),f&&f.m(s,null),o=!0,i||(c=[He(e,"click",l[5]),He(a,"click",Ct(l[7]))],i=!0)},p(u,p){const g={};p&1&&(g.title=u[0]?`Assinatura da Entrega #${u[0].id}`:"Confirmar Assinatura Digital"),p&26&&(g.primaryAction={text:u[1]?"Processando...":u[3]?"Assinatura Confirmada":"Foi assinado",icon:u[1]?"":u[3]?"CheckOutline":"CheckCircleOutline",disabled:!u[4]}),p&2&&(g.secondaryAction={text:"Cancelar",disabled:u[1]}),r.$set(g),u[0]?f?(f.p(u,p),p&1&&w(f,1)):(f=Ea(u),f.c(),w(f,1),f.m(s,null)):f&&(_e(),y(f,1,1,()=>{f=null}),ve())},i(u){o||(w(r.$$.fragment,u),w(f),o=!0)},o(u){y(r.$$.fragment,u),y(f),o=!1},d(u){u&&(m(e),m(t),m(a)),U(r),f&&f.d(),i=!1,Dt(c)}}}function Ea(l){let e,t,a,r,n="Entrega",s,o,i,c=l[0].id+"",f,u,p,g,h="Data da Entrega",C,D,P=wt(l[0].dataEntrega)+"",z,O,T,q='<h4 class="text-sm font-semibold text-gray-900 dark:text-white mb-3">EPIs a serem confirmados:</h4> <div class="space-y-2"><div class="flex items-center justify-between py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-sm border border-gray-200 dark:border-gray-600"><div class="flex flex-col"><span class="text-sm text-gray-900 dark:text-white font-medium">Capacete de Seguran√ßa</span> <span class="text-xs text-gray-500 dark:text-gray-400">CA 31469</span></div> <div class="text-right"><span class="text-sm font-medium text-gray-900 dark:text-white">Qtd: 1</span></div></div></div>',L,R,x,K,_,k,v,S,V="Assinatura Digital",B,ee,te="Assine digitalmente atrav√©s do link ou QR Code",re,le,ae,ue,me,ge,pe,ce,X,Y="Escaneie o QR Code para assinar",se,$e,H,ne,be,Ee,ke,qe="Assinatura Manual",W,de,Ie="Imprima o documento para assinatura f√≠sica",Pe,ie,Ne,Z,ye,fe="Ap√≥s assinatura f√≠sica, confirme abaixo",we,Te,Re;_=new Er({props:{class:"text-blue-600 dark:text-blue-400 mt-0.5 mr-3 w-5 h-5"}}),ae=new ze({props:{size:"xs",color:"primary",class:"rounded-sm w-full",$$slots:{default:[Ql]},$$scope:{ctx:l}}}),pe=new kr({props:{class:"text-gray-400 w-8 h-8"}}),ne=new wr({props:{class:"text-green-600 dark:text-green-400 mt-0.5 mr-3 w-5 h-5"}}),Ne=new ze({props:{size:"xs",color:"alternative",class:"rounded-sm w-full",$$slots:{default:[Gl]},$$scope:{ctx:l}}});let Ae=l[3]&&ka();return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),r.textContent=n,s=F(),o=b("p"),i=j("#"),f=j(c),u=F(),p=b("div"),g=b("p"),g.textContent=h,C=F(),D=b("p"),z=j(P),O=F(),T=b("div"),T.innerHTML=q,L=F(),R=b("div"),x=b("div"),K=b("div"),J(_.$$.fragment),k=F(),v=b("div"),S=b("h4"),S.textContent=V,B=F(),ee=b("p"),ee.textContent=te,re=F(),le=b("div"),J(ae.$$.fragment),ue=F(),me=b("div"),ge=b("div"),J(pe.$$.fragment),ce=F(),X=b("p"),X.textContent=Y,se=F(),$e=b("div"),H=b("div"),J(ne.$$.fragment),be=F(),Ee=b("div"),ke=b("h4"),ke.textContent=qe,W=F(),de=b("p"),de.textContent=Ie,Pe=F(),ie=b("div"),J(Ne.$$.fragment),Z=F(),ye=b("p"),ye.textContent=fe,we=F(),Ae&&Ae.c(),Te=Ce(),this.h()},l(he){e=$(he,"DIV",{class:!0});var Fe=I(e);t=$(Fe,"DIV",{class:!0});var Be=I(t);a=$(Be,"DIV",{});var Ue=I(a);r=$(Ue,"P",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-15muixn"&&(r.textContent=n),s=A(Ue),o=$(Ue,"P",{class:!0});var tt=I(o);i=M(tt,"#"),f=M(tt,c),tt.forEach(m),Ue.forEach(m),u=A(Be),p=$(Be,"DIV",{});var et=I(p);g=$(et,"P",{class:!0,"data-svelte-h":!0}),De(g)!=="svelte-1nce9zk"&&(g.textContent=h),C=A(et),D=$(et,"P",{class:!0});var Xe=I(D);z=M(Xe,P),Xe.forEach(m),et.forEach(m),Be.forEach(m),Fe.forEach(m),O=A(he),T=$(he,"DIV",{class:!0,"data-svelte-h":!0}),De(T)!=="svelte-udbm6m"&&(T.innerHTML=q),L=A(he),R=$(he,"DIV",{class:!0});var We=I(R);x=$(We,"DIV",{class:!0});var Nt=I(x);K=$(Nt,"DIV",{class:!0});var dt=I(K);G(_.$$.fragment,dt),k=A(dt),v=$(dt,"DIV",{});var at=I(v);S=$(at,"H4",{class:!0,"data-svelte-h":!0}),De(S)!=="svelte-1yxfyqp"&&(S.textContent=V),B=A(at),ee=$(at,"P",{class:!0,"data-svelte-h":!0}),De(ee)!=="svelte-mz9p7b"&&(ee.textContent=te),re=A(at),le=$(at,"DIV",{class:!0});var rt=I(le);G(ae.$$.fragment,rt),ue=A(rt),me=$(rt,"DIV",{class:!0});var St=I(me);ge=$(St,"DIV",{class:!0});var zt=I(ge);G(pe.$$.fragment,zt),zt.forEach(m),St.forEach(m),ce=A(rt),X=$(rt,"P",{class:!0,"data-svelte-h":!0}),De(X)!=="svelte-1u6pcnc"&&(X.textContent=Y),rt.forEach(m),at.forEach(m),dt.forEach(m),Nt.forEach(m),se=A(We),$e=$(We,"DIV",{class:!0});var Ot=I($e);H=$(Ot,"DIV",{class:!0});var mt=I(H);G(ne.$$.fragment,mt),be=A(mt),Ee=$(mt,"DIV",{});var lt=I(Ee);ke=$(lt,"H4",{class:!0,"data-svelte-h":!0}),De(ke)!=="svelte-uzpa23"&&(ke.textContent=qe),W=A(lt),de=$(lt,"P",{class:!0,"data-svelte-h":!0}),De(de)!=="svelte-1vt0diy"&&(de.textContent=Ie),Pe=A(lt),ie=$(lt,"DIV",{class:!0});var gt=I(ie);G(Ne.$$.fragment,gt),Z=A(gt),ye=$(gt,"P",{class:!0,"data-svelte-h":!0}),De(ye)!=="svelte-kjygt1"&&(ye.textContent=fe),gt.forEach(m),lt.forEach(m),mt.forEach(m),Ot.forEach(m),We.forEach(m),we=A(he),Ae&&Ae.l(he),Te=Ce(),this.h()},h(){E(r,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(o,"class","text-sm text-gray-900 dark:text-white font-semibold"),E(g,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(D,"class","text-sm text-gray-900 dark:text-white font-semibold"),E(t,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),E(e,"class","mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"),E(T,"class","mb-6"),E(S,"class","text-sm font-medium text-blue-900 dark:text-blue-100"),E(ee,"class","text-sm text-blue-800 dark:text-blue-200 mt-1"),E(ge,"class","w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center"),E(me,"class","flex items-center justify-center p-3 bg-white dark:bg-gray-700 rounded border"),E(X,"class","text-xs text-blue-700 dark:text-blue-300 text-center"),E(le,"class","mt-3 space-y-2"),E(K,"class","flex items-start"),E(x,"class","p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"),E(ke,"class","text-sm font-medium text-green-900 dark:text-green-100"),E(de,"class","text-sm text-green-800 dark:text-green-200 mt-1"),E(ye,"class","text-xs text-green-700 dark:text-green-300 text-center"),E(ie,"class","mt-3 space-y-2"),E(H,"class","flex items-start"),E($e,"class","p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800"),E(R,"class","mb-6 grid grid-cols-1 md:grid-cols-2 gap-4")},m(he,Fe){N(he,e,Fe),d(e,t),d(t,a),d(a,r),d(a,s),d(a,o),d(o,i),d(o,f),d(t,u),d(t,p),d(p,g),d(p,C),d(p,D),d(D,z),N(he,O,Fe),N(he,T,Fe),N(he,L,Fe),N(he,R,Fe),d(R,x),d(x,K),Q(_,K,null),d(K,k),d(K,v),d(v,S),d(v,B),d(v,ee),d(v,re),d(v,le),Q(ae,le,null),d(le,ue),d(le,me),d(me,ge),Q(pe,ge,null),d(le,ce),d(le,X),d(R,se),d(R,$e),d($e,H),Q(ne,H,null),d(H,be),d(H,Ee),d(Ee,ke),d(Ee,W),d(Ee,de),d(Ee,Pe),d(Ee,ie),Q(Ne,ie,null),d(ie,Z),d(ie,ye),N(he,we,Fe),Ae&&Ae.m(he,Fe),N(he,Te,Fe),Re=!0},p(he,Fe){(!Re||Fe&1)&&c!==(c=he[0].id+"")&&oe(f,c),(!Re||Fe&1)&&P!==(P=wt(he[0].dataEntrega)+"")&&oe(z,P);const Be={};Fe&2048&&(Be.$$scope={dirty:Fe,ctx:he}),ae.$set(Be);const Ue={};Fe&2048&&(Ue.$$scope={dirty:Fe,ctx:he}),Ne.$set(Ue),he[3]?Ae?Fe&8&&w(Ae,1):(Ae=ka(),Ae.c(),w(Ae,1),Ae.m(Te.parentNode,Te)):Ae&&(_e(),y(Ae,1,1,()=>{Ae=null}),ve())},i(he){Re||(w(_.$$.fragment,he),w(ae.$$.fragment,he),w(pe.$$.fragment,he),w(ne.$$.fragment,he),w(Ne.$$.fragment,he),w(Ae),Re=!0)},o(he){y(_.$$.fragment,he),y(ae.$$.fragment,he),y(pe.$$.fragment,he),y(ne.$$.fragment,he),y(Ne.$$.fragment,he),y(Ae),Re=!1},d(he){he&&(m(e),m(O),m(T),m(L),m(R),m(we),m(Te)),U(_),U(ae),U(pe),U(ne),U(Ne),Ae&&Ae.d(he)}}}function Ql(l){let e,t,a;return e=new Dr({props:{class:"mr-2 w-3 h-3"}}),{c(){J(e.$$.fragment),t=j(`
                  Abrir Link de Assinatura`)},l(r){G(e.$$.fragment,r),t=M(r,`
                  Abrir Link de Assinatura`)},m(r,n){Q(e,r,n),N(r,t,n),a=!0},p:Ve,i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),U(e,r)}}}function Gl(l){let e,t,a;return e=new Cr({props:{class:"mr-2 w-3 h-3"}}),{c(){J(e.$$.fragment),t=j(`
                  Imprimir Documento`)},l(r){G(e.$$.fragment,r),t=M(r,`
                  Imprimir Documento`)},m(r,n){Q(e,r,n),N(r,t,n),a=!0},p:Ve,i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),U(e,r)}}}function ka(l){let e,t,a,r,n,s='<h4 class="text-sm font-medium text-green-900 dark:text-green-100">Assinatura Confirmada</h4> <p class="text-sm text-green-800 dark:text-green-200">Processando assinatura digital...</p>',o;return a=new er({props:{class:"text-green-600 dark:text-green-400 mr-3 w-5 h-5"}}),{c(){e=b("div"),t=b("div"),J(a.$$.fragment),r=F(),n=b("div"),n.innerHTML=s,this.h()},l(i){e=$(i,"DIV",{class:!0});var c=I(e);t=$(c,"DIV",{class:!0});var f=I(t);G(a.$$.fragment,f),r=A(f),n=$(f,"DIV",{"data-svelte-h":!0}),De(n)!=="svelte-9s52he"&&(n.innerHTML=s),f.forEach(m),c.forEach(m),this.h()},h(){E(t,"class","flex items-center"),E(e,"class","mb-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800")},m(i,c){N(i,e,c),d(e,t),Q(a,t,null),d(t,r),d(t,n),o=!0},i(i){o||(w(a.$$.fragment,i),o=!0)},o(i){y(a.$$.fragment,i),o=!1},d(i){i&&m(e),U(a)}}}function Jl(l){let e,t,a=l[2]&&ba(l);return{c(){a&&a.c(),e=Ce()},l(r){a&&a.l(r),e=Ce()},m(r,n){a&&a.m(r,n),N(r,e,n),t=!0},p(r,[n]){r[2]?a?(a.p(r,n),n&4&&w(a,1)):(a=ba(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(w(a),t=!0)},o(r){y(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}function Wl(l,e,t){let a,{entrega:r=null}=e,{loading:n=!1}=e,{show:s=!1}=e;const o=Ze();let i=!1;function c(){t(3,i=!1)}function f(){const h=`assinatura_digital_${Date.now()}`;o("confirmar",{assinatura:h})}function u(){o("cancelar")}function p(){t(3,i=!0),setTimeout(()=>{f()},500)}function g(h){ct.call(this,l,h)}return l.$$set=h=>{"entrega"in h&&t(0,r=h.entrega),"loading"in h&&t(1,n=h.loading),"show"in h&&t(2,s=h.show)},l.$$.update=()=>{l.$$.dirty&4&&s&&c(),l.$$.dirty&10&&t(4,a=!n&&!i)},[r,n,s,i,a,u,p,g]}class Kl extends Qe{constructor(e){super(),Ge(this,e,Wl,Jl,Je,{entrega:0,loading:1,show:2})}}function wa(l,e,t){const a=l.slice();return a[74]=e[t],a}function Da(l,e,t){const a=l.slice();return a[65]=e[t],a}function Ca(l,e,t){const a=l.slice();return a[71]=e[t],a}function Ia(l,e,t){const a=l.slice();return a[68]=e[t],a}function ya(l,e,t){const a=l.slice();return a[62]=e[t],a}function Pa(l,e,t){const a=l.slice();return a[59]=e[t],a}function Aa(l,e,t){const a=l.slice();return a[77]=e[t],a}function Xl(l){let e,t="<p>Nenhum dado dispon√≠vel</p>";return{c(){e=b("div"),e.innerHTML=t,this.h()},l(a){e=$(a,"DIV",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-oi8tw0"&&(e.innerHTML=t),this.h()},h(){E(e,"class","text-center py-8 text-gray-500")},m(a,r){N(a,e,r)},p:Ve,i:Ve,o:Ve,d(a){a&&m(e)}}}function Yl(l){let e,t,a,r,n,s,o,i=Se([{id:"equipamentos",label:"Equipamentos",count:l[20].length},{id:"devolucoes",label:"Devolu√ß√µes",count:l[19].length},{id:"entregas",label:"Entregas",count:l[18].length},{id:"historico",label:"Hist√≥rico",count:l[17].length}]),c=[];for(let g=0;g<4;g+=1)c[g]=Fa(Aa(l,i,g));const f=[ln,rn,an,tn],u=[];function p(g,h){return g[21]==="equipamentos"?0:g[21]==="devolucoes"?1:g[21]==="entregas"?2:g[21]==="historico"?3:-1}return~(n=p(l))&&(s=u[n]=f[n](l)),{c(){e=b("div"),t=b("nav");for(let g=0;g<4;g+=1)c[g].c();a=F(),r=b("div"),s&&s.c(),this.h()},l(g){e=$(g,"DIV",{class:!0});var h=I(e);t=$(h,"NAV",{class:!0,"aria-label":!0});var C=I(t);for(let P=0;P<4;P+=1)c[P].l(C);C.forEach(m),h.forEach(m),a=A(g),r=$(g,"DIV",{class:!0});var D=I(r);s&&s.l(D),D.forEach(m),this.h()},h(){E(t,"class","flex space-x-8 px-6"),E(t,"aria-label","Tabs"),E(e,"class","border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"),E(r,"class","p-6")},m(g,h){N(g,e,h),d(e,t);for(let C=0;C<4;C+=1)c[C]&&c[C].m(t,null);N(g,a,h),N(g,r,h),~n&&u[n].m(r,null),o=!0},p(g,h){if(h[0]&4063232){i=Se([{id:"equipamentos",label:"Equipamentos",count:g[20].length},{id:"devolucoes",label:"Devolu√ß√µes",count:g[19].length},{id:"entregas",label:"Entregas",count:g[18].length},{id:"historico",label:"Hist√≥rico",count:g[17].length}]);let D;for(D=0;D<4;D+=1){const P=Aa(g,i,D);c[D]?c[D].p(P,h):(c[D]=Fa(P),c[D].c(),c[D].m(t,null))}for(;D<4;D+=1)c[D].d(1)}let C=n;n=p(g),n===C?~n&&u[n].p(g,h):(s&&(_e(),y(u[C],1,1,()=>{u[C]=null}),ve()),~n?(s=u[n],s?s.p(g,h):(s=u[n]=f[n](g),s.c()),w(s,1),s.m(r,null)):s=null)},i(g){o||(w(s),o=!0)},o(g){y(s),o=!1},d(g){g&&(m(e),m(a),m(r)),It(c,g),~n&&u[n].d()}}}function Zl(l){let e,t;return e=new Vt({props:{message:l[7]}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r[0]&128&&(n.message=a[7]),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function en(l){let e,t,a;return t=new yt({}),{c(){e=b("div"),J(t.$$.fragment),this.h()},l(r){e=$(r,"DIV",{class:!0});var n=I(e);G(t.$$.fragment,n),n.forEach(m),this.h()},h(){E(e,"class","flex justify-center items-center py-12")},m(r,n){N(r,e,n),Q(t,e,null),a=!0},p:Ve,i(r){a||(w(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&m(e),U(t)}}}function Fa(l){let e,t=l[77].label+"",a,r,n,s=l[77].count+"",o,i,c,f,u;function p(){return l[37](l[77])}return{c(){e=b("button"),a=j(t),r=F(),n=b("span"),o=j(s),i=F(),this.h()},l(g){e=$(g,"BUTTON",{class:!0});var h=I(e);a=M(h,t),r=A(h),n=$(h,"SPAN",{class:!0});var C=I(n);o=M(C,s),C.forEach(m),i=A(h),h.forEach(m),this.h()},h(){E(n,"class","ml-2 py-0.5 px-2 rounded-full text-xs bg-gray-200 dark:bg-gray-700"),E(e,"class",c="py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(l[21]===l[77].id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"))},m(g,h){N(g,e,h),d(e,a),d(e,r),d(e,n),d(n,o),d(e,i),f||(u=He(e,"click",p),f=!0)},p(g,h){l=g,h[0]&1966080&&t!==(t=l[77].label+"")&&oe(a,t),h[0]&1966080&&s!==(s=l[77].count+"")&&oe(o,s),h[0]&4063232&&c!==(c="py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(l[21]===l[77].id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"))&&E(e,"class",c)},d(g){g&&m(e),f=!1,u()}}}function tn(l){let e,t,a="Hist√≥rico Completo",r,n,s,o;const i=[on,nn],c=[];function f(u,p){return u[17].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=F(),s.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var p=I(e);t=$(p,"H3",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-1ip92w3"&&(t.textContent=a),r=A(p),s.l(p),p.forEach(m),this.h()},h(){E(t,"class","text-xl font-semibold"),E(e,"class","space-y-4")},m(u,p){N(u,e,p),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,p){let g=n;n=f(u),n===g?c[n].p(u,p):(_e(),y(c[g],1,1,()=>{c[g]=null}),ve(),s=c[n],s?s.p(u,p):(s=c[n]=i[n](u),s.c()),w(s,1),s.m(e,null))},i(u){o||(w(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),c[n].d()}}}function an(l){let e,t,a="Entregas Registradas",r,n,s,o;const i=[cn,sn],c=[];function f(u,p){return u[18].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=F(),s.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var p=I(e);t=$(p,"H3",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-j8lwxw"&&(t.textContent=a),r=A(p),s.l(p),p.forEach(m),this.h()},h(){E(t,"class","text-xl font-semibold"),E(e,"class","space-y-4")},m(u,p){N(u,e,p),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,p){let g=n;n=f(u),n===g?c[n].p(u,p):(_e(),y(c[g],1,1,()=>{c[g]=null}),ve(),s=c[n],s?s.p(u,p):(s=c[n]=i[n](u),s.c()),w(s,1),s.m(e,null))},i(u){o||(w(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),c[n].d()}}}function rn(l){let e,t,a="Devolu√ß√µes Efetuadas",r,n,s,o;const i=[bn,$n],c=[];function f(u,p){return u[19].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=F(),s.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var p=I(e);t=$(p,"H3",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-1wlp2q7"&&(t.textContent=a),r=A(p),s.l(p),p.forEach(m),this.h()},h(){E(t,"class","text-xl font-semibold"),E(e,"class","space-y-4")},m(u,p){N(u,e,p),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,p){let g=n;n=f(u),n===g?c[n].p(u,p):(_e(),y(c[g],1,1,()=>{c[g]=null}),ve(),s=c[n],s?s.p(u,p):(s=c[n]=i[n](u),s.c()),w(s,1),s.m(e,null))},i(u){o||(w(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),c[n].d()}}}function ln(l){let e,t,a='<h3 class="text-xl font-semibold">Equipamentos com o Colaborador</h3>',r,n,s,o;const i=[Dn,wn],c=[];function f(u,p){return u[20].length===0?0:1}return n=f(l),s=c[n]=i[n](l),{c(){e=b("div"),t=b("div"),t.innerHTML=a,r=F(),s.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var p=I(e);t=$(p,"DIV",{class:!0,"data-svelte-h":!0}),De(t)!=="svelte-3kizsl"&&(t.innerHTML=a),r=A(p),s.l(p),p.forEach(m),this.h()},h(){E(t,"class","flex justify-between items-center"),E(e,"class","space-y-4")},m(u,p){N(u,e,p),d(e,t),d(e,r),c[n].m(e,null),o=!0},p(u,p){let g=n;n=f(u),n===g?c[n].p(u,p):(_e(),y(c[g],1,1,()=>{c[g]=null}),ve(),s=c[n],s?s.p(u,p):(s=c[n]=i[n](u),s.c()),w(s,1),s.m(e,null))},i(u){o||(w(s),o=!0)},o(u){y(s),o=!1},d(u){u&&m(e),c[n].d()}}}function nn(l){let e,t=[],a=new Map,r,n=Se(l[17]);const s=o=>o[74].id;for(let o=0;o<n.length;o+=1){let i=wa(l,n,o),c=s(i);a.set(c,t[o]=Na(c,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=$(o,"DIV",{class:!0});var i=I(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(m),this.h()},h(){E(e,"class","space-y-4")},m(o,i){N(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&131072|i[1]&3&&(n=Se(o[17]),_e(),t=ot(t,i,s,1,o,n,a,e,ft,Na,null,wa),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)w(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function on(l){let e,t;return e=new At({props:{icon:"ClockOutline",message:"Nenhum evento registrado",description:"N√£o h√° hist√≥rico de atividades para esta ficha"}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function Va(l){let e,t=l[74].mudancaStatus+"",a;return{c(){e=b("p"),a=j(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=I(e);a=M(n,t),n.forEach(m),this.h()},h(){E(e,"class","text-sm text-blue-600 dark:text-blue-400 mt-1")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n[0]&131072&&t!==(t=r[74].mudancaStatus+"")&&oe(a,t)},d(r){r&&m(e)}}}function qa(l){let e,t=l[74].detalhes.resumo+"",a;return{c(){e=b("p"),a=j(t),this.h()},l(r){e=$(r,"P",{class:!0});var n=I(e);a=M(n,t),n.forEach(m),this.h()},h(){E(e,"class","text-sm text-gray-600 dark:text-gray-400 mt-1")},m(r,n){N(r,e,n),d(e,a)},p(r,n){n[0]&131072&&t!==(t=r[74].detalhes.resumo+"")&&oe(a,t)},d(r){r&&m(e)}}}function Na(l,e){var ee;let t,a,r,n,s,o,i,c,f,u=e[74].tipoDisplay.label+"",p,g,h,C=e[74].acao+"",D,P,z,O=e[74].dataFormatada+"",T,q,L,R,x,K,_=e[74].responsavel+"",k,v,S;r=new Ya({props:{name:e[31](e[74].tipoDisplay.tipo),class:"w-5 h-5"}});let V=e[74].mudancaStatus&&Va(e),B=((ee=e[74].detalhes)==null?void 0:ee.resumo)&&qa(e);return{key:l,first:null,c(){t=b("div"),a=b("div"),J(r.$$.fragment),s=F(),o=b("div"),i=b("div"),c=b("div"),f=b("h4"),p=j(u),g=F(),h=b("p"),D=j(C),P=F(),z=b("span"),T=j(O),q=F(),V&&V.c(),L=F(),B&&B.c(),R=F(),x=b("p"),K=j("Respons√°vel: "),k=j(_),v=F(),this.h()},l(te){t=$(te,"DIV",{class:!0});var re=I(t);a=$(re,"DIV",{class:!0});var le=I(a);G(r.$$.fragment,le),le.forEach(m),s=A(re),o=$(re,"DIV",{class:!0});var ae=I(o);i=$(ae,"DIV",{class:!0});var ue=I(i);c=$(ue,"DIV",{});var me=I(c);f=$(me,"H4",{class:!0});var ge=I(f);p=M(ge,u),ge.forEach(m),g=A(me),h=$(me,"P",{class:!0});var pe=I(h);D=M(pe,C),pe.forEach(m),me.forEach(m),P=A(ue),z=$(ue,"SPAN",{class:!0});var ce=I(z);T=M(ce,O),ce.forEach(m),ue.forEach(m),q=A(ae),V&&V.l(ae),L=A(ae),B&&B.l(ae),R=A(ae),x=$(ae,"P",{class:!0});var X=I(x);K=M(X,"Respons√°vel: "),k=M(X,_),X.forEach(m),ae.forEach(m),v=A(re),re.forEach(m),this.h()},h(){E(a,"class",n=`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${e[32](e[74].tipoDisplay.cor)}`),E(f,"class","font-medium"),E(h,"class","text-sm text-gray-600 dark:text-gray-400"),E(z,"class","text-sm text-gray-500"),E(i,"class","flex items-center justify-between"),E(x,"class","text-xs text-gray-500 mt-1"),E(o,"class","flex-1 min-w-0"),E(t,"class","flex items-start space-x-4"),this.first=t},m(te,re){N(te,t,re),d(t,a),Q(r,a,null),d(t,s),d(t,o),d(o,i),d(i,c),d(c,f),d(f,p),d(c,g),d(c,h),d(h,D),d(i,P),d(i,z),d(z,T),d(o,q),V&&V.m(o,null),d(o,L),B&&B.m(o,null),d(o,R),d(o,x),d(x,K),d(x,k),d(t,v),S=!0},p(te,re){var ae;e=te;const le={};re[0]&131072&&(le.name=e[31](e[74].tipoDisplay.tipo)),r.$set(le),(!S||re[0]&131072&&n!==(n=`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${e[32](e[74].tipoDisplay.cor)}`))&&E(a,"class",n),(!S||re[0]&131072)&&u!==(u=e[74].tipoDisplay.label+"")&&oe(p,u),(!S||re[0]&131072)&&C!==(C=e[74].acao+"")&&oe(D,C),(!S||re[0]&131072)&&O!==(O=e[74].dataFormatada+"")&&oe(T,O),e[74].mudancaStatus?V?V.p(e,re):(V=Va(e),V.c(),V.m(o,L)):V&&(V.d(1),V=null),(ae=e[74].detalhes)!=null&&ae.resumo?B?B.p(e,re):(B=qa(e),B.c(),B.m(o,R)):B&&(B.d(1),B=null),(!S||re[0]&131072)&&_!==(_=e[74].responsavel+"")&&oe(k,_)},i(te){S||(w(r.$$.fragment,te),S=!0)},o(te){y(r.$$.fragment,te),S=!1},d(te){te&&m(t),U(r),V&&V.d(),B&&B.d()}}}function sn(l){let e,t=[],a=new Map,r,n=Se(l[18]);const s=o=>o[65].id;for(let o=0;o<n.length;o+=1){let i=Da(l,n,o),c=s(i);a.set(c,t[o]=Oa(c,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=$(o,"DIV",{class:!0});var i=I(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(m),this.h()},h(){E(e,"class","space-y-3")},m(o,i){N(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&1476657152&&(n=Se(o[18]),_e(),t=ot(t,i,s,1,o,n,a,e,ft,Oa,null,Da),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)w(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function cn(l){let e,t;return e=new At({props:{icon:"TruckOutline",message:"Nenhuma entrega registrada",description:"N√£o h√° hist√≥rico de entregas para este colaborador"}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function fn(l){let e=l[65].statusDisplay.label+"",t;return{c(){t=j(e)},l(a){t=M(a,e)},m(a,r){N(a,t,r)},p(a,r){r[0]&262144&&e!==(e=a[65].statusDisplay.label+"")&&oe(t,e)},d(a){a&&m(t)}}}function Sa(l,e){let t,a,r=e[71].quantidade+"",n,s,o,i=e[71].nomeEquipamento+"",c,f,u=(e[71].numeroCA||e[71].registroCA)+"",p,g,h;return{key:l,first:null,c(){t=b("div"),a=b("span"),n=j(r),s=F(),o=b("div"),c=j(i),f=j(" (CA: "),p=j(u),g=j(")"),h=F(),this.h()},l(C){t=$(C,"DIV",{class:!0});var D=I(t);a=$(D,"SPAN",{class:!0});var P=I(a);n=M(P,r),P.forEach(m),s=A(D),o=$(D,"DIV",{class:!0});var z=I(o);c=M(z,i),f=M(z," (CA: "),p=M(z,u),g=M(z,")"),z.forEach(m),h=A(D),D.forEach(m),this.h()},h(){E(a,"class","inline-flex items-center justify-center w-5 h-5 text-xs font-medium text-white bg-gray-700 rounded"),E(o,"class","px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-sm font-mono text-gray-800 dark:text-gray-200"),E(t,"class","flex items-center space-x-2"),this.first=t},m(C,D){N(C,t,D),d(t,a),d(a,n),d(t,s),d(t,o),d(o,c),d(o,f),d(o,p),d(o,g),d(t,h)},p(C,D){e=C,D[0]&262144&&r!==(r=e[71].quantidade+"")&&oe(n,r),D[0]&262144&&i!==(i=e[71].nomeEquipamento+"")&&oe(c,i),D[0]&262144&&u!==(u=(e[71].numeroCA||e[71].registroCA)+"")&&oe(p,u)},d(C){C&&m(t)}}}function un(l){let e,t,a,r=l[65].numero+"",n,s,o,i,c=l[65].dataEntrega+"",f,u,p,g,h,C,D,P="Itens:",z,O,T=[],q=new Map,L,R;g=new st({props:{color:Ye.getBadgeColor(l[65].statusDisplay.cor),class:"rounded-sm",$$slots:{default:[fn]},$$scope:{ctx:l}}});let x=Se(l[65].itens);const K=_=>_[71].id;for(let _=0;_<x.length;_+=1){let k=Ca(l,x,_),v=K(k);q.set(v,T[_]=Sa(v,k))}return{c(){e=b("div"),t=b("h4"),a=j("Entrega "),n=j(r),s=F(),o=b("p"),i=j("Data: "),f=j(c),u=F(),p=b("div"),J(g.$$.fragment),h=F(),C=b("div"),D=b("p"),D.textContent=P,z=F(),O=b("div");for(let _=0;_<T.length;_+=1)T[_].c();L=F(),this.h()},l(_){e=$(_,"DIV",{slot:!0});var k=I(e);t=$(k,"H4",{class:!0});var v=I(t);a=M(v,"Entrega "),n=M(v,r),v.forEach(m),s=A(k),o=$(k,"P",{class:!0});var S=I(o);i=M(S,"Data: "),f=M(S,c),S.forEach(m),u=A(k),p=$(k,"DIV",{class:!0});var V=I(p);G(g.$$.fragment,V),V.forEach(m),h=A(k),C=$(k,"DIV",{class:!0});var B=I(C);D=$(B,"P",{class:!0,"data-svelte-h":!0}),De(D)!=="svelte-9w833b"&&(D.textContent=P),z=A(B),O=$(B,"DIV",{class:!0});var ee=I(O);for(let te=0;te<T.length;te+=1)T[te].l(ee);ee.forEach(m),B.forEach(m),L=A(k),k.forEach(m),this.h()},h(){E(t,"class","font-medium"),E(o,"class","text-sm text-gray-600 dark:text-gray-400"),E(p,"class","mt-2"),E(D,"class","text-sm font-medium"),E(O,"class","mt-1 space-y-1"),E(C,"class","mt-2"),E(e,"slot","content")},m(_,k){N(_,e,k),d(e,t),d(t,a),d(t,n),d(e,s),d(e,o),d(o,i),d(o,f),d(e,u),d(e,p),Q(g,p,null),d(e,h),d(e,C),d(C,D),d(C,z),d(C,O);for(let v=0;v<T.length;v+=1)T[v]&&T[v].m(O,null);d(e,L),R=!0},p(_,k){(!R||k[0]&262144)&&r!==(r=_[65].numero+"")&&oe(n,r),(!R||k[0]&262144)&&c!==(c=_[65].dataEntrega+"")&&oe(f,c);const v={};k[0]&262144&&(v.color=Ye.getBadgeColor(_[65].statusDisplay.cor)),k[0]&262144|k[2]&262144&&(v.$$scope={dirty:k,ctx:_}),g.$set(v),k[0]&262144&&(x=Se(_[65].itens),T=ot(T,k,K,1,_,x,q,O,ur,Sa,null,Ca))},i(_){R||(w(g.$$.fragment,_),R=!0)},o(_){y(g.$$.fragment,_),R=!1},d(_){_&&m(e),U(g);for(let k=0;k<T.length;k+=1)T[k].d()}}}function dn(l){let e,t;function a(){return l[41](l[65])}return e=new ze({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[pn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){J(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,n){Q(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function mn(l){let e,t;function a(){return l[40](l[65])}return e=new ze({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[hn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){J(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,n){Q(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function gn(l){let e,t;function a(){return l[39](l[65])}return e=new ze({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[_n]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){J(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,n){Q(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function pn(l){let e;return{c(){e=j("Editar")},l(t){e=M(t,"Editar")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function hn(l){let e;return{c(){e=j("Imprimir")},l(t){e=M(t,"Imprimir")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function _n(l){let e;return{c(){e=j("Assinar")},l(t){e=M(t,"Assinar")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function za(l){let e,t,a,r;const n=[gn,mn,dn],s=[];function o(i,c){return i[68]==="assinar"?0:i[68]==="imprimir"?1:i[68]==="editar"?2:-1}return~(e=o(l))&&(t=s[e]=n[e](l)),{c(){t&&t.c(),a=Ce()},l(i){t&&t.l(i),a=Ce()},m(i,c){~e&&s[e].m(i,c),N(i,a,c),r=!0},p(i,c){let f=e;e=o(i),e===f?~e&&s[e].p(i,c):(t&&(_e(),y(s[f],1,1,()=>{s[f]=null}),ve()),~e?(t=s[e],t?t.p(i,c):(t=s[e]=n[e](i),t.c()),w(t,1),t.m(a.parentNode,a)):t=null)},i(i){r||(w(t),r=!0)},o(i){y(t),r=!1},d(i){i&&m(a),~e&&s[e].d(i)}}}function vn(l){let e,t,a,r=Se(l[65].acoes),n=[];for(let o=0;o<r.length;o+=1)n[o]=za(Ia(l,r,o));const s=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){e=b("div");for(let o=0;o<n.length;o+=1)n[o].c();t=F(),this.h()},l(o){e=$(o,"DIV",{slot:!0,class:!0});var i=I(e);for(let c=0;c<n.length;c+=1)n[c].l(i);t=A(i),i.forEach(m),this.h()},h(){E(e,"slot","actions"),E(e,"class","flex space-x-2")},m(o,i){N(o,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);d(e,t),a=!0},p(o,i){if(i[0]&1476657152){r=Se(o[65].acoes);let c;for(c=0;c<r.length;c+=1){const f=Ia(o,r,c);n[c]?(n[c].p(f,i),w(n[c],1)):(n[c]=za(f),n[c].c(),w(n[c],1),n[c].m(e,t))}for(_e(),c=r.length;c<n.length;c+=1)s(c);ve()}},i(o){if(!a){for(let i=0;i<r.length;i+=1)w(n[i]);a=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)y(n[i]);a=!1},d(o){o&&m(e),It(n,o)}}}function Oa(l,e){let t,a,r;return a=new tr({props:{$$slots:{actions:[vn],content:[un]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=Ce(),J(a.$$.fragment),this.h()},l(n){t=Ce(),G(a.$$.fragment,n),this.h()},h(){this.first=t},m(n,s){N(n,t,s),Q(a,n,s),r=!0},p(n,s){e=n;const o={};s[0]&262144|s[2]&262144&&(o.$$scope={dirty:s,ctx:e}),a.$set(o)},i(n){r||(w(a.$$.fragment,n),r=!0)},o(n){y(a.$$.fragment,n),r=!1},d(n){n&&m(t),U(a,n)}}}function $n(l){let e,t=[],a=new Map,r,n=Se(l[19]);const s=o=>o[62].id;for(let o=0;o<n.length;o+=1){let i=ya(l,n,o),c=s(i);a.set(c,t[o]=Ma(c,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=$(o,"DIV",{class:!0});var i=I(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(m),this.h()},h(){E(e,"class","space-y-3")},m(o,i){N(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&524288&&(n=Se(o[19]),_e(),t=ot(t,i,s,1,o,n,a,e,ft,Ma,null,ya),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)w(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function bn(l){let e,t;return e=new At({props:{icon:"TrashBinOutline",message:"Nenhuma devolu√ß√£o registrada",description:"N√£o h√° hist√≥rico de devolu√ß√µes para este colaborador"}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function En(l){let e=l[62].status==="processada"?"Processada":"Cancelada",t;return{c(){t=j(e)},l(a){t=M(a,e)},m(a,r){N(a,t,r)},p(a,r){r[0]&524288&&e!==(e=a[62].status==="processada"?"Processada":"Cancelada")&&oe(t,e)},d(a){a&&m(t)}}}function Ta(l){let e,t,a;return t=new st({props:{color:l[62].condicaoItem==="DANIFICADO"?"yellow":"red",class:"rounded-sm text-xs",$$slots:{default:[kn]},$$scope:{ctx:l}}}),{c(){e=b("div"),J(t.$$.fragment),this.h()},l(r){e=$(r,"DIV",{class:!0});var n=I(e);G(t.$$.fragment,n),n.forEach(m),this.h()},h(){E(e,"class","flex items-center space-x-2")},m(r,n){N(r,e,n),Q(t,e,null),a=!0},p(r,n){const s={};n[0]&524288&&(s.color=r[62].condicaoItem==="DANIFICADO"?"yellow":"red"),n[0]&524288|n[2]&262144&&(s.$$scope={dirty:n,ctx:r}),t.$set(s)},i(r){a||(w(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&m(e),U(t)}}}function kn(l){let e=l[62].condicaoItem+"",t;return{c(){t=j(e)},l(a){t=M(a,e)},m(a,r){N(a,t,r)},p(a,r){r[0]&524288&&e!==(e=a[62].condicaoItem+"")&&oe(t,e)},d(a){a&&m(t)}}}function Ra(l){let e,t,a,r=l[62].observacoes+"",n,s;return{c(){e=b("div"),t=b("p"),a=j('"'),n=j(r),s=j('"'),this.h()},l(o){e=$(o,"DIV",{class:!0});var i=I(e);t=$(i,"P",{class:!0});var c=I(t);a=M(c,'"'),n=M(c,r),s=M(c,'"'),c.forEach(m),i.forEach(m),this.h()},h(){E(t,"class","text-sm text-gray-700 dark:text-gray-300 italic"),E(e,"class","mt-3 p-2 bg-gray-50 dark:bg-gray-700 rounded border-l-4 border-blue-400")},m(o,i){N(o,e,i),d(e,t),d(t,a),d(t,n),d(t,s)},p(o,i){i[0]&524288&&r!==(r=o[62].observacoes+"")&&oe(n,r)},d(o){o&&m(e)}}}function Ma(l,e){let t,a,r,n,s,o=e[62].nomeEquipamento+"",i,c,f,u,p,g,h,C="CA / Categoria",D,P,z=e[62].numeroCA+"",O,T,q=e[62].categoria+"",L,R,x,K,_="Data Devolu√ß√£o",k,v,S=e[62].dataDevolucao+"",V,B,ee,te,re="Motivo",le,ae,ue=e[62].motivoDisplay+"",me,ge,pe,ce,X;f=new st({props:{color:e[62].status==="processada"?"green":"red",class:"rounded-sm",$$slots:{default:[En]},$$scope:{ctx:e}}});let Y=e[62].condicaoItem&&e[62].condicaoItem!=="BOM"&&Ta(e),se=e[62].observacoes&&Ra(e);return{key:l,first:null,c(){t=b("div"),a=b("div"),r=b("div"),n=b("div"),s=b("h4"),i=j(o),c=F(),J(f.$$.fragment),u=F(),p=b("div"),g=b("div"),h=b("span"),h.textContent=C,D=F(),P=b("p"),O=j(z),T=j(" ‚Ä¢ "),L=j(q),R=F(),x=b("div"),K=b("span"),K.textContent=_,k=F(),v=b("p"),V=j(S),B=F(),ee=b("div"),te=b("span"),te.textContent=re,le=F(),ae=b("p"),me=j(ue),ge=F(),Y&&Y.c(),pe=F(),se&&se.c(),ce=F(),this.h()},l($e){t=$($e,"DIV",{class:!0});var H=I(t);a=$(H,"DIV",{class:!0});var ne=I(a);r=$(ne,"DIV",{class:!0});var be=I(r);n=$(be,"DIV",{class:!0});var Ee=I(n);s=$(Ee,"H4",{class:!0});var ke=I(s);i=M(ke,o),ke.forEach(m),c=A(Ee),G(f.$$.fragment,Ee),Ee.forEach(m),u=A(be),p=$(be,"DIV",{class:!0});var qe=I(p);g=$(qe,"DIV",{});var W=I(g);h=$(W,"SPAN",{class:!0,"data-svelte-h":!0}),De(h)!=="svelte-1uekrmz"&&(h.textContent=C),D=A(W),P=$(W,"P",{class:!0});var de=I(P);O=M(de,z),T=M(de," ‚Ä¢ "),L=M(de,q),de.forEach(m),W.forEach(m),R=A(qe),x=$(qe,"DIV",{});var Ie=I(x);K=$(Ie,"SPAN",{class:!0,"data-svelte-h":!0}),De(K)!=="svelte-1nqkj5n"&&(K.textContent=_),k=A(Ie),v=$(Ie,"P",{class:!0});var Pe=I(v);V=M(Pe,S),Pe.forEach(m),Ie.forEach(m),qe.forEach(m),B=A(be),ee=$(be,"DIV",{class:!0});var ie=I(ee);te=$(ie,"SPAN",{class:!0,"data-svelte-h":!0}),De(te)!=="svelte-ti63bd"&&(te.textContent=re),le=A(ie),ae=$(ie,"P",{class:!0});var Ne=I(ae);me=M(Ne,ue),Ne.forEach(m),ie.forEach(m),ge=A(be),Y&&Y.l(be),pe=A(be),se&&se.l(be),be.forEach(m),ne.forEach(m),ce=A(H),H.forEach(m),this.h()},h(){E(s,"class","font-semibold text-gray-900 dark:text-white"),E(n,"class","flex items-center justify-between mb-3"),E(h,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(P,"class","text-sm text-gray-900 dark:text-white"),E(K,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(v,"class","text-sm text-gray-900 dark:text-white"),E(p,"class","grid grid-cols-2 gap-4 mb-3"),E(te,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(ae,"class","text-sm text-gray-900 dark:text-white"),E(ee,"class","mb-3"),E(r,"class","flex-1"),E(a,"class","flex justify-between items-start"),E(t,"class","bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"),this.first=t},m($e,H){N($e,t,H),d(t,a),d(a,r),d(r,n),d(n,s),d(s,i),d(n,c),Q(f,n,null),d(r,u),d(r,p),d(p,g),d(g,h),d(g,D),d(g,P),d(P,O),d(P,T),d(P,L),d(p,R),d(p,x),d(x,K),d(x,k),d(x,v),d(v,V),d(r,B),d(r,ee),d(ee,te),d(ee,le),d(ee,ae),d(ae,me),d(r,ge),Y&&Y.m(r,null),d(r,pe),se&&se.m(r,null),d(t,ce),X=!0},p($e,H){e=$e,(!X||H[0]&524288)&&o!==(o=e[62].nomeEquipamento+"")&&oe(i,o);const ne={};H[0]&524288&&(ne.color=e[62].status==="processada"?"green":"red"),H[0]&524288|H[2]&262144&&(ne.$$scope={dirty:H,ctx:e}),f.$set(ne),(!X||H[0]&524288)&&z!==(z=e[62].numeroCA+"")&&oe(O,z),(!X||H[0]&524288)&&q!==(q=e[62].categoria+"")&&oe(L,q),(!X||H[0]&524288)&&S!==(S=e[62].dataDevolucao+"")&&oe(V,S),(!X||H[0]&524288)&&ue!==(ue=e[62].motivoDisplay+"")&&oe(me,ue),e[62].condicaoItem&&e[62].condicaoItem!=="BOM"?Y?(Y.p(e,H),H[0]&524288&&w(Y,1)):(Y=Ta(e),Y.c(),w(Y,1),Y.m(r,pe)):Y&&(_e(),y(Y,1,1,()=>{Y=null}),ve()),e[62].observacoes?se?se.p(e,H):(se=Ra(e),se.c(),se.m(r,null)):se&&(se.d(1),se=null)},i($e){X||(w(f.$$.fragment,$e),w(Y),X=!0)},o($e){y(f.$$.fragment,$e),y(Y),X=!1},d($e){$e&&m(t),U(f),Y&&Y.d(),se&&se.d()}}}function wn(l){let e,t=[],a=new Map,r,n=Se(l[20]);const s=o=>o[59].id;for(let o=0;o<n.length;o+=1){let i=Pa(l,n,o),c=s(i);a.set(c,t[o]=xa(c,i))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=$(o,"DIV",{class:!0});var i=I(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(m),this.h()},h(){E(e,"class","space-y-3")},m(o,i){N(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i[0]&537919488&&(n=Se(o[20]),_e(),t=ot(t,i,s,1,o,n,a,e,ft,xa,null,Pa),ve())},i(o){if(!r){for(let i=0;i<n.length;i+=1)w(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(o){o&&m(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Dn(l){let e,t;return e=new At({props:{icon:"ClipboardDocumentListOutline",message:"Nenhum equipamento em posse",description:"Este colaborador n√£o possui equipamentos atualmente"}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p:Ve,i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function Cn(l){let e=l[59].statusVencimentoDisplay.texto+"",t;return{c(){t=j(e)},l(a){t=M(a,e)},m(a,r){N(a,t,r)},p(a,r){r[0]&1048576&&e!==(e=a[59].statusVencimentoDisplay.texto+"")&&oe(t,e)},d(a){a&&m(t)}}}function In(l){let e,t,a=l[59].nomeEquipamento+"",r,n,s,o,i=(l[59].numeroCA||l[59].registroCA)+"",c,f,u=l[59].categoria+"",p,g,h,C,D=l[59].dataEntrega+"",P,z,O,T,q,L,R=Ye.formatDaysRemaining(l[59].statusVencimentoDisplay.diasRestantes,l[59].statusVencimentoDisplay.statusDetalhado)+"",x,K,_;return T=new st({props:{color:Ye.getBadgeColor(l[59].statusVencimentoDisplay.cor),class:"rounded-sm",$$slots:{default:[Cn]},$$scope:{ctx:l}}}),{c(){e=b("div"),t=b("h4"),r=j(a),n=F(),s=b("p"),o=j("CA: "),c=j(i),f=j(" ‚Ä¢ "),p=j(u),g=F(),h=b("p"),C=j("Entregue em: "),P=j(D),z=F(),O=b("div"),J(T.$$.fragment),q=F(),L=b("span"),x=j(R),K=F(),this.h()},l(k){e=$(k,"DIV",{slot:!0});var v=I(e);t=$(v,"H4",{class:!0});var S=I(t);r=M(S,a),S.forEach(m),n=A(v),s=$(v,"P",{class:!0});var V=I(s);o=M(V,"CA: "),c=M(V,i),f=M(V," ‚Ä¢ "),p=M(V,u),V.forEach(m),g=A(v),h=$(v,"P",{class:!0});var B=I(h);C=M(B,"Entregue em: "),P=M(B,D),B.forEach(m),z=A(v),O=$(v,"DIV",{class:!0});var ee=I(O);G(T.$$.fragment,ee),q=A(ee),L=$(ee,"SPAN",{class:!0});var te=I(L);x=M(te,R),te.forEach(m),ee.forEach(m),K=A(v),v.forEach(m),this.h()},h(){E(t,"class","font-medium"),E(s,"class","text-sm text-gray-600 dark:text-gray-400"),E(h,"class","text-sm text-gray-600 dark:text-gray-400"),E(L,"class","ml-2 text-sm text-gray-600"),E(O,"class","mt-2"),E(e,"slot","content")},m(k,v){N(k,e,v),d(e,t),d(t,r),d(e,n),d(e,s),d(s,o),d(s,c),d(s,f),d(s,p),d(e,g),d(e,h),d(h,C),d(h,P),d(e,z),d(e,O),Q(T,O,null),d(O,q),d(O,L),d(L,x),d(e,K),_=!0},p(k,v){(!_||v[0]&1048576)&&a!==(a=k[59].nomeEquipamento+"")&&oe(r,a),(!_||v[0]&1048576)&&i!==(i=(k[59].numeroCA||k[59].registroCA)+"")&&oe(c,i),(!_||v[0]&1048576)&&u!==(u=k[59].categoria+"")&&oe(p,u),(!_||v[0]&1048576)&&D!==(D=k[59].dataEntrega+"")&&oe(P,D);const S={};v[0]&1048576&&(S.color=Ye.getBadgeColor(k[59].statusVencimentoDisplay.cor)),v[0]&1048576|v[2]&262144&&(S.$$scope={dirty:v,ctx:k}),T.$set(S),(!_||v[0]&1048576)&&R!==(R=Ye.formatDaysRemaining(k[59].statusVencimentoDisplay.diasRestantes,k[59].statusVencimentoDisplay.statusDetalhado)+"")&&oe(x,R)},i(k){_||(w(T.$$.fragment,k),_=!0)},o(k){y(T.$$.fragment,k),_=!1},d(k){k&&m(e),U(T)}}}function ja(l){let e,t;function a(){return l[38](l[59])}return e=new ze({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[yn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){J(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,n){Q(e,r,n),t=!0},p(r,n){l=r;const s={};n[2]&262144&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function yn(l){let e;return{c(){e=j("Devolver")},l(t){e=M(t,"Devolver")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Pn(l){let e,t,a,r=l[59].podeDevolver&&ja(l);return{c(){e=b("div"),r&&r.c(),t=F(),this.h()},l(n){e=$(n,"DIV",{slot:!0});var s=I(e);r&&r.l(s),t=A(s),s.forEach(m),this.h()},h(){E(e,"slot","actions")},m(n,s){N(n,e,s),r&&r.m(e,null),d(e,t),a=!0},p(n,s){n[59].podeDevolver?r?(r.p(n,s),s[0]&1048576&&w(r,1)):(r=ja(n),r.c(),w(r,1),r.m(e,t)):r&&(_e(),y(r,1,1,()=>{r=null}),ve())},i(n){a||(w(r),a=!0)},o(n){y(r),a=!1},d(n){n&&m(e),r&&r.d()}}}function xa(l,e){let t,a,r;return a=new tr({props:{$$slots:{actions:[Pn],content:[In]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=Ce(),J(a.$$.fragment),this.h()},l(n){t=Ce(),G(a.$$.fragment,n),this.h()},h(){this.first=t},m(n,s){N(n,t,s),Q(a,n,s),r=!0},p(n,s){e=n;const o={};s[0]&1048576|s[2]&262144&&(o.$$scope={dirty:s,ctx:e}),a.$set(o)},i(n){r||(w(a.$$.fragment,n),r=!0)},o(n){y(a.$$.fragment,n),r=!1},d(n){n&&m(t),U(a,n)}}}function An(l){var f,u,p;let e,t,a,r,n,s;e=new ut({props:{title:((f=l[15])==null?void 0:f.nome)||"Nome n√£o dispon√≠vel",objectType:"FICHA EPI",iconName:"UserOutline",status:(p=(u=l[16])==null?void 0:u.ficha)==null?void 0:p.status,statusType:"ficha",additionalInfo:l[23],primaryAction:{text:"Nova Entrega",icon:"PlusOutline"}}}),e.$on("close",l[25]),e.$on("primaryAction",l[26]);const o=[en,Zl,Yl,Xl],i=[];function c(g,h){return g[6]?0:g[7]?1:g[16]?2:3}return a=c(l),r=i[a]=o[a](l),{c(){J(e.$$.fragment),t=F(),r.c(),n=Ce()},l(g){G(e.$$.fragment,g),t=A(g),r.l(g),n=Ce()},m(g,h){Q(e,g,h),N(g,t,h),i[a].m(g,h),N(g,n,h),s=!0},p(g,h){var P,z,O;const C={};h[0]&32768&&(C.title=((P=g[15])==null?void 0:P.nome)||"Nome n√£o dispon√≠vel"),h[0]&65536&&(C.status=(O=(z=g[16])==null?void 0:z.ficha)==null?void 0:O.status),h[0]&8388608&&(C.additionalInfo=g[23]),e.$set(C);let D=a;a=c(g),a===D?i[a].p(g,h):(_e(),y(i[D],1,1,()=>{i[D]=null}),ve(),r=i[a],r?r.p(g,h):(r=i[a]=o[a](g),r.c()),w(r,1),r.m(n.parentNode,n))},i(g){s||(w(e.$$.fragment,g),w(r),s=!0)},o(g){y(e.$$.fragment,g),y(r),s=!1},d(g){g&&(m(t),m(n)),U(e,g),i[a].d(g)}}}function Fn(l){let e,t,a,r,n,s,o,i,c,f,u,p,g,h,C;function D(_){l[42](_)}let P={placement:"right",width:"w-full max-w-[940px]",backdrop:!l[22],activateClickOutside:!l[22],bgOpacity:"bg-black/50",position:"fixed",id:"ficha-detail-drawer",class:"drawer-ficha",$$slots:{default:[An]},$$scope:{ctx:l}};l[14]!==void 0&&(P.hidden=l[14]),e=new $r({props:P}),Me.push(()=>je(e,"hidden",D));function z(_){l[43](_)}let O={episDisponiveis:l[4],usuarios:l[5],loading:l[8]};l[0]!==void 0&&(O.show=l[0]),r=new Cl({props:O}),Me.push(()=>je(r,"show",z)),r.$on("salvar",l[44]),r.$on("cancelar",l[45]);function T(_){l[46](_)}let q={episDisponiveis:l[4],entrega:l[11],loading:l[8]};l[1]!==void 0&&(q.show=l[1]),o=new Rl({props:q}),Me.push(()=>je(o,"show",T)),o.$on("salvar",l[47]),o.$on("cancelar",l[48]);function L(_){l[49](_)}let R={equipamento:l[12],loading:l[10]};l[2]!==void 0&&(R.show=l[2]),f=new Ul({props:R}),Me.push(()=>je(f,"show",L)),f.$on("confirmar",l[50]),f.$on("cancelar",l[51]);function x(_){l[52](_)}let K={entrega:l[13],loading:l[9]};return l[3]!==void 0&&(K.show=l[3]),g=new Kl({props:K}),Me.push(()=>je(g,"show",x)),g.$on("confirmar",l[53]),g.$on("cancelar",l[54]),{c(){J(e.$$.fragment),a=F(),J(r.$$.fragment),s=F(),J(o.$$.fragment),c=F(),J(f.$$.fragment),p=F(),J(g.$$.fragment)},l(_){G(e.$$.fragment,_),a=A(_),G(r.$$.fragment,_),s=A(_),G(o.$$.fragment,_),c=A(_),G(f.$$.fragment,_),p=A(_),G(g.$$.fragment,_)},m(_,k){Q(e,_,k),N(_,a,k),Q(r,_,k),N(_,s,k),Q(o,_,k),N(_,c,k),Q(f,_,k),N(_,p,k),Q(g,_,k),C=!0},p(_,k){const v={};k[0]&4194304&&(v.backdrop=!_[22]),k[0]&4194304&&(v.activateClickOutside=!_[22]),k[0]&12550336|k[2]&262144&&(v.$$scope={dirty:k,ctx:_}),!t&&k[0]&16384&&(t=!0,v.hidden=_[14],xe(()=>t=!1)),e.$set(v);const S={};k[0]&16&&(S.episDisponiveis=_[4]),k[0]&32&&(S.usuarios=_[5]),k[0]&256&&(S.loading=_[8]),!n&&k[0]&1&&(n=!0,S.show=_[0],xe(()=>n=!1)),r.$set(S);const V={};k[0]&16&&(V.episDisponiveis=_[4]),k[0]&2048&&(V.entrega=_[11]),k[0]&256&&(V.loading=_[8]),!i&&k[0]&2&&(i=!0,V.show=_[1],xe(()=>i=!1)),o.$set(V);const B={};k[0]&4096&&(B.equipamento=_[12]),k[0]&1024&&(B.loading=_[10]),!u&&k[0]&4&&(u=!0,B.show=_[2],xe(()=>u=!1)),f.$set(B);const ee={};k[0]&8192&&(ee.entrega=_[13]),k[0]&512&&(ee.loading=_[9]),!h&&k[0]&8&&(h=!0,ee.show=_[3],xe(()=>h=!1)),g.$set(ee)},i(_){C||(w(e.$$.fragment,_),w(r.$$.fragment,_),w(o.$$.fragment,_),w(f.$$.fragment,_),w(g.$$.fragment,_),C=!0)},o(_){y(e.$$.fragment,_),y(r.$$.fragment,_),y(o.$$.fragment,_),y(f.$$.fragment,_),y(g.$$.fragment,_),C=!1},d(_){_&&(m(a),m(s),m(c),m(p)),U(e,_),U(r,_),U(o,_),U(f,_),U(g,_)}}}function Vn(l,e,t){let a,r,n,s,o,i,c,f,{fichaCompleteData:u=null}=e,{episDisponiveis:p=[]}=e,{usuarios:g=[]}=e,{loading:h=!1}=e,{error:C=null}=e,{entregaLoading:D=!1}=e,{assinaturaLoading:P=!1}=e,{devolucaoLoading:z=!1}=e,{showNovaEntregaDrawer:O=!1}=e,{showEditarEntregaDrawer:T=!1}=e,{showDevolucaoModal:q=!1}=e,{showAssinaturaModal:L=!1}=e,{entregaEdicao:R=null}=e,{equipamentoDevolucao:x=null}=e,{entregaAssinatura:K=null}=e,{open:_=!1}=e,k=!_,v=_,S="equipamentos";const V=Ze();function B(){V("close")}let ee=k;function te(){V("novaEntrega")}function re(Z){V("editarEntrega",{entrega:Z})}function le(Z){V("assinarEntrega",{entrega:Z})}function ae(Z){V("devolverEquipamento",{equipamento:Z})}function ue(Z){V("imprimirEntrega",{entrega:Z})}function me(Z){return Ye.getEventIcon(Z)}function ge(Z){return Ye.getColorClasses(Z)}const pe=Z=>t(21,S=Z.id),ce=Z=>ae(Z),X=Z=>le(Z),Y=Z=>ue(Z),se=Z=>re(Z);function $e(Z){k=Z,t(14,k),t(34,_),t(35,v)}function H(Z){O=Z,t(0,O)}const ne=Z=>V("salvarNovaEntrega",Z.detail),be=()=>V("cancelarNovaEntrega");function Ee(Z){T=Z,t(1,T)}const ke=Z=>V("salvarEdicaoEntrega",Z.detail),qe=()=>V("cancelarEdicaoEntrega");function W(Z){q=Z,t(2,q)}const de=Z=>V("confirmarDevolucao",Z.detail),Ie=()=>V("cancelarDevolucao");function Pe(Z){L=Z,t(3,L)}const ie=Z=>V("confirmarAssinatura",Z.detail),Ne=()=>V("cancelarAssinatura");return l.$$set=Z=>{"fichaCompleteData"in Z&&t(33,u=Z.fichaCompleteData),"episDisponiveis"in Z&&t(4,p=Z.episDisponiveis),"usuarios"in Z&&t(5,g=Z.usuarios),"loading"in Z&&t(6,h=Z.loading),"error"in Z&&t(7,C=Z.error),"entregaLoading"in Z&&t(8,D=Z.entregaLoading),"assinaturaLoading"in Z&&t(9,P=Z.assinaturaLoading),"devolucaoLoading"in Z&&t(10,z=Z.devolucaoLoading),"showNovaEntregaDrawer"in Z&&t(0,O=Z.showNovaEntregaDrawer),"showEditarEntregaDrawer"in Z&&t(1,T=Z.showEditarEntregaDrawer),"showDevolucaoModal"in Z&&t(2,q=Z.showDevolucaoModal),"showAssinaturaModal"in Z&&t(3,L=Z.showAssinaturaModal),"entregaEdicao"in Z&&t(11,R=Z.entregaEdicao),"equipamentoDevolucao"in Z&&t(12,x=Z.equipamentoDevolucao),"entregaAssinatura"in Z&&t(13,K=Z.entregaAssinatura),"open"in Z&&t(34,_=Z.open)},l.$$.update=()=>{var Z,ye;l.$$.dirty[0]&16384|l.$$.dirty[1]&24&&_!==v&&(console.log("üîÑ Sincronizando drawer (open changed):",{open:_,hidden:k,lastOpen:v}),t(14,k=!_),t(35,v=_)),l.$$.dirty[0]&16448|l.$$.dirty[1]&12&&_&&console.log("üéØ FichaDetailPresenter: Drawer foi aberto, carregando dados...",{open:_,hidden:k,fichaCompleteData:!!u,loading:h}),l.$$.dirty[1]&4&&t(16,a=u==null?void 0:u.data),l.$$.dirty[0]&65536&&t(15,r=(Z=a==null?void 0:a.ficha)==null?void 0:Z.colaborador),l.$$.dirty[0]&65536&&t(20,n=(a==null?void 0:a.equipamentosEmPosse)||[]),l.$$.dirty[0]&65536&&t(19,s=(a==null?void 0:a.devolucoes)||[]),l.$$.dirty[0]&65536&&t(18,o=(a==null?void 0:a.entregas)||[]),l.$$.dirty[0]&65536&&t(17,i=(a==null?void 0:a.historico)||[]),l.$$.dirty[0]&65536&&(a==null||a.estatisticas),l.$$.dirty[0]&2031616&&a&&(console.log("üéØ FichaDetailPresenter - dados reativos atualizados:"),console.log("  - Equipamentos em posse:",(n==null?void 0:n.length)||0),console.log("  - Devolu√ß√µes:",(s==null?void 0:s.length)||0),console.log("  - Entregas:",(o==null?void 0:o.length)||0),console.log("  - Hist√≥rico:",(i==null?void 0:i.length)||0)),l.$$.dirty[0]&65536&&(ye=a==null?void 0:a.ficha)!=null&&ye.statusDisplay&&Ye.getStatusConfig(a.ficha.statusDisplay.label,a.ficha.statusDisplay.cor),l.$$.dirty[0]&32768&&t(23,c=r?[r.cpfDisplay||r.cpf||"CPF n√£o dispon√≠vel",`${r.cargo||"Cargo n√£o informado"} ‚Ä¢ ${r.empresa||"Empresa n√£o informada"}`]:[]),l.$$.dirty[0]&16384|l.$$.dirty[1]&40&&k!==ee&&(console.log("üîÑ Hidden changed:",{hidden:k,lastHidden:ee,open:_}),k&&_&&(console.log("üéØ Drawer fechado externamente, notificando Container"),V("close")),t(36,ee=k)),l.$$.dirty[0]&15&&t(22,f=O||T||q||L)},[O,T,q,L,p,g,h,C,D,P,z,R,x,K,k,r,a,i,o,s,n,S,f,c,V,B,te,re,le,ae,ue,me,ge,u,_,v,ee,pe,ce,X,Y,se,$e,H,ne,be,Ee,ke,qe,W,de,Ie,Pe,ie,Ne]}class qn extends Qe{constructor(e){super(),Ge(this,e,Vn,Fn,Je,{fichaCompleteData:33,episDisponiveis:4,usuarios:5,loading:6,error:7,entregaLoading:8,assinaturaLoading:9,devolucaoLoading:10,showNovaEntregaDrawer:0,showEditarEntregaDrawer:1,showDevolucaoModal:2,showAssinaturaModal:3,entregaEdicao:11,equipamentoDevolucao:12,entregaAssinatura:13,open:34},null,[-1,-1,-1])}}function Nn(l){let e,t;const a=[l[0]];let r={};for(let n=0;n<a.length;n+=1)r=rr(r,a[n]);return e=new qn({props:r}),e.$on("close",l[1]),e.$on("novaEntrega",l[2]),e.$on("salvarNovaEntrega",l[3]),e.$on("cancelarNovaEntrega",l[4]),e.$on("editarEntrega",l[5]),e.$on("salvarEdicaoEntrega",l[6]),e.$on("cancelarEdicaoEntrega",l[7]),e.$on("assinarEntrega",l[8]),e.$on("confirmarAssinatura",l[9]),e.$on("cancelarAssinatura",l[10]),e.$on("devolverEquipamento",l[11]),e.$on("confirmarDevolucao",l[12]),e.$on("cancelarDevolucao",l[13]),e.$on("cancelarEntrega",l[14]),e.$on("imprimirEntrega",l[15]),{c(){J(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,s){Q(e,n,s),t=!0},p(n,s){const o=s[0]&1?dr(a,[mr(n[0])]):{};e.$set(o)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function Sn(l,e,t){let a,r;Ga(l,ol,X=>t(34,r=X));let{open:n=!1}=e,{fichaId:s=null}=e;const o=Ze();let i=null,c=[],f=[],u=!0,p=null,g=!1,h=!1,C=!1,D=!1,P=!1,z=!1,O=!1,T=null,q=null,L=null,R=null;Ja(()=>{console.log("üöÄ FichaDetailContainer: Inicializando..."),Promise.all([K(),_()])});async function x(){var X,Y,se,$e,H,ne,be,Ee;if(s){t(21,u=!0),t(22,p=null),t(33,R=s);try{console.log("üìã FichaDetailContainer: Carregando ficha completa:",s),t(18,i=await vt.getFichaComplete(s)),console.log("‚úÖ Dados da ficha carregados"),console.log("üîç Equipamentos em posse:",((Y=(X=i==null?void 0:i.data)==null?void 0:X.equipamentosEmPosse)==null?void 0:Y.length)||0),console.log("üîÑ Devolu√ß√µes:",(($e=(se=i==null?void 0:i.data)==null?void 0:se.devolucoes)==null?void 0:$e.length)||0),console.log("üöö Entregas:",((ne=(H=i==null?void 0:i.data)==null?void 0:H.entregas)==null?void 0:ne.length)||0),console.log("üìù Hist√≥rico:",((Ee=(be=i==null?void 0:i.data)==null?void 0:be.historico)==null?void 0:Ee.length)||0)}catch(ke){console.error("‚ùå Erro ao carregar ficha:",ke),t(22,p=ke instanceof Error?ke.message:"Erro desconhecido"),Oe.error("Erro ao carregar ficha","N√£o foi poss√≠vel carregar os dados da ficha")}finally{t(21,u=!1)}}}async function K(){try{console.log("üöÄ FichaDetailContainer: Carregando EPIs dispon√≠veis..."),t(19,c=await vt.getEPIsDisponiveis()),console.log("üì¶ EPIs dispon√≠veis carregados:",c.length),console.log("üì¶ Estrutura dos EPIs:",c.slice(0,2));const X=c.filter(Y=>Y.disponivel&&Y.quantidadeDisponivel>0);console.log("üéØ EPIs com estoque dispon√≠vel:",X.length),X.length===0&&(console.warn("‚ö†Ô∏è ATEN√á√ÉO: Nenhum EPI com estoque dispon√≠vel encontrado!"),console.log("üîç EPIs sem estoque:",c.map(Y=>({nome:Y.nomeEquipamento,quantidade:Y.quantidadeDisponivel,disponivel:Y.disponivel}))))}catch(X){throw console.error("‚ùå Erro ao carregar EPIs dispon√≠veis:",X),X}}async function _(){try{console.log("üë§ FichaDetailContainer: Carregando usu√°rios..."),t(20,f=await vt.getUsuarios()),console.log("üë• Usu√°rios carregados:",f==null?void 0:f.length),console.log("üë• Estrutura dos usu√°rios:",f==null?void 0:f.slice(0,2))}catch(X){throw console.error("‚ùå Erro ao carregar usu√°rios:",X),X}}function k(){t(16,n=!1),t(33,R=null),t(18,i=null),t(22,p=null),t(23,g=!1),t(24,h=!1),t(25,C=!1),t(26,D=!1),o("close"),console.log("‚ùå Drawer fechado")}async function v(){console.log("‚ûï Abrindo formul√°rio de nova entrega"),console.log("üì¶ Estado atual dos EPIs:",c.length,"EPIs carregados"),c.length===0&&(console.log("üîÑ EPIs n√£o carregados, carregando agora..."),await K(),console.log("üì¶ Ap√≥s recarregar:",c.length,"EPIs dispon√≠veis")),console.log("üì¶ EPIs que ser√£o passados para o drawer:",c),t(23,g=!0)}async function S(X){var Y;if(s){t(27,P=!0);try{if(console.log("üíæ FichaDetailContainer: Criando nova entrega..."),console.log("üîç Respons√°vel ID:",X.detail.usuarioResponsavelId),console.log("üîç Quantidade de itens:",((Y=X.detail.itens)==null?void 0:Y.length)||0),!X.detail.usuarioResponsavelId)throw new Error("usuarioResponsavelId √© obrigat√≥rio");if(!X.detail.itens||X.detail.itens.length===0)throw new Error("Pelo menos um item deve ser selecionado");const se={fichaEpiId:s,responsavelId:X.detail.usuarioResponsavelId,itens:X.detail.itens.map(H=>{const ne=c.find(be=>be.episDisponivelId===H.episDisponivelId);return{estoqueItemId:(ne==null?void 0:ne.estoqueItemId)||H.episDisponivelId,quantidade:H.quantidade}}),observacoes:X.detail.observacoes||""};console.log("üìã Payload da entrega:",se);const $e=await _t.createDelivery(se);t(23,g=!1),await x(),Oe.success("Entrega criada",`Entrega ${$e.data.entregaId} criada com ${$e.data.totalItens} itens`),o("fichaUpdated",{fichaId:s})}catch(se){console.error("‚ùå Erro ao salvar nova entrega:",se);let $e="Erro ao criar entrega",H="Erro desconhecido";if(se instanceof Error)switch(se.name){case"EstoqueItemNotFoundError":$e="Item de estoque n√£o encontrado",H="Os EPIs selecionados n√£o possuem estoque dispon√≠vel no almoxarifado. Verifique se h√° itens em estoque antes de criar a entrega.";break;case"ValidationError":$e="Dados de entrega inv√°lidos",H="Verifique se todos os campos obrigat√≥rios est√£o preenchidos e tente novamente.";break;default:se.message.includes("Cannot GET")||se.message.includes("404")?($e="Servi√ßo indispon√≠vel",H="O servi√ßo de entregas est√° temporariamente indispon√≠vel. Alguns endpoints do backend n√£o est√£o implementados. Tente novamente mais tarde."):se.message.includes("Network error")||se.message.includes("timeout")?($e="Erro de conex√£o",H="Problema de conex√£o com o servidor. Verifique sua internet e tente novamente."):se.message.includes("Validation error")?($e="Dados inv√°lidos",H="Os dados fornecidos s√£o inv√°lidos. Verifique os campos e tente novamente. Detalhes: "+se.message):H=se.message;break}Oe.error($e,H),console.log("‚ÑπÔ∏è Drawer mantido aberto para corre√ß√£o dos dados")}finally{t(27,P=!1)}}}function V(){t(23,g=!1),console.log("‚ùå Nova entrega cancelada")}function B(X){t(30,T=X.detail.entrega),t(24,h=!0),console.log("‚úèÔ∏è Editando entrega:",T.id)}async function ee(X){if(T){t(27,P=!0);try{console.log("üíæ FichaDetailContainer: Editando entrega:",X.detail);const Y={responsavelId:X.detail.responsavelId,itens:X.detail.itens.map(se=>({estoqueItemId:se.estoqueItemId,quantidade:se.quantidade})),observacoes:X.detail.observacoes};await _t.updateDelivery(T.id,Y),t(24,h=!1),t(30,T=null),await x(),Oe.success("Entrega atualizada","Entrega foi atualizada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Y){console.error("‚ùå Erro ao editar entrega:",Y),Oe.error("Erro ao editar","N√£o foi poss√≠vel atualizar a entrega")}finally{t(27,P=!1)}}}function te(){t(24,h=!1),t(30,T=null),console.log("‚ùå Edi√ß√£o de entrega cancelada")}function re(X){t(32,L=X.detail.entrega),t(26,D=!0),console.log("‚úçÔ∏è Iniciando assinatura da entrega:",L.id)}async function le(X){if(L){t(28,z=!0);try{console.log("‚úçÔ∏è FichaDetailContainer: Confirmando assinatura:",X.detail);const Y={assinatura:X.detail.assinatura};await _t.confirmSignature(L.id,Y),t(26,D=!1),t(32,L=null),await x(),Oe.success("Assinatura registrada","Entrega foi assinada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Y){console.error("‚ùå Erro ao processar assinatura:",Y),Oe.error("Erro na assinatura","N√£o foi poss√≠vel registrar a assinatura")}finally{t(28,z=!1)}}}function ae(){t(26,D=!1),t(32,L=null),console.log("‚ùå Assinatura cancelada")}function ue(X){t(31,q=X.detail.equipamento),t(25,C=!0),console.log("üîÑ Iniciando devolu√ß√£o:",q.id)}async function me(X){if(q){t(29,O=!0);try{console.log("üîÑ FichaDetailContainer: Processando devolu√ß√£o:",X.detail);const Y={devolucoes:[{equipamentoId:q.id,motivo:X.detail.motivo,observacoes:X.detail.observacoes||"Devolu√ß√£o via interface da ficha"}]},se=await Ar.processReturns(Y);if(se.data.erros.length>0)throw new Error(`Erro na devolu√ß√£o: ${se.data.erros[0].erro}`);t(25,C=!1),t(31,q=null),await x(),Oe.success("Devolu√ß√£o registrada","Equipamento foi devolvido com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Y){console.error("‚ùå Erro ao processar devolu√ß√£o:",Y),Oe.error("Erro na devolu√ß√£o","N√£o foi poss√≠vel registrar a devolu√ß√£o")}finally{t(29,O=!1)}}}function ge(){t(25,C=!1),t(31,q=null),console.log("‚ùå Devolu√ß√£o cancelada")}async function pe(X){try{console.log("‚ùå FichaDetailContainer: Cancelando entrega:",X.detail);const Y={motivo:X.detail.motivo};await _t.cancelDelivery(X.detail.entrega.id,Y),await x(),Oe.success("Entrega cancelada","Entrega foi cancelada com sucesso"),o("fichaUpdated",{fichaId:s})}catch(Y){console.error("‚ùå Erro ao cancelar entrega:",Y),Oe.error("Erro ao cancelar","N√£o foi poss√≠vel cancelar a entrega")}}function ce(X){console.log("üñ®Ô∏è Imprimindo entrega:",X.detail.entrega.id),Oe.info("Fun√ß√£o em desenvolvimento","Impress√£o ser√° implementada em breve")}return l.$$set=X=>{"open"in X&&t(16,n=X.open),"fichaId"in X&&t(17,s=X.fichaId)},l.$$.update=()=>{if(l.$$.dirty[0]&196608&&n&&s&&console.log("üéØ FichaDetailContainer: Estado open mudou para true, fichaId:",s),l.$$.dirty[0]&393216|l.$$.dirty[1]&8&&s&&r.has(s)){const X=r.get(s);X&&i!==X&&(t(18,i=X),console.log("üîÑ Dados completos atualizados via store reativo:",s))}l.$$.dirty[0]&196608|l.$$.dirty[1]&4&&n&&s&&s!==R&&x(),l.$$.dirty[0]&2147287040|l.$$.dirty[1]&3&&t(0,a={fichaCompleteData:i,episDisponiveis:c,usuarios:f,loading:u,error:p,entregaLoading:P,assinaturaLoading:z,devolucaoLoading:O,showNovaEntregaDrawer:g,showEditarEntregaDrawer:h,showDevolucaoModal:C,showAssinaturaModal:D,entregaEdicao:T,equipamentoDevolucao:q,entregaAssinatura:L,open:n})},[a,k,v,S,V,B,ee,te,re,le,ae,ue,me,ge,pe,ce,n,s,i,c,f,u,p,g,h,C,D,P,z,O,T,q,L,R,r]}class zn extends Qe{constructor(e){super(),Ge(this,e,Sn,Nn,Je,{open:16,fichaId:17},null,[-1,-1])}}function La(l){let e,t;return e=new Vt({props:{error:l[2],onRetry:l[14]}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&4&&(n.error=a[2]),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function On(l){let e,t;return e=new nt({props:{options:l[3],value:l[6],placeholder:"Selecione uma contratada...",disabled:l[1]}}),e.$on("change",l[11]),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Q(e,a,r),t=!0},p(a,r){const n={};r&8&&(n.options=a[3]),r&64&&(n.value=a[6]),r&2&&(n.disabled=a[1]),e.$set(n)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function Tn(l){let e,t,a,r,n="Carregando...",s;return t=new yt({props:{size:"sm"}}),{c(){e=b("div"),J(t.$$.fragment),a=F(),r=b("span"),r.textContent=n,this.h()},l(o){e=$(o,"DIV",{class:!0});var i=I(e);G(t.$$.fragment,i),a=A(i),r=$(i,"SPAN",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-1v5o0hb"&&(r.textContent=n),i.forEach(m),this.h()},h(){E(r,"class","ml-2 text-sm text-gray-600"),E(e,"class","flex items-center justify-center py-4 min-h-[42px]")},m(o,i){N(o,e,i),Q(t,e,null),d(e,a),d(e,r),s=!0},p:Ve,i(o){s||(w(t.$$.fragment,o),s=!0)},o(o){y(t.$$.fragment,o),s=!1},d(o){o&&m(e),U(t)}}}function Rn(l){let e,t,a,r;e=new nt({props:{options:l[9],value:l[7],placeholder:l[6]?"Selecione um colaborador...":"Primeiro selecione uma contratada",disabled:l[1]||!l[6]}}),e.$on("change",l[12]);let n=l[9].length===0&&l[6]&&Ha();return{c(){J(e.$$.fragment),t=F(),n&&n.c(),a=Ce()},l(s){G(e.$$.fragment,s),t=A(s),n&&n.l(s),a=Ce()},m(s,o){Q(e,s,o),N(s,t,o),n&&n.m(s,o),N(s,a,o),r=!0},p(s,o){const i={};o&512&&(i.options=s[9]),o&128&&(i.value=s[7]),o&64&&(i.placeholder=s[6]?"Selecione um colaborador...":"Primeiro selecione uma contratada"),o&66&&(i.disabled=s[1]||!s[6]),e.$set(i),s[9].length===0&&s[6]?n||(n=Ha(),n.c(),n.m(a.parentNode,a)):n&&(n.d(1),n=null)},i(s){r||(w(e.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),r=!1},d(s){s&&(m(t),m(a)),U(e,s),n&&n.d(s)}}}function Mn(l){let e,t,a,r,n="Carregando...",s;return t=new yt({props:{size:"sm"}}),{c(){e=b("div"),J(t.$$.fragment),a=F(),r=b("span"),r.textContent=n,this.h()},l(o){e=$(o,"DIV",{class:!0});var i=I(e);G(t.$$.fragment,i),a=A(i),r=$(i,"SPAN",{class:!0,"data-svelte-h":!0}),De(r)!=="svelte-1v5o0hb"&&(r.textContent=n),i.forEach(m),this.h()},h(){E(r,"class","ml-2 text-sm text-gray-600"),E(e,"class","flex items-center justify-center py-4 min-h-[42px]")},m(o,i){N(o,e,i),Q(t,e,null),d(e,a),d(e,r),s=!0},p:Ve,i(o){s||(w(t.$$.fragment,o),s=!0)},o(o){y(t.$$.fragment,o),s=!1},d(o){o&&m(e),U(t)}}}function Ha(l){let e,t="Nenhum colaborador encontrado para esta contratada";return{c(){e=b("p"),e.textContent=t,this.h()},l(a){e=$(a,"P",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-1fkc00j"&&(e.textContent=t),this.h()},h(){E(e,"class","text-sm text-gray-500 mt-1")},m(a,r){N(a,e,r)},d(a){a&&m(e)}}}function jn(l){let e,t,a,r,n="Contratada",s,o,i,c,f,u,p="Colaborador",g,h,C,D,P=l[2]&&La(l);const z=[Tn,On],O=[];function T(x,K){return x[4]?0:1}o=T(l),i=O[o]=z[o](l);const q=[Mn,Rn],L=[];function R(x,K){return x[5]?0:1}return h=R(l),C=L[h]=q[h](l),{c(){P&&P.c(),e=F(),t=b("div"),a=b("div"),r=b("label"),r.textContent=n,s=F(),i.c(),c=F(),f=b("div"),u=b("label"),u.textContent=p,g=F(),C.c(),this.h()},l(x){P&&P.l(x),e=A(x),t=$(x,"DIV",{class:!0});var K=I(t);a=$(K,"DIV",{});var _=I(a);r=$(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),De(r)!=="svelte-6kjk6u"&&(r.textContent=n),s=A(_),i.l(_),_.forEach(m),c=A(K),f=$(K,"DIV",{});var k=I(f);u=$(k,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),De(u)!=="svelte-funhjy"&&(u.textContent=p),g=A(k),C.l(k),k.forEach(m),K.forEach(m),this.h()},h(){E(r,"for","contratada-select"),E(r,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(u,"for","colaborador-select"),E(u,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(t,"class","space-y-4")},m(x,K){P&&P.m(x,K),N(x,e,K),N(x,t,K),d(t,a),d(a,r),d(a,s),O[o].m(a,null),d(t,c),d(t,f),d(f,u),d(f,g),L[h].m(f,null),D=!0},p(x,K){x[2]?P?(P.p(x,K),K&4&&w(P,1)):(P=La(x),P.c(),w(P,1),P.m(e.parentNode,e)):P&&(_e(),y(P,1,1,()=>{P=null}),ve());let _=o;o=T(x),o===_?O[o].p(x,K):(_e(),y(O[_],1,1,()=>{O[_]=null}),ve(),i=O[o],i?i.p(x,K):(i=O[o]=z[o](x),i.c()),w(i,1),i.m(a,null));let k=h;h=R(x),h===k?L[h].p(x,K):(_e(),y(L[k],1,1,()=>{L[k]=null}),ve(),C=L[h],C?C.p(x,K):(C=L[h]=q[h](x),C.c()),w(C,1),C.m(f,null))},i(x){D||(w(P),w(i),w(C),D=!0)},o(x){y(P),y(i),y(C),D=!1},d(x){x&&(m(e),m(t)),P&&P.d(x),O[o].d(),L[h].d()}}}function xn(l){let e;return{c(){e=j("Cancelar")},l(t){e=M(t,"Cancelar")},m(t,a){N(t,e,a)},d(t){t&&m(e)}}}function Ln(l){let e;return{c(){e=j("Criar Ficha")},l(t){e=M(t,"Criar Ficha")},m(t,a){N(t,e,a)},i:Ve,o:Ve,d(t){t&&m(e)}}}function Hn(l){let e,t,a;return e=new ir({props:{class:"mr-2",size:"4"}}),{c(){J(e.$$.fragment),t=j(`
        Criando...`)},l(r){G(e.$$.fragment,r),t=M(r,`
        Criando...`)},m(r,n){Q(e,r,n),N(r,t,n),a=!0},i(r){a||(w(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&m(t),U(e,r)}}}function Bn(l){let e,t,a,r;const n=[Hn,Ln],s=[];function o(i,c){return i[1]?0:1}return e=o(l),t=s[e]=n[e](l),{c(){t.c(),a=Ce()},l(i){t.l(i),a=Ce()},m(i,c){s[e].m(i,c),N(i,a,c),r=!0},p(i,c){let f=e;e=o(i),e!==f&&(_e(),y(s[f],1,1,()=>{s[f]=null}),ve(),t=s[e],t||(t=s[e]=n[e](i),t.c()),w(t,1),t.m(a.parentNode,a))},i(i){r||(w(t),r=!0)},o(i){y(t),r=!1},d(i){i&&m(a),s[e].d(i)}}}function Un(l){let e,t,a,r;return e=new ze({props:{color:"alternative",size:"sm",class:"rounded-sm",disabled:l[1],$$slots:{default:[xn]},$$scope:{ctx:l}}}),e.$on("click",l[10]),a=new ze({props:{color:"primary",size:"sm",class:"rounded-sm",disabled:!l[8],$$slots:{default:[Bn]},$$scope:{ctx:l}}}),a.$on("click",l[13]),{c(){J(e.$$.fragment),t=F(),J(a.$$.fragment)},l(n){G(e.$$.fragment,n),t=A(n),G(a.$$.fragment,n)},m(n,s){Q(e,n,s),N(n,t,s),Q(a,n,s),r=!0},p(n,s){const o={};s&2&&(o.disabled=n[1]),s&524288&&(o.$$scope={dirty:s,ctx:n}),e.$set(o);const i={};s&256&&(i.disabled=!n[8]),s&524290&&(i.$$scope={dirty:s,ctx:n}),a.$set(i)},i(n){r||(w(e.$$.fragment,n),w(a.$$.fragment,n),r=!0)},o(n){y(e.$$.fragment,n),y(a.$$.fragment,n),r=!1},d(n){n&&m(t),U(e,n),U(a,n)}}}function Qn(l){let e,t,a;function r(s){l[16](s)}let n={size:"md",outsideclose:!l[1],autoclose:!1,$$slots:{footer:[Un],default:[jn]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.open=l[0]),e=new Ir({props:n}),Me.push(()=>je(e,"open",r)),{c(){J(e.$$.fragment)},l(s){G(e.$$.fragment,s)},m(s,o){Q(e,s,o),a=!0},p(s,[o]){const i={};o&2&&(i.outsideclose=!s[1]),o&525310&&(i.$$scope={dirty:o,ctx:s}),!t&&o&1&&(t=!0,i.open=s[0],xe(()=>t=!1)),e.$set(i)},i(s){a||(w(e.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),a=!1},d(s){U(e,s)}}}function Gn(l,e,t){let a,r,{open:n=!1}=e,{submitting:s=!1}=e,{error:o=null}=e,{contratadas:i=[]}=e,{colaboradores:c=[]}=e,{loadingContratadas:f=!1}=e,{loadingColaboradores:u=!1}=e;const p=Ze();let g="",h="";function C(){s||(t(6,g=""),t(7,h=""),p("close"))}function D(q){t(6,g=q.detail),t(7,h=""),p("contratadaChange",g)}function P(q){t(7,h=q.detail),p("colaboradorChange",h)}function z(){a&&p("submit",{contratadaId:g,colaboradorId:h})}function O(){p("retry")}function T(q){n=q,t(0,n)}return l.$$set=q=>{"open"in q&&t(0,n=q.open),"submitting"in q&&t(1,s=q.submitting),"error"in q&&t(2,o=q.error),"contratadas"in q&&t(3,i=q.contratadas),"colaboradores"in q&&t(15,c=q.colaboradores),"loadingContratadas"in q&&t(4,f=q.loadingContratadas),"loadingColaboradores"in q&&t(5,u=q.loadingColaboradores)},l.$$.update=()=>{l.$$.dirty&1&&(n||(t(6,g=""),t(7,h=""))),l.$$.dirty&194&&t(8,a=!!g&&!!h&&!s),l.$$.dirty&32832&&t(9,r=c.filter(q=>!g||q.empresa===g))},[n,s,o,i,f,u,g,h,a,r,C,D,P,z,O,c,T]}class Jn extends Qe{constructor(e){super(),Ge(this,e,Gn,Qn,Je,{open:0,submitting:1,error:2,contratadas:3,colaboradores:15,loadingContratadas:4,loadingColaboradores:5})}}function Ba(l){let e,t,a;function r(s){l[41](s)}let n={fichaId:l[1]};return l[0]!==void 0&&(n.open=l[0]),e=new zn({props:n}),Me.push(()=>je(e,"open",r)),e.$on("close",l[17]),e.$on("fichaUpdated",l[18]),{c(){J(e.$$.fragment)},l(s){G(e.$$.fragment,s)},m(s,o){Q(e,s,o),a=!0},p(s,o){const i={};o[0]&2&&(i.fichaId=s[1]),!t&&o[0]&1&&(t=!0,i.open=s[0],xe(()=>t=!1)),e.$set(i)},i(s){a||(w(e.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),a=!1},d(s){U(e,s)}}}function Ua(l){let e,t,a;function r(s){l[42](s)}let n={contratadas:l[3],colaboradores:l[4],loadingContratadas:l[5],loadingColaboradores:l[6],submitting:l[7]};return l[2]!==void 0&&(n.open=l[2]),e=new Jn({props:n}),Me.push(()=>je(e,"open",r)),e.$on("close",l[23]),e.$on("contratadaChange",l[43]),e.$on("colaboradorChange",l[44]),e.$on("submit",l[22]),e.$on("retry",l[24]),{c(){J(e.$$.fragment)},l(s){G(e.$$.fragment,s)},m(s,o){Q(e,s,o),a=!0},p(s,o){const i={};o[0]&8&&(i.contratadas=s[3]),o[0]&16&&(i.colaboradores=s[4]),o[0]&32&&(i.loadingContratadas=s[5]),o[0]&64&&(i.loadingColaboradores=s[6]),o[0]&128&&(i.submitting=s[7]),!t&&o[0]&4&&(t=!0,i.open=s[2],xe(()=>t=!1)),e.$set(i)},i(s){a||(w(e.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),a=!1},d(s){U(e,s)}}}function Wn(l){let e,t,a,r,n;e=new nl({props:{items:l[8].items,loading:l[8].loading,error:l[8].error,pagination:l[8].pagination,filters:l[8].filters,filterOptions:l[8].filterOptions}}),e.$on("searchChange",l[34]),e.$on("empresaFilterChange",l[35]),e.$on("cargoFilterChange",l[36]),e.$on("devolucaoPendenteChange",l[37]),e.$on("clearFilters",l[14]),e.$on("pageChange",l[38]),e.$on("pageSizeChange",l[39]),e.$on("viewDetail",l[40]),e.$on("refresh",l[19]),e.$on("novaFicha",l[20]);let s=l[0]&&Ba(l),o=l[2]&&Ua(l);return{c(){J(e.$$.fragment),t=F(),s&&s.c(),a=F(),o&&o.c(),r=Ce()},l(i){G(e.$$.fragment,i),t=A(i),s&&s.l(i),a=A(i),o&&o.l(i),r=Ce()},m(i,c){Q(e,i,c),N(i,t,c),s&&s.m(i,c),N(i,a,c),o&&o.m(i,c),N(i,r,c),n=!0},p(i,c){const f={};c[0]&256&&(f.items=i[8].items),c[0]&256&&(f.loading=i[8].loading),c[0]&256&&(f.error=i[8].error),c[0]&256&&(f.pagination=i[8].pagination),c[0]&256&&(f.filters=i[8].filters),c[0]&256&&(f.filterOptions=i[8].filterOptions),e.$set(f),i[0]?s?(s.p(i,c),c[0]&1&&w(s,1)):(s=Ba(i),s.c(),w(s,1),s.m(a.parentNode,a)):s&&(_e(),y(s,1,1,()=>{s=null}),ve()),i[2]?o?(o.p(i,c),c[0]&4&&w(o,1)):(o=Ua(i),o.c(),w(o,1),o.m(r.parentNode,r)):o&&(_e(),y(o,1,1,()=>{o=null}),ve())},i(i){n||(w(e.$$.fragment,i),w(s),w(o),n=!0)},o(i){y(e.$$.fragment,i),y(s),y(o),n=!1},d(i){i&&(m(t),m(a),m(r)),U(e,i),s&&s.d(i),o&&o.d(i)}}}function Kn(l){console.log("Page size change solicitado para fichas:",l)}function Xn(l){console.log("üë§ Colaborador selecionado:",l)}function Yn(l,e,t){let a,r,n,s,o,{initialPageSize:i=10}=e;const c=!1,f=3e4,u=cr(W=>vt.getFichasWithColaboradores({page:W.page||1,limit:W.limit||i,searchTerm:W.search||void 0,empresaFilter:W.empresa!=="todas"?W.empresa:void 0,cargoFilter:W.cargo!=="todos"?W.cargo:void 0,statusFilter:W.status!=="todos"?W.status:void 0,devolucaoPendente:!!W.devolucaoPendente}).then(de=>({data:de.fichas,total:de.total,page:de.page||W.page||1,pageSize:de.pageSize||W.limit||i,totalPages:Math.ceil(de.total/(W.limit||i))})),{initialPageSize:i});Ga(l,u,W=>t(33,o=W));let p=!1,g=null,h=!1,C=[],D=[],P=!1,z=!1,O=!1;Ja(async()=>{console.log("üöÄ FichasContainer: Inicializando..."),await fr.initialize(),await T(),console.log("‚úÖ FichasContainer: Inicializado com sucesso")});async function T(){try{await u.fetchPage(),console.log("üìã Dados de fichas carregados")}catch(W){console.error("‚ùå Erro ao carregar fichas:",W),Oe.error("Erro ao carregar fichas","N√£o foi poss√≠vel carregar os dados das fichas")}}let q={empresa:"todas",cargo:"todos",devolucaoPendente:!1},L="";function R(W){t(29,L=W),v()}function x(W){t(28,q={...q,empresa:W}),v()}function K(W){t(28,q={...q,cargo:W}),v()}function _(W){t(28,q={...q,devolucaoPendente:W}),v()}function k(){t(29,L=""),t(28,q={empresa:"todas",cargo:"todos",devolucaoPendente:!1}),v()}function v(){const W={};L&&L.trim()!==""&&(W.search=L.trim()),q.empresa&&q.empresa!=="todas"&&(W.empresa=q.empresa),q.cargo&&q.cargo!=="todos"&&(W.cargo=q.cargo),q.devolucaoPendente&&(W.devolucaoPendente=!0),console.log("üîß Aplicando filtros de fichas:",W),u.setFilters(W)}function S(W){u.goToPage(W)}function V(W){t(1,g=W),t(0,p=!0),console.log("üëÄ Abrindo detalhes da ficha:",W)}function B(){t(0,p=!1),t(1,g=null)}function ee(){console.log("üîÑ Ficha atualizada, recarregando lista"),T()}function te(){T()}function re(){t(2,h=!0),le()}async function le(){if(!(C.length>0))try{t(5,P=!0),console.log("üîÑ Carregando contratadas da API...");const W=await fetch("/api/contratadas");if(!W.ok)throw new Error(`HTTP ${W.status}: ${W.statusText}`);const de=await W.json();if(console.log("üì¶ Raw API response for contratadas:",de),console.log("üì¶ result.data structure:",de.data),de.success&&de.data){const Ie=de.data.contratadas||de.data;if(Array.isArray(Ie))t(3,C=Ie.map(Pe=>({value:Pe.id,label:Pe.nome}))),console.log("‚úÖ Contratadas carregadas da API:",C.length);else throw new Error("Dados de contratadas n√£o s√£o um array")}else throw new Error("Resposta inv√°lida da API de contratadas")}catch(W){console.error("‚ùå Erro ao carregar contratadas:",W);const de=W instanceof Error?W.message:"Erro desconhecido";Oe.error("Erro ao carregar contratadas",`N√£o foi poss√≠vel carregar a lista de empresas: ${de}`),t(3,C=[{value:"empresa-alpha",label:"Empresa Alpha LTDA"},{value:"empresa-beta",label:"Empresa Beta Servi√ßos"},{value:"empresa-gamma",label:"Gamma Constru√ß√µes"}])}finally{t(5,P=!1)}}async function ae(W){try{t(6,z=!0),console.log("üîÑ Carregando colaboradores para contratada:",W);const de=await fetch(`/api/colaboradores?contratadaId=${W}&limit=100`);if(!de.ok)throw new Error(`HTTP ${de.status}: ${de.statusText}`);const Ie=await de.json();if(console.log("üì¶ Raw API response for colaboradores:",Ie),console.log("üì¶ result.data structure:",Ie.data),Ie.success&&Ie.data){const Pe=Ie.data;if(Array.isArray(Pe))t(4,D=Pe.map(ie=>({value:ie.id,label:ie.nome,empresa:W,cpf:ie.cpf||ie.cpfFormatado,cargo:ie.cargo,matricula:ie.matricula,setor:ie.setor}))),console.log("‚úÖ Colaboradores carregados da API:",D.length);else throw new Error("Dados de colaboradores n√£o s√£o um array")}else throw new Error("Resposta inv√°lida da API de colaboradores")}catch(de){console.error("‚ùå Erro ao carregar colaboradores:",de);const Ie=de instanceof Error?de.message:"Erro desconhecido";Oe.error("Erro ao carregar colaboradores",`N√£o foi poss√≠vel carregar a lista de profissionais: ${Ie}`),t(4,D=[{value:`mock-colab-001-${W}`,label:"Carlos Oliveira (Mock)",empresa:W,cpf:"123.456.789-01",cargo:"Operador"},{value:`mock-colab-002-${W}`,label:"Ana Santos (Mock)",empresa:W,cpf:"987.654.321-02",cargo:"T√©cnica"},{value:`mock-colab-003-${W}`,label:"Jo√£o Silva (Mock)",empresa:W,cpf:"456.789.123-03",cargo:"Supervisor"}]),console.log("‚ö†Ô∏è Usando dados mock para colaboradores:",D.length)}finally{t(6,z=!1)}}function ue(W){console.log("üè¢ Contratada selecionada:",W),W?ae(W):t(4,D=[])}async function me(W){const{contratadaId:de,colaboradorId:Ie}=W.detail;try{t(7,O=!0),console.log("üìù Criando nova ficha:",{contratadaId:de,colaboradorId:Ie});const Pe={colaboradorId:Ie,status:"ATIVA"};console.log("üì§ Enviando payload para cria√ß√£o de ficha:",Pe);const ie=await fetch("/api/fichas-epi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Pe)});if(!ie.ok)throw new Error(`HTTP ${ie.status}: ${ie.statusText}`);const Ne=await ie.json();if(console.log("üì• Resposta da API ao criar ficha:",Ne),Ne.success){t(2,h=!1),await T();const Z=D.find(fe=>fe.value===Ie),ye=(Z==null?void 0:Z.label)||"Colaborador";Oe.success("Ficha criada com sucesso",`Ficha de EPI criada para ${ye}`),console.log("‚úÖ Nova ficha criada com sucesso:",Ne.data)}else throw new Error(Ne.message||"Erro ao criar ficha")}catch(Pe){console.error("‚ùå Erro ao criar nova ficha:",Pe),Oe.error("Erro ao criar ficha","N√£o foi poss√≠vel criar a ficha de EPI")}finally{t(7,O=!1)}}function ge(){t(2,h=!1),t(4,D=[])}function pe(){t(3,C=[]),le()}const ce=W=>R(W.detail),X=W=>x(W.detail),Y=W=>K(W.detail),se=W=>_(W.detail),$e=W=>S(W.detail),H=W=>Kn(W.detail),ne=W=>V(W.detail);function be(W){p=W,t(0,p)}function Ee(W){h=W,t(2,h)}const ke=W=>ue(W.detail),qe=W=>Xn(W.detail);return l.$$set=W=>{"initialPageSize"in W&&t(25,i=W.initialPageSize)},l.$$.update=()=>{l.$$.dirty[0]&805306368&&t(32,n=L!==""||q.empresa!=="todas"||q.cargo!=="todos"||q.devolucaoPendente),l.$$.dirty[0]&1879048192|l.$$.dirty[1]&7&&t(8,s={items:o.items||[],loading:o.loading,error:o.error,pagination:{currentPage:o.page,totalPages:o.totalPages,pageSize:o.pageSize,total:o.total,hasNext:u.hasNext(),hasPrev:u.hasPrev()},filters:{searchTerm:L,empresaFilter:q.empresa,cargoFilter:q.cargo,devolucaoPendente:q.devolucaoPendente,hasActiveFilters:n},filterOptions:{empresas:a,cargos:r}})},t(31,a=[{value:"todas",label:"Todas as Empresas"}]),t(30,r=[{value:"todos",label:"Todos os Cargos"}]),[p,g,h,C,D,P,z,O,s,u,R,x,K,_,k,S,V,B,ee,te,re,ue,me,ge,pe,i,c,f,q,L,r,a,n,o,ce,X,Y,se,$e,H,ne,be,Ee,ke,qe]}class Zn extends Qe{constructor(e){super(),Ge(this,e,Yn,Wn,Je,{initialPageSize:25,autoRefresh:26,refreshInterval:27},null,[-1,-1])}get autoRefresh(){return this.$$.ctx[26]}get refreshInterval(){return this.$$.ctx[27]}}function eo(l){let e,t,a;return t=new Zn({props:{initialPageSize:10,autoRefresh:!1}}),{c(){e=F(),J(t.$$.fragment),this.h()},l(r){Qa("svelte-161hi6l",document.head).forEach(m),e=A(r),G(t.$$.fragment,r),this.h()},h(){document.title="Fichas de EPI - DataLife EPI"},m(r,n){N(r,e,n),Q(t,r,n),a=!0},p:Ve,i(r){a||(w(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&m(e),U(t,r)}}}class Co extends Qe{constructor(e){super(),Ge(this,e,null,eo,Je,{})}}export{Co as component};
