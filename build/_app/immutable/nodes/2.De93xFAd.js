import{S as Se,i as Ae,s as Pe,d as p,A as G,m as R,o as j,q as te,b as N,c,B as J,O as $,a4 as qe,h as P,e as x,f as S,T as X,C as K,k as q,j as w,D as U,l as de,U as Te,n as me,z as ve,r as ue,p as ae,a as W,g as O,t as L,V as fe}from"../chunks/BMdB51sm.js";import{e as se,u as je,o as Be}from"../chunks/BIKDjfmO.js";import"../chunks/IHki7fMi.js";import{d as Ne,w as oe}from"../chunks/B-FKEqiI.js";import{a as $e,B as He,e as pe}from"../chunks/Dwq3Do7L.js";import{C as re}from"../chunks/BVvHLR6M.js";import{A as be}from"../chunks/BF2fzDup.js";import{E as ge,A as Re}from"../chunks/WMDR_Hax.js";import{C as xe}from"../chunks/BDKByL26.js";import{F as he}from"../chunks/B_tc1dUb.js";import{b as Fe}from"../chunks/XvCN2MSX.js";class Me{async getDashboardData(){try{console.log("üìä Carregando dados do dashboard...");const[e,s]=await Promise.all([$e.get("/relatorios/dashboard"),$e.get("/contratadas/estatisticas").then(t=>(console.log("üîç Raw contratada stats response.data:",t.data),console.log("üîç Raw contratada stats response.data.topContratadas:",t.data.topContratadas),t.data.topContratadas&&t.data.topContratadas.length>0&&console.log("üîç First topContratada item:",JSON.stringify(t.data.topContratadas[0],null,2)),t))]);if(console.log("üìä Dashboard response:",e),console.log("üè¢ Contratada Stats response:",s),e.success&&e.data&&s.success&&s.data){const t=e.data,a={...s.data,topContratadas:s.data.topContratadas.map(n=>({contratada:n.contratada,totalColaboradores:n.totalColaboradores,totalEpisAtivos:n.totalEpisAtivos||0}))},r={fichasAtivas:this.extractFichasAtivas(t),episEntregues:this.extractEpisEntregues(t),episVencendo:this.extractEpisVencendo(t),estoqueBaixo:this.extractEstoqueBaixo(t),fichasAtivasChange:"+12%",episEntreguesChange:"+8%",episVencendoChange:"-5%",estoqueBaixoChange:"+3%"},o=this.mapActivities(t),l=this.mapQuickStats(t);return console.log("‚úÖ Dashboard dados mapeados:",{metrics:r,activitiesCount:o.length,quickStats:l,contratadaStats:a}),{metrics:r,activities:o,quickStats:l,contratadaStats:a,lastUpdated:t.dataAtualizacao||new Date().toISOString()}}throw new Error("Resposta inv√°lida do backend")}catch(e){return console.error("‚ùå Erro ao carregar dashboard, usando fallback:",e),this.getFallbackDashboardData()}}extractFichasAtivas(e){var t;const s=(t=e.indicadoresGerais)==null?void 0:t.find(a=>a.titulo==="Fichas Ativas");return(s==null?void 0:s.valor)||0}extractEpisEntregues(e){var s;return((s=e.entregasRecentes)==null?void 0:s.totalEntregasSemana)||0}extractEpisVencendo(e){var s;return((s=e.vencimentosProximos)==null?void 0:s.totalVencendoEm30Dias)||0}extractEstoqueBaixo(e){const s=e.estoqueAlertas;return((s==null?void 0:s.alertasBaixo)||0)+((s==null?void 0:s.alertasZero)||0)}mapActivities(e){var t,a;const s=[];return(t=e.entregasRecentes)!=null&&t.entregasDetalhadas&&e.entregasRecentes.entregasDetalhadas.slice(0,3).forEach(r=>{s.push({id:r.id,type:"entrega",description:`EPI entregue para ${r.colaboradorNome}`,time:this.formatTimeAgo(r.dataEntrega),equipment:r.contratadaNome||"N/A"})}),(a=e.entregasRecentes)!=null&&a.devolucoes&&e.entregasRecentes.devolucoes.slice(0,2).forEach(r=>{s.push({id:`dev-${r.colaboradorNome}-${r.dataDevolucao}`,type:"devolucao",description:`EPI devolvido por ${r.colaboradorNome}`,time:this.formatTimeAgo(r.dataDevolucao),equipment:r.tipoEpiNome})}),s.sort((r,o)=>String(o.id).localeCompare(String(r.id))).slice(0,5)}mapQuickStats(e){var a,r,o,l,n,f;const s=((r=(a=e.indicadoresGerais)==null?void 0:a.find(m=>m.titulo==="Total de Colaboradores"))==null?void 0:r.valor)||0,t=((l=(o=e.indicadoresGerais)==null?void 0:o.find(m=>m.titulo==="Itens em Estoque"))==null?void 0:l.valor)||0;return{totalColaboradores:s,fichasVencidas:((n=e.vencimentosProximos)==null?void 0:n.totalJaVencidos)||0,estoqueTotal:t,entregasHoje:((f=e.entregasRecentes)==null?void 0:f.entregasHoje)||0}}formatTimeAgo(e){const s=new Date(e),a=Math.floor((new Date().getTime()-s.getTime())/(1e3*60*60));if(a<1)return"h√° poucos minutos";if(a<24)return`h√° ${a} hora${a>1?"s":""}`;{const r=Math.floor(a/24);return`h√° ${r} dia${r>1?"s":""}`}}getFallbackDashboardData(){return{metrics:{fichasAtivas:150,episEntregues:1245,episVencendo:23,estoqueBaixo:12,fichasAtivasChange:"+12%",episEntreguesChange:"+8%",episVencendoChange:"-5%",estoqueBaixoChange:"+3%"},activities:[{id:1,type:"entrega",description:"EPI entregue para Jo√£o Silva",time:"h√° 2 horas",equipment:"Capacete de Seguran√ßa"},{id:2,type:"devolucao",description:"EPI devolvido por Maria Santos",time:"h√° 4 horas",equipment:"Luvas de Prote√ß√£o"},{id:3,type:"entrada",description:"Nova entrada de estoque",time:"h√° 6 horas",equipment:"√ìculos de Prote√ß√£o - 50 unidades"}],quickStats:{totalColaboradores:342,fichasVencidas:8,estoqueTotal:2840,entregasHoje:15},lastUpdated:new Date().toISOString()}}}const ze=new Me;function we(d,e,s){const t=d.slice();return t[14]=e[s],t}function ye(d,e,s){const t=d.slice();return t[17]=e[s],t}function Ce(d,e,s){const t=d.slice();return t[23]=e[s],t}function Oe(d,e,s){const t=d.slice();return t[20]=e[s],t[22]=s,t}function Le(d){let e,s,t=se(d[0]),a=[];for(let o=0;o<t.length;o+=1)a[o]=Ee(Ce(d,t,o));const r=o=>R(a[o],1,1,()=>{a[o]=null});return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=ue()},l(o){for(let l=0;l<a.length;l+=1)a[l].l(o);e=ue()},m(o,l){for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(o,l);N(o,e,l),s=!0},p(o,l){if(l&1){t=se(o[0]);let n;for(n=0;n<t.length;n+=1){const f=Ce(o,t,n);a[n]?(a[n].p(f,l),j(a[n],1)):(a[n]=Ee(f),a[n].c(),j(a[n],1),a[n].m(e.parentNode,e))}for(ae(),n=t.length;n<a.length;n+=1)r(n);te()}},i(o){if(!s){for(let l=0;l<t.length;l+=1)j(a[l]);s=!0}},o(o){a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)R(a[l]);s=!1},d(o){o&&p(e),ve(a,o)}}}function Ge(d){let e,s,t=se(Array(4)),a=[];for(let r=0;r<t.length;r+=1)a[r]=Qe(Oe(d,t,r));return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=ue()},l(r){for(let o=0;o<a.length;o+=1)a[o].l(r);e=ue()},m(r,o){for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(r,o);N(r,e,o),s=!0},p:me,i(r){if(!s){for(let o=0;o<t.length;o+=1)j(a[o]);s=!0}},o(r){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)R(a[o]);s=!1},d(r){r&&p(e),ve(a,r)}}}function Je(d){let e,s,t,a=d[23].title+"",r,o,l,n=d[23].value+"",f,m,i,b,h=d[23].change+"",g,u,k,y,T="vs. m√™s anterior",A,E,_,H,V,v;var C=d[23].icon;function B(D,I){return{props:{class:"w-6 h-6"}}}return C&&(_=fe(C,B())),{c(){e=w("div"),s=w("div"),t=w("p"),r=L(a),o=q(),l=w("p"),f=L(n),m=q(),i=w("div"),b=w("span"),g=L(h),k=q(),y=w("span"),y.textContent=T,A=q(),E=w("div"),_&&U(_.$$.fragment),V=q(),this.h()},l(D){e=x(D,"DIV",{class:!0});var I=S(e);s=x(I,"DIV",{});var F=S(s);t=x(F,"P",{class:!0});var Q=S(t);r=O(Q,a),Q.forEach(p),o=P(F),l=x(F,"P",{class:!0});var Z=S(l);f=O(Z,n),Z.forEach(p),m=P(F),i=x(F,"DIV",{class:!0});var Y=S(i);b=x(Y,"SPAN",{class:!0});var M=S(b);g=O(M,h),M.forEach(p),k=P(Y),y=x(Y,"SPAN",{class:!0,"data-svelte-h":!0}),X(y)!=="svelte-9uf3xt"&&(y.textContent=T),Y.forEach(p),F.forEach(p),A=P(I),E=x(I,"DIV",{class:!0});var z=S(E);_&&K(_.$$.fragment,z),z.forEach(p),I.forEach(p),V=P(D),this.h()},h(){$(t,"class","text-sm font-medium text-gray-600 dark:text-gray-400"),$(l,"class","text-2xl font-bold text-gray-900 dark:text-white"),$(b,"class",u="text-xs "+(d[23].changeType==="positive"?"text-green-600":"text-red-600")),$(y,"class","text-xs text-gray-500 dark:text-gray-400 ml-1"),$(i,"class","flex items-center mt-2"),$(E,"class",H="p-3 rounded-lg "+(d[23].color==="blue"?"bg-blue-100 dark:bg-blue-900":d[23].color==="green"?"bg-green-100 dark:bg-green-900":d[23].color==="yellow"?"bg-yellow-100 dark:bg-yellow-900":"bg-red-100 dark:bg-red-900")),$(e,"class","flex items-center justify-between")},m(D,I){N(D,e,I),c(e,s),c(s,t),c(t,r),c(s,o),c(s,l),c(l,f),c(s,m),c(s,i),c(i,b),c(b,g),c(i,k),c(i,y),c(e,A),c(e,E),_&&J(_,E,null),N(D,V,I),v=!0},p(D,I){if((!v||I&1)&&a!==(a=D[23].title+"")&&W(r,a),(!v||I&1)&&n!==(n=D[23].value+"")&&W(f,n),(!v||I&1)&&h!==(h=D[23].change+"")&&W(g,h),(!v||I&1&&u!==(u="text-xs "+(D[23].changeType==="positive"?"text-green-600":"text-red-600")))&&$(b,"class",u),I&1&&C!==(C=D[23].icon)){if(_){ae();const F=_;R(F.$$.fragment,1,0,()=>{G(F,1)}),te()}C?(_=fe(C,B()),U(_.$$.fragment),j(_.$$.fragment,1),J(_,E,null)):_=null}(!v||I&1&&H!==(H="p-3 rounded-lg "+(D[23].color==="blue"?"bg-blue-100 dark:bg-blue-900":D[23].color==="green"?"bg-green-100 dark:bg-green-900":D[23].color==="yellow"?"bg-yellow-100 dark:bg-yellow-900":"bg-red-100 dark:bg-red-900")))&&$(E,"class",H)},i(D){v||(_&&j(_.$$.fragment,D),v=!0)},o(D){_&&R(_.$$.fragment,D),v=!1},d(D){D&&(p(e),p(V)),_&&G(_)}}}function Ee(d){let e,s;return e=new re({props:{size:"sm",class:"rounded-sm shadow-none",$$slots:{default:[Je]},$$scope:{ctx:d}}}),{c(){U(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,a){J(e,t,a),s=!0},p(t,a){const r={};a&67108865&&(r.$$scope={dirty:a,ctx:t}),e.$set(r)},i(t){s||(j(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function Ue(d){let e,s='<div class="space-y-2"><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"></div> <div class="h-8 bg-gray-200 dark:bg-gray-700 rounded w-16"></div> <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-20"></div></div> <div class="p-3 bg-gray-200 dark:bg-gray-700 rounded-lg"><div class="w-6 h-6 bg-gray-300 dark:bg-gray-600 rounded"></div></div>',t;return{c(){e=w("div"),e.innerHTML=s,t=q(),this.h()},l(a){e=x(a,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-bgl0bx"&&(e.innerHTML=s),t=P(a),this.h()},h(){$(e,"class","flex items-center justify-between animate-pulse")},m(a,r){N(a,e,r),N(a,t,r)},p:me,d(a){a&&(p(e),p(t))}}}function Qe(d){let e,s;return e=new re({props:{size:"sm",class:"rounded-sm shadow-none",$$slots:{default:[Ue]},$$scope:{ctx:d}}}),{c(){U(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,a){J(e,t,a),s=!0},p(t,a){const r={};a&67108864&&(r.$$scope={dirty:a,ctx:t}),e.$set(r)},i(t){s||(j(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function Ze(d){let e;return{c(){e=L("Ver Fichas")},l(s){e=O(s,"Ver Fichas")},m(s,t){N(s,e,t)},d(s){s&&p(e)}}}function ke(d,e){let s,t,a,r,o,l,n,f,m=e[17].description+"",i,b,h,g=e[17].equipment+"",u,k,y,T=e[17].time+"",A,E,_;var H=e[9](e[17].type);function V(v,C){return{props:{class:"w-5 h-5"}}}return H&&(r=fe(H,V())),{key:d,first:null,c(){s=w("div"),t=w("div"),a=w("div"),r&&U(r.$$.fragment),l=q(),n=w("div"),f=w("p"),i=L(m),b=q(),h=w("p"),u=L(g),k=q(),y=w("p"),A=L(T),E=q(),this.h()},l(v){s=x(v,"DIV",{class:!0});var C=S(s);t=x(C,"DIV",{class:!0});var B=S(t);a=x(B,"DIV",{class:!0});var D=S(a);r&&K(r.$$.fragment,D),D.forEach(p),B.forEach(p),l=P(C),n=x(C,"DIV",{class:!0});var I=S(n);f=x(I,"P",{class:!0});var F=S(f);i=O(F,m),F.forEach(p),b=P(I),h=x(I,"P",{class:!0});var Q=S(h);u=O(Q,g),Q.forEach(p),k=P(I),y=x(I,"P",{class:!0});var Z=S(y);A=O(Z,T),Z.forEach(p),I.forEach(p),E=P(C),C.forEach(p),this.h()},h(){$(a,"class",o="p-2 rounded-lg "+Ie(e[17].type)),$(t,"class","flex-shrink-0"),$(f,"class","text-sm font-medium text-gray-900 dark:text-white"),$(h,"class","text-sm text-gray-600 dark:text-gray-400"),$(y,"class","text-xs text-gray-500 dark:text-gray-500 mt-1"),$(n,"class","flex-1 min-w-0"),$(s,"class","flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"),this.first=s},m(v,C){N(v,s,C),c(s,t),c(t,a),r&&J(r,a,null),c(s,l),c(s,n),c(n,f),c(f,i),c(n,b),c(n,h),c(h,u),c(n,k),c(n,y),c(y,A),c(s,E),_=!0},p(v,C){if(e=v,C&4&&H!==(H=e[9](e[17].type))){if(r){ae();const B=r;R(B.$$.fragment,1,0,()=>{G(B,1)}),te()}H?(r=fe(H,V()),U(r.$$.fragment),j(r.$$.fragment,1),J(r,a,null)):r=null}(!_||C&4&&o!==(o="p-2 rounded-lg "+Ie(e[17].type)))&&$(a,"class",o),(!_||C&4)&&m!==(m=e[17].description+"")&&W(i,m),(!_||C&4)&&g!==(g=e[17].equipment+"")&&W(u,g),(!_||C&4)&&T!==(T=e[17].time+"")&&W(A,T)},i(v){_||(r&&j(r.$$.fragment,v),_=!0)},o(v){r&&R(r.$$.fragment,v),_=!1},d(v){v&&p(s),r&&G(r)}}}function Ke(d){let e,s,t="Atividades Recentes",a,r,o,l,n=[],f=new Map,m;r=new He({props:{size:"xs",color:"alternative",class:"rounded-sm",href:Fe+"/fichas",$$slots:{default:[Ze]},$$scope:{ctx:d}}});let i=se(d[2]);const b=h=>h[17].id;for(let h=0;h<i.length;h+=1){let g=ye(d,i,h),u=b(g);f.set(u,n[h]=ke(u,g))}return{c(){e=w("div"),s=w("h3"),s.textContent=t,a=q(),U(r.$$.fragment),o=q(),l=w("div");for(let h=0;h<n.length;h+=1)n[h].c();this.h()},l(h){e=x(h,"DIV",{class:!0});var g=S(e);s=x(g,"H3",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-1euutue"&&(s.textContent=t),a=P(g),K(r.$$.fragment,g),g.forEach(p),o=P(h),l=x(h,"DIV",{class:!0});var u=S(l);for(let k=0;k<n.length;k+=1)n[k].l(u);u.forEach(p),this.h()},h(){$(s,"class","text-lg font-semibold text-gray-900 dark:text-white"),$(e,"class","flex items-center justify-between mb-4"),$(l,"class","space-y-3")},m(h,g){N(h,e,g),c(e,s),c(e,a),J(r,e,null),N(h,o,g),N(h,l,g);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(l,null);m=!0},p(h,g){const u={};g&67108864&&(u.$$scope={dirty:g,ctx:h}),r.$set(u),g&516&&(i=se(h[2]),ae(),n=je(n,g,b,1,h,i,f,l,Be,ke,null,ye),te())},i(h){if(!m){j(r.$$.fragment,h);for(let g=0;g<i.length;g+=1)j(n[g]);m=!0}},o(h){R(r.$$.fragment,h);for(let g=0;g<n.length;g+=1)R(n[g]);m=!1},d(h){h&&(p(e),p(o),p(l)),G(r);for(let g=0;g<n.length;g+=1)n[g].d()}}}function De(d){let e,s;return e=new re({props:{size:"sm",class:"rounded-sm w-full max-w-none shadow-none",$$slots:{default:[Xe]},$$scope:{ctx:d}}}),{c(){U(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,a){J(e,t,a),s=!0},p(t,a){const r={};a&67108872&&(r.$$scope={dirty:a,ctx:t}),e.$set(r)},i(t){s||(j(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function We(d){let e=d[14].totalEpisAtivos+"",s,t;return{c(){s=L(e),t=L(" EPIs")},l(a){s=O(a,e),t=O(a," EPIs")},m(a,r){N(a,s,r),N(a,t,r)},p(a,r){r&8&&e!==(e=a[14].totalEpisAtivos+"")&&W(s,e)},d(a){a&&(p(s),p(t))}}}function Ve(d){let e,s,t,a=d[14].contratada.nome+"",r,o,l,n=d[14].contratada.cnpjFormatado+"",f,m,i,b,h,g,u=d[14].totalColaboradores+"",k,y,T,A;return b=new pe({props:{color:"green",class:"w-fit rounded-sm mb-1",$$slots:{default:[We]},$$scope:{ctx:d}}}),{c(){e=w("div"),s=w("div"),t=w("p"),r=L(a),o=q(),l=w("p"),f=L(n),m=q(),i=w("div"),U(b.$$.fragment),h=q(),g=w("p"),k=L(u),y=L(" Colab."),T=q(),this.h()},l(E){e=x(E,"DIV",{class:!0});var _=S(e);s=x(_,"DIV",{class:!0});var H=S(s);t=x(H,"P",{class:!0});var V=S(t);r=O(V,a),V.forEach(p),o=P(H),l=x(H,"P",{class:!0});var v=S(l);f=O(v,n),v.forEach(p),H.forEach(p),m=P(_),i=x(_,"DIV",{class:!0});var C=S(i);K(b.$$.fragment,C),h=P(C),g=x(C,"P",{class:!0});var B=S(g);k=O(B,u),y=O(B," Colab."),B.forEach(p),C.forEach(p),T=P(_),_.forEach(p),this.h()},h(){$(t,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),$(l,"class","text-xs text-gray-500 dark:text-gray-400"),$(s,"class","flex-1 min-w-0"),$(g,"class","text-xs text-gray-600 dark:text-gray-400"),$(i,"class","text-right ml-4"),$(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg")},m(E,_){N(E,e,_),c(e,s),c(s,t),c(t,r),c(s,o),c(s,l),c(l,f),c(e,m),c(e,i),J(b,i,null),c(i,h),c(i,g),c(g,k),c(g,y),c(e,T),A=!0},p(E,_){(!A||_&8)&&a!==(a=E[14].contratada.nome+"")&&W(r,a),(!A||_&8)&&n!==(n=E[14].contratada.cnpjFormatado+"")&&W(f,n);const H={};_&67108872&&(H.$$scope={dirty:_,ctx:E}),b.$set(H),(!A||_&8)&&u!==(u=E[14].totalColaboradores+"")&&W(k,u)},i(E){A||(j(b.$$.fragment,E),A=!0)},o(E){R(b.$$.fragment,E),A=!1},d(E){E&&p(e),G(b)}}}function Xe(d){let e,s="EPIs ativos por Contratada",t,a,r,o=se(d[3].contratadaStats.topContratadas),l=[];for(let f=0;f<o.length;f+=1)l[f]=Ve(we(d,o,f));const n=f=>R(l[f],1,1,()=>{l[f]=null});return{c(){e=w("h3"),e.textContent=s,t=q(),a=w("div");for(let f=0;f<l.length;f+=1)l[f].c();this.h()},l(f){e=x(f,"H3",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-10d2baa"&&(e.textContent=s),t=P(f),a=x(f,"DIV",{class:!0});var m=S(a);for(let i=0;i<l.length;i+=1)l[i].l(m);m.forEach(p),this.h()},h(){$(e,"class","text-lg font-semibold text-gray-900 dark:text-white mb-4"),$(a,"class","space-y-3")},m(f,m){N(f,e,m),N(f,t,m),N(f,a,m);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(a,null);r=!0},p(f,m){if(m&8){o=se(f[3].contratadaStats.topContratadas);let i;for(i=0;i<o.length;i+=1){const b=we(f,o,i);l[i]?(l[i].p(b,m),j(l[i],1)):(l[i]=Ve(b),l[i].c(),j(l[i],1),l[i].m(a,null))}for(ae(),i=o.length;i<l.length;i+=1)n(i);te()}},i(f){if(!r){for(let m=0;m<o.length;m+=1)j(l[m]);r=!0}},o(f){l=l.filter(Boolean);for(let m=0;m<l.length;m+=1)R(l[m]);r=!1},d(f){f&&(p(e),p(t),p(a)),ve(l,f)}}}function Ye(d){let e=d[4].fichasVencidas+"",s;return{c(){s=L(e)},l(t){s=O(t,e)},m(t,a){N(t,s,a)},p(t,a){a&16&&e!==(e=t[4].fichasVencidas+"")&&W(s,e)},d(t){t&&p(s)}}}function et(d){let e=d[4].entregasHoje+"",s;return{c(){s=L(e)},l(t){s=O(t,e)},m(t,a){N(t,s,a)},p(t,a){a&16&&e!==(e=t[4].entregasHoje+"")&&W(s,e)},d(t){t&&p(s)}}}function tt(d){let e,s="Estat√≠sticas R√°pidas",t,a,r,o,l="Total de Colaboradores",n,f,m=d[4].totalColaboradores+"",i,b,h,g,u="Fichas Vencidas",k,y,T,A,E,_="Estoque Total",H,V,v=d[4].estoqueTotal.toLocaleString("pt-BR")+"",C,B,D,I,F="Entregas Hoje",Q,Z,Y;return y=new pe({props:{color:"red",class:"w-fit rounded-sm",$$slots:{default:[Ye]},$$scope:{ctx:d}}}),Z=new pe({props:{color:"green",class:"w-fit rounded-sm",$$slots:{default:[et]},$$scope:{ctx:d}}}),{c(){e=w("h3"),e.textContent=s,t=q(),a=w("div"),r=w("div"),o=w("span"),o.textContent=l,n=q(),f=w("span"),i=L(m),b=q(),h=w("div"),g=w("span"),g.textContent=u,k=q(),U(y.$$.fragment),T=q(),A=w("div"),E=w("span"),E.textContent=_,H=q(),V=w("span"),C=L(v),B=q(),D=w("div"),I=w("span"),I.textContent=F,Q=q(),U(Z.$$.fragment),this.h()},l(M){e=x(M,"H3",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-ppurac"&&(e.textContent=s),t=P(M),a=x(M,"DIV",{class:!0});var z=S(a);r=x(z,"DIV",{class:!0});var ee=S(r);o=x(ee,"SPAN",{class:!0,"data-svelte-h":!0}),X(o)!=="svelte-8sutok"&&(o.textContent=l),n=P(ee),f=x(ee,"SPAN",{class:!0});var le=S(f);i=O(le,m),le.forEach(p),ee.forEach(p),b=P(z),h=x(z,"DIV",{class:!0});var ne=S(h);g=x(ne,"SPAN",{class:!0,"data-svelte-h":!0}),X(g)!=="svelte-1jiovvy"&&(g.textContent=u),k=P(ne),K(y.$$.fragment,ne),ne.forEach(p),T=P(z),A=x(z,"DIV",{class:!0});var ie=S(A);E=x(ie,"SPAN",{class:!0,"data-svelte-h":!0}),X(E)!=="svelte-7onrs3"&&(E.textContent=_),H=P(ie),V=x(ie,"SPAN",{class:!0});var _e=S(V);C=O(_e,v),_e.forEach(p),ie.forEach(p),B=P(z),D=x(z,"DIV",{class:!0});var ce=S(D);I=x(ce,"SPAN",{class:!0,"data-svelte-h":!0}),X(I)!=="svelte-1l7hlno"&&(I.textContent=F),Q=P(ce),K(Z.$$.fragment,ce),ce.forEach(p),z.forEach(p),this.h()},h(){$(e,"class","text-lg font-semibold text-gray-900 dark:text-white mb-4"),$(o,"class","text-sm text-gray-600 dark:text-gray-400"),$(f,"class","text-sm font-semibold text-gray-900 dark:text-white"),$(r,"class","flex items-center justify-between"),$(g,"class","text-sm text-gray-600 dark:text-gray-400"),$(h,"class","flex items-center justify-between"),$(E,"class","text-sm text-gray-600 dark:text-gray-400"),$(V,"class","text-sm font-semibold text-gray-900 dark:text-white"),$(A,"class","flex items-center justify-between"),$(I,"class","text-sm text-gray-600 dark:text-gray-400"),$(D,"class","flex items-center justify-between"),$(a,"class","space-y-3")},m(M,z){N(M,e,z),N(M,t,z),N(M,a,z),c(a,r),c(r,o),c(r,n),c(r,f),c(f,i),c(a,b),c(a,h),c(h,g),c(h,k),J(y,h,null),c(a,T),c(a,A),c(A,E),c(A,H),c(A,V),c(V,C),c(a,B),c(a,D),c(D,I),c(D,Q),J(Z,D,null),Y=!0},p(M,z){(!Y||z&16)&&m!==(m=M[4].totalColaboradores+"")&&W(i,m);const ee={};z&67108880&&(ee.$$scope={dirty:z,ctx:M}),y.$set(ee),(!Y||z&16)&&v!==(v=M[4].estoqueTotal.toLocaleString("pt-BR")+"")&&W(C,v);const le={};z&67108880&&(le.$$scope={dirty:z,ctx:M}),Z.$set(le)},i(M){Y||(j(y.$$.fragment,M),j(Z.$$.fragment,M),Y=!0)},o(M){R(y.$$.fragment,M),R(Z.$$.fragment,M),Y=!1},d(M){M&&(p(e),p(t),p(a)),G(y),G(Z)}}}function at(d){let e,s="Alertas",t,a,r,o,l,n,f="23 EPIs vencendo em 30 dias",m,i,b,h,g,u="12 itens com estoque baixo",k;return o=new ge({props:{class:"w-4 h-4 text-yellow-600"}}),b=new ge({props:{class:"w-4 h-4 text-red-600"}}),{c(){e=w("h3"),e.textContent=s,t=q(),a=w("div"),r=w("div"),U(o.$$.fragment),l=q(),n=w("span"),n.textContent=f,m=q(),i=w("div"),U(b.$$.fragment),h=q(),g=w("span"),g.textContent=u,this.h()},l(y){e=x(y,"H3",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-103vt7x"&&(e.textContent=s),t=P(y),a=x(y,"DIV",{class:!0});var T=S(a);r=x(T,"DIV",{class:!0});var A=S(r);K(o.$$.fragment,A),l=P(A),n=x(A,"SPAN",{class:!0,"data-svelte-h":!0}),X(n)!=="svelte-79ea4n"&&(n.textContent=f),A.forEach(p),m=P(T),i=x(T,"DIV",{class:!0});var E=S(i);K(b.$$.fragment,E),h=P(E),g=x(E,"SPAN",{class:!0,"data-svelte-h":!0}),X(g)!=="svelte-1ahloid"&&(g.textContent=u),E.forEach(p),T.forEach(p),this.h()},h(){$(e,"class","text-lg font-semibold text-gray-900 dark:text-white mb-2"),$(n,"class","text-sm text-gray-600 dark:text-gray-400"),$(r,"class","flex items-center space-x-2"),$(g,"class","text-sm text-gray-600 dark:text-gray-400"),$(i,"class","flex items-center space-x-2"),$(a,"class","space-y-2")},m(y,T){N(y,e,T),N(y,t,T),N(y,a,T),c(a,r),J(o,r,null),c(r,l),c(r,n),c(a,m),c(a,i),J(b,i,null),c(i,h),c(i,g),k=!0},p:me,i(y){k||(j(o.$$.fragment,y),j(b.$$.fragment,y),k=!0)},o(y){R(o.$$.fragment,y),R(b.$$.fragment,y),k=!1},d(y){y&&(p(e),p(t),p(a)),G(o),G(b)}}}function st(d){let e,s,t,a='<div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">Dashboard</h1> <p class="text-sm text-gray-600 dark:text-gray-400">Vis√£o geral do sistema de gerenciamento de EPIs</p></div>',r,o,l,n,f,m,i,b,h,g,u,k,y,T,A;const E=[Ge,Le],_=[];function H(v,C){return v[1]?0:1}l=H(d),n=_[l]=E[l](d),b=new re({props:{size:"sm",class:"rounded-sm w-full max-w-none shadow-none",$$slots:{default:[Ke]},$$scope:{ctx:d}}});let V=d[3]&&d[3].contratadaStats&&d[3].contratadaStats.topContratadas.length>0&&De(d);return k=new re({props:{size:"sm",class:"rounded-sm shadow-none",$$slots:{default:[tt]},$$scope:{ctx:d}}}),T=new re({props:{size:"sm",class:"rounded-sm border-l-4 border-l-yellow-500 shadow-none",$$slots:{default:[at]},$$scope:{ctx:d}}}),{c(){e=q(),s=w("div"),t=w("div"),t.innerHTML=a,r=q(),o=w("div"),n.c(),f=q(),m=w("div"),i=w("div"),U(b.$$.fragment),h=q(),V&&V.c(),g=q(),u=w("div"),U(k.$$.fragment),y=q(),U(T.$$.fragment),this.h()},l(v){qe("svelte-s5dteg",document.head).forEach(p),e=P(v),s=x(v,"DIV",{class:!0});var B=S(s);t=x(B,"DIV",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-13se1wv"&&(t.innerHTML=a),r=P(B),o=x(B,"DIV",{class:!0});var D=S(o);n.l(D),D.forEach(p),f=P(B),m=x(B,"DIV",{class:!0});var I=S(m);i=x(I,"DIV",{class:!0});var F=S(i);K(b.$$.fragment,F),h=P(F),V&&V.l(F),F.forEach(p),g=P(I),u=x(I,"DIV",{class:!0});var Q=S(u);K(k.$$.fragment,Q),y=P(Q),K(T.$$.fragment,Q),Q.forEach(p),I.forEach(p),B.forEach(p),this.h()},h(){document.title="Dashboard - DataLife EPI",$(t,"class","flex items-center justify-between"),$(o,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"),$(i,"class","lg:col-span-2 space-y-6"),$(u,"class","space-y-6"),$(m,"class","grid grid-cols-1 lg:grid-cols-3 gap-6"),$(s,"class","space-y-6")},m(v,C){N(v,e,C),N(v,s,C),c(s,t),c(s,r),c(s,o),_[l].m(o,null),c(s,f),c(s,m),c(m,i),J(b,i,null),c(i,h),V&&V.m(i,null),c(m,g),c(m,u),J(k,u,null),c(u,y),J(T,u,null),A=!0},p(v,[C]){let B=l;l=H(v),l===B?_[l].p(v,C):(ae(),R(_[B],1,1,()=>{_[B]=null}),te(),n=_[l],n?n.p(v,C):(n=_[l]=E[l](v),n.c()),j(n,1),n.m(o,null));const D={};C&67108868&&(D.$$scope={dirty:C,ctx:v}),b.$set(D),v[3]&&v[3].contratadaStats&&v[3].contratadaStats.topContratadas.length>0?V?(V.p(v,C),C&8&&j(V,1)):(V=De(v),V.c(),j(V,1),V.m(i,null)):V&&(ae(),R(V,1,1,()=>{V=null}),te());const I={};C&67108880&&(I.$$scope={dirty:C,ctx:v}),k.$set(I);const F={};C&67108864&&(F.$$scope={dirty:C,ctx:v}),T.$set(F)},i(v){A||(j(n),j(b.$$.fragment,v),j(V),j(k.$$.fragment,v),j(T.$$.fragment,v),A=!0)},o(v){R(n),R(b.$$.fragment,v),R(V),R(k.$$.fragment,v),R(T.$$.fragment,v),A=!1},d(v){v&&(p(e),p(s)),_[l].d(),G(b),V&&V.d(),G(k),G(T)}}}function rt(d){switch(d){case"entrega":return"green";case"devolucao":return"blue";case"entrada":return"purple";case"vencimento":return"yellow";case"ficha":return"indigo";default:return"gray"}}function Ie(d){switch(rt(d)){case"green":return"bg-green-100 dark:bg-green-900";case"blue":return"bg-blue-100 dark:bg-blue-900";case"purple":return"bg-purple-100 dark:bg-purple-900";case"yellow":return"bg-yellow-100 dark:bg-yellow-900";case"indigo":return"bg-indigo-100 dark:bg-indigo-900";default:return"bg-gray-100 dark:bg-gray-900"}}function lt(d,e,s){let t,a,r,o;const l=oe(null);de(d,l,u=>s(3,r=u));const n=oe(!0);de(d,n,u=>s(1,t=u));const f=oe(null);let m=[];async function i(){try{n.set(!0),f.set(null);const u=await ze.getDashboardData();l.set(u),s(0,m=[{title:"Fichas Ativas",value:u.metrics.fichasAtivas.toString(),icon:he,color:"blue",change:u.metrics.fichasAtivasChange||"0%",changeType:"positive"},{title:"EPIs Entregues",value:u.metrics.episEntregues.toString(),icon:xe,color:"green",change:u.metrics.episEntreguesChange||"0%",changeType:"positive"},{title:"EPIs Vencendo",value:u.metrics.episVencendo.toString(),icon:ge,color:"yellow",change:u.metrics.episVencendoChange||"0%",changeType:"negative"},{title:"Estoque Baixo",value:u.metrics.estoqueBaixo.toString(),icon:be,color:"red",change:u.metrics.estoqueBaixoChange||"0%",changeType:"positive"}]),b.set(u.activities),h.set(u.quickStats),console.log("üìä Dashboard carregado com sucesso:",u)}catch(u){console.error("‚ùå Erro ao carregar dashboard:",u),f.set(u instanceof Error?u.message:"Erro desconhecido")}finally{n.set(!1)}}const b=oe([]);de(d,b,u=>s(2,a=u));const h=oe({totalColaboradores:0,fichasVencidas:0,estoqueTotal:0,entregasHoje:0});de(d,h,u=>s(4,o=u)),Ne([h],([u])=>{var k;return u.fichasVencidas+((k=m.find(y=>y.title==="Estoque Baixo"))==null?void 0:k.value)||0});function g(u){switch(u){case"entrega":return xe;case"devolucao":return Re;case"entrada":return be;case"vencimento":return ge;case"ficha":return he;default:return he}}return Te(()=>{i();const u=setInterval(()=>{h.update(k=>({...k,entregasHoje:k.entregasHoje+Math.floor(Math.random()*2)}))},3e4);return()=>clearInterval(u)}),[m,t,a,r,o,l,n,b,h,g]}class vt extends Se{constructor(e){super(),Ae(this,e,lt,st,Pe,{})}}export{vt as component};
