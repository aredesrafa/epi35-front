import{S as Qe,i as Ze,s as Ge,d as g,A as Q,m as y,o as k,p as _e,q as ve,b as q,c as d,B as Z,O as E,a4 as Ja,h as F,e as $,f as D,T as ke,C as G,k as V,j as b,D as J,Y as Xe,n as Ae,g as x,t as R,a as ne,r as Ie,M as Ue,G as bt,J as Et,K as kt,L as It,v as sr,E as ut,H as Dt,a6 as Ct,ab as qt,z as yt,Z as Re,a7 as je,a8 as He,x as ir,l as Wa,U as Ka}from"../chunks/BMdB51sm.js";import"../chunks/IHki7fMi.js";import{f as $t}from"../chunks/DQAhpDP7.js";import{B as Ne,e as nt,a as Oe,g as cr,d as ur}from"../chunks/Dwq3Do7L.js";import{a as Pt,E as Nt,T as fr,c as dr,d as mr,R as Ya,e as ht,f as gr,g as _t,L as We,b as Xa,S as er,i as pr,h as hr}from"../chunks/CWIIKvcO.js";import{I as At,n as xe,b as _r}from"../chunks/DV0aLKez.js";import{e as Ve,u as st,o as ft,d as vr}from"../chunks/BIKDjfmO.js";import{C as $r}from"../chunks/BVvHLR6M.js";import{C as br}from"../chunks/Bc5r9wXl.js";import{E as Er}from"../chunks/urJgHiP9.js";import{P as it}from"../chunks/C1IGLM4g.js";import{S as tr}from"../chunks/zy2cWNNC.js";import{S as ot,a as dt,T as kr,D as Ir}from"../chunks/-GdxS4z8.js";import{U as Ye}from"../chunks/D1bAV70r.js";import{w as wr}from"../chunks/B-FKEqiI.js";import{I as ar}from"../chunks/B-kfmAqx.js";import{E as St}from"../chunks/WMDR_Hax.js";import{C as Dr}from"../chunks/CkEY7Pra.js";import{C as rr}from"../chunks/BDKByL26.js";import{f as wt}from"../chunks/5lP0jMhK.js";import{T as Cr,Q as yr,F as Pr,G as Ar,P as Fr}from"../chunks/Dt_Q5vBM.js";import{M as Vr}from"../chunks/DmcNV7vt.js";function xt(l,e,t){const a=l.slice();return a[21]=e[t],a}function qr(l){let e,t,a;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){J(e.$$.fragment),t=R(`
        Nova Ficha`)},l(r){G(e.$$.fragment,r),t=x(r,`
        Nova Ficha`)},m(r,o){Z(e,r,o),q(r,t,o),a=!0},p:Ae,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&g(t),Q(e,r)}}}function Nr(l){let e,t;return e=new $r({props:{size:"sm",class:"rounded-sm",$$slots:{default:[Mr]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p(a,r){const o={};r&16777232&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Sr(l){let e,t,a,r,o,s,n,i,c,u,f,p,m,h,I,w,A,N,z,O,S,B,M,U;o=new tr({props:{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}}),n=new At({props:{type:"text",placeholder:"Buscar por nome, CPF ou matr√≠cula...",class:"pl-10 rounded-sm h-10 text-sm",value:l[4].searchTerm}}),n.$on("input",l[7]),u=new ot({props:{options:l[5].empresas,value:l[4].empresaFilter,placeholder:"Empresa",color:"alternative"}}),u.$on("change",l[8]),m=new ot({props:{options:l[5].cargos,value:l[4].cargoFilter,placeholder:"Cargo",color:"alternative"}}),m.$on("change",l[9]),w=new br({props:{checked:l[4].devolucaoPendente,$$slots:{default:[xr]},$$scope:{ctx:l}}}),w.$on("change",l[10]);const K=[jr,Rr],_=[];function P(C,v){return C[4].hasActiveFilters?0:1}N=P(l),z=_[N]=K[N](l),B=new fr({props:{hoverable:!0,$$slots:{default:[al]},$$scope:{ctx:l}}});let T=l[3].totalPages>1&&Qt(l);return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("div"),J(o.$$.fragment),s=V(),J(n.$$.fragment),i=V(),c=b("div"),J(u.$$.fragment),f=V(),p=b("div"),J(m.$$.fragment),h=V(),I=b("div"),J(w.$$.fragment),A=V(),z.c(),O=V(),S=b("div"),J(B.$$.fragment),M=V(),T&&T.c(),this.h()},l(C){e=$(C,"DIV",{class:!0});var v=D(e);t=$(v,"DIV",{class:!0});var j=D(t);a=$(j,"DIV",{class:!0});var W=D(a);r=$(W,"DIV",{class:!0});var ae=D(r);G(o.$$.fragment,ae),s=F(ae),G(n.$$.fragment,ae),ae.forEach(g),i=F(W),c=$(W,"DIV",{class:!0});var oe=D(c);G(u.$$.fragment,oe),oe.forEach(g),f=F(W),p=$(W,"DIV",{class:!0});var le=D(p);G(m.$$.fragment,le),le.forEach(g),h=F(W),I=$(W,"DIV",{class:!0});var H=D(I);G(w.$$.fragment,H),H.forEach(g),A=F(W),z.l(W),W.forEach(g),j.forEach(g),O=F(v),S=$(v,"DIV",{class:!0});var se=D(S);G(B.$$.fragment,se),se.forEach(g),M=F(v),T&&T.l(v),v.forEach(g),this.h()},h(){E(r,"class","relative"),E(c,"class","relative z-30"),E(p,"class","relative z-20"),E(I,"class","flex items-center"),E(a,"class","grid grid-cols-1 md:grid-cols-5 gap-4 relative"),E(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),E(S,"class","min-w-[680px] overflow-x-auto"),E(e,"class","bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden")},m(C,v){q(C,e,v),d(e,t),d(t,a),d(a,r),Z(o,r,null),d(r,s),Z(n,r,null),d(a,i),d(a,c),Z(u,c,null),d(a,f),d(a,p),Z(m,p,null),d(a,h),d(a,I),Z(w,I,null),d(a,A),_[N].m(a,null),d(e,O),d(e,S),Z(B,S,null),d(e,M),T&&T.m(e,null),U=!0},p(C,v){const j={};v&16&&(j.value=C[4].searchTerm),n.$set(j);const W={};v&32&&(W.options=C[5].empresas),v&16&&(W.value=C[4].empresaFilter),u.$set(W);const ae={};v&32&&(ae.options=C[5].cargos),v&16&&(ae.value=C[4].cargoFilter),m.$set(ae);const oe={};v&16&&(oe.checked=C[4].devolucaoPendente),v&16777216&&(oe.$$scope={dirty:v,ctx:C}),w.$set(oe);let le=N;N=P(C),N===le?_[N].p(C,v):(_e(),y(_[le],1,1,()=>{_[le]=null}),ve(),z=_[N],z?z.p(C,v):(z=_[N]=K[N](C),z.c()),k(z,1),z.m(a,null));const H={};v&16777217&&(H.$$scope={dirty:v,ctx:C}),B.$set(H),C[3].totalPages>1?T?(T.p(C,v),v&8&&k(T,1)):(T=Qt(C),T.c(),k(T,1),T.m(e,null)):T&&(_e(),y(T,1,1,()=>{T=null}),ve())},i(C){U||(k(o.$$.fragment,C),k(n.$$.fragment,C),k(u.$$.fragment,C),k(m.$$.fragment,C),k(w.$$.fragment,C),k(z),k(B.$$.fragment,C),k(T),U=!0)},o(C){y(o.$$.fragment,C),y(n.$$.fragment,C),y(u.$$.fragment,C),y(m.$$.fragment,C),y(w.$$.fragment,C),y(z),y(B.$$.fragment,C),y(T),U=!1},d(C){C&&g(e),Q(o),Q(n),Q(u),Q(m),Q(w),_[N].d(),Q(B),T&&T.d()}}}function zr(l){let e,t;return e=new Nt({props:{error:l[2],onRetry:l[15]}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p(a,r){const o={};r&4&&(o.error=a[2]),r&8&&(o.onRetry=a[15]),e.$set(o)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Tr(l){let e,t;return e=new Pt({}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Or(l){let e,t,a=l[4].hasActiveFilters?"Nova Ficha":"Primeira Ficha",r,o;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){J(e.$$.fragment),t=V(),r=R(a)},l(s){G(e.$$.fragment,s),t=F(s),r=x(s,a)},m(s,n){Z(e,s,n),q(s,t,n),q(s,r,n),o=!0},p(s,n){(!o||n&16)&&a!==(a=s[4].hasActiveFilters?"Nova Ficha":"Primeira Ficha")&&ne(r,a)},i(s){o||(k(e.$$.fragment,s),o=!0)},o(s){y(e.$$.fragment,s),o=!1},d(s){s&&(g(t),g(r)),Q(e,s)}}}function Mr(l){let e,t,a,r,o,s="Nenhuma ficha encontrada",n,i,c=l[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece cadastrando uma nova ficha de EPI",u,f,p,m;return a=new tr({props:{class:"w-8 h-8 text-gray-400"}}),p=new Ne({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[Or]},$$scope:{ctx:l}}}),p.$on("click",l[14]),{c(){e=b("div"),t=b("div"),J(a.$$.fragment),r=V(),o=b("h3"),o.textContent=s,n=V(),i=b("p"),u=R(c),f=V(),J(p.$$.fragment),this.h()},l(h){e=$(h,"DIV",{class:!0});var I=D(e);t=$(I,"DIV",{class:!0});var w=D(t);G(a.$$.fragment,w),w.forEach(g),r=F(I),o=$(I,"H3",{class:!0,"data-svelte-h":!0}),ke(o)!=="svelte-qm1del"&&(o.textContent=s),n=F(I),i=$(I,"P",{class:!0});var A=D(i);u=x(A,c),A.forEach(g),f=F(I),G(p.$$.fragment,I),I.forEach(g),this.h()},h(){E(t,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"),E(o,"class","text-lg font-medium text-gray-900 dark:text-white mb-2"),E(i,"class","text-gray-500 dark:text-gray-400 mb-6"),E(e,"class","text-center py-12")},m(h,I){q(h,e,I),d(e,t),Z(a,t,null),d(e,r),d(e,o),d(e,n),d(e,i),d(i,u),d(e,f),Z(p,e,null),m=!0},p(h,I){(!m||I&16)&&c!==(c=h[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece cadastrando uma nova ficha de EPI")&&ne(u,c);const w={};I&16777232&&(w.$$scope={dirty:I,ctx:h}),p.$set(w)},i(h){m||(k(a.$$.fragment,h),k(p.$$.fragment,h),m=!0)},o(h){y(a.$$.fragment,h),y(p.$$.fragment,h),m=!1},d(h){h&&g(e),Q(a),Q(p)}}}function xr(l){let e;return{c(){e=R("Pendentes devolu√ß√£o")},l(t){e=x(t,"Pendentes devolu√ß√£o")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Rr(l){let e;return{c(){e=b("div")},l(t){e=$(t,"DIV",{}),D(e).forEach(g)},m(t,a){q(t,e,a)},p:Ae,i:Ae,o:Ae,d(t){t&&g(e)}}}function jr(l){let e,t;return e=new Ne({props:{color:"alternative",class:"rounded-sm h-10 w-10 p-0 flex items-center justify-center",title:"Limpar Filtros",$$slots:{default:[Hr]},$$scope:{ctx:l}}}),e.$on("click",l[11]),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p(a,r){const o={};r&16777216&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Hr(l){let e,t;return e=new Ya({props:{class:"w-4 h-4"}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Ur(l){let e;return{c(){e=R("Colaborador")},l(t){e=x(t,"Colaborador")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Lr(l){let e;return{c(){e=R("Empresa")},l(t){e=x(t,"Empresa")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Br(l){let e;return{c(){e=R("EPIs Ativos")},l(t){e=x(t,"EPIs Ativos")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Qr(l){let e;return{c(){e=R("A√ß√µes")},l(t){e=x(t,"A√ß√µes")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Zr(l){let e,t,a,r,o,s,n,i;return e=new ht({props:{$$slots:{default:[Ur]},$$scope:{ctx:l}}}),a=new ht({props:{$$slots:{default:[Lr]},$$scope:{ctx:l}}}),o=new ht({props:{$$slots:{default:[Br]},$$scope:{ctx:l}}}),n=new ht({props:{$$slots:{default:[Qr]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment),t=V(),J(a.$$.fragment),r=V(),J(o.$$.fragment),s=V(),J(n.$$.fragment)},l(c){G(e.$$.fragment,c),t=F(c),G(a.$$.fragment,c),r=F(c),G(o.$$.fragment,c),s=F(c),G(n.$$.fragment,c)},m(c,u){Z(e,c,u),q(c,t,u),Z(a,c,u),q(c,r,u),Z(o,c,u),q(c,s,u),Z(n,c,u),i=!0},p(c,u){const f={};u&16777216&&(f.$$scope={dirty:u,ctx:c}),e.$set(f);const p={};u&16777216&&(p.$$scope={dirty:u,ctx:c}),a.$set(p);const m={};u&16777216&&(m.$$scope={dirty:u,ctx:c}),o.$set(m);const h={};u&16777216&&(h.$$scope={dirty:u,ctx:c}),n.$set(h)},i(c){i||(k(e.$$.fragment,c),k(a.$$.fragment,c),k(o.$$.fragment,c),k(n.$$.fragment,c),i=!0)},o(c){y(e.$$.fragment,c),y(a.$$.fragment,c),y(o.$$.fragment,c),y(n.$$.fragment,c),i=!1},d(c){c&&(g(t),g(r),g(s)),Q(e,c),Q(a,c),Q(o,c),Q(n,c)}}}function Rt(l){let e,t,a=l[21].colaborador.matricula+"",r;return{c(){e=b("span"),t=R("Matr√≠cula: "),r=R(a),this.h()},l(o){e=$(o,"SPAN",{class:!0});var s=D(e);t=x(s,"Matr√≠cula: "),r=x(s,a),s.forEach(g),this.h()},h(){E(e,"class","text-xs text-gray-400 dark:text-gray-500")},m(o,s){q(o,e,s),d(e,t),d(e,r)},p(o,s){s&1&&a!==(a=o[21].colaborador.matricula+"")&&ne(r,a)},d(o){o&&g(e)}}}function Gr(l){let e,t,a=l[21].colaborador.nome+"",r,o,s,n=Zt(l[21].colaborador.cpf)+"",i,c,u=l[21].colaborador.matricula&&Rt(l);return{c(){e=b("div"),t=b("span"),r=R(a),o=V(),s=b("span"),i=R(n),c=V(),u&&u.c(),this.h()},l(f){e=$(f,"DIV",{class:!0});var p=D(e);t=$(p,"SPAN",{class:!0});var m=D(t);r=x(m,a),m.forEach(g),o=F(p),s=$(p,"SPAN",{class:!0});var h=D(s);i=x(h,n),h.forEach(g),c=F(p),u&&u.l(p),p.forEach(g),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white"),E(s,"class","text-sm text-gray-500 dark:text-gray-400"),E(e,"class","flex flex-col")},m(f,p){q(f,e,p),d(e,t),d(t,r),d(e,o),d(e,s),d(s,i),d(e,c),u&&u.m(e,null)},p(f,p){p&1&&a!==(a=f[21].colaborador.nome+"")&&ne(r,a),p&1&&n!==(n=Zt(f[21].colaborador.cpf)+"")&&ne(i,n),f[21].colaborador.matricula?u?u.p(f,p):(u=Rt(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(f){f&&g(e),u&&u.d()}}}function jt(l){let e,t=l[21].colaborador.cargo+"",a;return{c(){e=b("div"),a=R(t),this.h()},l(r){e=$(r,"DIV",{class:!0});var o=D(e);a=x(o,t),o.forEach(g),this.h()},h(){E(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(r,o){q(r,e,o),d(e,a)},p(r,o){o&1&&t!==(t=r[21].colaborador.cargo+"")&&ne(a,t)},d(r){r&&g(e)}}}function Jr(l){let e,t,a=(l[21].colaborador.empresa||"Empresa n√£o informada")+"",r,o,s=l[21].colaborador.cargo&&jt(l);return{c(){e=b("div"),t=b("span"),r=R(a),o=V(),s&&s.c(),this.h()},l(n){e=$(n,"DIV",{});var i=D(e);t=$(i,"SPAN",{class:!0});var c=D(t);r=x(c,a),c.forEach(g),o=F(i),s&&s.l(i),i.forEach(g),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white")},m(n,i){q(n,e,i),d(e,t),d(t,r),d(e,o),s&&s.m(e,null)},p(n,i){i&1&&a!==(a=(n[21].colaborador.empresa||"Empresa n√£o informada")+"")&&ne(r,a),n[21].colaborador.cargo?s?s.p(n,i):(s=jt(n),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(n){n&&g(e),s&&s.d()}}}function Wr(l){var r;let e=(l[21].totalEpisAtivos||((r=l[21].episInfo)==null?void 0:r.totalEpisComColaborador)||0)+"",t,a;return{c(){t=R(e),a=R(" EPIs")},l(o){t=x(o,e),a=x(o," EPIs")},m(o,s){q(o,t,s),q(o,a,s)},p(o,s){var n;s&1&&e!==(e=(o[21].totalEpisAtivos||((n=o[21].episInfo)==null?void 0:n.totalEpisComColaborador)||0)+"")&&ne(t,e)},d(o){o&&(g(t),g(a))}}}function Ht(l){let e,t;return e=new nt({props:{color:"red",class:"w-fit rounded-sm",$$slots:{default:[Kr]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p(a,r){const o={};r&16777217&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Kr(l){var r;let e=(((r=l[21].episInfo)==null?void 0:r.episExpirados)||l[21].totalEpisVencidos)+"",t,a;return{c(){t=R(e),a=R(" vencido(s)")},l(o){t=x(o,e),a=x(o," vencido(s)")},m(o,s){q(o,t,s),q(o,a,s)},p(o,s){var n;s&1&&e!==(e=(((n=o[21].episInfo)==null?void 0:n.episExpirados)||o[21].totalEpisVencidos)+"")&&ne(t,e)},d(o){o&&(g(t),g(a))}}}function Ut(l){let e,t=l[21].episInfo.tiposEpisAtivos.slice(0,2).map(Gt).join(", ")+"",a,r,o=l[21].episInfo.tiposEpisAtivos.length>2&&Lt(l);return{c(){e=b("div"),a=R(t),r=V(),o&&o.c(),this.h()},l(s){e=$(s,"DIV",{class:!0});var n=D(e);a=x(n,t),r=F(n),o&&o.l(n),n.forEach(g),this.h()},h(){E(e,"class","text-xs text-gray-500 dark:text-gray-400 mt-1")},m(s,n){q(s,e,n),d(e,a),d(e,r),o&&o.m(e,null)},p(s,n){n&1&&t!==(t=s[21].episInfo.tiposEpisAtivos.slice(0,2).map(Gt).join(", ")+"")&&ne(a,t),s[21].episInfo.tiposEpisAtivos.length>2?o?o.p(s,n):(o=Lt(s),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(s){s&&g(e),o&&o.d()}}}function Lt(l){let e,t,a=l[21].episInfo.tiposEpisAtivos.length-2+"",r;return{c(){e=b("span"),t=R("... +"),r=R(a)},l(o){e=$(o,"SPAN",{});var s=D(e);t=x(s,"... +"),r=x(s,a),s.forEach(g)},m(o,s){q(o,e,s),d(e,t),d(e,r)},p(o,s){s&1&&a!==(a=o[21].episInfo.tiposEpisAtivos.length-2+"")&&ne(r,a)},d(o){o&&g(e)}}}function Yr(l){var c,u,f;let e,t,a,r,o,s;t=new nt({props:{color:"blue",class:"w-fit rounded-sm",$$slots:{default:[Wr]},$$scope:{ctx:l}}});let n=(((c=l[21].episInfo)==null?void 0:c.episExpirados)||l[21].totalEpisVencidos)&&((((u=l[21].episInfo)==null?void 0:u.episExpirados)||0)>0||(l[21].totalEpisVencidos||0)>0)&&Ht(l),i=((f=l[21].episInfo)==null?void 0:f.tiposEpisAtivos)&&l[21].episInfo.tiposEpisAtivos.length>0&&Ut(l);return{c(){e=b("div"),J(t.$$.fragment),a=V(),n&&n.c(),r=V(),i&&i.c(),o=Ie(),this.h()},l(p){e=$(p,"DIV",{class:!0});var m=D(e);G(t.$$.fragment,m),a=F(m),n&&n.l(m),m.forEach(g),r=F(p),i&&i.l(p),o=Ie(),this.h()},h(){E(e,"class","flex flex-wrap gap-1")},m(p,m){q(p,e,m),Z(t,e,null),d(e,a),n&&n.m(e,null),q(p,r,m),i&&i.m(p,m),q(p,o,m),s=!0},p(p,m){var I,w,A;const h={};m&16777217&&(h.$$scope={dirty:m,ctx:p}),t.$set(h),((I=p[21].episInfo)!=null&&I.episExpirados||p[21].totalEpisVencidos)&&((((w=p[21].episInfo)==null?void 0:w.episExpirados)||0)>0||(p[21].totalEpisVencidos||0)>0)?n?(n.p(p,m),m&1&&k(n,1)):(n=Ht(p),n.c(),k(n,1),n.m(e,null)):n&&(_e(),y(n,1,1,()=>{n=null}),ve()),(A=p[21].episInfo)!=null&&A.tiposEpisAtivos&&p[21].episInfo.tiposEpisAtivos.length>0?i?i.p(p,m):(i=Ut(p),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},i(p){s||(k(t.$$.fragment,p),k(n),s=!0)},o(p){y(t.$$.fragment,p),y(n),s=!1},d(p){p&&(g(e),g(r),g(o)),Q(t),n&&n.d(),i&&i.d(p)}}}function Xr(l){let e,t,a,r,o,s;a=new Er({props:{class:"w-4 h-4"}});function n(...i){return l[16](l[21],...i)}return{c(){e=b("div"),t=b("button"),J(a.$$.fragment),this.h()},l(i){e=$(i,"DIV",{class:!0});var c=D(e);t=$(c,"BUTTON",{class:!0,title:!0});var u=D(t);G(a.$$.fragment,u),u.forEach(g),c.forEach(g),this.h()},h(){E(t,"class","p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-700"),E(t,"title","Ver Detalhes"),E(e,"class","flex space-x-1")},m(i,c){q(i,e,c),d(e,t),Z(a,t,null),r=!0,o||(s=Ue(t,"click",n),o=!0)},p(i,c){l=i},i(i){r||(k(a.$$.fragment,i),r=!0)},o(i){y(a.$$.fragment,i),r=!1},d(i){i&&g(e),Q(a),o=!1,s()}}}function el(l){let e,t,a,r,o,s,n,i,c;return e=new _t({props:{$$slots:{default:[Gr]},$$scope:{ctx:l}}}),a=new _t({props:{$$slots:{default:[Jr]},$$scope:{ctx:l}}}),o=new _t({props:{$$slots:{default:[Yr]},$$scope:{ctx:l}}}),n=new _t({props:{$$slots:{default:[Xr]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment),t=V(),J(a.$$.fragment),r=V(),J(o.$$.fragment),s=V(),J(n.$$.fragment),i=V()},l(u){G(e.$$.fragment,u),t=F(u),G(a.$$.fragment,u),r=F(u),G(o.$$.fragment,u),s=F(u),G(n.$$.fragment,u),i=F(u)},m(u,f){Z(e,u,f),q(u,t,f),Z(a,u,f),q(u,r,f),Z(o,u,f),q(u,s,f),Z(n,u,f),q(u,i,f),c=!0},p(u,f){const p={};f&16777217&&(p.$$scope={dirty:f,ctx:u}),e.$set(p);const m={};f&16777217&&(m.$$scope={dirty:f,ctx:u}),a.$set(m);const h={};f&16777217&&(h.$$scope={dirty:f,ctx:u}),o.$set(h);const I={};f&16777217&&(I.$$scope={dirty:f,ctx:u}),n.$set(I)},i(u){c||(k(e.$$.fragment,u),k(a.$$.fragment,u),k(o.$$.fragment,u),k(n.$$.fragment,u),c=!0)},o(u){y(e.$$.fragment,u),y(a.$$.fragment,u),y(o.$$.fragment,u),y(n.$$.fragment,u),c=!1},d(u){u&&(g(t),g(r),g(s),g(i)),Q(e,u),Q(a,u),Q(o,u),Q(n,u)}}}function Bt(l,e){let t,a,r;function o(){return e[17](e[21])}return a=new gr({props:{class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer",$$slots:{default:[el]},$$scope:{ctx:e}}}),a.$on("click",o),{key:l,first:null,c(){t=Ie(),J(a.$$.fragment),this.h()},l(s){t=Ie(),G(a.$$.fragment,s),this.h()},h(){this.first=t},m(s,n){q(s,t,n),Z(a,s,n),r=!0},p(s,n){e=s;const i={};n&16777217&&(i.$$scope={dirty:n,ctx:e}),a.$set(i)},i(s){r||(k(a.$$.fragment,s),r=!0)},o(s){y(a.$$.fragment,s),r=!1},d(s){s&&g(t),Q(a,s)}}}function tl(l){let e=[],t=new Map,a,r,o=Ve(l[0]);const s=n=>n[21].id;for(let n=0;n<o.length;n+=1){let i=xt(l,o,n),c=s(i);t.set(c,e[n]=Bt(c,i))}return{c(){for(let n=0;n<e.length;n+=1)e[n].c();a=Ie()},l(n){for(let i=0;i<e.length;i+=1)e[i].l(n);a=Ie()},m(n,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(n,i);q(n,a,i),r=!0},p(n,i){i&8193&&(o=Ve(n[0]),_e(),e=st(e,i,s,1,n,o,t,a.parentNode,ft,Bt,a,xt),ve())},i(n){if(!r){for(let i=0;i<o.length;i+=1)k(e[i]);r=!0}},o(n){for(let i=0;i<e.length;i+=1)y(e[i]);r=!1},d(n){n&&g(a);for(let i=0;i<e.length;i+=1)e[i].d(n)}}}function al(l){let e,t,a,r;return e=new dr({props:{$$slots:{default:[Zr]},$$scope:{ctx:l}}}),a=new mr({props:{$$slots:{default:[tl]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment),t=V(),J(a.$$.fragment)},l(o){G(e.$$.fragment,o),t=F(o),G(a.$$.fragment,o)},m(o,s){Z(e,o,s),q(o,t,s),Z(a,o,s),r=!0},p(o,s){const n={};s&16777216&&(n.$$scope={dirty:s,ctx:o}),e.$set(n);const i={};s&16777217&&(i.$$scope={dirty:s,ctx:o}),a.$set(i)},i(o){r||(k(e.$$.fragment,o),k(a.$$.fragment,o),r=!0)},o(o){y(e.$$.fragment,o),y(a.$$.fragment,o),r=!1},d(o){o&&g(t),Q(e,o),Q(a,o)}}}function Qt(l){let e,t,a,r=Math.min((l[3].currentPage-1)*l[3].pageSize+1,l[3].total)+"",o,s,n=Math.min(l[3].currentPage*l[3].pageSize,l[3].total)+"",i,c,u=l[3].total+"",f,p,m,h,I,w,A,N,z=l[3].currentPage+"",O,S,B=l[3].totalPages+"",M,U,K,_;return I=new Ne({props:{color:"alternative",class:"rounded-sm",disabled:!l[3].hasPrev,$$slots:{default:[rl]},$$scope:{ctx:l}}}),I.$on("click",l[18]),K=new Ne({props:{color:"alternative",class:"rounded-sm",disabled:!l[3].hasNext,$$slots:{default:[ll]},$$scope:{ctx:l}}}),K.$on("click",l[19]),{c(){e=b("div"),t=b("div"),a=R("Mostrando "),o=R(r),s=R(" a "),i=R(n),c=R(" de "),f=R(u),p=R(" resultados"),m=V(),h=b("div"),J(I.$$.fragment),w=V(),A=b("span"),N=R("P√°gina "),O=R(z),S=R(" de "),M=R(B),U=V(),J(K.$$.fragment),this.h()},l(P){e=$(P,"DIV",{class:!0});var T=D(e);t=$(T,"DIV",{class:!0});var C=D(t);a=x(C,"Mostrando "),o=x(C,r),s=x(C," a "),i=x(C,n),c=x(C," de "),f=x(C,u),p=x(C," resultados"),C.forEach(g),m=F(T),h=$(T,"DIV",{class:!0});var v=D(h);G(I.$$.fragment,v),w=F(v),A=$(v,"SPAN",{class:!0});var j=D(A);N=x(j,"P√°gina "),O=x(j,z),S=x(j," de "),M=x(j,B),j.forEach(g),U=F(v),G(K.$$.fragment,v),v.forEach(g),T.forEach(g),this.h()},h(){E(t,"class","text-sm text-gray-500 dark:text-gray-400"),E(A,"class","flex items-center px-3 text-sm text-gray-500 dark:text-gray-400"),E(h,"class","flex space-x-2"),E(e,"class","flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700")},m(P,T){q(P,e,T),d(e,t),d(t,a),d(t,o),d(t,s),d(t,i),d(t,c),d(t,f),d(t,p),d(e,m),d(e,h),Z(I,h,null),d(h,w),d(h,A),d(A,N),d(A,O),d(A,S),d(A,M),d(h,U),Z(K,h,null),_=!0},p(P,T){(!_||T&8)&&r!==(r=Math.min((P[3].currentPage-1)*P[3].pageSize+1,P[3].total)+"")&&ne(o,r),(!_||T&8)&&n!==(n=Math.min(P[3].currentPage*P[3].pageSize,P[3].total)+"")&&ne(i,n),(!_||T&8)&&u!==(u=P[3].total+"")&&ne(f,u);const C={};T&8&&(C.disabled=!P[3].hasPrev),T&16777216&&(C.$$scope={dirty:T,ctx:P}),I.$set(C),(!_||T&8)&&z!==(z=P[3].currentPage+"")&&ne(O,z),(!_||T&8)&&B!==(B=P[3].totalPages+"")&&ne(M,B);const v={};T&8&&(v.disabled=!P[3].hasNext),T&16777216&&(v.$$scope={dirty:T,ctx:P}),K.$set(v)},i(P){_||(k(I.$$.fragment,P),k(K.$$.fragment,P),_=!0)},o(P){y(I.$$.fragment,P),y(K.$$.fragment,P),_=!1},d(P){P&&g(e),Q(I),Q(K)}}}function rl(l){let e;return{c(){e=R("Anterior")},l(t){e=x(t,"Anterior")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function ll(l){let e;return{c(){e=R("Pr√≥ximo")},l(t){e=x(t,"Pr√≥ximo")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function ol(l){let e,t,a,r,o='<h1 class="text-xl font-medium text-gray-900 dark:text-white">Fichas de EPI</h1> <p class="text-sm text-gray-600 dark:text-gray-400">Gerencie as fichas individuais de equipamentos de prote√ß√£o</p>',s,n,i,c,u,f,p;i=new Ne({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[qr]},$$scope:{ctx:l}}}),i.$on("click",l[14]);const m=[Tr,zr,Sr,Nr],h=[];function I(w,A){return w[1]?0:w[2]?1:w[0].length>0?2:3}return u=I(l),f=h[u]=m[u](l),{c(){e=V(),t=b("div"),a=b("div"),r=b("div"),r.innerHTML=o,s=V(),n=b("div"),J(i.$$.fragment),c=V(),f.c(),this.h()},l(w){Ja("svelte-161hi6l",document.head).forEach(g),e=F(w),t=$(w,"DIV",{class:!0});var N=D(t);a=$(N,"DIV",{class:!0});var z=D(a);r=$(z,"DIV",{"data-svelte-h":!0}),ke(r)!=="svelte-pifbsf"&&(r.innerHTML=o),s=F(z),n=$(z,"DIV",{class:!0});var O=D(n);G(i.$$.fragment,O),O.forEach(g),z.forEach(g),c=F(N),f.l(N),N.forEach(g),this.h()},h(){document.title="Fichas de EPI - DataLife EPI",E(n,"class","flex space-x-2"),E(a,"class","flex items-center justify-between"),E(t,"class","space-y-6")},m(w,A){q(w,e,A),q(w,t,A),d(t,a),d(a,r),d(a,s),d(a,n),Z(i,n,null),d(t,c),h[u].m(t,null),p=!0},p(w,[A]){const N={};A&16777216&&(N.$$scope={dirty:A,ctx:w}),i.$set(N);let z=u;u=I(w),u===z?h[u].p(w,A):(_e(),y(h[z],1,1,()=>{h[z]=null}),ve(),f=h[u],f?f.p(w,A):(f=h[u]=m[u](w),f.c()),k(f,1),f.m(t,null))},i(w){p||(k(i.$$.fragment,w),k(f),p=!0)},o(w){y(i.$$.fragment,w),y(f),p=!1},d(w){w&&(g(e),g(t)),Q(i),h[u].d()}}}function Zt(l){if(!l||l==="CPF n√£o dispon√≠vel"||l==="")return"CPF n√£o dispon√≠vel";const e=l.replace(/\D/g,"");return e.length!==11?l.includes("n√£o")?l:"CPF inv√°lido":e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}const Gt=l=>`${l.quantidade}x ${l.tipoEpiNome}`;function nl(l,e,t){let{items:a=[]}=e,{loading:r=!1}=e,{error:o=null}=e,{pagination:s}=e,{filters:n}=e,{filterOptions:i}=e;const c=Xe();function u(M){const U=M.target;c("searchChange",U.value)}function f(M){c("empresaFilterChange",M.detail)}function p(M){c("cargoFilterChange",M.detail)}function m(M){const U=M.target;console.log("‚òëÔ∏è FichasTablePresenter: Devolu√ß√£o pendente changed:",U.checked),c("devolucaoPendenteChange",U.checked)}function h(){c("clearFilters")}function I(M){c("pageChange",M)}function w(M){c("viewDetail",M)}function A(){c("novaFicha")}const N=()=>c("pageChange",s.currentPage),z=(M,U)=>{U.stopPropagation(),w(M.id.startsWith("FICHA")?M.id.substring(5):M.id)},O=M=>w(M.id),S=()=>I(s.currentPage-1),B=()=>I(s.currentPage+1);return l.$$set=M=>{"items"in M&&t(0,a=M.items),"loading"in M&&t(1,r=M.loading),"error"in M&&t(2,o=M.error),"pagination"in M&&t(3,s=M.pagination),"filters"in M&&t(4,n=M.filters),"filterOptions"in M&&t(5,i=M.filterOptions)},[a,r,o,s,n,i,c,u,f,p,m,h,I,w,A,N,z,O,S,B]}class sl extends Qe{constructor(e){super(),Ze(this,e,nl,ol,Ge,{items:0,loading:1,error:2,pagination:3,filters:4,filterOptions:5})}}const lr={ESTOQUE_ITEM:/^I[2-9A-HJ-NP-Z][2-9A-HJ-NP-Z][2-9A-HJ-NP-Z][2-9A-HJ-NP-Z][2-9A-HJ-NP-Z]$/,UUID:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i};function il(l){return typeof l=="string"&&lr.ESTOQUE_ITEM.test(l)}function or(l){return typeof l=="string"&&lr.UUID.test(l)}function ct(l){return!l||typeof l!="string"?l:or(l)?l.toLowerCase():l.toUpperCase()}function Vt(l,e="estoqueItem"){if(!l||typeof l!="string")return{originalId:l,mappedId:l,format:"unknown",isValid:!1,needsMapping:!1};const t=l.trim();return or(t)?{originalId:l,mappedId:ct(t),format:"uuid",isValid:!0,needsMapping:!1}:e==="estoqueItem"&&il(t)?{originalId:l,mappedId:ct(t),format:"custom",isValid:!0,needsMapping:!1}:t.match(/^FICHA(\d+)$/i)&&e==="fichaEpi"?{originalId:l,mappedId:t.toUpperCase(),format:"legacy",isValid:!0,needsMapping:!1}:t.match(/^[0-9A-F]{4,8}$/i)&&e==="estoqueItem"?{originalId:l,mappedId:t.toUpperCase(),format:"legacy",isValid:!0,needsMapping:!1}:{originalId:l,mappedId:t,format:"legacy",isValid:!1,needsMapping:!0}}function cl(l){const e=[],t=[],a=Vt(l.fichaEpiId,"fichaEpi");a.format==="legacy"&&t.push(`fichaEpiId "${l.fichaEpiId}" est√° em formato legado mas √© aceito`);const r=Vt(l.responsavelId,"responsavel");r.format==="legacy"&&t.push(`responsavelId "${l.responsavelId}" est√° em formato legado mas √© aceito`);const o=l.itens.map((n,i)=>{const c=Vt(n.estoqueItemId,"estoqueItem");return c.format==="legacy"&&t.push(`itens[${i}].estoqueItemId "${n.estoqueItemId}" est√° em formato legado mas √© aceito`),c.isValid||e.push(`itens[${i}].estoqueItemId "${n.estoqueItemId}" √© inv√°lido`),{estoqueItemId:c.mappedId,quantidade:n.quantidade,mapping:c}}),s=o.filter(n=>!n.mapping.isValid);return s.length>0&&e.push(`IDs de estoque inv√°lidos: ${s.map(n=>n.estoqueItemId).join(", ")}`),e.length>0?{isValid:!1,errors:e,warnings:t}:{isValid:!0,mappedPayload:{fichaEpiId:a.mappedId,responsavelId:r.mappedId,itens:o.map(n=>({estoqueItemId:n.estoqueItemId,quantidade:n.quantidade}))},errors:[],warnings:t}}class ul{async createDelivery(e){var r,o,s,n,i,c;if(console.log("üöö DeliveryProcessAdapter: Criando entrega via ficha espec√≠fica..."),console.log("üîç FichaEpiId:",e.fichaEpiId),console.log("üîç ResponsavelId:",e.responsavelId),console.log("üîç Itens count:",((r=e.itens)==null?void 0:r.length)||0),!e.fichaEpiId)throw new Error("fichaEpiId √© obrigat√≥rio");if(!e.responsavelId)throw new Error("responsavelId √© obrigat√≥rio");if(!e.itens||e.itens.length===0)throw new Error("Pelo menos um item √© obrigat√≥rio");console.log("üîç Validando e mapeando IDs do payload...");const t=cl(e);if(t.warnings.length>0&&console.warn("‚ö†Ô∏è Avisos no mapeamento de IDs:",t.warnings),!t.isValid)throw console.error("‚ùå Erro no mapeamento de IDs:",t.errors),new Error(`IDs inv√°lidos: ${t.errors.join(", ")}`);const a=t.mappedPayload||e;console.log("‚úÖ Payload validado e mapeado:",{original:{fichaEpiId:e.fichaEpiId,responsavelId:e.responsavelId,itemCount:e.itens.length},mapped:{fichaEpiId:a.fichaEpiId,responsavelId:a.responsavelId,itemCount:a.itens.length}});try{const u=[];a.itens.forEach(m=>{var h,I;console.log("üîç Processando item para expans√£o:",{estoqueItemId:m.estoqueItemId,quantidade:m.quantidade,isUUID:(h=m.estoqueItemId)==null?void 0:h.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isCustomId:(I=m.estoqueItemId)==null?void 0:I.match(/^[A-Z0-9]{6}$/i)});for(let w=0;w<m.quantidade;w++){const A=ct(m.estoqueItemId);u.push({estoqueItemOrigemId:A,numeroSerie:`SER-${A}-${w+1}`})}});const f={fichaEpiId:ct(a.fichaEpiId),quantidade:u.length,itens:u,assinaturaColaborador:"placeholder_signature",observacoes:e.observacoes||"",usuarioId:ct(a.responsavelId)};console.log("üìã Payload formatado para backend:",f),console.log("üîç Valida√ß√£o de IDs no payload:",{fichaEpiId:{value:a.fichaEpiId,isUUID:(o=a.fichaEpiId)==null?void 0:o.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isCustomId:(s=a.fichaEpiId)==null?void 0:s.match(/^[A-Z0-9]{6}$/i)},usuarioId:{value:a.responsavelId,isUUID:(n=a.responsavelId)==null?void 0:n.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isCustomId:(i=a.responsavelId)==null?void 0:i.match(/^[A-Z0-9]{6}$/i)},estoqueItemIds:u.map(m=>{var h,I;return{value:m.estoqueItemOrigemId,isUUID:(h=m.estoqueItemOrigemId)==null?void 0:h.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isCustomId:(I=m.estoqueItemOrigemId)==null?void 0:I.match(/^[A-Z0-9]{6}$/i)}})});const p=await Oe.post(`/fichas-epi/${a.fichaEpiId}/entregas`,f);return console.log("‚úÖ Entrega criada via endpoint da ficha:"),console.log(`  - Ficha ID: ${a.fichaEpiId} (original: ${e.fichaEpiId})`),console.log("  - Response:",p),p}catch(u){if(console.error("‚ùå Erro ao criar entrega via ficha:",u),u&&typeof u=="object"&&"response"in u){const f=u;(c=f.response)!=null&&c.data&&console.error("‚ùå Detalhes do erro do backend:",f.response.data)}throw u}}async validateDelivery(e){console.log("üîç DeliveryProcessAdapter: Validando entrega antes de criar:",e);try{const t=await Oe.post("/fichas-epi/entregas/validar",e);return console.log("‚úÖ Valida√ß√£o da entrega conclu√≠da:",t),t}catch(t){throw console.error("‚ùå Erro na valida√ß√£o da entrega:",t),t}}async confirmSignature(e,t){console.log("‚úçÔ∏è DeliveryProcessAdapter: Confirmando assinatura:",e);try{const a={assinaturaColaborador:t.assinatura,observacoes:"Entrega assinada pelo colaborador"};await Oe.put(`/fichas-epi/entregas/${e}/assinar`,a),console.log("‚úÖ Assinatura confirmada")}catch(a){throw console.error("‚ùå Erro ao confirmar assinatura:",a),a}}async cancelDelivery(e,t){console.log("‚ùå DeliveryProcessAdapter: Cancelando entrega:",e);try{await Oe.post(`/entregas/${e}/cancel`,t),console.log("‚úÖ Entrega cancelada")}catch(a){throw console.error("‚ùå Erro ao cancelar entrega:",a),a}}async printDelivery(e){console.log("üñ®Ô∏è DeliveryProcessAdapter: Gerando PDF da entrega:",e);try{const t=await Oe.get(`/entregas/${e}/print`);return console.log("‚úÖ PDF gerado"),t}catch(t){throw console.error("‚ùå Erro ao gerar PDF:",t),t}}async updateDelivery(e,t){console.log("‚úèÔ∏è DeliveryProcessAdapter: Editando entrega:",e);try{const a=await Oe.put(`/entregas/${e}`,t);return console.log("‚úÖ Entrega editada"),a}catch(a){throw console.error("‚ùå Erro ao editar entrega:",a),a}}async createDevolucao(e,t){console.log("üîÑ DeliveryProcessAdapter: Criando devolu√ß√£o:",e,t);try{const a=await Oe.post(`/fichas-epi/entregas/${e}/devolucao`,t);return console.log("‚úÖ Devolu√ß√£o criada com sucesso:",a),a}catch(a){throw console.error("‚ùå Erro ao criar devolu√ß√£o:",a),a}}async validateDevolucao(e,t){console.log("üîç DeliveryProcessAdapter: Validando devolu√ß√£o:",e,t);try{const a=await Oe.post(`/fichas-epi/entregas/${e}/devolucao/validar`,t);return console.log("‚úÖ Valida√ß√£o de devolu√ß√£o conclu√≠da:",a),a}catch(a){throw console.error("‚ùå Erro na valida√ß√£o de devolu√ß√£o:",a),a}}async processBatchDevolucao(e){console.log("üîÑ DeliveryProcessAdapter: Processando devolu√ß√µes em lote:",e);try{const t=await Oe.post("/devolucoes/process-batch",e);return console.log("‚úÖ Devolu√ß√µes em lote processadas:",t),t}catch(t){throw console.error("‚ùå Erro ao processar devolu√ß√µes em lote:",t),t}}}const vt=new ul;class fl{async processReturns(e){console.log("üîÑ ReturnProcessAdapter: Processando devolu√ß√µes em lote:",e),console.log(`  - Total de itens: ${e.devolucoes.length}`);try{console.log("üîç Endpoint atual sendo usado: /devolucoes/process-batch");const t=await Oe.post("/devolucoes/process-batch",e);return console.log("‚úÖ Devolu√ß√µes processadas:"),console.log(`  - Processadas: ${t.data.processadas}`),console.log(`  - Erros: ${t.data.erros.length}`),console.log(`  - Fichas atualizadas: ${t.data.fichasAtualizadas.length}`),t}catch(t){throw console.error("‚ùå Erro ao processar devolu√ß√µes:",t),t}}async validateReturn(e){console.log("üîç ReturnProcessAdapter: Validando devolu√ß√£o:",e);try{const t=await Oe.get(`/devolucoes/validate/${e}`);return t.podeDevolver?console.log("‚úÖ Equipamento pode ser devolvido"):console.log("‚ö†Ô∏è Equipamento n√£o pode ser devolvido:",t.motivo),t}catch(t){throw console.error("‚ùå Erro ao validar devolu√ß√£o:",t),t}}async getReturnHistory(e){console.log("üìã ReturnProcessAdapter: Buscando hist√≥rico de devolu√ß√µes:",e);try{const t=await Oe.get(`/devolucoes/historico/${e}`);return console.log("‚úÖ Hist√≥rico de devolu√ß√µes carregado"),t}catch(t){throw console.error("‚ùå Erro ao buscar hist√≥rico de devolu√ß√µes:",t),t}}async cancelReturn(e,t){console.log("‚ùå ReturnProcessAdapter: Cancelando devolu√ß√£o:",e);try{await Oe.post(`/devolucoes/${e}/cancel`,{motivo:t}),console.log("‚úÖ Devolu√ß√£o cancelada")}catch(a){throw console.error("‚ùå Erro ao cancelar devolu√ß√£o:",a),a}}async processIndividualReturn(e,t,a,r,o,s){var n;console.log("üîÑ ReturnProcessAdapter: Processando devolu√ß√£o individual via endpoint da documenta√ß√£o"),console.log(`  - FichaId: ${e}`),console.log(`  - EntregaId: ${t}`),console.log(`  - ItemEntregaId: ${a}`),console.log(`  - Motivo: ${r}`),console.log(`  - UsuarioId: ${o}`);try{const i={entregaId:t,itensParaDevolucao:[{itemId:a,motivo:r,condicaoItem:"BOM",observacoes:s||"Devolu√ß√£o via interface da ficha"}],usuarioId:o};console.log("üìã Payload da devolu√ß√£o individual:",JSON.stringify(i,null,2));const c=await Oe.post(`/fichas-epi/${e}/devolucoes`,i);return console.log("‚úÖ Devolu√ß√£o individual processada via endpoint da documenta√ß√£o"),c}catch(i){throw console.error("‚ùå Erro ao processar devolu√ß√£o individual:",i),console.log("üîç Detalhes do erro:",((n=i.response)==null?void 0:n.data)||i.message),i}}}const dl=new fl,ml=wr(new Map),gl=l=>({}),Jt=l=>({});function Wt(l){let e,t;return{c(){e=b("p"),t=R(l[2]),this.h()},l(a){e=$(a,"P",{class:!0});var r=D(e);t=x(r,l[2]),r.forEach(g),this.h()},h(){E(e,"class","text-xs mt-1 text-gray-400 dark:text-gray-500")},m(a,r){q(a,e,r),d(e,t)},p(a,r){r&4&&ne(t,a[2])},d(a){a&&g(e)}}}function pl(l){let e,t,a,r,o,s,n,i,c;t=new ar({props:{name:l[0],className:l[5][l[3]]+" mx-auto mb-2 text-gray-400 dark:text-gray-500"}});let u=l[2]&&Wt(l);const f=l[7].actions,p=bt(f,l,l[6],Jt);return{c(){e=b("div"),J(t.$$.fragment),a=V(),r=b("p"),o=R(l[1]),s=V(),u&&u.c(),n=V(),p&&p.c(),this.h()},l(m){e=$(m,"DIV",{class:!0});var h=D(e);G(t.$$.fragment,h),a=F(h),r=$(h,"P",{class:!0});var I=D(r);o=x(I,l[1]),I.forEach(g),s=F(h),u&&u.l(h),n=F(h),p&&p.l(h),h.forEach(g),this.h()},h(){E(r,"class","font-medium text-sm"),E(e,"class",i="text-center "+l[4][l[3]]+" text-gray-500 dark:text-gray-400")},m(m,h){q(m,e,h),Z(t,e,null),d(e,a),d(e,r),d(r,o),d(e,s),u&&u.m(e,null),d(e,n),p&&p.m(e,null),c=!0},p(m,[h]){const I={};h&1&&(I.name=m[0]),h&40&&(I.className=m[5][m[3]]+" mx-auto mb-2 text-gray-400 dark:text-gray-500"),t.$set(I),(!c||h&2)&&ne(o,m[1]),m[2]?u?u.p(m,h):(u=Wt(m),u.c(),u.m(e,n)):u&&(u.d(1),u=null),p&&p.p&&(!c||h&64)&&Et(p,f,m,m[6],c?It(f,m[6],h,gl):kt(m[6]),Jt),(!c||h&24&&i!==(i="text-center "+m[4][m[3]]+" text-gray-500 dark:text-gray-400"))&&E(e,"class",i)},i(m){c||(k(t.$$.fragment,m),k(p,m),c=!0)},o(m){y(t.$$.fragment,m),y(p,m),c=!1},d(m){m&&g(e),Q(t),u&&u.d(),p&&p.d(m)}}}function hl(l,e,t){let a,r,{$$slots:o={},$$scope:s}=e,{icon:n}=e,{message:i}=e,{description:c=""}=e,{size:u="md"}=e;return l.$$set=f=>{"icon"in f&&t(0,n=f.icon),"message"in f&&t(1,i=f.message),"description"in f&&t(2,c=f.description),"size"in f&&t(3,u=f.size),"$$scope"in f&&t(6,s=f.$$scope)},t(5,a={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"}),t(4,r={sm:"py-4",md:"py-8",lg:"py-12"}),[n,i,c,u,r,a,s,o]}class Ft extends Qe{constructor(e){super(),Ze(this,e,hl,pl,Ge,{icon:0,message:1,description:2,size:3})}}const _l=l=>({}),Kt=l=>({}),vl=l=>({}),Yt=l=>({}),$l=l=>({}),Xt=l=>({});function ea(l){let e,t;const a=l[6].actions,r=bt(a,l,l[5],Yt);return{c(){e=b("div"),r&&r.c(),this.h()},l(o){e=$(o,"DIV",{class:!0});var s=D(e);r&&r.l(s),s.forEach(g),this.h()},h(){E(e,"class","flex-shrink-0 ml-4")},m(o,s){q(o,e,s),r&&r.m(e,null),t=!0},p(o,s){r&&r.p&&(!t||s&32)&&Et(r,a,o,o[5],t?It(a,o[5],s,vl):kt(o[5]),Yt)},i(o){t||(k(r,o),t=!0)},o(o){y(r,o),t=!1},d(o){o&&g(e),r&&r.d(o)}}}function bl(l){let e,t,a,r,o,s,n,i;const c=l[6].content,u=bt(c,l,l[5],Xt);let f=l[1].actions&&ea(l);const p=l[6].footer,m=bt(p,l,l[5],Kt);return{c(){e=b("div"),t=b("div"),a=b("div"),u&&u.c(),r=V(),f&&f.c(),o=V(),m&&m.c(),this.h()},l(h){e=$(h,"DIV",{class:!0});var I=D(e);t=$(I,"DIV",{class:!0});var w=D(t);a=$(w,"DIV",{class:!0});var A=D(a);u&&u.l(A),A.forEach(g),r=F(w),f&&f.l(w),w.forEach(g),o=F(I),m&&m.l(I),I.forEach(g),this.h()},h(){E(a,"class","flex-1 min-w-0"),E(t,"class","flex justify-between items-start"),E(e,"class",l[0])},m(h,I){q(h,e,I),d(e,t),d(t,a),u&&u.m(a,null),d(t,r),f&&f.m(t,null),d(e,o),m&&m.m(e,null),s=!0,n||(i=Ue(e,"click",l[7]),n=!0)},p(h,[I]){u&&u.p&&(!s||I&32)&&Et(u,c,h,h[5],s?It(c,h[5],I,$l):kt(h[5]),Xt),h[1].actions?f?(f.p(h,I),I&2&&k(f,1)):(f=ea(h),f.c(),k(f,1),f.m(t,null)):f&&(_e(),y(f,1,1,()=>{f=null}),ve()),m&&m.p&&(!s||I&32)&&Et(m,p,h,h[5],s?It(p,h[5],I,_l):kt(h[5]),Kt),(!s||I&1)&&E(e,"class",h[0])},i(h){s||(k(u,h),k(f),k(m,h),s=!0)},o(h){y(u,h),y(f),y(m,h),s=!1},d(h){h&&g(e),u&&u.d(h),f&&f.d(),m&&m.d(h),n=!1,i()}}}function El(l,e,t){let a,{$$slots:r={},$$scope:o}=e;const s=sr(r);let{className:n=""}=e,{hoverable:i=!1}=e,{clickable:c=!1}=e;function u(f){ut.call(this,l,f)}return l.$$set=f=>{"className"in f&&t(2,n=f.className),"hoverable"in f&&t(3,i=f.hoverable),"clickable"in f&&t(4,c=f.clickable),"$$scope"in f&&t(5,o=f.$$scope)},l.$$.update=()=>{l.$$.dirty&28&&t(0,a=["border border-gray-200 dark:border-gray-700 rounded-sm p-4",i?"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors":"",c?"cursor-pointer":"",n].filter(Boolean).join(" "))},[a,s,n,i,c,o,r,u]}class nr extends Qe{constructor(e){super(),Ze(this,e,El,bl,Ge,{className:2,hoverable:3,clickable:4})}}function ta(l,e,t){const a=l.slice();return a[27]=e[t],a[28]=e,a[29]=t,a}function aa(l){let e,t,a,r,o,s,n,i,c,u,f,p,m,h,I,w,A,N,z,O,S,B;r=new dt({props:{title:"Nova Entrega de EPI",objectType:"NOVA ENTREGA",iconName:"PlusOutline",primaryAction:{text:l[1]?"Salvando...":"Criar Entrega",icon:l[1]?"":"CheckOutline",disabled:!l[6]},secondaryAction:{text:"Cancelar",disabled:l[1]}}}),r.$on("close",l[13]),r.$on("primaryAction",l[12]),r.$on("secondaryAction",l[13]),i=new We({props:{for:"responsavel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[kl]},$$scope:{ctx:l}}}),u=new ot({props:{options:l[7],value:l[3],placeholder:"Selecione um respons√°vel...",disabled:l[1]}}),u.$on("change",l[17]),h=new We({props:{class:"text-sm font-medium text-gray-700 dark:text-gray-300",$$slots:{default:[Il]},$$scope:{ctx:l}}}),w=new Ne({props:{size:"xs",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[wl]},$$scope:{ctx:l}}}),w.$on("click",l[8]);const M=[Cl,Dl],U=[];function K(_,P){return _[0].length===0?0:1}return N=K(l),z=U[N]=M[N](l),{c(){e=b("div"),t=V(),a=b("div"),J(r.$$.fragment),o=V(),s=b("div"),n=b("div"),J(i.$$.fragment),c=V(),J(u.$$.fragment),f=V(),p=b("div"),m=b("div"),J(h.$$.fragment),I=V(),J(w.$$.fragment),A=V(),z.c(),this.h()},l(_){e=$(_,"DIV",{class:!0,role:!0}),D(e).forEach(g),t=F(_),a=$(_,"DIV",{class:!0,role:!0,"aria-modal":!0});var P=D(a);G(r.$$.fragment,P),o=F(P),s=$(P,"DIV",{class:!0,style:!0});var T=D(s);n=$(T,"DIV",{class:!0});var C=D(n);G(i.$$.fragment,C),c=F(C),G(u.$$.fragment,C),C.forEach(g),f=F(T),p=$(T,"DIV",{class:!0});var v=D(p);m=$(v,"DIV",{class:!0});var j=D(m);G(h.$$.fragment,j),I=F(j),G(w.$$.fragment,j),j.forEach(g),A=F(v),z.l(v),v.forEach(g),T.forEach(g),P.forEach(g),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(n,"class","mb-6"),E(m,"class","flex items-center justify-between mb-4"),E(p,"class","mb-6"),E(s,"class","overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),qt(s,"height","calc(100% - 80px)"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(_,P){q(_,e,P),q(_,t,P),q(_,a,P),Z(r,a,null),d(a,o),d(a,s),d(s,n),Z(i,n,null),d(n,c),Z(u,n,null),d(s,f),d(s,p),d(p,m),Z(h,m,null),d(m,I),Z(w,m,null),d(p,A),U[N].m(p,null),O=!0,S||(B=[Ue(e,"click",l[13]),Ue(a,"click",Ct(l[16]))],S=!0)},p(_,P){const T={};P&66&&(T.primaryAction={text:_[1]?"Salvando...":"Criar Entrega",icon:_[1]?"":"CheckOutline",disabled:!_[6]}),P&2&&(T.secondaryAction={text:"Cancelar",disabled:_[1]}),r.$set(T);const C={};P&1073741824&&(C.$$scope={dirty:P,ctx:_}),i.$set(C);const v={};P&128&&(v.options=_[7]),P&8&&(v.value=_[3]),P&2&&(v.disabled=_[1]),u.$set(v);const j={};P&1073741824&&(j.$$scope={dirty:P,ctx:_}),h.$set(j);const W={};P&2&&(W.disabled=_[1]),P&1073741824&&(W.$$scope={dirty:P,ctx:_}),w.$set(W);let ae=N;N=K(_),N===ae?U[N].p(_,P):(_e(),y(U[ae],1,1,()=>{U[ae]=null}),ve(),z=U[N],z?z.p(_,P):(z=U[N]=M[N](_),z.c()),k(z,1),z.m(p,null))},i(_){O||(k(r.$$.fragment,_),k(i.$$.fragment,_),k(u.$$.fragment,_),k(h.$$.fragment,_),k(w.$$.fragment,_),k(z),O=!0)},o(_){y(r.$$.fragment,_),y(i.$$.fragment,_),y(u.$$.fragment,_),y(h.$$.fragment,_),y(w.$$.fragment,_),y(z),O=!1},d(_){_&&(g(e),g(t),g(a)),Q(r),Q(i),Q(u),Q(h),Q(w),U[N].d(),S=!1,Dt(B)}}}function kl(l){let e;return{c(){e=R("Respons√°vel pela Entrega *")},l(t){e=x(t,"Respons√°vel pela Entrega *")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Il(l){let e;return{c(){e=R("EPIs para Entrega *")},l(t){e=x(t,"EPIs para Entrega *")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function wl(l){let e,t,a;return e=new it({props:{class:"w-4 h-4 mr-2"}}),{c(){J(e.$$.fragment),t=R(`
              Adicionar Item`)},l(r){G(e.$$.fragment,r),t=x(r,`
              Adicionar Item`)},m(r,o){Z(e,r,o),q(r,t,o),a=!0},p:Ae,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&g(t),Q(e,r)}}}function Dl(l){let e,t,a,r=Ve(l[4]),o=[];for(let i=0;i<r.length;i+=1)o[i]=oa(ta(l,r,i));const s=i=>y(o[i],1,1,()=>{o[i]=null});let n=l[4].length===0&&na(l);return{c(){e=b("div");for(let i=0;i<o.length;i+=1)o[i].c();t=V(),n&&n.c(),this.h()},l(i){e=$(i,"DIV",{class:!0});var c=D(e);for(let u=0;u<o.length;u+=1)o[u].l(c);t=F(c),n&&n.l(c),c.forEach(g),this.h()},h(){E(e,"class","space-y-4")},m(i,c){q(i,e,c);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);d(e,t),n&&n.m(e,null),a=!0},p(i,c){if(c&17970){r=Ve(i[4]);let u;for(u=0;u<r.length;u+=1){const f=ta(i,r,u);o[u]?(o[u].p(f,c),k(o[u],1)):(o[u]=oa(f),o[u].c(),k(o[u],1),o[u].m(e,t))}for(_e(),u=r.length;u<o.length;u+=1)s(u);ve()}i[4].length===0?n?(n.p(i,c),c&16&&k(n,1)):(n=na(i),n.c(),k(n,1),n.m(e,null)):n&&(_e(),y(n,1,1,()=>{n=null}),ve())},i(i){if(!a){for(let c=0;c<r.length;c+=1)k(o[c]);k(n),a=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)y(o[c]);y(n),a=!1},d(i){i&&g(e),yt(o,i),n&&n.d()}}}function Cl(l){let e,t,a,r,o,s="Nenhum EPI Dispon√≠vel",n,i,c="N√£o h√° EPIs dispon√≠veis para entrega no momento. Verifique o estoque ou entre em contato com o administrador.",u;return a=new St({props:{class:"mx-auto mb-2 text-red-500 w-8 h-8"}}),{c(){e=b("div"),t=b("div"),J(a.$$.fragment),r=V(),o=b("h4"),o.textContent=s,n=V(),i=b("p"),i.textContent=c,this.h()},l(f){e=$(f,"DIV",{class:!0});var p=D(e);t=$(p,"DIV",{class:!0});var m=D(t);G(a.$$.fragment,m),r=F(m),o=$(m,"H4",{class:!0,"data-svelte-h":!0}),ke(o)!=="svelte-1y6kxv5"&&(o.textContent=s),n=F(m),i=$(m,"P",{class:!0,"data-svelte-h":!0}),ke(i)!=="svelte-4gen4i"&&(i.textContent=c),m.forEach(g),p.forEach(g),this.h()},h(){E(o,"class","text-sm font-medium text-red-800 dark:text-red-200 mb-1"),E(i,"class","text-sm text-red-600 dark:text-red-400"),E(t,"class","text-center"),E(e,"class","p-4 border-2 border-dashed border-red-300 rounded-lg bg-red-50 dark:bg-red-900/20")},m(f,p){q(f,e,p),d(e,t),Z(a,t,null),d(t,r),d(t,o),d(t,n),d(t,i),u=!0},p:Ae,i(f){u||(k(a.$$.fragment,f),u=!0)},o(f){y(a.$$.fragment,f),u=!1},d(f){f&&g(e),Q(a)}}}function ra(l){let e,t,a,r,o;t=new Xa({props:{class:"w-4 h-4"}});function s(){return l[18](l[29])}return{c(){e=b("button"),J(t.$$.fragment),this.h()},l(n){e=$(n,"BUTTON",{class:!0,title:!0});var i=D(e);G(t.$$.fragment,i),i.forEach(g),this.h()},h(){E(e,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"),e.disabled=l[1],E(e,"title","Remover item")},m(n,i){q(n,e,i),Z(t,e,null),a=!0,r||(o=Ue(e,"click",s),r=!0)},p(n,i){l=n,(!a||i&2)&&(e.disabled=l[1])},i(n){a||(k(t.$$.fragment,n),a=!0)},o(n){y(t.$$.fragment,n),a=!1},d(n){n&&g(e),Q(t),r=!1,o()}}}function yl(l){let e;return{c(){e=R("Equipamento")},l(t){e=x(t,"Equipamento")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Pl(l){let e;return{c(){e=R("Quantidade")},l(t){e=x(t,"Quantidade")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function la(l){let e,t,a,r,o=l[27].nomeEquipamento+"",s,n,i,c,u=l[27].registroCA+"",f,p,m,h,I,w=l[27].quantidade+"",A;return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),s=R(o),n=V(),i=b("p"),c=R("CA "),f=R(u),p=V(),m=b("div"),h=b("p"),I=R("Qtd: "),A=R(w),this.h()},l(N){e=$(N,"DIV",{class:!0});var z=D(e);t=$(z,"DIV",{class:!0});var O=D(t);a=$(O,"DIV",{});var S=D(a);r=$(S,"P",{class:!0});var B=D(r);s=x(B,o),B.forEach(g),n=F(S),i=$(S,"P",{class:!0});var M=D(i);c=x(M,"CA "),f=x(M,u),M.forEach(g),S.forEach(g),p=F(O),m=$(O,"DIV",{class:!0});var U=D(m);h=$(U,"P",{class:!0});var K=D(h);I=x(K,"Qtd: "),A=x(K,w),K.forEach(g),U.forEach(g),O.forEach(g),z.forEach(g),this.h()},h(){E(r,"class","text-sm font-medium text-gray-900 dark:text-white"),E(i,"class","text-xs text-gray-500 dark:text-gray-400"),E(h,"class","text-sm font-medium text-gray-900 dark:text-white"),E(m,"class","text-right"),E(t,"class","flex items-center justify-between"),E(e,"class","mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-sm")},m(N,z){q(N,e,z),d(e,t),d(t,a),d(a,r),d(r,s),d(a,n),d(a,i),d(i,c),d(i,f),d(t,p),d(t,m),d(m,h),d(h,I),d(h,A)},p(N,z){z&16&&o!==(o=N[27].nomeEquipamento+"")&&ne(s,o),z&16&&u!==(u=N[27].registroCA+"")&&ne(f,u),z&16&&w!==(w=N[27].quantidade+"")&&ne(A,w)},d(N){N&&g(e)}}}function oa(l){let e,t,a,r,o=l[29]+1+"",s,n,i,c,u,f,p,m,h,I,w,A,N,z,O,S,B,M=l[4].length>1&&ra(l);f=new We({props:{for:"epi-"+l[29],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[yl]},$$scope:{ctx:l}}});function U(...C){return l[19](l[29],...C)}m=new ot({props:{options:l[5],value:l[27].episDisponivelId,placeholder:"Selecione um EPI...",disabled:l[1]}}),m.$on("change",U),w=new We({props:{for:"quantidade-"+l[29],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Pl]},$$scope:{ctx:l}}});function K(C){l[20](C,l[27])}function _(...C){return l[21](l[29],...C)}let P={id:"quantidade-"+l[29],type:"number",min:"1",max:"100",class:"rounded-sm",disabled:l[1]};l[27].quantidade!==void 0&&(P.value=l[27].quantidade),N=new At({props:P}),Re.push(()=>je(N,"value",K)),N.$on("input",_);let T=l[27].nomeEquipamento&&la(l);return{c(){e=b("div"),t=b("div"),a=b("h4"),r=R("Item "),s=R(o),n=V(),M&&M.c(),i=V(),c=b("div"),u=b("div"),J(f.$$.fragment),p=V(),J(m.$$.fragment),h=V(),I=b("div"),J(w.$$.fragment),A=V(),J(N.$$.fragment),O=V(),T&&T.c(),S=V(),this.h()},l(C){e=$(C,"DIV",{class:!0});var v=D(e);t=$(v,"DIV",{class:!0});var j=D(t);a=$(j,"H4",{class:!0});var W=D(a);r=x(W,"Item "),s=x(W,o),W.forEach(g),n=F(j),M&&M.l(j),j.forEach(g),i=F(v),c=$(v,"DIV",{class:!0});var ae=D(c);u=$(ae,"DIV",{class:!0});var oe=D(u);G(f.$$.fragment,oe),p=F(oe),G(m.$$.fragment,oe),oe.forEach(g),h=F(ae),I=$(ae,"DIV",{});var le=D(I);G(w.$$.fragment,le),A=F(le),G(N.$$.fragment,le),le.forEach(g),ae.forEach(g),O=F(v),T&&T.l(v),S=F(v),v.forEach(g),this.h()},h(){E(a,"class","text-sm font-medium text-gray-900 dark:text-white"),E(t,"class","flex items-start justify-between mb-4"),E(u,"class","md:col-span-2"),E(c,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),E(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4")},m(C,v){q(C,e,v),d(e,t),d(t,a),d(a,r),d(a,s),d(t,n),M&&M.m(t,null),d(e,i),d(e,c),d(c,u),Z(f,u,null),d(u,p),Z(m,u,null),d(c,h),d(c,I),Z(w,I,null),d(I,A),Z(N,I,null),d(e,O),T&&T.m(e,null),d(e,S),B=!0},p(C,v){l=C,l[4].length>1?M?(M.p(l,v),v&16&&k(M,1)):(M=ra(l),M.c(),k(M,1),M.m(t,null)):M&&(_e(),y(M,1,1,()=>{M=null}),ve());const j={};v&1073741824&&(j.$$scope={dirty:v,ctx:l}),f.$set(j);const W={};v&32&&(W.options=l[5]),v&16&&(W.value=l[27].episDisponivelId),v&2&&(W.disabled=l[1]),m.$set(W);const ae={};v&1073741824&&(ae.$$scope={dirty:v,ctx:l}),w.$set(ae);const oe={};v&2&&(oe.disabled=l[1]),!z&&v&16&&(z=!0,oe.value=l[27].quantidade,He(()=>z=!1)),N.$set(oe),l[27].nomeEquipamento?T?T.p(l,v):(T=la(l),T.c(),T.m(e,S)):T&&(T.d(1),T=null)},i(C){B||(k(M),k(f.$$.fragment,C),k(m.$$.fragment,C),k(w.$$.fragment,C),k(N.$$.fragment,C),B=!0)},o(C){y(M),y(f.$$.fragment,C),y(m.$$.fragment,C),y(w.$$.fragment,C),y(N.$$.fragment,C),B=!1},d(C){C&&g(e),M&&M.d(),Q(f),Q(m),Q(w),Q(N),T&&T.d()}}}function na(l){let e,t,a,r,o="Nenhum item adicionado",s,n,i;return t=new it({props:{class:"w-8 h-8 mx-auto mb-3 text-gray-400"}}),n=new Ne({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Al]},$$scope:{ctx:l}}}),n.$on("click",l[8]),{c(){e=b("div"),J(t.$$.fragment),a=V(),r=b("p"),r.textContent=o,s=V(),J(n.$$.fragment),this.h()},l(c){e=$(c,"DIV",{class:!0});var u=D(e);G(t.$$.fragment,u),a=F(u),r=$(u,"P",{class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-1e863on"&&(r.textContent=o),s=F(u),G(n.$$.fragment,u),u.forEach(g),this.h()},h(){E(r,"class","text-sm text-gray-500 dark:text-gray-400 mb-4"),E(e,"class","border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center")},m(c,u){q(c,e,u),Z(t,e,null),d(e,a),d(e,r),d(e,s),Z(n,e,null),i=!0},p(c,u){const f={};u&2&&(f.disabled=c[1]),u&1073741824&&(f.$$scope={dirty:u,ctx:c}),n.$set(f)},i(c){i||(k(t.$$.fragment,c),k(n.$$.fragment,c),i=!0)},o(c){y(t.$$.fragment,c),y(n.$$.fragment,c),i=!1},d(c){c&&g(e),Q(t),Q(n)}}}function Al(l){let e;return{c(){e=R("Adicionar Primeiro Item")},l(t){e=x(t,"Adicionar Primeiro Item")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Fl(l){let e,t,a=l[2]&&aa(l);return{c(){a&&a.c(),e=Ie()},l(r){a&&a.l(r),e=Ie()},m(r,o){a&&a.m(r,o),q(r,e,o),t=!0},p(r,[o]){r[2]?a?(a.p(r,o),o&4&&k(a,1)):(a=aa(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(k(a),t=!0)},o(r){y(a),t=!1},d(r){r&&g(e),a&&a.d(r)}}}function Vl(l,e,t){let a,r,o,{episDisponiveis:s=[]}=e,{usuarios:n=[]}=e,{loading:i=!1}=e,{show:c=!1}=e;const u=Xe();let f="",p="",m=[];function h(){f="",t(3,p=""),t(4,m=[])}function I(){t(4,m=[...m,{episDisponivelId:"",nomeEquipamento:"",registroCA:"",quantidade:1}])}function w(C){t(4,m=m.filter((v,j)=>j!==C))}function A(C,v){const j=s.find(W=>W.id===v);j&&t(4,m[C]={...m[C],episDisponivelId:v,nomeEquipamento:j.nomeEquipamento,registroCA:j.numeroCA||j.registroCA},m)}function N(C,v){t(4,m[C]={...m[C],quantidade:v},m)}function z(C){const v=n.find(j=>j.id===C);v&&(t(3,p=C),f=v.nome)}function O(){if(console.log("üìù NovaEntregaDrawer: Preparando dados do formul√°rio..."),console.log("üìã Itens selecionados originais:",m),console.log("üë§ Usuario respons√°vel ID:",p),console.log("üì¶ Validando itens..."),!p.trim()){console.error("‚ùå Erro: usu√°rio respons√°vel n√£o selecionado");return}if(m.length===0){console.error("‚ùå Erro: nenhum item selecionado");return}const C=m.filter(W=>W.episDisponivelId&&W.quantidade>0);if(C.length===0){console.error("‚ùå Erro: nenhum item v√°lido selecionado");return}const v={responsavel:f.trim(),usuarioResponsavelId:p.trim(),responsavelId:p.trim(),itens:C.map(W=>({episDisponivelId:W.episDisponivelId,nomeEquipamento:W.nomeEquipamento,registroCA:W.registroCA,quantidade:W.quantidade,estoqueItemId:W.episDisponivelId}))};console.log("‚úÖ FormData montado:",{responsavel:v.responsavel,usuarioId:v.usuarioResponsavelId,totalItens:v.itens.length,itens:v.itens.map((W,ae)=>({index:ae+1,id:W.episDisponivelId,nome:W.nomeEquipamento,ca:W.registroCA,quantidade:W.quantidade}))});const j=new Set(v.itens.map(W=>W.episDisponivelId));console.log(`üéØ Verifica√ß√£o de tipos √∫nicos: ${j.size} tipos √∫nicos de ${v.itens.length} itens totais`),j.size<v.itens.length&&console.warn("‚ö†Ô∏è ALERTA: Alguns itens t√™m o mesmo episDisponivelId - isso pode causar problemas na expans√£o"),u("salvar",v)}function S(){u("cancelar")}function B(C,v){const j=C.currentTarget;N(v,parseInt(j.value)||1)}function M(C){ut.call(this,l,C)}const U=C=>z(C.detail),K=C=>w(C),_=(C,v)=>A(C,v.detail);function P(C,v){l.$$.not_equal(v.quantidade,C)&&(v.quantidade=C,t(4,m))}const T=(C,v)=>B(v,C);return l.$$set=C=>{"episDisponiveis"in C&&t(0,s=C.episDisponiveis),"usuarios"in C&&t(15,n=C.usuarios),"loading"in C&&t(1,i=C.loading),"show"in C&&t(2,c=C.show)},l.$$.update=()=>{l.$$.dirty&20&&c&&m.length===0&&(h(),I()),l.$$.dirty&32776&&n.length>0&&!p&&(t(3,p=n[0].id),f=n[0].nome),l.$$.dirty&1&&t(5,a=[{value:"",label:"Selecione um EPI..."},...s.map(C=>({value:C.id,label:`${C.nomeEquipamento} (CA ${C.numeroCA||C.registroCA}) - ${C.quantidadeDisponivel} dispon√≠veis`}))]),l.$$.dirty&33&&(s==null?void 0:s.length)>0&&(console.log("üéØ NovaEntregaDrawer: EPIs dispon√≠veis atualizados:",s.length),console.log("üì¶ Amostra de EPIs no drawer:",s.slice(0,2)),console.log("üîß Op√ß√µes do select:",a.slice(0,3))),l.$$.dirty&32768&&t(7,r=[{value:"",label:"Selecione um respons√°vel..."},...n.map(C=>({value:C.id,label:`${C.nome} (${C.email})`}))]),l.$$.dirty&27&&t(6,o=p.trim()&&m.length>0&&!i&&s.length>0)},[s,i,c,p,m,a,o,r,I,w,A,z,O,S,B,n,M,U,K,_,P,T]}class ql extends Qe{constructor(e){super(),Ze(this,e,Vl,Fl,Ge,{episDisponiveis:0,usuarios:15,loading:1,show:2})}}function sa(l,e,t){const a=l.slice();return a[28]=e[t],a[29]=e,a[30]=t,a}function ia(l){var ce;let e,t,a,r,o,s,n,i,c,u,f,p,m,h,I,w,A,N,z,O,S,B,M,U,K,_,P,T,C,v,j,W,ae,oe;r=new dt({props:{title:"Editar Entrega #"+(((ce=l[0])==null?void 0:ce.id)||"")}}),r.$on("close",l[12]);let le=l[0]&&ca(l);u=new We({props:{for:"responsavel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Nl]},$$scope:{ctx:l}}});function H(L){l[16](L)}let se={id:"responsavel",type:"text",placeholder:"Nome do respons√°vel pela entrega",class:"rounded-sm "+(l[5].responsavel?"border-red-500":""),disabled:l[1]};l[3]!==void 0&&(se.value=l[3]),p=new At({props:se}),Re.push(()=>je(p,"value",H));let fe=l[5].responsavel&&ua(l);N=new We({props:{class:"text-sm font-medium text-gray-700 dark:text-gray-300",$$slots:{default:[Sl]},$$scope:{ctx:l}}}),O=new Ne({props:{size:"xs",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[zl]},$$scope:{ctx:l}}}),O.$on("click",l[8]);let de=l[5].items&&fa(l),pe=Ve(l[4]),ie=[];for(let L=0;L<pe.length;L+=1)ie[L]=ha(sa(l,pe,L));const Y=L=>y(ie[L],1,1,()=>{ie[L]=null});let ee=l[4].length===0&&_a(l),X=l[4].length>0&&va(l);return C=new Ne({props:{color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[xl]},$$scope:{ctx:l}}}),C.$on("click",l[12]),j=new Ne({props:{color:"primary",class:"rounded-sm",disabled:!l[6],$$slots:{default:[Hl]},$$scope:{ctx:l}}}),j.$on("click",l[11]),{c(){e=b("div"),t=V(),a=b("div"),J(r.$$.fragment),o=V(),s=b("div"),n=b("div"),le&&le.c(),i=V(),c=b("div"),J(u.$$.fragment),f=V(),J(p.$$.fragment),h=V(),fe&&fe.c(),I=V(),w=b("div"),A=b("div"),J(N.$$.fragment),z=V(),J(O.$$.fragment),S=V(),de&&de.c(),B=V(),M=b("div");for(let L=0;L<ie.length;L+=1)ie[L].c();U=V(),ee&&ee.c(),K=V(),X&&X.c(),_=V(),P=b("div"),T=b("div"),J(C.$$.fragment),v=V(),J(j.$$.fragment),this.h()},l(L){e=$(L,"DIV",{class:!0,role:!0}),D(e).forEach(g),t=F(L),a=$(L,"DIV",{class:!0,role:!0,"aria-modal":!0});var re=D(a);G(r.$$.fragment,re),o=F(re),s=$(re,"DIV",{class:!0});var me=D(s);n=$(me,"DIV",{class:!0,style:!0});var $e=D(n);le&&le.l($e),i=F($e),c=$($e,"DIV",{class:!0});var Ee=D(c);G(u.$$.fragment,Ee),f=F(Ee),G(p.$$.fragment,Ee),h=F(Ee),fe&&fe.l(Ee),Ee.forEach(g),I=F($e),w=$($e,"DIV",{class:!0});var Fe=D(w);A=$(Fe,"DIV",{class:!0});var De=D(A);G(N.$$.fragment,De),z=F(De),G(O.$$.fragment,De),De.forEach(g),S=F(Fe),de&&de.l(Fe),B=F(Fe),M=$(Fe,"DIV",{class:!0});var ye=D(M);for(let ge=0;ge<ie.length;ge+=1)ie[ge].l(ye);U=F(ye),ee&&ee.l(ye),ye.forEach(g),Fe.forEach(g),K=F($e),X&&X.l($e),$e.forEach(g),_=F(me),P=$(me,"DIV",{class:!0});var Se=D(P);T=$(Se,"DIV",{class:!0});var qe=D(T);G(C.$$.fragment,qe),v=F(qe),G(j.$$.fragment,qe),qe.forEach(g),Se.forEach(g),me.forEach(g),re.forEach(g),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(c,"class","mb-6"),E(A,"class","flex items-center justify-between mb-4"),E(M,"class","space-y-4"),E(w,"class","mb-6"),E(n,"class","flex-1 overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),qt(n,"height","calc(100% - 80px)"),E(T,"class","flex items-center justify-end space-x-3"),E(P,"class","flex-shrink-0 bg-gray-50 dark:bg-gray-800 px-6 py-4 border-t border-gray-200 dark:border-gray-700"),E(s,"class","flex flex-col h-full"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(L,re){q(L,e,re),q(L,t,re),q(L,a,re),Z(r,a,null),d(a,o),d(a,s),d(s,n),le&&le.m(n,null),d(n,i),d(n,c),Z(u,c,null),d(c,f),Z(p,c,null),d(c,h),fe&&fe.m(c,null),d(n,I),d(n,w),d(w,A),Z(N,A,null),d(A,z),Z(O,A,null),d(w,S),de&&de.m(w,null),d(w,B),d(w,M);for(let me=0;me<ie.length;me+=1)ie[me]&&ie[me].m(M,null);d(M,U),ee&&ee.m(M,null),d(n,K),X&&X.m(n,null),d(s,_),d(s,P),d(P,T),Z(C,T,null),d(T,v),Z(j,T,null),W=!0,ae||(oe=[Ue(e,"click",l[12]),Ue(a,"click",Ct(l[15]))],ae=!0)},p(L,re){var qe;const me={};re[0]&1&&(me.title="Editar Entrega #"+(((qe=L[0])==null?void 0:qe.id)||"")),r.$set(me),L[0]?le?le.p(L,re):(le=ca(L),le.c(),le.m(n,i)):le&&(le.d(1),le=null);const $e={};re[1]&1&&($e.$$scope={dirty:re,ctx:L}),u.$set($e);const Ee={};re[0]&32&&(Ee.class="rounded-sm "+(L[5].responsavel?"border-red-500":"")),re[0]&2&&(Ee.disabled=L[1]),!m&&re[0]&8&&(m=!0,Ee.value=L[3],He(()=>m=!1)),p.$set(Ee),L[5].responsavel?fe?fe.p(L,re):(fe=ua(L),fe.c(),fe.m(c,null)):fe&&(fe.d(1),fe=null);const Fe={};re[1]&1&&(Fe.$$scope={dirty:re,ctx:L}),N.$set(Fe);const De={};if(re[0]&2&&(De.disabled=L[1]),re[1]&1&&(De.$$scope={dirty:re,ctx:L}),O.$set(De),L[5].items?de?de.p(L,re):(de=fa(L),de.c(),de.m(w,B)):de&&(de.d(1),de=null),re[0]&9906){pe=Ve(L[4]);let ge;for(ge=0;ge<pe.length;ge+=1){const ze=sa(L,pe,ge);ie[ge]?(ie[ge].p(ze,re),k(ie[ge],1)):(ie[ge]=ha(ze),ie[ge].c(),k(ie[ge],1),ie[ge].m(M,U))}for(_e(),ge=pe.length;ge<ie.length;ge+=1)Y(ge);ve()}L[4].length===0?ee?(ee.p(L,re),re[0]&16&&k(ee,1)):(ee=_a(L),ee.c(),k(ee,1),ee.m(M,null)):ee&&(_e(),y(ee,1,1,()=>{ee=null}),ve()),L[4].length>0?X?X.p(L,re):(X=va(L),X.c(),X.m(n,null)):X&&(X.d(1),X=null);const ye={};re[0]&2&&(ye.disabled=L[1]),re[1]&1&&(ye.$$scope={dirty:re,ctx:L}),C.$set(ye);const Se={};re[0]&64&&(Se.disabled=!L[6]),re[0]&2|re[1]&1&&(Se.$$scope={dirty:re,ctx:L}),j.$set(Se)},i(L){if(!W){k(r.$$.fragment,L),k(u.$$.fragment,L),k(p.$$.fragment,L),k(N.$$.fragment,L),k(O.$$.fragment,L);for(let re=0;re<pe.length;re+=1)k(ie[re]);k(ee),k(C.$$.fragment,L),k(j.$$.fragment,L),W=!0}},o(L){y(r.$$.fragment,L),y(u.$$.fragment,L),y(p.$$.fragment,L),y(N.$$.fragment,L),y(O.$$.fragment,L),ie=ie.filter(Boolean);for(let re=0;re<ie.length;re+=1)y(ie[re]);y(ee),y(C.$$.fragment,L),y(j.$$.fragment,L),W=!1},d(L){L&&(g(e),g(t),g(a)),Q(r),le&&le.d(),Q(u),Q(p),fe&&fe.d(),Q(N),Q(O),de&&de.d(),yt(ie,L),ee&&ee.d(),X&&X.d(),Q(C),Q(j),ae=!1,Dt(oe)}}}function ca(l){let e,t,a="Informa√ß√µes da Entrega Original",r,o,s,n,i=new Date(l[0].dataEntrega).toLocaleDateString("pt-BR")+"",c,u,f,p,m=l[0].status==="assinado"?"Assinado":"Pendente Assinatura",h,I,w,A,N=l[0].id+"",z;return{c(){e=b("div"),t=b("h4"),t.textContent=a,r=V(),o=b("div"),s=b("p"),n=R("‚Ä¢ Data: "),c=R(i),u=V(),f=b("p"),p=R("‚Ä¢ Status: "),h=R(m),I=V(),w=b("p"),A=R("‚Ä¢ ID: #"),z=R(N),this.h()},l(O){e=$(O,"DIV",{class:!0});var S=D(e);t=$(S,"H4",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-1p8cqi4"&&(t.textContent=a),r=F(S),o=$(S,"DIV",{class:!0});var B=D(o);s=$(B,"P",{});var M=D(s);n=x(M,"‚Ä¢ Data: "),c=x(M,i),M.forEach(g),u=F(B),f=$(B,"P",{});var U=D(f);p=x(U,"‚Ä¢ Status: "),h=x(U,m),U.forEach(g),I=F(B),w=$(B,"P",{});var K=D(w);A=x(K,"‚Ä¢ ID: #"),z=x(K,N),K.forEach(g),B.forEach(g),S.forEach(g),this.h()},h(){E(t,"class","text-sm font-medium text-blue-900 dark:text-blue-100 mb-2"),E(o,"class","text-sm text-blue-800 dark:text-blue-200"),E(e,"class","mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800")},m(O,S){q(O,e,S),d(e,t),d(e,r),d(e,o),d(o,s),d(s,n),d(s,c),d(o,u),d(o,f),d(f,p),d(f,h),d(o,I),d(o,w),d(w,A),d(w,z)},p(O,S){S[0]&1&&i!==(i=new Date(O[0].dataEntrega).toLocaleDateString("pt-BR")+"")&&ne(c,i),S[0]&1&&m!==(m=O[0].status==="assinado"?"Assinado":"Pendente Assinatura")&&ne(h,m),S[0]&1&&N!==(N=O[0].id+"")&&ne(z,N)},d(O){O&&g(e)}}}function Nl(l){let e;return{c(){e=R("Respons√°vel pela Entrega *")},l(t){e=x(t,"Respons√°vel pela Entrega *")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function ua(l){let e,t=l[5].responsavel+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var o=D(e);a=x(o,t),o.forEach(g),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,o){q(r,e,o),d(e,a)},p(r,o){o[0]&32&&t!==(t=r[5].responsavel+"")&&ne(a,t)},d(r){r&&g(e)}}}function Sl(l){let e;return{c(){e=R("EPIs da Entrega *")},l(t){e=x(t,"EPIs da Entrega *")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function zl(l){let e,t,a;return e=new it({props:{class:"mr-2 w-4 h-4"}}),{c(){J(e.$$.fragment),t=R(`
              Adicionar Item`)},l(r){G(e.$$.fragment,r),t=x(r,`
              Adicionar Item`)},m(r,o){Z(e,r,o),q(r,t,o),a=!0},p:Ae,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&g(t),Q(e,r)}}}function fa(l){let e,t=l[5].items+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var o=D(e);a=x(o,t),o.forEach(g),this.h()},h(){E(e,"class","mb-3 text-sm text-red-600 dark:text-red-400")},m(r,o){q(r,e,o),d(e,a)},p(r,o){o[0]&32&&t!==(t=r[5].items+"")&&ne(a,t)},d(r){r&&g(e)}}}function da(l){let e,t,a,r,o;t=new Xa({props:{class:"w-4 h-4"}});function s(){return l[17](l[30])}return{c(){e=b("button"),J(t.$$.fragment),this.h()},l(n){e=$(n,"BUTTON",{class:!0,title:!0});var i=D(e);G(t.$$.fragment,i),i.forEach(g),this.h()},h(){E(e,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"),e.disabled=l[1],E(e,"title","Remover item")},m(n,i){q(n,e,i),Z(t,e,null),a=!0,r||(o=Ue(e,"click",s),r=!0)},p(n,i){l=n,(!a||i[0]&2)&&(e.disabled=l[1])},i(n){a||(k(t.$$.fragment,n),a=!0)},o(n){y(t.$$.fragment,n),a=!1},d(n){n&&g(e),Q(t),r=!1,o()}}}function Tl(l){let e;return{c(){e=R("Equipamento")},l(t){e=x(t,"Equipamento")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function ma(l){let e,t=l[5][`item-${l[30]}`]+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var o=D(e);a=x(o,t),o.forEach(g),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,o){q(r,e,o),d(e,a)},p(r,o){o[0]&32&&t!==(t=r[5][`item-${r[30]}`]+"")&&ne(a,t)},d(r){r&&g(e)}}}function Ol(l){let e;return{c(){e=R("Quantidade")},l(t){e=x(t,"Quantidade")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function ga(l){let e,t=l[5][`quantidade-${l[30]}`]+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var o=D(e);a=x(o,t),o.forEach(g),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,o){q(r,e,o),d(e,a)},p(r,o){o[0]&32&&t!==(t=r[5][`quantidade-${r[30]}`]+"")&&ne(a,t)},d(r){r&&g(e)}}}function pa(l){let e,t,a,r,o=l[28].nomeEquipamento+"",s,n,i,c,u=l[28].registroCA+"",f,p,m,h,I,w=l[28].quantidade+"",A;return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),s=R(o),n=V(),i=b("p"),c=R("CA "),f=R(u),p=V(),m=b("div"),h=b("p"),I=R("Qtd: "),A=R(w),this.h()},l(N){e=$(N,"DIV",{class:!0});var z=D(e);t=$(z,"DIV",{class:!0});var O=D(t);a=$(O,"DIV",{});var S=D(a);r=$(S,"P",{class:!0});var B=D(r);s=x(B,o),B.forEach(g),n=F(S),i=$(S,"P",{class:!0});var M=D(i);c=x(M,"CA "),f=x(M,u),M.forEach(g),S.forEach(g),p=F(O),m=$(O,"DIV",{class:!0});var U=D(m);h=$(U,"P",{class:!0});var K=D(h);I=x(K,"Qtd: "),A=x(K,w),K.forEach(g),U.forEach(g),O.forEach(g),z.forEach(g),this.h()},h(){E(r,"class","text-sm font-medium text-gray-900 dark:text-white"),E(i,"class","text-xs text-gray-500 dark:text-gray-400"),E(h,"class","text-sm font-medium text-gray-900 dark:text-white"),E(m,"class","text-right"),E(t,"class","flex items-center justify-between"),E(e,"class","mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-sm")},m(N,z){q(N,e,z),d(e,t),d(t,a),d(a,r),d(r,s),d(a,n),d(a,i),d(i,c),d(i,f),d(t,p),d(t,m),d(m,h),d(h,I),d(h,A)},p(N,z){z[0]&16&&o!==(o=N[28].nomeEquipamento+"")&&ne(s,o),z[0]&16&&u!==(u=N[28].registroCA+"")&&ne(f,u),z[0]&16&&w!==(w=N[28].quantidade+"")&&ne(A,w)},d(N){N&&g(e)}}}function ha(l){let e,t,a,r,o=l[30]+1+"",s,n,i,c,u,f,p,m,h,I,w,A,N,z,O,S,B,M,U,K,_=l[4].length>1&&da(l);f=new We({props:{for:"epi-"+l[30],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Tl]},$$scope:{ctx:l}}});function P(H){l[18](H,l[28])}function T(...H){return l[19](l[30],...H)}let C={id:"epi-"+l[30],items:l[7],class:"rounded-sm "+(l[5][`item-${l[30]}`]?"border-red-500":""),disabled:l[1]};l[28].episDisponivelId!==void 0&&(C.value=l[28].episDisponivelId),m=new er({props:C}),Re.push(()=>je(m,"value",P)),m.$on("change",T);let v=l[5][`item-${l[30]}`]&&ma(l);N=new We({props:{for:"quantidade-"+l[30],class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Ol]},$$scope:{ctx:l}}});function j(H){l[20](H,l[28])}function W(...H){return l[21](l[30],...H)}let ae={id:"quantidade-"+l[30],type:"number",min:"1",max:"100",class:"rounded-sm "+(l[5][`quantidade-${l[30]}`]?"border-red-500":""),disabled:l[1]};l[28].quantidade!==void 0&&(ae.value=l[28].quantidade),O=new At({props:ae}),Re.push(()=>je(O,"value",j)),O.$on("input",W);let oe=l[5][`quantidade-${l[30]}`]&&ga(l),le=l[28].nomeEquipamento&&pa(l);return{c(){e=b("div"),t=b("div"),a=b("h4"),r=R("Item "),s=R(o),n=V(),_&&_.c(),i=V(),c=b("div"),u=b("div"),J(f.$$.fragment),p=V(),J(m.$$.fragment),I=V(),v&&v.c(),w=V(),A=b("div"),J(N.$$.fragment),z=V(),J(O.$$.fragment),B=V(),oe&&oe.c(),M=V(),le&&le.c(),U=V(),this.h()},l(H){e=$(H,"DIV",{class:!0});var se=D(e);t=$(se,"DIV",{class:!0});var fe=D(t);a=$(fe,"H4",{class:!0});var de=D(a);r=x(de,"Item "),s=x(de,o),de.forEach(g),n=F(fe),_&&_.l(fe),fe.forEach(g),i=F(se),c=$(se,"DIV",{class:!0});var pe=D(c);u=$(pe,"DIV",{class:!0});var ie=D(u);G(f.$$.fragment,ie),p=F(ie),G(m.$$.fragment,ie),I=F(ie),v&&v.l(ie),ie.forEach(g),w=F(pe),A=$(pe,"DIV",{});var Y=D(A);G(N.$$.fragment,Y),z=F(Y),G(O.$$.fragment,Y),B=F(Y),oe&&oe.l(Y),Y.forEach(g),pe.forEach(g),M=F(se),le&&le.l(se),U=F(se),se.forEach(g),this.h()},h(){E(a,"class","text-sm font-medium text-gray-900 dark:text-white"),E(t,"class","flex items-start justify-between mb-4"),E(u,"class","md:col-span-2"),E(c,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),E(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4")},m(H,se){q(H,e,se),d(e,t),d(t,a),d(a,r),d(a,s),d(t,n),_&&_.m(t,null),d(e,i),d(e,c),d(c,u),Z(f,u,null),d(u,p),Z(m,u,null),d(u,I),v&&v.m(u,null),d(c,w),d(c,A),Z(N,A,null),d(A,z),Z(O,A,null),d(A,B),oe&&oe.m(A,null),d(e,M),le&&le.m(e,null),d(e,U),K=!0},p(H,se){l=H,l[4].length>1?_?(_.p(l,se),se[0]&16&&k(_,1)):(_=da(l),_.c(),k(_,1),_.m(t,null)):_&&(_e(),y(_,1,1,()=>{_=null}),ve());const fe={};se[1]&1&&(fe.$$scope={dirty:se,ctx:l}),f.$set(fe);const de={};se[0]&128&&(de.items=l[7]),se[0]&32&&(de.class="rounded-sm "+(l[5][`item-${l[30]}`]?"border-red-500":"")),se[0]&2&&(de.disabled=l[1]),!h&&se[0]&16&&(h=!0,de.value=l[28].episDisponivelId,He(()=>h=!1)),m.$set(de),l[5][`item-${l[30]}`]?v?v.p(l,se):(v=ma(l),v.c(),v.m(u,null)):v&&(v.d(1),v=null);const pe={};se[1]&1&&(pe.$$scope={dirty:se,ctx:l}),N.$set(pe);const ie={};se[0]&32&&(ie.class="rounded-sm "+(l[5][`quantidade-${l[30]}`]?"border-red-500":"")),se[0]&2&&(ie.disabled=l[1]),!S&&se[0]&16&&(S=!0,ie.value=l[28].quantidade,He(()=>S=!1)),O.$set(ie),l[5][`quantidade-${l[30]}`]?oe?oe.p(l,se):(oe=ga(l),oe.c(),oe.m(A,null)):oe&&(oe.d(1),oe=null),l[28].nomeEquipamento?le?le.p(l,se):(le=pa(l),le.c(),le.m(e,U)):le&&(le.d(1),le=null)},i(H){K||(k(_),k(f.$$.fragment,H),k(m.$$.fragment,H),k(N.$$.fragment,H),k(O.$$.fragment,H),K=!0)},o(H){y(_),y(f.$$.fragment,H),y(m.$$.fragment,H),y(N.$$.fragment,H),y(O.$$.fragment,H),K=!1},d(H){H&&g(e),_&&_.d(),Q(f),Q(m),v&&v.d(),Q(N),Q(O),oe&&oe.d(),le&&le.d()}}}function _a(l){let e,t,a,r,o="Nenhum item na entrega",s,n,i;return t=new it({props:{class:"mx-auto mb-3 text-gray-400 w-8 h-8"}}),n=new Ne({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[1],$$slots:{default:[Ml]},$$scope:{ctx:l}}}),n.$on("click",l[8]),{c(){e=b("div"),J(t.$$.fragment),a=V(),r=b("p"),r.textContent=o,s=V(),J(n.$$.fragment),this.h()},l(c){e=$(c,"DIV",{class:!0});var u=D(e);G(t.$$.fragment,u),a=F(u),r=$(u,"P",{class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-iymvfb"&&(r.textContent=o),s=F(u),G(n.$$.fragment,u),u.forEach(g),this.h()},h(){E(r,"class","text-sm text-gray-500 dark:text-gray-400 mb-4"),E(e,"class","border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center")},m(c,u){q(c,e,u),Z(t,e,null),d(e,a),d(e,r),d(e,s),Z(n,e,null),i=!0},p(c,u){const f={};u[0]&2&&(f.disabled=c[1]),u[1]&1&&(f.$$scope={dirty:u,ctx:c}),n.$set(f)},i(c){i||(k(t.$$.fragment,c),k(n.$$.fragment,c),i=!0)},o(c){y(t.$$.fragment,c),y(n.$$.fragment,c),i=!1},d(c){c&&g(e),Q(t),Q(n)}}}function Ml(l){let e;return{c(){e=R("Adicionar Primeiro Item")},l(t){e=x(t,"Adicionar Primeiro Item")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function va(l){let e,t,a="Resumo das Altera√ß√µes",r,o,s,n,i=l[4].length+"",c,u,f,p,m=l[4].reduce($a,0)+"",h,I,w,A,N,z=(l[3]||"N√£o informado")+"",O;return{c(){e=b("div"),t=b("h4"),t.textContent=a,r=V(),o=b("div"),s=b("p"),n=R("‚Ä¢ Total de itens: "),c=R(i),u=V(),f=b("p"),p=R("‚Ä¢ Quantidade total: "),h=R(m),I=R(" unidades"),w=V(),A=b("p"),N=R("‚Ä¢ Respons√°vel: "),O=R(z),this.h()},l(S){e=$(S,"DIV",{class:!0});var B=D(e);t=$(B,"H4",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-sxfnj2"&&(t.textContent=a),r=F(B),o=$(B,"DIV",{class:!0});var M=D(o);s=$(M,"P",{});var U=D(s);n=x(U,"‚Ä¢ Total de itens: "),c=x(U,i),U.forEach(g),u=F(M),f=$(M,"P",{});var K=D(f);p=x(K,"‚Ä¢ Quantidade total: "),h=x(K,m),I=x(K," unidades"),K.forEach(g),w=F(M),A=$(M,"P",{});var _=D(A);N=x(_,"‚Ä¢ Respons√°vel: "),O=x(_,z),_.forEach(g),M.forEach(g),B.forEach(g),this.h()},h(){E(t,"class","text-sm font-medium text-yellow-900 dark:text-yellow-100 mb-2"),E(o,"class","text-sm text-yellow-800 dark:text-yellow-200"),E(e,"class","mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800")},m(S,B){q(S,e,B),d(e,t),d(e,r),d(e,o),d(o,s),d(s,n),d(s,c),d(o,u),d(o,f),d(f,p),d(f,h),d(f,I),d(o,w),d(o,A),d(A,N),d(A,O)},p(S,B){B[0]&16&&i!==(i=S[4].length+"")&&ne(c,i),B[0]&16&&m!==(m=S[4].reduce($a,0)+"")&&ne(h,m),B[0]&8&&z!==(z=(S[3]||"N√£o informado")+"")&&ne(O,z)},d(S){S&&g(e)}}}function xl(l){let e;return{c(){e=R("Cancelar")},l(t){e=x(t,"Cancelar")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Rl(l){let e,t,a;return e=new Dr({props:{class:"mr-2 w-4 h-4"}}),{c(){J(e.$$.fragment),t=R(`
              Salvar Altera√ß√µes`)},l(r){G(e.$$.fragment,r),t=x(r,`
              Salvar Altera√ß√µes`)},m(r,o){Z(e,r,o),q(r,t,o),a=!0},i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&g(t),Q(e,r)}}}function jl(l){let e,t,a;return e=new Ya({props:{class:"mr-2 animate-spin w-4 h-4"}}),{c(){J(e.$$.fragment),t=R(`
              Salvando...`)},l(r){G(e.$$.fragment,r),t=x(r,`
              Salvando...`)},m(r,o){Z(e,r,o),q(r,t,o),a=!0},i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&g(t),Q(e,r)}}}function Hl(l){let e,t,a,r;const o=[jl,Rl],s=[];function n(i,c){return i[1]?0:1}return e=n(l),t=s[e]=o[e](l),{c(){t.c(),a=Ie()},l(i){t.l(i),a=Ie()},m(i,c){s[e].m(i,c),q(i,a,c),r=!0},p(i,c){let u=e;e=n(i),e!==u&&(_e(),y(s[u],1,1,()=>{s[u]=null}),ve(),t=s[e],t||(t=s[e]=o[e](i),t.c()),k(t,1),t.m(a.parentNode,a))},i(i){r||(k(t),r=!0)},o(i){y(t),r=!1},d(i){i&&g(a),s[e].d(i)}}}function Ul(l){let e,t,a=l[2]&&ia(l);return{c(){a&&a.c(),e=Ie()},l(r){a&&a.l(r),e=Ie()},m(r,o){a&&a.m(r,o),q(r,e,o),t=!0},p(r,o){r[2]?a?(a.p(r,o),o[0]&4&&k(a,1)):(a=ia(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(k(a),t=!0)},o(r){y(a),t=!1},d(r){r&&g(e),a&&a.d(r)}}}const $a=(l,e)=>l+e.quantidade;function Ll(l,e,t){let a,r,{episDisponiveis:o=[]}=e,{entrega:s=null}=e,{loading:n=!1}=e,{show:i=!1}=e;const c=Xe();let u="",f=[],p={};function m(){s&&(t(3,u="Respons√°vel da Entrega"),t(4,f=[{episDisponivelId:"1",nomeEquipamento:"Capacete de Seguran√ßa",registroCA:"31469",quantidade:1}]),t(5,p={}))}function h(){t(4,f=[...f,{episDisponivelId:"",nomeEquipamento:"",registroCA:"",quantidade:1}])}function I(v){t(4,f=f.filter((j,W)=>W!==v))}function w(v,j){const W=j.target;A(v,W.value)}function A(v,j){const W=o.find(ae=>ae.id===j);W&&(t(4,f[v]={...f[v],episDisponivelId:j,nomeEquipamento:W.nomeEquipamento,registroCA:W.registroCA},f),delete p[`item-${v}`],t(5,p={...p}))}function N(v,j){t(4,f[v]={...f[v],quantidade:j},f),delete p[`quantidade-${v}`],t(5,p={...p})}function z(){const v={};return u.trim()||(v.responsavel="Respons√°vel √© obrigat√≥rio"),f.length===0&&(v.items="Adicione pelo menos um item"),f.forEach((j,W)=>{j.episDisponivelId||(v[`item-${W}`]="Selecione um EPI"),j.quantidade<1&&(v[`quantidade-${W}`]="Quantidade deve ser maior que 0")}),t(5,p=v),Object.keys(v).length===0}function O(){if(!z())return;const v={responsavel:u.trim(),usuarioResponsavelId:u.trim(),responsavelId:u.trim(),itens:f.map(j=>({episDisponivelId:j.episDisponivelId,nomeEquipamento:j.nomeEquipamento,registroCA:j.registroCA,quantidade:j.quantidade,estoqueItemId:j.episDisponivelId}))};c("salvar",v)}function S(){c("cancelar")}function B(v,j){const W=v.currentTarget;N(j,parseInt(W.value)||1)}function M(v){ut.call(this,l,v)}function U(v){u=v,t(3,u)}const K=v=>I(v);function _(v,j){l.$$.not_equal(j.episDisponivelId,v)&&(j.episDisponivelId=v,t(4,f))}const P=(v,j)=>w(v,j);function T(v,j){l.$$.not_equal(j.quantidade,v)&&(j.quantidade=v,t(4,f))}const C=(v,j)=>B(j,v);return l.$$set=v=>{"episDisponiveis"in v&&t(14,o=v.episDisponiveis),"entrega"in v&&t(0,s=v.entrega),"loading"in v&&t(1,n=v.loading),"show"in v&&t(2,i=v.show)},l.$$.update=()=>{l.$$.dirty[0]&5&&i&&s&&m(),l.$$.dirty[0]&16384&&t(7,a=[{value:"",label:"Selecione um EPI...",name:"select"},...o.filter(v=>v.disponivel).map(v=>({value:v.id,label:`${v.nomeEquipamento} (CA ${v.registroCA})${v.quantidade?` - ${v.quantidade} dispon√≠veis`:""}`,name:v.nomeEquipamento}))]),l.$$.dirty[0]&26&&t(6,r=u.trim()&&f.length>0&&!n)},[s,n,i,u,f,p,r,a,h,I,w,O,S,B,o,M,U,K,_,P,T,C]}class Bl extends Qe{constructor(e){super(),Ze(this,e,Ll,Ul,Ge,{episDisponiveis:14,entrega:0,loading:1,show:2},null,[-1,-1])}}function ba(l){let e,t,a,r,o,s,n,i,c;r=new dt({props:{title:l[0]?`Devolver ${l[0].nomeEquipamento}`:"Devolver Equipamento",objectType:"DEVOLU√á√ÉO EPI",iconName:"TrashBinOutline",primaryAction:{text:l[1]?"Processando...":"Confirmar Devolu√ß√£o",icon:l[1]?"":"CheckOutline",disabled:!l[8]}}}),r.$on("close",l[11]),r.$on("primaryAction",l[10]);let u=l[0]&&Ea(l);return{c(){e=b("div"),t=V(),a=b("div"),J(r.$$.fragment),o=V(),s=b("div"),u&&u.c(),this.h()},l(f){e=$(f,"DIV",{class:!0,role:!0}),D(e).forEach(g),t=F(f),a=$(f,"DIV",{class:!0,role:!0,"aria-modal":!0});var p=D(a);G(r.$$.fragment,p),o=F(p),s=$(p,"DIV",{class:!0});var m=D(s);u&&u.l(m),m.forEach(g),p.forEach(g),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(s,"class","flex-1 overflow-y-auto p-6 custom-scrollbar svelte-fw4j42"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(f,p){q(f,e,p),q(f,t,p),q(f,a,p),Z(r,a,null),d(a,o),d(a,s),u&&u.m(s,null),n=!0,i||(c=[Ue(e,"click",l[11]),Ue(a,"click",Ct(l[12]))],i=!0)},p(f,p){const m={};p&1&&(m.title=f[0]?`Devolver ${f[0].nomeEquipamento}`:"Devolver Equipamento"),p&258&&(m.primaryAction={text:f[1]?"Processando...":"Confirmar Devolu√ß√£o",icon:f[1]?"":"CheckOutline",disabled:!f[8]}),r.$set(m),f[0]?u?(u.p(f,p),p&1&&k(u,1)):(u=Ea(f),u.c(),k(u,1),u.m(s,null)):u&&(_e(),y(u,1,1,()=>{u=null}),ve())},i(f){n||(k(r.$$.fragment,f),k(u),n=!0)},o(f){y(r.$$.fragment,f),y(u),n=!1},d(f){f&&(g(e),g(t),g(a)),Q(r),u&&u.d(),i=!1,Dt(c)}}}function Ea(l){let e,t,a,r="1",o,s,n,i=l[0].nomeEquipamento+"",c,u,f,p,m=l[0].registroCA+"",h,I,w=l[0].entregaId+"",A,N,z,O,S,B,M="Prazo de Devolu√ß√£o",U,K,_=wt(l[0].prazoMaximoDevolucao)+"",P,T,C,v,j,W,ae,oe,le,H,se,fe,de,pe,ie,Y,ee,X,ce,L,re="Campo opcional para detalhes espec√≠ficos da devolu√ß√£o",me,$e,Ee;const Fe=[Zl,Ql],De=[];function ye(ue,be){return ue[7]?0:1}v=ye(l),j=De[v]=Fe[v](l),oe=new We({props:{for:"motivo",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Gl]},$$scope:{ctx:l}}});function Se(ue){l[13](ue)}let qe={id:"motivo",class:"rounded-sm "+(l[5].motivo?"border-red-500":""),disabled:l[1],items:l[9]};l[3]!==void 0&&(qe.value=l[3]),H=new er({props:qe}),Re.push(()=>je(H,"value",Se));let ge=l[5].motivo&&ka(l);ie=new We({props:{for:"observacoes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",$$slots:{default:[Jl]},$$scope:{ctx:l}}});function ze(ue){l[14](ue)}let te={id:"observacoes",placeholder:"Observa√ß√µes adicionais sobre a devolu√ß√£o...",rows:2,class:"rounded-sm",disabled:l[1]};l[4]!==void 0&&(te.value=l[4]),ee=new kr({props:te}),Re.push(()=>je(ee,"value",ze));let we=l[7]&&Ia(l);return{c(){e=b("div"),t=b("div"),a=b("div"),a.textContent=r,o=V(),s=b("div"),n=b("h4"),c=R(i),u=V(),f=b("p"),p=R("CA "),h=R(m),I=R(" ‚Ä¢ Entrega #"),A=R(w),N=V(),z=b("div"),O=b("div"),S=b("div"),B=b("p"),B.textContent=M,U=V(),K=b("p"),P=R(_),T=V(),C=b("div"),j.c(),W=V(),ae=b("div"),J(oe.$$.fragment),le=V(),J(H.$$.fragment),fe=V(),ge&&ge.c(),de=V(),pe=b("div"),J(ie.$$.fragment),Y=V(),J(ee.$$.fragment),ce=V(),L=b("p"),L.textContent=re,me=V(),we&&we.c(),$e=Ie(),this.h()},l(ue){e=$(ue,"DIV",{class:!0});var be=D(e);t=$(be,"DIV",{class:!0});var Te=D(t);a=$(Te,"DIV",{class:!0,"data-svelte-h":!0}),ke(a)!=="svelte-bog2zm"&&(a.textContent=r),o=F(Te),s=$(Te,"DIV",{class:!0});var Me=D(s);n=$(Me,"H4",{class:!0});var Ce=D(n);c=x(Ce,i),Ce.forEach(g),u=F(Me),f=$(Me,"P",{class:!0});var he=D(f);p=x(he,"CA "),h=x(he,m),I=x(he," ‚Ä¢ Entrega #"),A=x(he,w),he.forEach(g),Me.forEach(g),Te.forEach(g),N=F(be),z=$(be,"DIV",{class:!0});var Pe=D(z);O=$(Pe,"DIV",{class:!0});var Le=D(O);S=$(Le,"DIV",{});var Be=D(S);B=$(Be,"P",{class:!0,"data-svelte-h":!0}),ke(B)!=="svelte-13u3t5e"&&(B.textContent=M),U=F(Be),K=$(Be,"P",{class:!0});var tt=D(K);P=x(tt,_),tt.forEach(g),Be.forEach(g),T=F(Le),C=$(Le,"DIV",{class:!0});var et=D(C);j.l(et),et.forEach(g),Le.forEach(g),Pe.forEach(g),be.forEach(g),W=F(ue),ae=$(ue,"DIV",{class:!0});var Ke=D(ae);G(oe.$$.fragment,Ke),le=F(Ke),G(H.$$.fragment,Ke),fe=F(Ke),ge&&ge.l(Ke),Ke.forEach(g),de=F(ue),pe=$(ue,"DIV",{class:!0});var Je=D(pe);G(ie.$$.fragment,Je),Y=F(Je),G(ee.$$.fragment,Je),ce=F(Je),L=$(Je,"P",{class:!0,"data-svelte-h":!0}),ke(L)!=="svelte-1gkgsxh"&&(L.textContent=re),Je.forEach(g),me=F(ue),we&&we.l(ue),$e=Ie(),this.h()},h(){E(a,"class","flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-md flex items-center justify-center font-semibold text-sm"),E(n,"class","font-medium text-gray-900 dark:text-white"),E(f,"class","text-sm text-gray-500 dark:text-gray-400"),E(s,"class","flex-1"),E(t,"class","flex items-start space-x-3 mb-3"),E(B,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(K,"class","text-sm text-gray-900 dark:text-white"),E(C,"class","text-right"),E(O,"class","flex items-center justify-between"),E(z,"class","pt-3 border-t border-gray-200 dark:border-gray-700"),E(e,"class","mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"),E(ae,"class","mb-6"),E(L,"class","mt-1 text-xs text-gray-500 dark:text-gray-400"),E(pe,"class","mb-6")},m(ue,be){q(ue,e,be),d(e,t),d(t,a),d(t,o),d(t,s),d(s,n),d(n,c),d(s,u),d(s,f),d(f,p),d(f,h),d(f,I),d(f,A),d(e,N),d(e,z),d(z,O),d(O,S),d(S,B),d(S,U),d(S,K),d(K,P),d(O,T),d(O,C),De[v].m(C,null),q(ue,W,be),q(ue,ae,be),Z(oe,ae,null),d(ae,le),Z(H,ae,null),d(ae,fe),ge&&ge.m(ae,null),q(ue,de,be),q(ue,pe,be),Z(ie,pe,null),d(pe,Y),Z(ee,pe,null),d(pe,ce),d(pe,L),q(ue,me,be),we&&we.m(ue,be),q(ue,$e,be),Ee=!0},p(ue,be){(!Ee||be&1)&&i!==(i=ue[0].nomeEquipamento+"")&&ne(c,i),(!Ee||be&1)&&m!==(m=ue[0].registroCA+"")&&ne(h,m),(!Ee||be&1)&&w!==(w=ue[0].entregaId+"")&&ne(A,w),(!Ee||be&1)&&_!==(_=wt(ue[0].prazoMaximoDevolucao)+"")&&ne(P,_);let Te=v;v=ye(ue),v===Te?De[v].p(ue,be):(_e(),y(De[Te],1,1,()=>{De[Te]=null}),ve(),j=De[v],j?j.p(ue,be):(j=De[v]=Fe[v](ue),j.c()),k(j,1),j.m(C,null));const Me={};be&262144&&(Me.$$scope={dirty:be,ctx:ue}),oe.$set(Me);const Ce={};be&32&&(Ce.class="rounded-sm "+(ue[5].motivo?"border-red-500":"")),be&2&&(Ce.disabled=ue[1]),!se&&be&8&&(se=!0,Ce.value=ue[3],He(()=>se=!1)),H.$set(Ce),ue[5].motivo?ge?ge.p(ue,be):(ge=ka(ue),ge.c(),ge.m(ae,null)):ge&&(ge.d(1),ge=null);const he={};be&262144&&(he.$$scope={dirty:be,ctx:ue}),ie.$set(he);const Pe={};be&2&&(Pe.disabled=ue[1]),!X&&be&16&&(X=!0,Pe.value=ue[4],He(()=>X=!1)),ee.$set(Pe),ue[7]?we?(we.p(ue,be),be&128&&k(we,1)):(we=Ia(ue),we.c(),k(we,1),we.m($e.parentNode,$e)):we&&(_e(),y(we,1,1,()=>{we=null}),ve())},i(ue){Ee||(k(j),k(oe.$$.fragment,ue),k(H.$$.fragment,ue),k(ie.$$.fragment,ue),k(ee.$$.fragment,ue),k(we),Ee=!0)},o(ue){y(j),y(oe.$$.fragment,ue),y(H.$$.fragment,ue),y(ie.$$.fragment,ue),y(ee.$$.fragment,ue),y(we),Ee=!1},d(ue){ue&&(g(e),g(W),g(ae),g(de),g(pe),g(me),g($e)),De[v].d(),Q(oe),Q(H),ge&&ge.d(),Q(ie),Q(ee),we&&we.d(ue)}}}function Ql(l){let e,t,a,r;return t=new rr({props:{class:"mr-1 w-3 h-3"}}),{c(){e=b("div"),J(t.$$.fragment),a=R(`
                  No prazo`),this.h()},l(o){e=$(o,"DIV",{class:!0});var s=D(e);G(t.$$.fragment,s),a=x(s,`
                  No prazo`),s.forEach(g),this.h()},h(){E(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200")},m(o,s){q(o,e,s),Z(t,e,null),d(e,a),r=!0},p:Ae,i(o){r||(k(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&g(e),Q(t)}}}function Zl(l){let e,t,a,r,o,s;return t=new St({props:{class:"mr-1 w-3 h-3"}}),{c(){e=b("div"),J(t.$$.fragment),a=R(`
                  Vencido h√° `),r=R(l[6]),o=R(" dias"),this.h()},l(n){e=$(n,"DIV",{class:!0});var i=D(e);G(t.$$.fragment,i),a=x(i,`
                  Vencido h√° `),r=x(i,l[6]),o=x(i," dias"),i.forEach(g),this.h()},h(){E(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200")},m(n,i){q(n,e,i),Z(t,e,null),d(e,a),d(e,r),d(e,o),s=!0},p(n,i){(!s||i&64)&&ne(r,n[6])},i(n){s||(k(t.$$.fragment,n),s=!0)},o(n){y(t.$$.fragment,n),s=!1},d(n){n&&g(e),Q(t)}}}function Gl(l){let e;return{c(){e=R("Motivo da Devolu√ß√£o *")},l(t){e=x(t,"Motivo da Devolu√ß√£o *")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function ka(l){let e,t=l[5].motivo+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var o=D(e);a=x(o,t),o.forEach(g),this.h()},h(){E(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(r,o){q(r,e,o),d(e,a)},p(r,o){o&32&&t!==(t=r[5].motivo+"")&&ne(a,t)},d(r){r&&g(e)}}}function Jl(l){let e;return{c(){e=R("Observa√ß√µes (opcional)")},l(t){e=x(t,"Observa√ß√µes (opcional)")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Ia(l){let e,t,a,r,o,s,n="Equipamento com prazo vencido",i,c,u,f,p,m;return a=new St({props:{class:"text-red-600 dark:text-red-400 mt-0.5 mr-3 w-5 h-5"}}),{c(){e=b("div"),t=b("div"),J(a.$$.fragment),r=V(),o=b("div"),s=b("h4"),s.textContent=n,i=V(),c=b("p"),u=R("Este equipamento est√° "),f=R(l[6]),p=R(" dias em atraso para devolu√ß√£o."),this.h()},l(h){e=$(h,"DIV",{class:!0});var I=D(e);t=$(I,"DIV",{class:!0});var w=D(t);G(a.$$.fragment,w),r=F(w),o=$(w,"DIV",{});var A=D(o);s=$(A,"H4",{class:!0,"data-svelte-h":!0}),ke(s)!=="svelte-1l5do2t"&&(s.textContent=n),i=F(A),c=$(A,"P",{class:!0});var N=D(c);u=x(N,"Este equipamento est√° "),f=x(N,l[6]),p=x(N," dias em atraso para devolu√ß√£o."),N.forEach(g),A.forEach(g),w.forEach(g),I.forEach(g),this.h()},h(){E(s,"class","text-sm font-medium text-red-800 dark:text-red-200"),E(c,"class","text-sm text-red-700 dark:text-red-300 mt-1"),E(t,"class","flex items-start"),E(e,"class","mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800")},m(h,I){q(h,e,I),d(e,t),Z(a,t,null),d(t,r),d(t,o),d(o,s),d(o,i),d(o,c),d(c,u),d(c,f),d(c,p),m=!0},p(h,I){(!m||I&64)&&ne(f,h[6])},i(h){m||(k(a.$$.fragment,h),m=!0)},o(h){y(a.$$.fragment,h),m=!1},d(h){h&&g(e),Q(a)}}}function Wl(l){let e,t,a=l[2]&&ba(l);return{c(){a&&a.c(),e=Ie()},l(r){a&&a.l(r),e=Ie()},m(r,o){a&&a.m(r,o),q(r,e,o),t=!0},p(r,[o]){r[2]?a?(a.p(r,o),o&4&&k(a,1)):(a=ba(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(k(a),t=!0)},o(r){y(a),t=!1},d(r){r&&g(e),a&&a.d(r)}}}function Kl(l,e,t){let a,r,o,{equipamento:s=null}=e,{loading:n=!1}=e,{show:i=!1}=e;const c=Xe();let u="devolu√ß√£o padr√£o",f="",p={};const m=[{value:"devolu√ß√£o padr√£o",name:"Devolu√ß√£o Padr√£o - Fim do per√≠odo de uso"},{value:"danificado",name:"Danificado - EPI com defeito ou quebrado"},{value:"troca",name:"Troca - Substitui√ß√£o por outro equipamento"},{value:"outros",name:"Outros - Outro motivo espec√≠fico"}];function h(){t(3,u="devolu√ß√£o padr√£o"),t(4,f=""),t(5,p={})}function I(){const S={};return u||(S.motivo="Motivo da devolu√ß√£o √© obrigat√≥rio"),t(5,p=S),Object.keys(S).length===0}function w(){I()&&c("confirmar",{motivo:u,observacoes:f.trim()||void 0})}function A(){c("cancelar")}function N(S){ut.call(this,l,S)}function z(S){u=S,t(3,u)}function O(S){f=S,t(4,f)}return l.$$set=S=>{"equipamento"in S&&t(0,s=S.equipamento),"loading"in S&&t(1,n=S.loading),"show"in S&&t(2,i=S.show)},l.$$.update=()=>{l.$$.dirty&5&&i&&s&&h(),l.$$.dirty&10&&t(8,a=u&&!n),l.$$.dirty&1&&t(7,r=(s==null?void 0:s.vencido)||!1),l.$$.dirty&1&&t(6,o=(s==null?void 0:s.diasVencido)||0)},[s,n,i,u,f,p,o,r,a,m,w,A,N,z,O]}class Yl extends Qe{constructor(e){super(),Ze(this,e,Kl,Wl,Ge,{equipamento:0,loading:1,show:2})}}function wa(l){let e,t,a,r,o,s,n,i,c;r=new dt({props:{title:l[0]?`Assinatura da Entrega #${l[0].id}`:"Confirmar Assinatura Digital",objectType:"ASSINATURA DIGITAL",iconName:"TabletOutline",primaryAction:{text:l[1]?"Processando...":l[3]?"Assinatura Confirmada":"Foi assinado",icon:l[1]?"":l[3]?"CheckOutline":"CheckCircleOutline",disabled:!l[4]},secondaryAction:{text:"Cancelar",disabled:l[1]}}}),r.$on("close",l[5]),r.$on("primaryAction",l[6]),r.$on("secondaryAction",l[5]);let u=l[0]&&Da(l);return{c(){e=b("div"),t=V(),a=b("div"),J(r.$$.fragment),o=V(),s=b("div"),u&&u.c(),this.h()},l(f){e=$(f,"DIV",{class:!0,role:!0}),D(e).forEach(g),t=F(f),a=$(f,"DIV",{class:!0,role:!0,"aria-modal":!0});var p=D(a);G(r.$$.fragment,p),o=F(p),s=$(p,"DIV",{class:!0,style:!0});var m=D(s);u&&u.l(m),m.forEach(g),p.forEach(g),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-50 z-[60] transition-opacity"),E(e,"role","presentation"),E(s,"class","overflow-y-auto custom-scrollbar p-6 svelte-ng7f9w"),qt(s,"height","calc(100% - 80px)"),E(a,"class","fixed top-16 right-0 h-[calc(100vh-4rem)] w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out"),E(a,"role","dialog"),E(a,"aria-modal","true")},m(f,p){q(f,e,p),q(f,t,p),q(f,a,p),Z(r,a,null),d(a,o),d(a,s),u&&u.m(s,null),n=!0,i||(c=[Ue(e,"click",l[5]),Ue(a,"click",Ct(l[7]))],i=!0)},p(f,p){const m={};p&1&&(m.title=f[0]?`Assinatura da Entrega #${f[0].id}`:"Confirmar Assinatura Digital"),p&26&&(m.primaryAction={text:f[1]?"Processando...":f[3]?"Assinatura Confirmada":"Foi assinado",icon:f[1]?"":f[3]?"CheckOutline":"CheckCircleOutline",disabled:!f[4]}),p&2&&(m.secondaryAction={text:"Cancelar",disabled:f[1]}),r.$set(m),f[0]?u?(u.p(f,p),p&1&&k(u,1)):(u=Da(f),u.c(),k(u,1),u.m(s,null)):u&&(_e(),y(u,1,1,()=>{u=null}),ve())},i(f){n||(k(r.$$.fragment,f),k(u),n=!0)},o(f){y(r.$$.fragment,f),y(u),n=!1},d(f){f&&(g(e),g(t),g(a)),Q(r),u&&u.d(),i=!1,Dt(c)}}}function Da(l){let e,t,a,r,o="Entrega",s,n,i,c=l[0].id+"",u,f,p,m,h="Data da Entrega",I,w,A=wt(l[0].dataEntrega)+"",N,z,O,S='<h4 class="text-sm font-semibold text-gray-900 dark:text-white mb-3">EPIs a serem confirmados:</h4> <div class="space-y-2"><div class="flex items-center justify-between py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-sm border border-gray-200 dark:border-gray-600"><div class="flex flex-col"><span class="text-sm text-gray-900 dark:text-white font-medium">Capacete de Seguran√ßa</span> <span class="text-xs text-gray-500 dark:text-gray-400">CA 31469</span></div> <div class="text-right"><span class="text-sm font-medium text-gray-900 dark:text-white">Qtd: 1</span></div></div></div>',B,M,U,K,_,P,T,C,v="Assinatura Digital",j,W,ae="Assine digitalmente atrav√©s do link ou QR Code",oe,le,H,se,fe,de,pe,ie,Y,ee="Escaneie o QR Code para assinar",X,ce,L,re,me,$e,Ee,Fe="Assinatura Manual",De,ye,Se="Imprima o documento para assinatura f√≠sica",qe,ge,ze,te,we,ue="Ap√≥s assinatura f√≠sica, confirme abaixo",be,Te,Me;_=new Cr({props:{class:"text-blue-600 dark:text-blue-400 mt-0.5 mr-3 w-5 h-5"}}),H=new Ne({props:{size:"xs",color:"primary",class:"rounded-sm w-full",$$slots:{default:[Xl]},$$scope:{ctx:l}}}),pe=new yr({props:{class:"text-gray-400 w-8 h-8"}}),re=new Pr({props:{class:"text-green-600 dark:text-green-400 mt-0.5 mr-3 w-5 h-5"}}),ze=new Ne({props:{size:"xs",color:"alternative",class:"rounded-sm w-full",$$slots:{default:[eo]},$$scope:{ctx:l}}});let Ce=l[3]&&Ca();return{c(){e=b("div"),t=b("div"),a=b("div"),r=b("p"),r.textContent=o,s=V(),n=b("p"),i=R("#"),u=R(c),f=V(),p=b("div"),m=b("p"),m.textContent=h,I=V(),w=b("p"),N=R(A),z=V(),O=b("div"),O.innerHTML=S,B=V(),M=b("div"),U=b("div"),K=b("div"),J(_.$$.fragment),P=V(),T=b("div"),C=b("h4"),C.textContent=v,j=V(),W=b("p"),W.textContent=ae,oe=V(),le=b("div"),J(H.$$.fragment),se=V(),fe=b("div"),de=b("div"),J(pe.$$.fragment),ie=V(),Y=b("p"),Y.textContent=ee,X=V(),ce=b("div"),L=b("div"),J(re.$$.fragment),me=V(),$e=b("div"),Ee=b("h4"),Ee.textContent=Fe,De=V(),ye=b("p"),ye.textContent=Se,qe=V(),ge=b("div"),J(ze.$$.fragment),te=V(),we=b("p"),we.textContent=ue,be=V(),Ce&&Ce.c(),Te=Ie(),this.h()},l(he){e=$(he,"DIV",{class:!0});var Pe=D(e);t=$(Pe,"DIV",{class:!0});var Le=D(t);a=$(Le,"DIV",{});var Be=D(a);r=$(Be,"P",{class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-15muixn"&&(r.textContent=o),s=F(Be),n=$(Be,"P",{class:!0});var tt=D(n);i=x(tt,"#"),u=x(tt,c),tt.forEach(g),Be.forEach(g),f=F(Le),p=$(Le,"DIV",{});var et=D(p);m=$(et,"P",{class:!0,"data-svelte-h":!0}),ke(m)!=="svelte-1nce9zk"&&(m.textContent=h),I=F(et),w=$(et,"P",{class:!0});var Ke=D(w);N=x(Ke,A),Ke.forEach(g),et.forEach(g),Le.forEach(g),Pe.forEach(g),z=F(he),O=$(he,"DIV",{class:!0,"data-svelte-h":!0}),ke(O)!=="svelte-udbm6m"&&(O.innerHTML=S),B=F(he),M=$(he,"DIV",{class:!0});var Je=D(M);U=$(Je,"DIV",{class:!0});var zt=D(U);K=$(zt,"DIV",{class:!0});var mt=D(K);G(_.$$.fragment,mt),P=F(mt),T=$(mt,"DIV",{});var at=D(T);C=$(at,"H4",{class:!0,"data-svelte-h":!0}),ke(C)!=="svelte-1yxfyqp"&&(C.textContent=v),j=F(at),W=$(at,"P",{class:!0,"data-svelte-h":!0}),ke(W)!=="svelte-mz9p7b"&&(W.textContent=ae),oe=F(at),le=$(at,"DIV",{class:!0});var rt=D(le);G(H.$$.fragment,rt),se=F(rt),fe=$(rt,"DIV",{class:!0});var Tt=D(fe);de=$(Tt,"DIV",{class:!0});var Ot=D(de);G(pe.$$.fragment,Ot),Ot.forEach(g),Tt.forEach(g),ie=F(rt),Y=$(rt,"P",{class:!0,"data-svelte-h":!0}),ke(Y)!=="svelte-1u6pcnc"&&(Y.textContent=ee),rt.forEach(g),at.forEach(g),mt.forEach(g),zt.forEach(g),X=F(Je),ce=$(Je,"DIV",{class:!0});var Mt=D(ce);L=$(Mt,"DIV",{class:!0});var gt=D(L);G(re.$$.fragment,gt),me=F(gt),$e=$(gt,"DIV",{});var lt=D($e);Ee=$(lt,"H4",{class:!0,"data-svelte-h":!0}),ke(Ee)!=="svelte-uzpa23"&&(Ee.textContent=Fe),De=F(lt),ye=$(lt,"P",{class:!0,"data-svelte-h":!0}),ke(ye)!=="svelte-1vt0diy"&&(ye.textContent=Se),qe=F(lt),ge=$(lt,"DIV",{class:!0});var pt=D(ge);G(ze.$$.fragment,pt),te=F(pt),we=$(pt,"P",{class:!0,"data-svelte-h":!0}),ke(we)!=="svelte-kjygt1"&&(we.textContent=ue),pt.forEach(g),lt.forEach(g),gt.forEach(g),Mt.forEach(g),Je.forEach(g),be=F(he),Ce&&Ce.l(he),Te=Ie(),this.h()},h(){E(r,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(n,"class","text-sm text-gray-900 dark:text-white font-semibold"),E(m,"class","text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide"),E(w,"class","text-sm text-gray-900 dark:text-white font-semibold"),E(t,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),E(e,"class","mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"),E(O,"class","mb-6"),E(C,"class","text-sm font-medium text-blue-900 dark:text-blue-100"),E(W,"class","text-sm text-blue-800 dark:text-blue-200 mt-1"),E(de,"class","w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center"),E(fe,"class","flex items-center justify-center p-3 bg-white dark:bg-gray-700 rounded border"),E(Y,"class","text-xs text-blue-700 dark:text-blue-300 text-center"),E(le,"class","mt-3 space-y-2"),E(K,"class","flex items-start"),E(U,"class","p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"),E(Ee,"class","text-sm font-medium text-green-900 dark:text-green-100"),E(ye,"class","text-sm text-green-800 dark:text-green-200 mt-1"),E(we,"class","text-xs text-green-700 dark:text-green-300 text-center"),E(ge,"class","mt-3 space-y-2"),E(L,"class","flex items-start"),E(ce,"class","p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800"),E(M,"class","mb-6 grid grid-cols-1 md:grid-cols-2 gap-4")},m(he,Pe){q(he,e,Pe),d(e,t),d(t,a),d(a,r),d(a,s),d(a,n),d(n,i),d(n,u),d(t,f),d(t,p),d(p,m),d(p,I),d(p,w),d(w,N),q(he,z,Pe),q(he,O,Pe),q(he,B,Pe),q(he,M,Pe),d(M,U),d(U,K),Z(_,K,null),d(K,P),d(K,T),d(T,C),d(T,j),d(T,W),d(T,oe),d(T,le),Z(H,le,null),d(le,se),d(le,fe),d(fe,de),Z(pe,de,null),d(le,ie),d(le,Y),d(M,X),d(M,ce),d(ce,L),Z(re,L,null),d(L,me),d(L,$e),d($e,Ee),d($e,De),d($e,ye),d($e,qe),d($e,ge),Z(ze,ge,null),d(ge,te),d(ge,we),q(he,be,Pe),Ce&&Ce.m(he,Pe),q(he,Te,Pe),Me=!0},p(he,Pe){(!Me||Pe&1)&&c!==(c=he[0].id+"")&&ne(u,c),(!Me||Pe&1)&&A!==(A=wt(he[0].dataEntrega)+"")&&ne(N,A);const Le={};Pe&2048&&(Le.$$scope={dirty:Pe,ctx:he}),H.$set(Le);const Be={};Pe&2048&&(Be.$$scope={dirty:Pe,ctx:he}),ze.$set(Be),he[3]?Ce?Pe&8&&k(Ce,1):(Ce=Ca(),Ce.c(),k(Ce,1),Ce.m(Te.parentNode,Te)):Ce&&(_e(),y(Ce,1,1,()=>{Ce=null}),ve())},i(he){Me||(k(_.$$.fragment,he),k(H.$$.fragment,he),k(pe.$$.fragment,he),k(re.$$.fragment,he),k(ze.$$.fragment,he),k(Ce),Me=!0)},o(he){y(_.$$.fragment,he),y(H.$$.fragment,he),y(pe.$$.fragment,he),y(re.$$.fragment,he),y(ze.$$.fragment,he),y(Ce),Me=!1},d(he){he&&(g(e),g(z),g(O),g(B),g(M),g(be),g(Te)),Q(_),Q(H),Q(pe),Q(re),Q(ze),Ce&&Ce.d(he)}}}function Xl(l){let e,t,a;return e=new Ar({props:{class:"mr-2 w-3 h-3"}}),{c(){J(e.$$.fragment),t=R(`
                  Abrir Link de Assinatura`)},l(r){G(e.$$.fragment,r),t=x(r,`
                  Abrir Link de Assinatura`)},m(r,o){Z(e,r,o),q(r,t,o),a=!0},p:Ae,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&g(t),Q(e,r)}}}function eo(l){let e,t,a;return e=new Fr({props:{class:"mr-2 w-3 h-3"}}),{c(){J(e.$$.fragment),t=R(`
                  Imprimir Documento`)},l(r){G(e.$$.fragment,r),t=x(r,`
                  Imprimir Documento`)},m(r,o){Z(e,r,o),q(r,t,o),a=!0},p:Ae,i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&g(t),Q(e,r)}}}function Ca(l){let e,t,a,r,o,s='<h4 class="text-sm font-medium text-green-900 dark:text-green-100">Assinatura Confirmada</h4> <p class="text-sm text-green-800 dark:text-green-200">Processando assinatura digital...</p>',n;return a=new rr({props:{class:"text-green-600 dark:text-green-400 mr-3 w-5 h-5"}}),{c(){e=b("div"),t=b("div"),J(a.$$.fragment),r=V(),o=b("div"),o.innerHTML=s,this.h()},l(i){e=$(i,"DIV",{class:!0});var c=D(e);t=$(c,"DIV",{class:!0});var u=D(t);G(a.$$.fragment,u),r=F(u),o=$(u,"DIV",{"data-svelte-h":!0}),ke(o)!=="svelte-9s52he"&&(o.innerHTML=s),u.forEach(g),c.forEach(g),this.h()},h(){E(t,"class","flex items-center"),E(e,"class","mb-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800")},m(i,c){q(i,e,c),d(e,t),Z(a,t,null),d(t,r),d(t,o),n=!0},i(i){n||(k(a.$$.fragment,i),n=!0)},o(i){y(a.$$.fragment,i),n=!1},d(i){i&&g(e),Q(a)}}}function to(l){let e,t,a=l[2]&&wa(l);return{c(){a&&a.c(),e=Ie()},l(r){a&&a.l(r),e=Ie()},m(r,o){a&&a.m(r,o),q(r,e,o),t=!0},p(r,[o]){r[2]?a?(a.p(r,o),o&4&&k(a,1)):(a=wa(r),a.c(),k(a,1),a.m(e.parentNode,e)):a&&(_e(),y(a,1,1,()=>{a=null}),ve())},i(r){t||(k(a),t=!0)},o(r){y(a),t=!1},d(r){r&&g(e),a&&a.d(r)}}}function ao(l,e,t){let a,{entrega:r=null}=e,{loading:o=!1}=e,{show:s=!1}=e;const n=Xe();let i=!1;function c(){t(3,i=!1)}function u(){const h=`assinatura_digital_${Date.now()}`;n("confirmar",{assinatura:h})}function f(){n("cancelar")}function p(){t(3,i=!0),setTimeout(()=>{u()},500)}function m(h){ut.call(this,l,h)}return l.$$set=h=>{"entrega"in h&&t(0,r=h.entrega),"loading"in h&&t(1,o=h.loading),"show"in h&&t(2,s=h.show)},l.$$.update=()=>{l.$$.dirty&4&&s&&c(),l.$$.dirty&10&&t(4,a=!o&&!i)},[r,o,s,i,a,f,p,m]}class ro extends Qe{constructor(e){super(),Ze(this,e,ao,to,Ge,{entrega:0,loading:1,show:2})}}function ya(l,e,t){const a=l.slice();return a[74]=e[t],a}function Pa(l,e,t){const a=l.slice();return a[65]=e[t],a}function Aa(l,e,t){const a=l.slice();return a[71]=e[t],a}function Fa(l,e,t){const a=l.slice();return a[68]=e[t],a}function Va(l,e,t){const a=l.slice();return a[62]=e[t],a}function qa(l,e,t){const a=l.slice();return a[59]=e[t],a}function Na(l,e,t){const a=l.slice();return a[77]=e[t],a}function lo(l){let e,t="<p>Nenhum dado dispon√≠vel</p>";return{c(){e=b("div"),e.innerHTML=t,this.h()},l(a){e=$(a,"DIV",{class:!0,"data-svelte-h":!0}),ke(e)!=="svelte-tlgdc6"&&(e.innerHTML=t),this.h()},h(){E(e,"class","text-center py-8 text-gray-500 dark:text-gray-400")},m(a,r){q(a,e,r)},p:Ae,i:Ae,o:Ae,d(a){a&&g(e)}}}function oo(l){let e,t,a,r,o,s,n,i=Ve([{id:"equipamentos",label:"Equipamentos",count:l[20].length},{id:"devolucoes",label:"Devolu√ß√µes",count:l[19].length},{id:"entregas",label:"Entregas",count:l[18].length},{id:"historico",label:"Hist√≥rico",count:l[17].length}]),c=[];for(let m=0;m<4;m+=1)c[m]=Sa(Na(l,i,m));const u=[fo,uo,co,io],f=[];function p(m,h){return m[21]==="equipamentos"?0:m[21]==="devolucoes"?1:m[21]==="entregas"?2:m[21]==="historico"?3:-1}return~(o=p(l))&&(s=f[o]=u[o](l)),{c(){e=b("div"),t=b("nav");for(let m=0;m<4;m+=1)c[m].c();a=V(),r=b("div"),s&&s.c(),this.h()},l(m){e=$(m,"DIV",{class:!0});var h=D(e);t=$(h,"NAV",{class:!0,"aria-label":!0});var I=D(t);for(let A=0;A<4;A+=1)c[A].l(I);I.forEach(g),h.forEach(g),a=F(m),r=$(m,"DIV",{class:!0});var w=D(r);s&&s.l(w),w.forEach(g),this.h()},h(){E(t,"class","flex space-x-8 px-6"),E(t,"aria-label","Tabs"),E(e,"class","border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"),E(r,"class","p-6")},m(m,h){q(m,e,h),d(e,t);for(let I=0;I<4;I+=1)c[I]&&c[I].m(t,null);q(m,a,h),q(m,r,h),~o&&f[o].m(r,null),n=!0},p(m,h){if(h[0]&4063232){i=Ve([{id:"equipamentos",label:"Equipamentos",count:m[20].length},{id:"devolucoes",label:"Devolu√ß√µes",count:m[19].length},{id:"entregas",label:"Entregas",count:m[18].length},{id:"historico",label:"Hist√≥rico",count:m[17].length}]);let w;for(w=0;w<4;w+=1){const A=Na(m,i,w);c[w]?c[w].p(A,h):(c[w]=Sa(A),c[w].c(),c[w].m(t,null))}for(;w<4;w+=1)c[w].d(1)}let I=o;o=p(m),o===I?~o&&f[o].p(m,h):(s&&(_e(),y(f[I],1,1,()=>{f[I]=null}),ve()),~o?(s=f[o],s?s.p(m,h):(s=f[o]=u[o](m),s.c()),k(s,1),s.m(r,null)):s=null)},i(m){n||(k(s),n=!0)},o(m){y(s),n=!1},d(m){m&&(g(e),g(a),g(r)),yt(c,m),~o&&f[o].d()}}}function no(l){let e,t;return e=new Nt({props:{error:l[7]}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p(a,r){const o={};r[0]&128&&(o.error=a[7]),e.$set(o)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function so(l){let e,t,a;return t=new Pt({}),{c(){e=b("div"),J(t.$$.fragment),this.h()},l(r){e=$(r,"DIV",{class:!0});var o=D(e);G(t.$$.fragment,o),o.forEach(g),this.h()},h(){E(e,"class","flex justify-center items-center py-12")},m(r,o){q(r,e,o),Z(t,e,null),a=!0},p:Ae,i(r){a||(k(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&g(e),Q(t)}}}function Sa(l){let e,t=l[77].label+"",a,r,o,s=l[77].count+"",n,i,c,u,f;function p(){return l[37](l[77])}return{c(){e=b("button"),a=R(t),r=V(),o=b("span"),n=R(s),i=V(),this.h()},l(m){e=$(m,"BUTTON",{class:!0});var h=D(e);a=x(h,t),r=F(h),o=$(h,"SPAN",{class:!0});var I=D(o);n=x(I,s),I.forEach(g),i=F(h),h.forEach(g),this.h()},h(){E(o,"class","ml-2 py-0.5 px-2 rounded-full text-xs bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),E(e,"class",c="py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(l[21]===l[77].id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"))},m(m,h){q(m,e,h),d(e,a),d(e,r),d(e,o),d(o,n),d(e,i),u||(f=Ue(e,"click",p),u=!0)},p(m,h){l=m,h[0]&1966080&&t!==(t=l[77].label+"")&&ne(a,t),h[0]&1966080&&s!==(s=l[77].count+"")&&ne(n,s),h[0]&4063232&&c!==(c="py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(l[21]===l[77].id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"))&&E(e,"class",c)},d(m){m&&g(e),u=!1,f()}}}function io(l){let e,t,a="Hist√≥rico Completo",r,o,s,n;const i=[go,mo],c=[];function u(f,p){return f[17].length===0?0:1}return o=u(l),s=c[o]=i[o](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=V(),s.c(),this.h()},l(f){e=$(f,"DIV",{class:!0});var p=D(e);t=$(p,"H3",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-n7dg6t"&&(t.textContent=a),r=F(p),s.l(p),p.forEach(g),this.h()},h(){E(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),E(e,"class","space-y-4")},m(f,p){q(f,e,p),d(e,t),d(e,r),c[o].m(e,null),n=!0},p(f,p){let m=o;o=u(f),o===m?c[o].p(f,p):(_e(),y(c[m],1,1,()=>{c[m]=null}),ve(),s=c[o],s?s.p(f,p):(s=c[o]=i[o](f),s.c()),k(s,1),s.m(e,null))},i(f){n||(k(s),n=!0)},o(f){y(s),n=!1},d(f){f&&g(e),c[o].d()}}}function co(l){let e,t,a="Entregas Registradas",r,o,s,n;const i=[ho,po],c=[];function u(f,p){return f[18].length===0?0:1}return o=u(l),s=c[o]=i[o](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=V(),s.c(),this.h()},l(f){e=$(f,"DIV",{class:!0});var p=D(e);t=$(p,"H3",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-s07e4q"&&(t.textContent=a),r=F(p),s.l(p),p.forEach(g),this.h()},h(){E(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),E(e,"class","space-y-4")},m(f,p){q(f,e,p),d(e,t),d(e,r),c[o].m(e,null),n=!0},p(f,p){let m=o;o=u(f),o===m?c[o].p(f,p):(_e(),y(c[m],1,1,()=>{c[m]=null}),ve(),s=c[o],s?s.p(f,p):(s=c[o]=i[o](f),s.c()),k(s,1),s.m(e,null))},i(f){n||(k(s),n=!0)},o(f){y(s),n=!1},d(f){f&&g(e),c[o].d()}}}function uo(l){let e,t,a="Devolu√ß√µes Efetuadas",r,o,s,n;const i=[yo,Co],c=[];function u(f,p){return f[19].length===0?0:1}return o=u(l),s=c[o]=i[o](l),{c(){e=b("div"),t=b("h3"),t.textContent=a,r=V(),s.c(),this.h()},l(f){e=$(f,"DIV",{class:!0});var p=D(e);t=$(p,"H3",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-1yyam8h"&&(t.textContent=a),r=F(p),s.l(p),p.forEach(g),this.h()},h(){E(t,"class","text-xl font-semibold text-gray-900 dark:text-white"),E(e,"class","space-y-4")},m(f,p){q(f,e,p),d(e,t),d(e,r),c[o].m(e,null),n=!0},p(f,p){let m=o;o=u(f),o===m?c[o].p(f,p):(_e(),y(c[m],1,1,()=>{c[m]=null}),ve(),s=c[o],s?s.p(f,p):(s=c[o]=i[o](f),s.c()),k(s,1),s.m(e,null))},i(f){n||(k(s),n=!0)},o(f){y(s),n=!1},d(f){f&&g(e),c[o].d()}}}function fo(l){let e,t,a='<h3 class="text-xl font-semibold text-gray-900 dark:text-white">Equipamentos com o Colaborador</h3>',r,o,s,n;const i=[Vo,Fo],c=[];function u(f,p){return f[20].length===0?0:1}return o=u(l),s=c[o]=i[o](l),{c(){e=b("div"),t=b("div"),t.innerHTML=a,r=V(),s.c(),this.h()},l(f){e=$(f,"DIV",{class:!0});var p=D(e);t=$(p,"DIV",{class:!0,"data-svelte-h":!0}),ke(t)!=="svelte-1ffw2a3"&&(t.innerHTML=a),r=F(p),s.l(p),p.forEach(g),this.h()},h(){E(t,"class","flex justify-between items-center"),E(e,"class","space-y-4")},m(f,p){q(f,e,p),d(e,t),d(e,r),c[o].m(e,null),n=!0},p(f,p){let m=o;o=u(f),o===m?c[o].p(f,p):(_e(),y(c[m],1,1,()=>{c[m]=null}),ve(),s=c[o],s?s.p(f,p):(s=c[o]=i[o](f),s.c()),k(s,1),s.m(e,null))},i(f){n||(k(s),n=!0)},o(f){y(s),n=!1},d(f){f&&g(e),c[o].d()}}}function mo(l){let e,t=[],a=new Map,r,o=Ve(l[17]);const s=n=>n[74].id;for(let n=0;n<o.length;n+=1){let i=ya(l,o,n),c=s(i);a.set(c,t[n]=Oa(c,i))}return{c(){e=b("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=$(n,"DIV",{class:!0});var i=D(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(g),this.h()},h(){E(e,"class","space-y-4")},m(n,i){q(n,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(n,i){i[0]&131072|i[1]&3&&(o=Ve(n[17]),_e(),t=st(t,i,s,1,n,o,a,e,ft,Oa,null,ya),ve())},i(n){if(!r){for(let i=0;i<o.length;i+=1)k(t[i]);r=!0}},o(n){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(n){n&&g(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function go(l){let e,t;return e=new Ft({props:{icon:"ClockOutline",message:"Nenhum evento registrado",description:"N√£o h√° hist√≥rico de atividades para esta ficha"}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function za(l){let e,t=l[74].mudancaStatus+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var o=D(e);a=x(o,t),o.forEach(g),this.h()},h(){E(e,"class","text-sm text-blue-600 dark:text-blue-400 mt-1")},m(r,o){q(r,e,o),d(e,a)},p(r,o){o[0]&131072&&t!==(t=r[74].mudancaStatus+"")&&ne(a,t)},d(r){r&&g(e)}}}function Ta(l){let e,t=l[74].detalhes.resumo+"",a;return{c(){e=b("p"),a=R(t),this.h()},l(r){e=$(r,"P",{class:!0});var o=D(e);a=x(o,t),o.forEach(g),this.h()},h(){E(e,"class","text-sm text-gray-600 dark:text-gray-300 mt-1")},m(r,o){q(r,e,o),d(e,a)},p(r,o){o[0]&131072&&t!==(t=r[74].detalhes.resumo+"")&&ne(a,t)},d(r){r&&g(e)}}}function Oa(l,e){var W;let t,a,r,o,s,n,i,c,u,f=e[74].tipoDisplay.label+"",p,m,h,I=e[74].acao+"",w,A,N,z=e[74].dataFormatada+"",O,S,B,M,U,K,_=e[74].responsavel+"",P,T,C;r=new ar({props:{name:e[31](e[74].tipoDisplay.tipo),className:"w-5 h-5"}});let v=e[74].mudancaStatus&&za(e),j=((W=e[74].detalhes)==null?void 0:W.resumo)&&Ta(e);return{key:l,first:null,c(){t=b("div"),a=b("div"),J(r.$$.fragment),s=V(),n=b("div"),i=b("div"),c=b("div"),u=b("h4"),p=R(f),m=V(),h=b("p"),w=R(I),A=V(),N=b("span"),O=R(z),S=V(),v&&v.c(),B=V(),j&&j.c(),M=V(),U=b("p"),K=R("Respons√°vel: "),P=R(_),T=V(),this.h()},l(ae){t=$(ae,"DIV",{class:!0});var oe=D(t);a=$(oe,"DIV",{class:!0});var le=D(a);G(r.$$.fragment,le),le.forEach(g),s=F(oe),n=$(oe,"DIV",{class:!0});var H=D(n);i=$(H,"DIV",{class:!0});var se=D(i);c=$(se,"DIV",{});var fe=D(c);u=$(fe,"H4",{class:!0});var de=D(u);p=x(de,f),de.forEach(g),m=F(fe),h=$(fe,"P",{class:!0});var pe=D(h);w=x(pe,I),pe.forEach(g),fe.forEach(g),A=F(se),N=$(se,"SPAN",{class:!0});var ie=D(N);O=x(ie,z),ie.forEach(g),se.forEach(g),S=F(H),v&&v.l(H),B=F(H),j&&j.l(H),M=F(H),U=$(H,"P",{class:!0});var Y=D(U);K=x(Y,"Respons√°vel: "),P=x(Y,_),Y.forEach(g),H.forEach(g),T=F(oe),oe.forEach(g),this.h()},h(){E(a,"class",o=`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${e[32](e[74].tipoDisplay.cor)}`),E(u,"class","font-medium text-gray-900 dark:text-white"),E(h,"class","text-sm text-gray-600 dark:text-gray-300"),E(N,"class","text-sm text-gray-500 dark:text-gray-400"),E(i,"class","flex items-center justify-between"),E(U,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),E(n,"class","flex-1 min-w-0"),E(t,"class","flex items-start space-x-4"),this.first=t},m(ae,oe){q(ae,t,oe),d(t,a),Z(r,a,null),d(t,s),d(t,n),d(n,i),d(i,c),d(c,u),d(u,p),d(c,m),d(c,h),d(h,w),d(i,A),d(i,N),d(N,O),d(n,S),v&&v.m(n,null),d(n,B),j&&j.m(n,null),d(n,M),d(n,U),d(U,K),d(U,P),d(t,T),C=!0},p(ae,oe){var H;e=ae;const le={};oe[0]&131072&&(le.name=e[31](e[74].tipoDisplay.tipo)),r.$set(le),(!C||oe[0]&131072&&o!==(o=`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${e[32](e[74].tipoDisplay.cor)}`))&&E(a,"class",o),(!C||oe[0]&131072)&&f!==(f=e[74].tipoDisplay.label+"")&&ne(p,f),(!C||oe[0]&131072)&&I!==(I=e[74].acao+"")&&ne(w,I),(!C||oe[0]&131072)&&z!==(z=e[74].dataFormatada+"")&&ne(O,z),e[74].mudancaStatus?v?v.p(e,oe):(v=za(e),v.c(),v.m(n,B)):v&&(v.d(1),v=null),(H=e[74].detalhes)!=null&&H.resumo?j?j.p(e,oe):(j=Ta(e),j.c(),j.m(n,M)):j&&(j.d(1),j=null),(!C||oe[0]&131072)&&_!==(_=e[74].responsavel+"")&&ne(P,_)},i(ae){C||(k(r.$$.fragment,ae),C=!0)},o(ae){y(r.$$.fragment,ae),C=!1},d(ae){ae&&g(t),Q(r),v&&v.d(),j&&j.d()}}}function po(l){let e,t=[],a=new Map,r,o=Ve(l[18]);const s=n=>n[65].id;for(let n=0;n<o.length;n+=1){let i=Pa(l,o,n),c=s(i);a.set(c,t[n]=Ra(c,i))}return{c(){e=b("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=$(n,"DIV",{class:!0});var i=D(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(g),this.h()},h(){E(e,"class","space-y-3")},m(n,i){q(n,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(n,i){i[0]&1476657152&&(o=Ve(n[18]),_e(),t=st(t,i,s,1,n,o,a,e,ft,Ra,null,Pa),ve())},i(n){if(!r){for(let i=0;i<o.length;i+=1)k(t[i]);r=!0}},o(n){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(n){n&&g(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function ho(l){let e,t;return e=new Ft({props:{icon:"TruckOutline",message:"Nenhuma entrega registrada",description:"N√£o h√° hist√≥rico de entregas para este colaborador"}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function _o(l){let e=l[65].statusDisplay.label+"",t;return{c(){t=R(e)},l(a){t=x(a,e)},m(a,r){q(a,t,r)},p(a,r){r[0]&262144&&e!==(e=a[65].statusDisplay.label+"")&&ne(t,e)},d(a){a&&g(t)}}}function Ma(l,e){let t,a,r=e[71].quantidade+"",o,s,n,i=e[71].nomeEquipamento+"",c,u,f=(e[71].numeroCA||e[71].registroCA)+"",p,m,h;return{key:l,first:null,c(){t=b("div"),a=b("span"),o=R(r),s=V(),n=b("div"),c=R(i),u=R(" (CA: "),p=R(f),m=R(")"),h=V(),this.h()},l(I){t=$(I,"DIV",{class:!0});var w=D(t);a=$(w,"SPAN",{class:!0});var A=D(a);o=x(A,r),A.forEach(g),s=F(w),n=$(w,"DIV",{class:!0});var N=D(n);c=x(N,i),u=x(N," (CA: "),p=x(N,f),m=x(N,")"),N.forEach(g),h=F(w),w.forEach(g),this.h()},h(){E(a,"class","inline-flex items-center justify-center w-5 h-5 text-xs font-medium text-white bg-gray-700 rounded"),E(n,"class","px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono text-gray-800 dark:text-gray-200"),E(t,"class","flex items-center space-x-2"),this.first=t},m(I,w){q(I,t,w),d(t,a),d(a,o),d(t,s),d(t,n),d(n,c),d(n,u),d(n,p),d(n,m),d(t,h)},p(I,w){e=I,w[0]&262144&&r!==(r=e[71].quantidade+"")&&ne(o,r),w[0]&262144&&i!==(i=e[71].nomeEquipamento+"")&&ne(c,i),w[0]&262144&&f!==(f=(e[71].numeroCA||e[71].registroCA)+"")&&ne(p,f)},d(I){I&&g(t)}}}function vo(l){let e,t,a,r=l[65].numero+"",o,s,n,i,c=l[65].dataEntrega+"",u,f,p,m,h,I,w,A="Itens:",N,z,O=[],S=new Map,B,M;m=new nt({props:{color:Ye.getBadgeColor(l[65].statusDisplay.cor),class:"rounded-sm",$$slots:{default:[_o]},$$scope:{ctx:l}}});let U=Ve(l[65].itens);const K=_=>_[71].id;for(let _=0;_<U.length;_+=1){let P=Aa(l,U,_),T=K(P);S.set(T,O[_]=Ma(T,P))}return{c(){e=b("div"),t=b("h4"),a=R("Entrega "),o=R(r),s=V(),n=b("p"),i=R("Data: "),u=R(c),f=V(),p=b("div"),J(m.$$.fragment),h=V(),I=b("div"),w=b("p"),w.textContent=A,N=V(),z=b("div");for(let _=0;_<O.length;_+=1)O[_].c();B=V(),this.h()},l(_){e=$(_,"DIV",{slot:!0});var P=D(e);t=$(P,"H4",{class:!0});var T=D(t);a=x(T,"Entrega "),o=x(T,r),T.forEach(g),s=F(P),n=$(P,"P",{class:!0});var C=D(n);i=x(C,"Data: "),u=x(C,c),C.forEach(g),f=F(P),p=$(P,"DIV",{class:!0});var v=D(p);G(m.$$.fragment,v),v.forEach(g),h=F(P),I=$(P,"DIV",{class:!0});var j=D(I);w=$(j,"P",{class:!0,"data-svelte-h":!0}),ke(w)!=="svelte-tel3c5"&&(w.textContent=A),N=F(j),z=$(j,"DIV",{class:!0});var W=D(z);for(let ae=0;ae<O.length;ae+=1)O[ae].l(W);W.forEach(g),j.forEach(g),B=F(P),P.forEach(g),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white"),E(n,"class","text-sm text-gray-600 dark:text-gray-300"),E(p,"class","mt-2"),E(w,"class","text-sm font-medium text-gray-900 dark:text-white"),E(z,"class","mt-1 space-y-1"),E(I,"class","mt-2"),E(e,"slot","content")},m(_,P){q(_,e,P),d(e,t),d(t,a),d(t,o),d(e,s),d(e,n),d(n,i),d(n,u),d(e,f),d(e,p),Z(m,p,null),d(e,h),d(e,I),d(I,w),d(I,N),d(I,z);for(let T=0;T<O.length;T+=1)O[T]&&O[T].m(z,null);d(e,B),M=!0},p(_,P){(!M||P[0]&262144)&&r!==(r=_[65].numero+"")&&ne(o,r),(!M||P[0]&262144)&&c!==(c=_[65].dataEntrega+"")&&ne(u,c);const T={};P[0]&262144&&(T.color=Ye.getBadgeColor(_[65].statusDisplay.cor)),P[0]&262144|P[2]&262144&&(T.$$scope={dirty:P,ctx:_}),m.$set(T),P[0]&262144&&(U=Ve(_[65].itens),O=st(O,P,K,1,_,U,S,z,vr,Ma,null,Aa))},i(_){M||(k(m.$$.fragment,_),M=!0)},o(_){y(m.$$.fragment,_),M=!1},d(_){_&&g(e),Q(m);for(let P=0;P<O.length;P+=1)O[P].d()}}}function $o(l){let e,t;function a(){return l[41](l[65])}return e=new Ne({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[ko]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){J(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,o){Z(e,r,o),t=!0},p(r,o){l=r;const s={};o[2]&262144&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function bo(l){let e,t;function a(){return l[40](l[65])}return e=new Ne({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[Io]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){J(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,o){Z(e,r,o),t=!0},p(r,o){l=r;const s={};o[2]&262144&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function Eo(l){let e,t;function a(){return l[39](l[65])}return e=new Ne({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[wo]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){J(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,o){Z(e,r,o),t=!0},p(r,o){l=r;const s={};o[2]&262144&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function ko(l){let e;return{c(){e=R("Editar")},l(t){e=x(t,"Editar")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Io(l){let e;return{c(){e=R("Imprimir")},l(t){e=x(t,"Imprimir")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function wo(l){let e;return{c(){e=R("Assinar")},l(t){e=x(t,"Assinar")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function xa(l){let e,t,a,r;const o=[Eo,bo,$o],s=[];function n(i,c){return i[68]==="assinar"?0:i[68]==="imprimir"?1:i[68]==="editar"?2:-1}return~(e=n(l))&&(t=s[e]=o[e](l)),{c(){t&&t.c(),a=Ie()},l(i){t&&t.l(i),a=Ie()},m(i,c){~e&&s[e].m(i,c),q(i,a,c),r=!0},p(i,c){let u=e;e=n(i),e===u?~e&&s[e].p(i,c):(t&&(_e(),y(s[u],1,1,()=>{s[u]=null}),ve()),~e?(t=s[e],t?t.p(i,c):(t=s[e]=o[e](i),t.c()),k(t,1),t.m(a.parentNode,a)):t=null)},i(i){r||(k(t),r=!0)},o(i){y(t),r=!1},d(i){i&&g(a),~e&&s[e].d(i)}}}function Do(l){let e,t,a,r=Ve(l[65].acoes),o=[];for(let n=0;n<r.length;n+=1)o[n]=xa(Fa(l,r,n));const s=n=>y(o[n],1,1,()=>{o[n]=null});return{c(){e=b("div");for(let n=0;n<o.length;n+=1)o[n].c();t=V(),this.h()},l(n){e=$(n,"DIV",{slot:!0,class:!0});var i=D(e);for(let c=0;c<o.length;c+=1)o[c].l(i);t=F(i),i.forEach(g),this.h()},h(){E(e,"slot","actions"),E(e,"class","flex space-x-2")},m(n,i){q(n,e,i);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);d(e,t),a=!0},p(n,i){if(i[0]&1476657152){r=Ve(n[65].acoes);let c;for(c=0;c<r.length;c+=1){const u=Fa(n,r,c);o[c]?(o[c].p(u,i),k(o[c],1)):(o[c]=xa(u),o[c].c(),k(o[c],1),o[c].m(e,t))}for(_e(),c=r.length;c<o.length;c+=1)s(c);ve()}},i(n){if(!a){for(let i=0;i<r.length;i+=1)k(o[i]);a=!0}},o(n){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)y(o[i]);a=!1},d(n){n&&g(e),yt(o,n)}}}function Ra(l,e){let t,a,r;return a=new nr({props:{$$slots:{actions:[Do],content:[vo]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=Ie(),J(a.$$.fragment),this.h()},l(o){t=Ie(),G(a.$$.fragment,o),this.h()},h(){this.first=t},m(o,s){q(o,t,s),Z(a,o,s),r=!0},p(o,s){e=o;const n={};s[0]&262144|s[2]&262144&&(n.$$scope={dirty:s,ctx:e}),a.$set(n)},i(o){r||(k(a.$$.fragment,o),r=!0)},o(o){y(a.$$.fragment,o),r=!1},d(o){o&&g(t),Q(a,o)}}}function Co(l){let e,t=[],a=new Map,r,o=Ve(l[19]);const s=n=>n[62].id;for(let n=0;n<o.length;n+=1){let i=Va(l,o,n),c=s(i);a.set(c,t[n]=Ua(c,i))}return{c(){e=b("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=$(n,"DIV",{class:!0});var i=D(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(g),this.h()},h(){E(e,"class","space-y-3")},m(n,i){q(n,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(n,i){i[0]&524288&&(o=Ve(n[19]),_e(),t=st(t,i,s,1,n,o,a,e,ft,Ua,null,Va),ve())},i(n){if(!r){for(let i=0;i<o.length;i+=1)k(t[i]);r=!0}},o(n){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(n){n&&g(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function yo(l){let e,t;return e=new Ft({props:{icon:"TrashBinOutline",message:"Nenhuma devolu√ß√£o registrada",description:"N√£o h√° hist√≥rico de devolu√ß√µes para este colaborador"}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Po(l){let e=l[62].status==="processada"?"Processada":"Cancelada",t;return{c(){t=R(e)},l(a){t=x(a,e)},m(a,r){q(a,t,r)},p(a,r){r[0]&524288&&e!==(e=a[62].status==="processada"?"Processada":"Cancelada")&&ne(t,e)},d(a){a&&g(t)}}}function ja(l){let e,t,a;return t=new nt({props:{color:l[62].condicaoItem==="DANIFICADO"?"yellow":"red",class:"rounded-sm text-xs",$$slots:{default:[Ao]},$$scope:{ctx:l}}}),{c(){e=b("div"),J(t.$$.fragment),this.h()},l(r){e=$(r,"DIV",{class:!0});var o=D(e);G(t.$$.fragment,o),o.forEach(g),this.h()},h(){E(e,"class","flex items-center space-x-2")},m(r,o){q(r,e,o),Z(t,e,null),a=!0},p(r,o){const s={};o[0]&524288&&(s.color=r[62].condicaoItem==="DANIFICADO"?"yellow":"red"),o[0]&524288|o[2]&262144&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(r){a||(k(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&g(e),Q(t)}}}function Ao(l){let e=l[62].condicaoItem+"",t;return{c(){t=R(e)},l(a){t=x(a,e)},m(a,r){q(a,t,r)},p(a,r){r[0]&524288&&e!==(e=a[62].condicaoItem+"")&&ne(t,e)},d(a){a&&g(t)}}}function Ha(l){let e,t,a,r=l[62].observacoes+"",o,s;return{c(){e=b("div"),t=b("p"),a=R('"'),o=R(r),s=R('"'),this.h()},l(n){e=$(n,"DIV",{class:!0});var i=D(e);t=$(i,"P",{class:!0});var c=D(t);a=x(c,'"'),o=x(c,r),s=x(c,'"'),c.forEach(g),i.forEach(g),this.h()},h(){E(t,"class","text-sm text-gray-700 dark:text-gray-300 italic"),E(e,"class","mt-3 p-2 bg-gray-50 dark:bg-gray-700 rounded border-l-4 border-blue-400")},m(n,i){q(n,e,i),d(e,t),d(t,a),d(t,o),d(t,s)},p(n,i){i[0]&524288&&r!==(r=n[62].observacoes+"")&&ne(o,r)},d(n){n&&g(e)}}}function Ua(l,e){let t,a,r,o,s,n=e[62].nomeEquipamento+"",i,c,u,f,p,m,h,I="CA / Categoria",w,A,N=e[62].numeroCA+"",z,O,S=e[62].categoria+"",B,M,U,K,_="Data Devolu√ß√£o",P,T,C=e[62].dataDevolucao+"",v,j,W,ae,oe="Motivo",le,H,se=e[62].motivoDisplay+"",fe,de,pe,ie,Y;u=new nt({props:{color:e[62].status==="processada"?"green":"red",class:"rounded-sm",$$slots:{default:[Po]},$$scope:{ctx:e}}});let ee=e[62].condicaoItem&&e[62].condicaoItem!=="BOM"&&ja(e),X=e[62].observacoes&&Ha(e);return{key:l,first:null,c(){t=b("div"),a=b("div"),r=b("div"),o=b("div"),s=b("h4"),i=R(n),c=V(),J(u.$$.fragment),f=V(),p=b("div"),m=b("div"),h=b("span"),h.textContent=I,w=V(),A=b("p"),z=R(N),O=R(" ‚Ä¢ "),B=R(S),M=V(),U=b("div"),K=b("span"),K.textContent=_,P=V(),T=b("p"),v=R(C),j=V(),W=b("div"),ae=b("span"),ae.textContent=oe,le=V(),H=b("p"),fe=R(se),de=V(),ee&&ee.c(),pe=V(),X&&X.c(),ie=V(),this.h()},l(ce){t=$(ce,"DIV",{class:!0});var L=D(t);a=$(L,"DIV",{class:!0});var re=D(a);r=$(re,"DIV",{class:!0});var me=D(r);o=$(me,"DIV",{class:!0});var $e=D(o);s=$($e,"H4",{class:!0});var Ee=D(s);i=x(Ee,n),Ee.forEach(g),c=F($e),G(u.$$.fragment,$e),$e.forEach(g),f=F(me),p=$(me,"DIV",{class:!0});var Fe=D(p);m=$(Fe,"DIV",{});var De=D(m);h=$(De,"SPAN",{class:!0,"data-svelte-h":!0}),ke(h)!=="svelte-1uekrmz"&&(h.textContent=I),w=F(De),A=$(De,"P",{class:!0});var ye=D(A);z=x(ye,N),O=x(ye," ‚Ä¢ "),B=x(ye,S),ye.forEach(g),De.forEach(g),M=F(Fe),U=$(Fe,"DIV",{});var Se=D(U);K=$(Se,"SPAN",{class:!0,"data-svelte-h":!0}),ke(K)!=="svelte-1nqkj5n"&&(K.textContent=_),P=F(Se),T=$(Se,"P",{class:!0});var qe=D(T);v=x(qe,C),qe.forEach(g),Se.forEach(g),Fe.forEach(g),j=F(me),W=$(me,"DIV",{class:!0});var ge=D(W);ae=$(ge,"SPAN",{class:!0,"data-svelte-h":!0}),ke(ae)!=="svelte-ti63bd"&&(ae.textContent=oe),le=F(ge),H=$(ge,"P",{class:!0});var ze=D(H);fe=x(ze,se),ze.forEach(g),ge.forEach(g),de=F(me),ee&&ee.l(me),pe=F(me),X&&X.l(me),me.forEach(g),re.forEach(g),ie=F(L),L.forEach(g),this.h()},h(){E(s,"class","font-semibold text-gray-900 dark:text-white"),E(o,"class","flex items-center justify-between mb-3"),E(h,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(A,"class","text-sm text-gray-900 dark:text-white"),E(K,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(T,"class","text-sm text-gray-900 dark:text-white"),E(p,"class","grid grid-cols-2 gap-4 mb-3"),E(ae,"class","text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"),E(H,"class","text-sm text-gray-900 dark:text-white"),E(W,"class","mb-3"),E(r,"class","flex-1"),E(a,"class","flex justify-between items-start"),E(t,"class","bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"),this.first=t},m(ce,L){q(ce,t,L),d(t,a),d(a,r),d(r,o),d(o,s),d(s,i),d(o,c),Z(u,o,null),d(r,f),d(r,p),d(p,m),d(m,h),d(m,w),d(m,A),d(A,z),d(A,O),d(A,B),d(p,M),d(p,U),d(U,K),d(U,P),d(U,T),d(T,v),d(r,j),d(r,W),d(W,ae),d(W,le),d(W,H),d(H,fe),d(r,de),ee&&ee.m(r,null),d(r,pe),X&&X.m(r,null),d(t,ie),Y=!0},p(ce,L){e=ce,(!Y||L[0]&524288)&&n!==(n=e[62].nomeEquipamento+"")&&ne(i,n);const re={};L[0]&524288&&(re.color=e[62].status==="processada"?"green":"red"),L[0]&524288|L[2]&262144&&(re.$$scope={dirty:L,ctx:e}),u.$set(re),(!Y||L[0]&524288)&&N!==(N=e[62].numeroCA+"")&&ne(z,N),(!Y||L[0]&524288)&&S!==(S=e[62].categoria+"")&&ne(B,S),(!Y||L[0]&524288)&&C!==(C=e[62].dataDevolucao+"")&&ne(v,C),(!Y||L[0]&524288)&&se!==(se=e[62].motivoDisplay+"")&&ne(fe,se),e[62].condicaoItem&&e[62].condicaoItem!=="BOM"?ee?(ee.p(e,L),L[0]&524288&&k(ee,1)):(ee=ja(e),ee.c(),k(ee,1),ee.m(r,pe)):ee&&(_e(),y(ee,1,1,()=>{ee=null}),ve()),e[62].observacoes?X?X.p(e,L):(X=Ha(e),X.c(),X.m(r,null)):X&&(X.d(1),X=null)},i(ce){Y||(k(u.$$.fragment,ce),k(ee),Y=!0)},o(ce){y(u.$$.fragment,ce),y(ee),Y=!1},d(ce){ce&&g(t),Q(u),ee&&ee.d(),X&&X.d()}}}function Fo(l){let e,t=[],a=new Map,r,o=Ve(l[20]);const s=n=>n[59].id;for(let n=0;n<o.length;n+=1){let i=qa(l,o,n),c=s(i);a.set(c,t[n]=Ba(c,i))}return{c(){e=b("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=$(n,"DIV",{class:!0});var i=D(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(g),this.h()},h(){E(e,"class","space-y-3")},m(n,i){q(n,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(n,i){i[0]&537919488&&(o=Ve(n[20]),_e(),t=st(t,i,s,1,n,o,a,e,ft,Ba,null,qa),ve())},i(n){if(!r){for(let i=0;i<o.length;i+=1)k(t[i]);r=!0}},o(n){for(let i=0;i<t.length;i+=1)y(t[i]);r=!1},d(n){n&&g(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Vo(l){let e,t;return e=new Ft({props:{icon:"ClipboardDocumentListOutline",message:"Nenhum equipamento em posse",description:"Este colaborador n√£o possui equipamentos atualmente"}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p:Ae,i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function qo(l){let e=l[59].statusVencimentoDisplay.texto+"",t;return{c(){t=R(e)},l(a){t=x(a,e)},m(a,r){q(a,t,r)},p(a,r){r[0]&1048576&&e!==(e=a[59].statusVencimentoDisplay.texto+"")&&ne(t,e)},d(a){a&&g(t)}}}function No(l){let e,t,a=l[59].nomeEquipamento+"",r,o,s,n,i=(l[59].numeroCA||l[59].registroCA)+"",c,u,f=l[59].categoria+"",p,m,h,I,w=l[59].dataEntrega+"",A,N,z,O,S,B,M=Ye.formatDaysRemaining(l[59].statusVencimentoDisplay.diasRestantes,l[59].statusVencimentoDisplay.statusDetalhado)+"",U,K,_;return O=new nt({props:{color:Ye.getBadgeColor(l[59].statusVencimentoDisplay.cor),class:"rounded-sm",$$slots:{default:[qo]},$$scope:{ctx:l}}}),{c(){e=b("div"),t=b("h4"),r=R(a),o=V(),s=b("p"),n=R("CA: "),c=R(i),u=R(" ‚Ä¢ "),p=R(f),m=V(),h=b("p"),I=R("Entregue em: "),A=R(w),N=V(),z=b("div"),J(O.$$.fragment),S=V(),B=b("span"),U=R(M),K=V(),this.h()},l(P){e=$(P,"DIV",{slot:!0});var T=D(e);t=$(T,"H4",{class:!0});var C=D(t);r=x(C,a),C.forEach(g),o=F(T),s=$(T,"P",{class:!0});var v=D(s);n=x(v,"CA: "),c=x(v,i),u=x(v," ‚Ä¢ "),p=x(v,f),v.forEach(g),m=F(T),h=$(T,"P",{class:!0});var j=D(h);I=x(j,"Entregue em: "),A=x(j,w),j.forEach(g),N=F(T),z=$(T,"DIV",{class:!0});var W=D(z);G(O.$$.fragment,W),S=F(W),B=$(W,"SPAN",{class:!0});var ae=D(B);U=x(ae,M),ae.forEach(g),W.forEach(g),K=F(T),T.forEach(g),this.h()},h(){E(t,"class","font-medium text-gray-900 dark:text-white"),E(s,"class","text-sm text-gray-600 dark:text-gray-300"),E(h,"class","text-sm text-gray-600 dark:text-gray-300"),E(B,"class","ml-2 text-sm text-gray-600 dark:text-gray-300"),E(z,"class","mt-2"),E(e,"slot","content")},m(P,T){q(P,e,T),d(e,t),d(t,r),d(e,o),d(e,s),d(s,n),d(s,c),d(s,u),d(s,p),d(e,m),d(e,h),d(h,I),d(h,A),d(e,N),d(e,z),Z(O,z,null),d(z,S),d(z,B),d(B,U),d(e,K),_=!0},p(P,T){(!_||T[0]&1048576)&&a!==(a=P[59].nomeEquipamento+"")&&ne(r,a),(!_||T[0]&1048576)&&i!==(i=(P[59].numeroCA||P[59].registroCA)+"")&&ne(c,i),(!_||T[0]&1048576)&&f!==(f=P[59].categoria+"")&&ne(p,f),(!_||T[0]&1048576)&&w!==(w=P[59].dataEntrega+"")&&ne(A,w);const C={};T[0]&1048576&&(C.color=Ye.getBadgeColor(P[59].statusVencimentoDisplay.cor)),T[0]&1048576|T[2]&262144&&(C.$$scope={dirty:T,ctx:P}),O.$set(C),(!_||T[0]&1048576)&&M!==(M=Ye.formatDaysRemaining(P[59].statusVencimentoDisplay.diasRestantes,P[59].statusVencimentoDisplay.statusDetalhado)+"")&&ne(U,M)},i(P){_||(k(O.$$.fragment,P),_=!0)},o(P){y(O.$$.fragment,P),_=!1},d(P){P&&g(e),Q(O)}}}function La(l){let e,t;function a(){return l[38](l[59])}return e=new Ne({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[So]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){J(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,o){Z(e,r,o),t=!0},p(r,o){l=r;const s={};o[2]&262144&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function So(l){let e;return{c(){e=R("Devolver")},l(t){e=x(t,"Devolver")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function zo(l){let e,t,a,r=l[59].podeDevolver&&La(l);return{c(){e=b("div"),r&&r.c(),t=V(),this.h()},l(o){e=$(o,"DIV",{slot:!0});var s=D(e);r&&r.l(s),t=F(s),s.forEach(g),this.h()},h(){E(e,"slot","actions")},m(o,s){q(o,e,s),r&&r.m(e,null),d(e,t),a=!0},p(o,s){o[59].podeDevolver?r?(r.p(o,s),s[0]&1048576&&k(r,1)):(r=La(o),r.c(),k(r,1),r.m(e,t)):r&&(_e(),y(r,1,1,()=>{r=null}),ve())},i(o){a||(k(r),a=!0)},o(o){y(r),a=!1},d(o){o&&g(e),r&&r.d()}}}function Ba(l,e){let t,a,r;return a=new nr({props:{$$slots:{actions:[zo],content:[No]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=Ie(),J(a.$$.fragment),this.h()},l(o){t=Ie(),G(a.$$.fragment,o),this.h()},h(){this.first=t},m(o,s){q(o,t,s),Z(a,o,s),r=!0},p(o,s){e=o;const n={};s[0]&1048576|s[2]&262144&&(n.$$scope={dirty:s,ctx:e}),a.$set(n)},i(o){r||(k(a.$$.fragment,o),r=!0)},o(o){y(a.$$.fragment,o),r=!1},d(o){o&&g(t),Q(a,o)}}}function To(l){var u,f,p;let e,t,a,r,o,s;e=new dt({props:{title:((u=l[15])==null?void 0:u.nome)||"Nome n√£o dispon√≠vel",objectType:"FICHA EPI",iconName:"UserOutline",status:(p=(f=l[16])==null?void 0:f.ficha)==null?void 0:p.status,statusType:"ficha",additionalInfo:l[23],primaryAction:{text:"Nova Entrega",icon:"PlusOutline"}}}),e.$on("close",l[25]),e.$on("primaryAction",l[26]);const n=[so,no,oo,lo],i=[];function c(m,h){return m[6]?0:m[7]?1:m[16]?2:3}return a=c(l),r=i[a]=n[a](l),{c(){J(e.$$.fragment),t=V(),r.c(),o=Ie()},l(m){G(e.$$.fragment,m),t=F(m),r.l(m),o=Ie()},m(m,h){Z(e,m,h),q(m,t,h),i[a].m(m,h),q(m,o,h),s=!0},p(m,h){var A,N,z;const I={};h[0]&32768&&(I.title=((A=m[15])==null?void 0:A.nome)||"Nome n√£o dispon√≠vel"),h[0]&65536&&(I.status=(z=(N=m[16])==null?void 0:N.ficha)==null?void 0:z.status),h[0]&8388608&&(I.additionalInfo=m[23]),e.$set(I);let w=a;a=c(m),a===w?i[a].p(m,h):(_e(),y(i[w],1,1,()=>{i[w]=null}),ve(),r=i[a],r?r.p(m,h):(r=i[a]=n[a](m),r.c()),k(r,1),r.m(o.parentNode,o))},i(m){s||(k(e.$$.fragment,m),k(r),s=!0)},o(m){y(e.$$.fragment,m),y(r),s=!1},d(m){m&&(g(t),g(o)),Q(e,m),i[a].d(m)}}}function Oo(l){let e,t,a,r,o,s,n,i,c,u,f,p,m,h,I;function w(_){l[42](_)}let A={placement:"right",width:"w-full max-w-[940px]",backdrop:!l[22],activateClickOutside:!l[22],bgOpacity:"bg-black/50",position:"fixed",id:"ficha-detail-drawer",class:"drawer-ficha",$$slots:{default:[To]},$$scope:{ctx:l}};l[14]!==void 0&&(A.hidden=l[14]),e=new Ir({props:A}),Re.push(()=>je(e,"hidden",w));function N(_){l[43](_)}let z={episDisponiveis:l[4],usuarios:l[5],loading:l[8]};l[0]!==void 0&&(z.show=l[0]),r=new ql({props:z}),Re.push(()=>je(r,"show",N)),r.$on("salvar",l[44]),r.$on("cancelar",l[45]);function O(_){l[46](_)}let S={episDisponiveis:l[4],entrega:l[11],loading:l[8]};l[1]!==void 0&&(S.show=l[1]),n=new Bl({props:S}),Re.push(()=>je(n,"show",O)),n.$on("salvar",l[47]),n.$on("cancelar",l[48]);function B(_){l[49](_)}let M={equipamento:l[12],loading:l[10]};l[2]!==void 0&&(M.show=l[2]),u=new Yl({props:M}),Re.push(()=>je(u,"show",B)),u.$on("confirmar",l[50]),u.$on("cancelar",l[51]);function U(_){l[52](_)}let K={entrega:l[13],loading:l[9]};return l[3]!==void 0&&(K.show=l[3]),m=new ro({props:K}),Re.push(()=>je(m,"show",U)),m.$on("confirmar",l[53]),m.$on("cancelar",l[54]),{c(){J(e.$$.fragment),a=V(),J(r.$$.fragment),s=V(),J(n.$$.fragment),c=V(),J(u.$$.fragment),p=V(),J(m.$$.fragment)},l(_){G(e.$$.fragment,_),a=F(_),G(r.$$.fragment,_),s=F(_),G(n.$$.fragment,_),c=F(_),G(u.$$.fragment,_),p=F(_),G(m.$$.fragment,_)},m(_,P){Z(e,_,P),q(_,a,P),Z(r,_,P),q(_,s,P),Z(n,_,P),q(_,c,P),Z(u,_,P),q(_,p,P),Z(m,_,P),I=!0},p(_,P){const T={};P[0]&4194304&&(T.backdrop=!_[22]),P[0]&4194304&&(T.activateClickOutside=!_[22]),P[0]&12550336|P[2]&262144&&(T.$$scope={dirty:P,ctx:_}),!t&&P[0]&16384&&(t=!0,T.hidden=_[14],He(()=>t=!1)),e.$set(T);const C={};P[0]&16&&(C.episDisponiveis=_[4]),P[0]&32&&(C.usuarios=_[5]),P[0]&256&&(C.loading=_[8]),!o&&P[0]&1&&(o=!0,C.show=_[0],He(()=>o=!1)),r.$set(C);const v={};P[0]&16&&(v.episDisponiveis=_[4]),P[0]&2048&&(v.entrega=_[11]),P[0]&256&&(v.loading=_[8]),!i&&P[0]&2&&(i=!0,v.show=_[1],He(()=>i=!1)),n.$set(v);const j={};P[0]&4096&&(j.equipamento=_[12]),P[0]&1024&&(j.loading=_[10]),!f&&P[0]&4&&(f=!0,j.show=_[2],He(()=>f=!1)),u.$set(j);const W={};P[0]&8192&&(W.entrega=_[13]),P[0]&512&&(W.loading=_[9]),!h&&P[0]&8&&(h=!0,W.show=_[3],He(()=>h=!1)),m.$set(W)},i(_){I||(k(e.$$.fragment,_),k(r.$$.fragment,_),k(n.$$.fragment,_),k(u.$$.fragment,_),k(m.$$.fragment,_),I=!0)},o(_){y(e.$$.fragment,_),y(r.$$.fragment,_),y(n.$$.fragment,_),y(u.$$.fragment,_),y(m.$$.fragment,_),I=!1},d(_){_&&(g(a),g(s),g(c),g(p)),Q(e,_),Q(r,_),Q(n,_),Q(u,_),Q(m,_)}}}function Mo(l,e,t){let a,r,o,s,n,i,c,u,{fichaCompleteData:f=null}=e,{episDisponiveis:p=[]}=e,{usuarios:m=[]}=e,{loading:h=!1}=e,{error:I=null}=e,{entregaLoading:w=!1}=e,{assinaturaLoading:A=!1}=e,{devolucaoLoading:N=!1}=e,{showNovaEntregaDrawer:z=!1}=e,{showEditarEntregaDrawer:O=!1}=e,{showDevolucaoModal:S=!1}=e,{showAssinaturaModal:B=!1}=e,{entregaEdicao:M=null}=e,{equipamentoDevolucao:U=null}=e,{entregaAssinatura:K=null}=e,{open:_=!1}=e,P=!_,T=_,C="equipamentos";const v=Xe();function j(){v("close")}let W=P;function ae(){v("novaEntrega")}function oe(te){v("editarEntrega",{entrega:te})}function le(te){v("assinarEntrega",{entrega:te})}function H(te){v("devolverEquipamento",{equipamento:te})}function se(te){v("imprimirEntrega",{entrega:te})}function fe(te){return Ye.getEventIcon(te)}function de(te){return Ye.getColorClasses(te)}const pe=te=>t(21,C=te.id),ie=te=>H(te),Y=te=>le(te),ee=te=>se(te),X=te=>oe(te);function ce(te){P=te,t(14,P),t(34,_),t(35,T)}function L(te){z=te,t(0,z)}const re=te=>v("salvarNovaEntrega",te.detail),me=()=>v("cancelarNovaEntrega");function $e(te){O=te,t(1,O)}const Ee=te=>v("salvarEdicaoEntrega",te.detail),Fe=()=>v("cancelarEdicaoEntrega");function De(te){S=te,t(2,S)}const ye=te=>v("confirmarDevolucao",te.detail),Se=()=>v("cancelarDevolucao");function qe(te){B=te,t(3,B)}const ge=te=>v("confirmarAssinatura",te.detail),ze=()=>v("cancelarAssinatura");return l.$$set=te=>{"fichaCompleteData"in te&&t(33,f=te.fichaCompleteData),"episDisponiveis"in te&&t(4,p=te.episDisponiveis),"usuarios"in te&&t(5,m=te.usuarios),"loading"in te&&t(6,h=te.loading),"error"in te&&t(7,I=te.error),"entregaLoading"in te&&t(8,w=te.entregaLoading),"assinaturaLoading"in te&&t(9,A=te.assinaturaLoading),"devolucaoLoading"in te&&t(10,N=te.devolucaoLoading),"showNovaEntregaDrawer"in te&&t(0,z=te.showNovaEntregaDrawer),"showEditarEntregaDrawer"in te&&t(1,O=te.showEditarEntregaDrawer),"showDevolucaoModal"in te&&t(2,S=te.showDevolucaoModal),"showAssinaturaModal"in te&&t(3,B=te.showAssinaturaModal),"entregaEdicao"in te&&t(11,M=te.entregaEdicao),"equipamentoDevolucao"in te&&t(12,U=te.equipamentoDevolucao),"entregaAssinatura"in te&&t(13,K=te.entregaAssinatura),"open"in te&&t(34,_=te.open)},l.$$.update=()=>{var te,we;l.$$.dirty[0]&16384|l.$$.dirty[1]&24&&_!==T&&(console.log("üîÑ Sincronizando drawer (open changed):",{open:_,hidden:P,lastOpen:T}),t(14,P=!_),t(35,T=_)),l.$$.dirty[0]&16448|l.$$.dirty[1]&12&&_&&console.log("üéØ FichaDetailPresenter: Drawer foi aberto, carregando dados...",{open:_,hidden:P,fichaCompleteData:!!f,loading:h}),l.$$.dirty[1]&4&&t(16,a=f==null?void 0:f.data),l.$$.dirty[0]&65536&&t(15,r=(te=a==null?void 0:a.ficha)==null?void 0:te.colaborador),l.$$.dirty[0]&65536&&t(20,o=(a==null?void 0:a.equipamentosEmPosse)||[]),l.$$.dirty[0]&65536&&t(19,s=(a==null?void 0:a.devolucoes)||[]),l.$$.dirty[0]&65536&&t(18,n=(a==null?void 0:a.entregas)||[]),l.$$.dirty[0]&65536&&t(17,i=(a==null?void 0:a.historico)||[]),l.$$.dirty[0]&65536&&(a==null||a.estatisticas),l.$$.dirty[0]&2031616&&a&&(console.log("üéØ FichaDetailPresenter - dados reativos atualizados:"),console.log("  - Equipamentos em posse:",(o==null?void 0:o.length)||0),console.log("  - Devolu√ß√µes:",(s==null?void 0:s.length)||0),console.log("  - Entregas:",(n==null?void 0:n.length)||0),console.log("  - Hist√≥rico:",(i==null?void 0:i.length)||0)),l.$$.dirty[0]&65536&&(we=a==null?void 0:a.ficha)!=null&&we.statusDisplay&&Ye.getStatusConfig(a.ficha.statusDisplay.label,a.ficha.statusDisplay.cor),l.$$.dirty[0]&32768&&t(23,c=r?[r.cpfDisplay||r.cpf||"CPF n√£o dispon√≠vel",`${r.cargo||"Cargo n√£o informado"} ‚Ä¢ ${r.empresa||"Empresa n√£o informada"}`]:[]),l.$$.dirty[0]&16384|l.$$.dirty[1]&40&&P!==W&&(console.log("üîÑ Hidden changed:",{hidden:P,lastHidden:W,open:_}),P&&_&&(console.log("üéØ Drawer fechado externamente, notificando Container"),v("close")),t(36,W=P)),l.$$.dirty[0]&15&&t(22,u=z||O||S||B)},[z,O,S,B,p,m,h,I,w,A,N,M,U,K,P,r,a,i,n,s,o,C,u,c,v,j,ae,oe,le,H,se,fe,de,f,_,T,W,pe,ie,Y,ee,X,ce,L,re,me,$e,Ee,Fe,De,ye,Se,qe,ge,ze]}class xo extends Qe{constructor(e){super(),Ze(this,e,Mo,Oo,Ge,{fichaCompleteData:33,episDisponiveis:4,usuarios:5,loading:6,error:7,entregaLoading:8,assinaturaLoading:9,devolucaoLoading:10,showNovaEntregaDrawer:0,showEditarEntregaDrawer:1,showDevolucaoModal:2,showAssinaturaModal:3,entregaEdicao:11,equipamentoDevolucao:12,entregaAssinatura:13,open:34},null,[-1,-1,-1])}}function Ro(l){let e,t;const a=[l[0]];let r={};for(let o=0;o<a.length;o+=1)r=ir(r,a[o]);return e=new xo({props:r}),e.$on("close",l[1]),e.$on("novaEntrega",l[2]),e.$on("salvarNovaEntrega",l[3]),e.$on("cancelarNovaEntrega",l[4]),e.$on("editarEntrega",l[5]),e.$on("salvarEdicaoEntrega",l[6]),e.$on("cancelarEdicaoEntrega",l[7]),e.$on("assinarEntrega",l[8]),e.$on("confirmarAssinatura",l[9]),e.$on("cancelarAssinatura",l[10]),e.$on("devolverEquipamento",l[11]),e.$on("confirmarDevolucao",l[12]),e.$on("cancelarDevolucao",l[13]),e.$on("cancelarEntrega",l[14]),e.$on("imprimirEntrega",l[15]),{c(){J(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,s){Z(e,o,s),t=!0},p(o,s){const n=s[0]&1?cr(a,[ur(o[0])]):{};e.$set(n)},i(o){t||(k(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){Q(e,o)}}}function jo(l,e,t){let a,r;Wa(l,ml,Y=>t(34,r=Y));let{open:o=!1}=e,{fichaId:s=null}=e;const n=Xe();let i=null,c=[],u=[],f=!0,p=null,m=!1,h=!1,I=!1,w=!1,A=!1,N=!1,z=!1,O=null,S=null,B=null,M=null;Ka(()=>{console.log("üöÄ FichaDetailContainer: Inicializando..."),Promise.all([K(),_()])});async function U(){var Y,ee,X,ce,L,re,me,$e;if(s){t(21,f=!0),t(22,p=null),t(33,M=s);try{console.log("üìã FichaDetailContainer: Carregando ficha completa:",s),t(18,i=await $t.getFichaComplete(s)),console.log("‚úÖ Dados da ficha carregados"),console.log("üîç Equipamentos em posse:",((ee=(Y=i==null?void 0:i.data)==null?void 0:Y.equipamentosEmPosse)==null?void 0:ee.length)||0),console.log("üîÑ Devolu√ß√µes:",((ce=(X=i==null?void 0:i.data)==null?void 0:X.devolucoes)==null?void 0:ce.length)||0),console.log("üöö Entregas:",((re=(L=i==null?void 0:i.data)==null?void 0:L.entregas)==null?void 0:re.length)||0),console.log("üìù Hist√≥rico:",(($e=(me=i==null?void 0:i.data)==null?void 0:me.historico)==null?void 0:$e.length)||0)}catch(Ee){console.error("‚ùå Erro ao carregar ficha:",Ee),t(22,p=Ee instanceof Error?Ee.message:"Erro desconhecido"),xe.error("Erro ao carregar ficha","N√£o foi poss√≠vel carregar os dados da ficha")}finally{t(21,f=!1)}}}async function K(){try{console.log("üöÄ FichaDetailContainer: Carregando EPIs dispon√≠veis..."),t(19,c=await $t.getEPIsDisponiveis()),console.log("üì¶ EPIs dispon√≠veis carregados:",c.length),console.log("üì¶ Estrutura dos EPIs:",c.slice(0,2));const Y=c.filter(ee=>ee.disponivel&&ee.quantidadeDisponivel>0);console.log("üéØ EPIs com estoque dispon√≠vel:",Y.length),Y.length===0&&(console.warn("‚ö†Ô∏è ATEN√á√ÉO: Nenhum EPI com estoque dispon√≠vel encontrado!"),console.log("üîç EPIs sem estoque:",c.map(ee=>({nome:ee.nomeEquipamento,quantidade:ee.quantidadeDisponivel,disponivel:ee.disponivel}))))}catch(Y){throw console.error("‚ùå Erro ao carregar EPIs dispon√≠veis:",Y),Y}}async function _(){try{console.log("üë§ FichaDetailContainer: Carregando usu√°rios..."),t(20,u=await $t.getUsuarios()),console.log("üë• Usu√°rios carregados:",u==null?void 0:u.length),console.log("üë• Estrutura dos usu√°rios:",u==null?void 0:u.slice(0,2))}catch(Y){throw console.error("‚ùå Erro ao carregar usu√°rios:",Y),Y}}function P(){t(16,o=!1),t(33,M=null),t(18,i=null),t(22,p=null),t(23,m=!1),t(24,h=!1),t(25,I=!1),t(26,w=!1),n("close"),console.log("‚ùå Drawer fechado")}async function T(){console.log("‚ûï Abrindo formul√°rio de nova entrega"),console.log("üì¶ Estado atual dos EPIs:",c.length,"EPIs carregados"),c.length===0&&(console.log("üîÑ EPIs n√£o carregados, carregando agora..."),await K(),console.log("üì¶ Ap√≥s recarregar:",c.length,"EPIs dispon√≠veis")),console.log("üì¶ EPIs que ser√£o passados para o drawer:",c),t(23,m=!0)}async function C(Y){var ee;if(s){t(27,A=!0);try{if(console.log("üíæ FichaDetailContainer: Criando nova entrega..."),console.log("üîç Respons√°vel ID:",Y.detail.usuarioResponsavelId),console.log("üîç Quantidade de itens:",((ee=Y.detail.itens)==null?void 0:ee.length)||0),!Y.detail.usuarioResponsavelId)throw new Error("usuarioResponsavelId √© obrigat√≥rio");if(!Y.detail.itens||Y.detail.itens.length===0)throw new Error("Pelo menos um item deve ser selecionado");console.log("üîç Verificando fichaId:",{fichaId:s,fichaIdType:typeof s,isUUID:s==null?void 0:s.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isCustomId:s==null?void 0:s.match(/^[A-Z0-9]{6}$/i)});const X={fichaEpiId:s,responsavelId:Y.detail.usuarioResponsavelId,itens:Y.detail.itens.map(L=>{const re=c.find($e=>$e.id===L.episDisponivelId);console.log("üîç Mapeando item:",{itemEpisDisponivelId:L.episDisponivelId,epiCorrespondente:re?{id:re.id,estoqueItemId:re.estoqueItemId,episDisponivelId:re.episDisponivelId,nome:re.nomeEquipamento}:null});const me=(re==null?void 0:re.estoqueItemId)||(re==null?void 0:re.id)||L.episDisponivelId;return console.log("üîç Verificando ID do estoque item:",{estoqueItemId:me,isValidFormat:(me==null?void 0:me.match(/^[A-Z0-9]{6}$/))||(me==null?void 0:me.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)),needsMapping:!(me!=null&&me.match(/^[A-Z0-9]{6}$/))&&!(me!=null&&me.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))}),{estoqueItemId:me,quantidade:L.quantidade}}),observacoes:Y.detail.observacoes||""};console.log("üìã Payload da entrega:",X);const ce=await vt.createDelivery(X);t(23,m=!1),await U(),xe.success("Entrega criada",`Entrega ${ce.data.entregaId} criada com ${ce.data.totalItens} itens`),n("fichaUpdated",{fichaId:s})}catch(X){console.error("‚ùå Erro ao salvar nova entrega:",X);let ce="Erro ao criar entrega",L="Erro desconhecido";if(X instanceof Error)switch(X.name){case"EstoqueItemNotFoundError":ce="Item de estoque n√£o encontrado",L="Os EPIs selecionados n√£o possuem estoque dispon√≠vel no almoxarifado. Verifique se h√° itens em estoque antes de criar a entrega.";break;case"ValidationError":ce="Dados de entrega inv√°lidos",L="Verifique se todos os campos obrigat√≥rios est√£o preenchidos e tente novamente.";break;default:X.message.includes("Cannot GET")||X.message.includes("404")?(ce="Servi√ßo indispon√≠vel",L="O servi√ßo de entregas est√° temporariamente indispon√≠vel. Alguns endpoints do backend n√£o est√£o implementados. Tente novamente mais tarde."):X.message.includes("Network error")||X.message.includes("timeout")?(ce="Erro de conex√£o",L="Problema de conex√£o com o servidor. Verifique sua internet e tente novamente."):X.message.includes("Validation error")?(ce="Dados inv√°lidos",L="Os dados fornecidos s√£o inv√°lidos. Verifique os campos e tente novamente. Detalhes: "+X.message):L=X.message;break}xe.error(ce,L),console.log("‚ÑπÔ∏è Drawer mantido aberto para corre√ß√£o dos dados")}finally{t(27,A=!1)}}}function v(){t(23,m=!1),console.log("‚ùå Nova entrega cancelada")}function j(Y){t(30,O=Y.detail.entrega),t(24,h=!0),console.log("‚úèÔ∏è Editando entrega:",O.id)}async function W(Y){if(O){t(27,A=!0);try{console.log("üíæ FichaDetailContainer: Editando entrega:",Y.detail);const ee={responsavelId:Y.detail.responsavelId,itens:Y.detail.itens.map(X=>({estoqueItemId:X.estoqueItemId,quantidade:X.quantidade})),observacoes:Y.detail.observacoes};await vt.updateDelivery(O.id,ee),t(24,h=!1),t(30,O=null),await U(),xe.success("Entrega atualizada","Entrega foi atualizada com sucesso"),n("fichaUpdated",{fichaId:s})}catch(ee){console.error("‚ùå Erro ao editar entrega:",ee),xe.error("Erro ao editar","N√£o foi poss√≠vel atualizar a entrega")}finally{t(27,A=!1)}}}function ae(){t(24,h=!1),t(30,O=null),console.log("‚ùå Edi√ß√£o de entrega cancelada")}function oe(Y){t(32,B=Y.detail.entrega),t(26,w=!0),console.log("‚úçÔ∏è Iniciando assinatura da entrega:",B.id)}async function le(Y){if(B){t(28,N=!0);try{console.log("‚úçÔ∏è FichaDetailContainer: Confirmando assinatura:",Y.detail);const ee={assinatura:Y.detail.assinatura};await vt.confirmSignature(B.id,ee),t(26,w=!1),t(32,B=null),await U(),xe.success("Assinatura registrada","Entrega foi assinada com sucesso"),n("fichaUpdated",{fichaId:s})}catch(ee){console.error("‚ùå Erro ao processar assinatura:",ee),xe.error("Erro na assinatura","N√£o foi poss√≠vel registrar a assinatura")}finally{t(28,N=!1)}}}function H(){t(26,w=!1),t(32,B=null),console.log("‚ùå Assinatura cancelada")}function se(Y){t(31,S=Y.detail.equipamento),t(25,I=!0),console.log("üîÑ Iniciando devolu√ß√£o:",S.id)}async function fe(Y){var ee,X;if(!(!S||!s)){t(29,z=!0);try{if(console.log("üîÑ FichaDetailContainer: Processando devolu√ß√£o via endpoint individual:",Y.detail),console.log("üìã Dados do equipamento:",{id:S.id,entregaId:S.entregaId,itemEntregaId:S.itemEntregaId}),!S.entregaId||!S.itemEntregaId)throw new Error("Dados incompletos do equipamento para devolu√ß√£o");const L=await dl.processIndividualReturn(s,S.entregaId,S.itemEntregaId,Y.detail.motivo,"cffc2197-acbe-4a64-bfd7-435370e9c226",Y.detail.observacoes);t(25,I=!1),t(31,S=null),await U(),xe.success("Devolu√ß√£o registrada","Equipamento foi devolvido com sucesso"),n("fichaUpdated",{fichaId:s})}catch(ce){console.error("‚ùå Erro ao processar devolu√ß√£o:",ce);let L="N√£o foi poss√≠vel registrar a devolu√ß√£o";(X=(ee=ce.response)==null?void 0:ee.data)!=null&&X.message?L=ce.response.data.message:ce.message&&(L=ce.message),xe.error("Erro na devolu√ß√£o",L)}finally{t(29,z=!1)}}}function de(){t(25,I=!1),t(31,S=null),console.log("‚ùå Devolu√ß√£o cancelada")}async function pe(Y){try{console.log("‚ùå FichaDetailContainer: Cancelando entrega:",Y.detail);const ee={motivo:Y.detail.motivo};await vt.cancelDelivery(Y.detail.entrega.id,ee),await U(),xe.success("Entrega cancelada","Entrega foi cancelada com sucesso"),n("fichaUpdated",{fichaId:s})}catch(ee){console.error("‚ùå Erro ao cancelar entrega:",ee),xe.error("Erro ao cancelar","N√£o foi poss√≠vel cancelar a entrega")}}function ie(Y){console.log("üñ®Ô∏è Imprimindo entrega:",Y.detail.entrega.id),xe.info("Fun√ß√£o em desenvolvimento","Impress√£o ser√° implementada em breve")}return l.$$set=Y=>{"open"in Y&&t(16,o=Y.open),"fichaId"in Y&&t(17,s=Y.fichaId)},l.$$.update=()=>{if(l.$$.dirty[0]&196608&&o&&s&&console.log("üéØ FichaDetailContainer: Estado open mudou para true, fichaId:",s),l.$$.dirty[0]&131072|l.$$.dirty[1]&8&&s&&r.has(s)){const Y=r.get(s);Y&&(t(18,i={success:!0,data:Y}),console.log("üîÑ Dados completos atualizados via store reativo:",s))}l.$$.dirty[0]&196608|l.$$.dirty[1]&4&&o&&s&&s!==M&&U(),l.$$.dirty[0]&2147287040|l.$$.dirty[1]&3&&t(0,a={fichaCompleteData:i,episDisponiveis:c,usuarios:u,loading:f,error:p,entregaLoading:A,assinaturaLoading:N,devolucaoLoading:z,showNovaEntregaDrawer:m,showEditarEntregaDrawer:h,showDevolucaoModal:I,showAssinaturaModal:w,entregaEdicao:O,equipamentoDevolucao:S,entregaAssinatura:B,open:o})},[a,P,T,C,v,j,W,ae,oe,le,H,se,fe,de,pe,ie,o,s,i,c,u,f,p,m,h,I,w,A,N,z,O,S,B,M,r]}class Ho extends Qe{constructor(e){super(),Ze(this,e,jo,Ro,Ge,{open:16,fichaId:17},null,[-1,-1])}}function Qa(l){let e,t;return e=new Nt({props:{error:l[2],onRetry:l[14]}}),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p(a,r){const o={};r&4&&(o.error=a[2]),e.$set(o)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Uo(l){let e,t;return e=new ot({props:{options:l[3],value:l[6],placeholder:"Selecione uma contratada...",disabled:l[1]}}),e.$on("change",l[11]),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p(a,r){const o={};r&8&&(o.options=a[3]),r&64&&(o.value=a[6]),r&2&&(o.disabled=a[1]),e.$set(o)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function Lo(l){let e,t,a,r,o="Carregando...",s;return t=new Pt({props:{size:"sm"}}),{c(){e=b("div"),J(t.$$.fragment),a=V(),r=b("span"),r.textContent=o,this.h()},l(n){e=$(n,"DIV",{class:!0});var i=D(e);G(t.$$.fragment,i),a=F(i),r=$(i,"SPAN",{class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-1v5o0hb"&&(r.textContent=o),i.forEach(g),this.h()},h(){E(r,"class","ml-2 text-sm text-gray-600"),E(e,"class","flex items-center justify-center py-4 min-h-[42px]")},m(n,i){q(n,e,i),Z(t,e,null),d(e,a),d(e,r),s=!0},p:Ae,i(n){s||(k(t.$$.fragment,n),s=!0)},o(n){y(t.$$.fragment,n),s=!1},d(n){n&&g(e),Q(t)}}}function Bo(l){let e,t,a,r;e=new ot({props:{options:l[9],value:l[7],placeholder:l[6]?"Selecione um colaborador sem ficha...":"Primeiro selecione uma contratada",disabled:l[1]||!l[6]}}),e.$on("change",l[12]);let o=l[9].length===0&&l[6]&&Za();return{c(){J(e.$$.fragment),t=V(),o&&o.c(),a=Ie()},l(s){G(e.$$.fragment,s),t=F(s),o&&o.l(s),a=Ie()},m(s,n){Z(e,s,n),q(s,t,n),o&&o.m(s,n),q(s,a,n),r=!0},p(s,n){const i={};n&512&&(i.options=s[9]),n&128&&(i.value=s[7]),n&64&&(i.placeholder=s[6]?"Selecione um colaborador sem ficha...":"Primeiro selecione uma contratada"),n&66&&(i.disabled=s[1]||!s[6]),e.$set(i),s[9].length===0&&s[6]?o||(o=Za(),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i(s){r||(k(e.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),r=!1},d(s){s&&(g(t),g(a)),Q(e,s),o&&o.d(s)}}}function Qo(l){let e,t,a,r,o="Carregando...",s;return t=new Pt({props:{size:"sm"}}),{c(){e=b("div"),J(t.$$.fragment),a=V(),r=b("span"),r.textContent=o,this.h()},l(n){e=$(n,"DIV",{class:!0});var i=D(e);G(t.$$.fragment,i),a=F(i),r=$(i,"SPAN",{class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-1v5o0hb"&&(r.textContent=o),i.forEach(g),this.h()},h(){E(r,"class","ml-2 text-sm text-gray-600"),E(e,"class","flex items-center justify-center py-4 min-h-[42px]")},m(n,i){q(n,e,i),Z(t,e,null),d(e,a),d(e,r),s=!0},p:Ae,i(n){s||(k(t.$$.fragment,n),s=!0)},o(n){y(t.$$.fragment,n),s=!1},d(n){n&&g(e),Q(t)}}}function Za(l){let e,t="Todos os colaboradores desta contratada j√° possuem ficha EPI";return{c(){e=b("p"),e.textContent=t,this.h()},l(a){e=$(a,"P",{class:!0,"data-svelte-h":!0}),ke(e)!=="svelte-1689xbi"&&(e.textContent=t),this.h()},h(){E(e,"class","text-sm text-gray-500 mt-1")},m(a,r){q(a,e,r)},d(a){a&&g(e)}}}function Zo(l){let e,t,a,r,o="Contratada",s,n,i,c,u,f,p="Colaborador",m,h,I,w,A=l[2]&&Qa(l);const N=[Lo,Uo],z=[];function O(U,K){return U[4]?0:1}n=O(l),i=z[n]=N[n](l);const S=[Qo,Bo],B=[];function M(U,K){return U[5]?0:1}return h=M(l),I=B[h]=S[h](l),{c(){A&&A.c(),e=V(),t=b("div"),a=b("div"),r=b("label"),r.textContent=o,s=V(),i.c(),c=V(),u=b("div"),f=b("label"),f.textContent=p,m=V(),I.c(),this.h()},l(U){A&&A.l(U),e=F(U),t=$(U,"DIV",{class:!0});var K=D(t);a=$(K,"DIV",{});var _=D(a);r=$(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-6kjk6u"&&(r.textContent=o),s=F(_),i.l(_),_.forEach(g),c=F(K),u=$(K,"DIV",{});var P=D(u);f=$(P,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(f)!=="svelte-funhjy"&&(f.textContent=p),m=F(P),I.l(P),P.forEach(g),K.forEach(g),this.h()},h(){E(r,"for","contratada-select"),E(r,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(f,"for","colaborador-select"),E(f,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(t,"class","space-y-4")},m(U,K){A&&A.m(U,K),q(U,e,K),q(U,t,K),d(t,a),d(a,r),d(a,s),z[n].m(a,null),d(t,c),d(t,u),d(u,f),d(u,m),B[h].m(u,null),w=!0},p(U,K){U[2]?A?(A.p(U,K),K&4&&k(A,1)):(A=Qa(U),A.c(),k(A,1),A.m(e.parentNode,e)):A&&(_e(),y(A,1,1,()=>{A=null}),ve());let _=n;n=O(U),n===_?z[n].p(U,K):(_e(),y(z[_],1,1,()=>{z[_]=null}),ve(),i=z[n],i?i.p(U,K):(i=z[n]=N[n](U),i.c()),k(i,1),i.m(a,null));let P=h;h=M(U),h===P?B[h].p(U,K):(_e(),y(B[P],1,1,()=>{B[P]=null}),ve(),I=B[h],I?I.p(U,K):(I=B[h]=S[h](U),I.c()),k(I,1),I.m(u,null))},i(U){w||(k(A),k(i),k(I),w=!0)},o(U){y(A),y(i),y(I),w=!1},d(U){U&&(g(e),g(t)),A&&A.d(U),z[n].d(),B[h].d()}}}function Go(l){let e;return{c(){e=R("Cancelar")},l(t){e=x(t,"Cancelar")},m(t,a){q(t,e,a)},d(t){t&&g(e)}}}function Jo(l){let e;return{c(){e=R("Criar Ficha")},l(t){e=x(t,"Criar Ficha")},m(t,a){q(t,e,a)},i:Ae,o:Ae,d(t){t&&g(e)}}}function Wo(l){let e,t,a;return e=new pr({props:{class:"mr-2",size:"4"}}),{c(){J(e.$$.fragment),t=R(`
        Criando...`)},l(r){G(e.$$.fragment,r),t=x(r,`
        Criando...`)},m(r,o){Z(e,r,o),q(r,t,o),a=!0},i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),a=!1},d(r){r&&g(t),Q(e,r)}}}function Ko(l){let e,t,a,r;const o=[Wo,Jo],s=[];function n(i,c){return i[1]?0:1}return e=n(l),t=s[e]=o[e](l),{c(){t.c(),a=Ie()},l(i){t.l(i),a=Ie()},m(i,c){s[e].m(i,c),q(i,a,c),r=!0},p(i,c){let u=e;e=n(i),e!==u&&(_e(),y(s[u],1,1,()=>{s[u]=null}),ve(),t=s[e],t||(t=s[e]=o[e](i),t.c()),k(t,1),t.m(a.parentNode,a))},i(i){r||(k(t),r=!0)},o(i){y(t),r=!1},d(i){i&&g(a),s[e].d(i)}}}function Yo(l){let e,t,a,r;return e=new Ne({props:{color:"alternative",size:"sm",class:"rounded-sm",disabled:l[1],$$slots:{default:[Go]},$$scope:{ctx:l}}}),e.$on("click",l[10]),a=new Ne({props:{color:"primary",size:"sm",class:"rounded-sm",disabled:!l[8],$$slots:{default:[Ko]},$$scope:{ctx:l}}}),a.$on("click",l[13]),{c(){J(e.$$.fragment),t=V(),J(a.$$.fragment)},l(o){G(e.$$.fragment,o),t=F(o),G(a.$$.fragment,o)},m(o,s){Z(e,o,s),q(o,t,s),Z(a,o,s),r=!0},p(o,s){const n={};s&2&&(n.disabled=o[1]),s&524288&&(n.$$scope={dirty:s,ctx:o}),e.$set(n);const i={};s&256&&(i.disabled=!o[8]),s&524290&&(i.$$scope={dirty:s,ctx:o}),a.$set(i)},i(o){r||(k(e.$$.fragment,o),k(a.$$.fragment,o),r=!0)},o(o){y(e.$$.fragment,o),y(a.$$.fragment,o),r=!1},d(o){o&&g(t),Q(e,o),Q(a,o)}}}function Xo(l){let e,t,a;function r(s){l[16](s)}let o={size:"md",outsideclose:!l[1],autoclose:!1,$$slots:{footer:[Yo],default:[Zo]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.open=l[0]),e=new Vr({props:o}),Re.push(()=>je(e,"open",r)),{c(){J(e.$$.fragment)},l(s){G(e.$$.fragment,s)},m(s,n){Z(e,s,n),a=!0},p(s,[n]){const i={};n&2&&(i.outsideclose=!s[1]),n&525310&&(i.$$scope={dirty:n,ctx:s}),!t&&n&1&&(t=!0,i.open=s[0],He(()=>t=!1)),e.$set(i)},i(s){a||(k(e.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),a=!1},d(s){Q(e,s)}}}function en(l,e,t){let a,r,{open:o=!1}=e,{submitting:s=!1}=e,{error:n=null}=e,{contratadas:i=[]}=e,{colaboradores:c=[]}=e,{loadingContratadas:u=!1}=e,{loadingColaboradores:f=!1}=e;const p=Xe();let m="",h="";function I(){s||(t(6,m=""),t(7,h=""),p("close"))}function w(S){t(6,m=S.detail),t(7,h=""),p("contratadaChange",m)}function A(S){t(7,h=S.detail),p("colaboradorChange",h)}function N(){a&&p("submit",{contratadaId:m,colaboradorId:h})}function z(){p("retry")}function O(S){o=S,t(0,o)}return l.$$set=S=>{"open"in S&&t(0,o=S.open),"submitting"in S&&t(1,s=S.submitting),"error"in S&&t(2,n=S.error),"contratadas"in S&&t(3,i=S.contratadas),"colaboradores"in S&&t(15,c=S.colaboradores),"loadingContratadas"in S&&t(4,u=S.loadingContratadas),"loadingColaboradores"in S&&t(5,f=S.loadingColaboradores)},l.$$.update=()=>{l.$$.dirty&1&&(o||(console.log("üìù NovaFichaModal: Modal fechado, resetando formul√°rio"),t(6,m=""),t(7,h=""))),l.$$.dirty&194&&t(8,a=!!m&&!!h&&!s),l.$$.dirty&32832&&t(9,r=c.filter(S=>!m||S.empresa===m)),l.$$.dirty&1&&console.log("üìù NovaFichaModal: Estado do modal mudou para:",o)},[o,s,n,i,u,f,m,h,a,r,I,w,A,N,z,c,O]}class tn extends Qe{constructor(e){super(),Ze(this,e,en,Xo,Ge,{open:0,submitting:1,error:2,contratadas:3,colaboradores:15,loadingContratadas:4,loadingColaboradores:5})}}function Ga(l){let e,t;return e=new Ho({props:{fichaId:l[3],open:l[2]}}),e.$on("close",l[14]),{c(){J(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,r){Z(e,a,r),t=!0},p(a,r){const o={};r[0]&8&&(o.fichaId=a[3]),r[0]&4&&(o.open=a[2]),e.$set(o)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){Q(e,a)}}}function an(l){let e,t,a,r,o,s,n;t=new sl({props:{items:l[11],loading:l[10],error:l[9],pagination:{currentPage:l[8].page,totalPages:l[8].totalPages,pageSize:l[8].pageSize,total:l[8].total,hasNext:l[8].page<l[8].totalPages,hasPrev:l[8].page>1},filters:{searchTerm:l[1],empresaFilter:l[0].empresa,cargoFilter:l[0].cargo,devolucaoPendente:l[0].devolucaoPendente,hasActiveFilters:l[1]!==""||l[0].empresa!=="todas"||l[0].cargo!=="todos"||l[0].devolucaoPendente},filterOptions:l[7]}}),t.$on("searchChange",l[22]),t.$on("empresaFilterChange",l[23]),t.$on("cargoFilterChange",l[24]),t.$on("devolucaoPendenteChange",l[25]),t.$on("clearFilters",l[26]),t.$on("pageChange",l[27]),t.$on("viewDetail",l[13]),t.$on("refresh",l[17]),t.$on("novaFicha",l[15]);let i=l[2]&&l[3]&&Ga(l);function c(f){l[28](f)}let u={contratadas:l[5],colaboradores:l[6],loadingContratadas:rn,loadingColaboradores:ln,submitting:on};return l[4]!==void 0&&(u.open=l[4]),o=new tn({props:u}),Re.push(()=>je(o,"open",c)),o.$on("close",l[16]),o.$on("submit",l[29]),{c(){e=b("div"),J(t.$$.fragment),a=V(),i&&i.c(),r=V(),J(o.$$.fragment),this.h()},l(f){e=$(f,"DIV",{class:!0});var p=D(e);G(t.$$.fragment,p),a=F(p),i&&i.l(p),r=F(p),G(o.$$.fragment,p),p.forEach(g),this.h()},h(){E(e,"class","fichas-container h-full svelte-zg0loa")},m(f,p){q(f,e,p),Z(t,e,null),d(e,a),i&&i.m(e,null),d(e,r),Z(o,e,null),n=!0},p(f,p){const m={};p[0]&2048&&(m.items=f[11]),p[0]&1024&&(m.loading=f[10]),p[0]&512&&(m.error=f[9]),p[0]&256&&(m.pagination={currentPage:f[8].page,totalPages:f[8].totalPages,pageSize:f[8].pageSize,total:f[8].total,hasNext:f[8].page<f[8].totalPages,hasPrev:f[8].page>1}),p[0]&3&&(m.filters={searchTerm:f[1],empresaFilter:f[0].empresa,cargoFilter:f[0].cargo,devolucaoPendente:f[0].devolucaoPendente,hasActiveFilters:f[1]!==""||f[0].empresa!=="todas"||f[0].cargo!=="todos"||f[0].devolucaoPendente}),p[0]&128&&(m.filterOptions=f[7]),t.$set(m),f[2]&&f[3]?i?(i.p(f,p),p[0]&12&&k(i,1)):(i=Ga(f),i.c(),k(i,1),i.m(e,r)):i&&(_e(),y(i,1,1,()=>{i=null}),ve());const h={};p[0]&32&&(h.contratadas=f[5]),p[0]&64&&(h.colaboradores=f[6]),!s&&p[0]&16&&(s=!0,h.open=f[4],He(()=>s=!1)),o.$set(h)},i(f){n||(k(t.$$.fragment,f),k(i),k(o.$$.fragment,f),n=!0)},o(f){y(t.$$.fragment,f),y(i),y(o.$$.fragment,f),n=!1},d(f){f&&g(e),Q(t),i&&i.d(),Q(o)}}}let rn=!1,ln=!1,on=!1;function nn(l,e,t){let a,r,o,s,n,{initialPageSize:i=10}=e;const c=hr(H=>(console.log("üîç FichasContainer: Par√¢metros de busca:",H),$t.getFichasWithColaboradores({page:H.page||1,limit:H.limit||i,searchTerm:H.search||void 0,empresaFilter:H.empresa!=="todas"?H.empresa:void 0,cargoFilter:H.cargo!=="todos"?H.cargo:void 0,statusFilter:H.status!=="todos"?H.status:void 0,devolucaoPendente:H.devolucaoPendente===!0}).then(se=>{var fe;return console.log("üì¶ FichasContainer: Resposta da API:",{total:se.total,fichas:((fe=se.fichas)==null?void 0:fe.length)||0,filtros:{devolucaoPendente:H.devolucaoPendente,empresa:H.empresa,cargo:H.cargo}}),{data:se.fichas,total:se.total,page:se.page||H.page||1,pageSize:se.pageSize||H.limit||i,totalPages:Math.ceil(se.total/(H.limit||i))}})),{initialPageSize:i});Wa(l,c,H=>t(21,n=H));let u=!1,f=null,p=!1,m=[],h=[],I={empresas:[{value:"todas",label:"Todas as Empresas"}],cargos:[{value:"todos",label:"Todos os Cargos"}]},w=!1,A=!0;Ka(async()=>{console.log("üöÄ FichasContainer: Inicializando...");try{typeof window<"u"&&(await _r.initialize(),await Promise.all([N(),z()]),console.log("‚úÖ FichasContainer: Inicializado com sucesso"))}catch(H){console.error("‚ùå Erro ao inicializar FichasContainer:",H)}finally{t(19,A=!1)}});async function N(){try{await c.fetchPage(),console.log("üìã Dados de fichas carregados")}catch(H){console.error("‚ùå Erro ao carregar fichas:",H),xe.error("Erro ao carregar fichas","N√£o foi poss√≠vel carregar os dados das fichas")}}async function z(){try{w=!0,console.log("üîß Carregando op√ß√µes dos filtros..."),console.log("üåê API: Carregando colaboradores...");const H=await Oe.get("/colaboradores");console.log("üìä API Response - Colaboradores:",H);let se=[],fe=[];if(H!=null&&H.success&&H.data){const de=Array.isArray(H.data)?H.data:H.data.colaboradores||[];se=[...new Set(de.filter(X=>{var ce;return(ce=X.contratada)==null?void 0:ce.nome}).map(X=>X.contratada.nome))].map(X=>({value:X,label:X})),fe=de.filter(X=>{var ce,L;return((ce=X.contratada)==null?void 0:ce.id)&&((L=X.contratada)==null?void 0:L.nome)}).reduce((X,ce)=>(X.find(L=>L.value===ce.contratada.id)||X.push({value:ce.contratada.id,label:ce.contratada.nome}),X),[]);const ee=[...new Set(de.map(X=>X.cargo).filter(X=>X&&X.trim()))].map(X=>({value:X,label:X}));t(7,I.cargos=[{value:"todos",label:"Todos os Cargos"},...ee],I),t(6,h=de.map(X=>{var ce;return{value:X.id,label:X.nome,empresa:((ce=X.contratada)==null?void 0:ce.nome)||"Sem empresa"}})),console.log("‚úÖ Empresas extra√≠das dos colaboradores:",se.length),console.log("‚úÖ Cargos √∫nicos carregados:",ee.length),console.log("‚úÖ Colaboradores carregados:",h.length)}else console.error("‚ùå Erro ao processar colaboradores:",{success:H==null?void 0:H.success,data:H==null?void 0:H.data,response:H}),t(6,h=[]),t(7,I.cargos=[{value:"todos",label:"Todos os Cargos"}],I),se=[],fe=[];t(7,I.empresas=[{value:"todas",label:"Todas as Empresas"},...se],I),t(5,m=fe),t(7,I={...I})}catch(H){console.error("‚ùå Erro ao carregar op√ß√µes dos filtros:",H)}finally{w=!1}}let O={empresa:"todas",cargo:"todos",devolucaoPendente:!1},S="",B;function M(H){t(3,f=H.detail),t(2,u=!0)}function U(){t(2,u=!1),t(3,f=null)}function K(){console.log("üìù NovaFicha: Abrindo modal, estado anterior:",p),t(4,p=!0),console.log("üìù NovaFicha: Estado ap√≥s abrir:",p)}function _(){console.log("üìù NovaFicha: Fechando modal, estado anterior:",p),t(4,p=!1),console.log("üìù NovaFicha: Estado ap√≥s fechar:",p)}function P(){N()}const T=H=>t(1,S=H.detail),C=H=>t(0,O.empresa=H.detail,O),v=H=>t(0,O.cargo=H.detail,O),j=H=>t(0,O.devolucaoPendente=H.detail,O),W=()=>{t(1,S=""),t(0,O={empresa:"todas",cargo:"todos",devolucaoPendente:!1})},ae=H=>c.goToPage(H.detail);function oe(H){p=H,t(4,p)}const le=H=>console.log("Nova ficha:",H.detail);return l.$$set=H=>{"initialPageSize"in H&&t(18,i=H.initialPageSize)},l.$$.update=()=>{l.$$.dirty[0]&1048578&&typeof window<"u"&&(B&&clearTimeout(B),t(20,B=setTimeout(()=>{c.setSearch(S)},300))),l.$$.dirty[0]&1&&typeof window<"u"&&(console.log("üîÑ FichasContainer: Aplicando filtros:",O),c.setFilters({empresa:O.empresa,cargo:O.cargo,devolucaoPendente:O.devolucaoPendente})),l.$$.dirty[0]&2097152&&t(11,a=n.items||[]),l.$$.dirty[0]&2621440&&t(10,r=A||n.loading),l.$$.dirty[0]&2097152&&t(9,o=n.error),l.$$.dirty[0]&2097152&&t(8,s={page:n.page,total:n.total,pageSize:n.pageSize,totalPages:n.totalPages})},[O,S,u,f,p,m,h,I,s,o,r,a,c,M,U,K,_,P,i,A,B,n,T,C,v,j,W,ae,oe,le]}class sn extends Qe{constructor(e){super(),Ze(this,e,nn,an,Ge,{initialPageSize:18},null,[-1,-1])}}function cn(l){let e,t,a;return t=new sn({props:{initialPageSize:10}}),{c(){e=V(),J(t.$$.fragment),this.h()},l(r){Ja("svelte-161hi6l",document.head).forEach(g),e=F(r),G(t.$$.fragment,r),this.h()},h(){document.title="Fichas de EPI - DataLife EPI"},m(r,o){q(r,e,o),Z(t,r,o),a=!0},p:Ae,i(r){a||(k(t.$$.fragment,r),a=!0)},o(r){y(t.$$.fragment,r),a=!1},d(r){r&&g(e),Q(t,r)}}}class qn extends Qe{constructor(e){super(),Ze(this,e,null,cn,Ge,{})}}export{qn as component};
