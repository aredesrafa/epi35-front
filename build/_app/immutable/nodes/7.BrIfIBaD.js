var Ja=Object.defineProperty;var Wa=(n,e,t)=>e in n?Ja(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ke=(n,e,t)=>Wa(n,typeof e!="symbol"?e+"":e,t);import{S as Xe,i as Ze,s as Ye,d,o as k,p as v,C as ie,q as ce,b,u as O,e as I,f as z,j as D,_ as it,n as he,m as F,r as V,x as L,y as R,a as te,c as h,h as T,g as S,k as y,t as P,L as Nt,O as It,P as Dt,Q as qt,B as le,D as Tt,A as He,R as ot,v as Ga,w as be,z as Et,a3 as Me,a7 as Ue,a8 as Be,a2 as ye,l as Ka,a9 as Xa}from"../chunks/BwBa27U2.js";import"../chunks/IHki7fMi.js";import{d as Za,b as me,B as Ve,e as de,a as wt,u as Oa,o as Fa}from"../chunks/K6YgHZ2F.js";import{a as kt,E as Ya,R as Va,T as Ra,b as La,c as xa,d as De,e as za,f as qe,A as pt,S as _t,L as st,g as eo}from"../chunks/AI5XSAlw.js";import{I as ut,b as to,n as Pe}from"../chunks/CW_GOkfj.js";import{C as Ma}from"../chunks/oVzYVp2u.js";import{C as ao}from"../chunks/B2Xlhu43.js";import{C as Ua}from"../chunks/DAvWewrS.js";import{E as oo}from"../chunks/Dk1qpAHa.js";import{F as Ba}from"../chunks/C6wHvHr5.js";import{P as lo}from"../chunks/DyIyjKKt.js";import{P as Ct}from"../chunks/BrDGBN_R.js";import{T as ja}from"../chunks/DHdW1b2-.js";import{C as no}from"../chunks/BoMMM-o-.js";import{S as ro}from"../chunks/ywxHNNOO.js";import{S as so,T as yt}from"../chunks/C0bt7z_1.js";import{f as St}from"../chunks/cmi2GAyx.js";import{D as io,a as co}from"../chunks/NtaOPkNA.js";import{E as uo}from"../chunks/eHhgGX3k.js";const fo=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;class mo{constructor(){Ke(this,"baseEndpoint","/notas-movimentacao")}async listarNotas(e={}){var t,a,o,l,r,s;console.log("üìã NotasMovimentacaoAdapter: Listando notas via /resumo",e);try{const i=Za(`${this.baseEndpoint}/resumo`,{page:(t=e.page)==null?void 0:t.toString(),limit:(a=e.limit)==null?void 0:a.toString(),dataInicio:e.dataInicio,dataFim:e.dataFim,status:e.status,tipo:e.tipo,numero:e.numero,usuarioId:e.responsavel_id,almoxarifadoId:e.almoxarifado_id}),c=await me.get(i,{timeout:3e4,retries:2});if(console.log("‚úÖ Notas resumo carregadas:",c),c.success&&c.data)return{data:c.data,total:((o=c.pagination)==null?void 0:o.total)||0,page:((l=c.pagination)==null?void 0:l.page)||1,pageSize:((r=c.pagination)==null?void 0:r.limit)||10,totalPages:((s=c.pagination)==null?void 0:s.totalPages)||1};throw new Error("Resposta inv√°lida do servidor")}catch(i){throw console.error("‚ùå Erro ao listar notas:",i),new Error("N√£o foi poss√≠vel carregar as notas de movimenta√ß√£o")}}async obterNota(e){console.log("üîç NotasMovimentacaoAdapter: Buscando nota",e);try{const t=await me.get(`${this.baseEndpoint}/${e}`);console.log("‚úÖ Resposta obter nota:",t),console.log("üîç Estrutura da resposta:",JSON.stringify(t,null,2));let a;return t.success&&t.data||t.data?a=t.data:a=t,console.log("üìã Dados da nota processados:",JSON.stringify(a,null,2)),a}catch(t){throw console.error("‚ùå Erro ao buscar nota:",t),new Error("N√£o foi poss√≠vel encontrar a nota")}}async listarRascunhos(){var e;console.log("üìù NotasMovimentacaoAdapter: Listando rascunhos");try{const t=await me.get(`${this.baseEndpoint}/rascunhos`);return console.log("‚úÖ Resposta listar rascunhos:",t),t.success&&t.data?Array.isArray(t.data)?t.data:[]:Array.isArray(t.data)?t.data:(e=t.data)!=null&&e.items?t.data.items:[]}catch(t){throw console.error("‚ùå Erro ao listar rascunhos:",t),new Error("N√£o foi poss√≠vel carregar os rascunhos")}}async criarNota(e){console.log("üìù NotasMovimentacaoAdapter: Criando nota",e);try{if(!e.responsavel_id){console.log("‚ö†Ô∏è responsavel_id n√£o fornecido, buscando usu√°rio padr√£o...");try{const o=await me.get("/usuarios?limit=1");console.log("üîç Resposta usuarios endpoint:",o),o.items&&o.items.length>0?(e.responsavel_id=o.items[0].id,console.log("‚úÖ Usando responsavel_id:",e.responsavel_id)):o.success&&o.data&&o.data.length>0?(e.responsavel_id=o.data[0].id,console.log("‚úÖ Usando responsavel_id:",e.responsavel_id)):(console.log("‚ö†Ô∏è Nenhum usu√°rio encontrado, usando administrador padr√£o..."),e.responsavel_id="cffc2197-acbe-4a64-bfd7-435370e9c226",console.log("‚úÖ Usando responsavel_id do administrador:",e.responsavel_id))}catch(o){console.error("‚ùå Erro ao buscar usu√°rio:",o),e.responsavel_id="cffc2197-acbe-4a64-bfd7-435370e9c226",console.log("‚úÖ Usando responsavel_id do administrador (fallback):",e.responsavel_id)}}const t={tipo:e.tipo_nota,almoxarifadoOrigemId:e.almoxarifado_origem_id,almoxarifadoDestinoId:e.almoxarifado_destino_id,observacoes:e.observacoes};console.log("üì§ Dados para backend:",t);const a=await me.post(this.baseEndpoint,t);return console.log("‚úÖ Nota criada:",a),a.success?{success:a.success,data:a.data}:a}catch(t){throw console.error("‚ùå Erro ao criar nota:",t),new Error("N√£o foi poss√≠vel criar a nota de movimenta√ß√£o")}}async atualizarNota(e,t){console.log("üìù NotasMovimentacaoAdapter: Atualizando nota",e,t);try{const a=await me.put(`${this.baseEndpoint}/${e}`,t);return console.log("‚úÖ Resposta atualizar nota:",a),a.success&&a.data||a.data?a.data:a}catch(a){throw console.error("‚ùå Erro ao atualizar nota:",a),new Error("N√£o foi poss√≠vel atualizar a nota")}}async excluirNota(e){console.log("üóëÔ∏è NotasMovimentacaoAdapter: Excluindo nota",e);try{await me.delete(`${this.baseEndpoint}/${e}`),console.log("‚úÖ Nota exclu√≠da:",e)}catch(t){throw console.error("‚ùå Erro ao excluir nota:",t),new Error("N√£o foi poss√≠vel excluir a nota")}}async adicionarItem(e,t){console.log("‚ûï NotasMovimentacaoAdapter: Adicionando item",e,t);try{const a={tipoEpiId:t.tipo_epi_id,quantidade:Number(t.quantidade),observacoes:t.observacoes||null};console.log("üì§ Dados do item para backend:",a);const o=await me.post(`${this.baseEndpoint}/${e}/itens`,a);return console.log("‚úÖ Item adicionado:",o),o.success&&o.data||o.data?o.data:o}catch(a){throw console.error("‚ùå Erro ao adicionar item:",a),new Error("N√£o foi poss√≠vel adicionar o item √† nota")}}async atualizarQuantidade(e,t,a){console.log("üìù NotasMovimentacaoAdapter: Atualizando quantidade",e,t,a);try{await me.put(`${this.baseEndpoint}/${e}/itens/${t}`,{quantidade:Number(a)}),console.log("‚úÖ Quantidade atualizada")}catch(o){throw console.error("‚ùå Erro ao atualizar quantidade:",o),new Error("N√£o foi poss√≠vel atualizar a quantidade")}}async removerItem(e,t){console.log("üóëÔ∏è NotasMovimentacaoAdapter: Removendo item",e,t);try{await me.delete(`${this.baseEndpoint}/${e}/itens/${t}`),console.log("‚úÖ Item removido")}catch(a){throw console.error("‚ùå Erro ao remover item:",a),new Error("N√£o foi poss√≠vel remover o item")}}async concluirNota(e){console.log("‚ö° NotasMovimentacaoAdapter: Concluindo nota",e);try{const t=await me.post(`${this.baseEndpoint}/${e}/concluir`,{validarEstoque:!0});return console.log("‚úÖ Nota conclu√≠da:",t),t.success?{success:t.success,data:t.data}:t}catch(t){throw console.error("‚ùå Erro ao concluir nota:",t),new Error("N√£o foi poss√≠vel concluir a nota")}}async cancelarNota(e,t){console.log("üö´ NotasMovimentacaoAdapter: Cancelando nota",e);try{await me.post(`${this.baseEndpoint}/${e}/cancelar`,{motivo:t||"Cancelamento solicitado pelo usu√°rio",gerarEstorno:!0}),console.log("‚úÖ Nota cancelada:",e)}catch(a){throw console.error("‚ùå Erro ao cancelar nota:",a),new Error("N√£o foi poss√≠vel cancelar a nota")}}async validarCancelamento(e){console.log("üîç NotasMovimentacaoAdapter: Validando cancelamento",e);try{const t=await me.get(`${this.baseEndpoint}/${e}/validar-cancelamento`);return console.log("‚úÖ Valida√ß√£o de cancelamento:",t),t.success&&t.data||t.data?t.data:t}catch(t){return console.error("‚ùå Erro ao validar cancelamento:",t),{pode_cancelar:!1,motivo:"Erro na valida√ß√£o"}}}async obterNotaCompleta(e){return console.log("üîç NotasMovimentacaoAdapter: Buscando nota completa",e),this.obterNota(e)}async validarNotaAntesConcluir(e){var t,a,o;console.log("üîç NotasMovimentacaoAdapter: Valida√ß√£o local da nota",e);try{const l=await this.obterNota(e),r=[],s=[];(!l.itens||l.itens.length===0)&&r.push("Nota deve ter pelo menos um item"),(l.status==="CONCLUIDA"||l._status==="CONCLUIDA")&&r.push("Nota j√° foi conclu√≠da anteriormente"),(l.status==="CANCELADA"||l._status==="CANCELADA")&&r.push("Nota cancelada n√£o pode ser conclu√≠da");const i=r.length===0;return i&&s.push("Valida√ß√£o local aprovada"),console.log("‚úÖ Valida√ß√£o local conclu√≠da:",{podeConfirmar:i,erros:r.length,itens:(t=l.itens)==null?void 0:t.length}),{pode_concluir:i,erros:r,avisos:s,total_itens_processados:((a=l.itens)==null?void 0:a.length)||0,movimentacoes_previstas:((o=l.itens)==null?void 0:o.length)||0}}catch(l){return console.error("‚ùå Erro na valida√ß√£o local:",l),{pode_concluir:!1,erros:["N√£o foi poss√≠vel carregar dados da nota para valida√ß√£o"],avisos:["Erro na valida√ß√£o local"]}}}async obterOpcoesFilters(){console.log("üîß NotasMovimentacaoAdapter: Carregando op√ß√µes de filtros");try{const[e,t]=await Promise.all([me.get("/usuarios?limit=100"),me.get("/estoque/almoxarifados")]),a=(e==null?void 0:e.data)||(e==null?void 0:e.items)||[],o=(t==null?void 0:t.data)||[],l={responsaveis:a.map(r=>({value:r.id,label:r.nome||r.name||`Usu√°rio ${r.id.slice(0,8)}`})),almoxarifados:o.map(r=>({value:r.id,label:r.nome||r.name||`Almoxarifado ${r.id.slice(0,8)}`})),tipos:[{value:"ENTRADA",label:"Entrada"},{value:"TRANSFERENCIA",label:"Transfer√™ncia"},{value:"DESCARTE",label:"Descarte"},{value:"AJUSTE",label:"Ajuste"}],status:[{value:"RASCUNHO",label:"Rascunho"},{value:"CONCLUIDA",label:"Conclu√≠da"},{value:"CANCELADA",label:"Cancelada"}]};return console.log("‚úÖ Op√ß√µes de filtros carregadas:",{responsaveis:l.responsaveis.length,almoxarifados:l.almoxarifados.length}),l}catch(e){return console.error("‚ùå Erro ao carregar op√ß√µes de filtros:",e),{responsaveis:[],almoxarifados:[],tipos:[{value:"ENTRADA",label:"Entrada"},{value:"TRANSFERENCIA",label:"Transfer√™ncia"},{value:"DESCARTE",label:"Descarte"},{value:"AJUSTE",label:"Ajuste"}],status:[{value:"RASCUNHO",label:"Rascunho"},{value:"CONCLUIDA",label:"Conclu√≠da"},{value:"CANCELADA",label:"Cancelada"}]}}}}const Oe=new mo;class _o{constructor(){Ke(this,"baseEndpoint","/estoque/almoxarifados");Ke(this,"selectOptionsCache",null)}async listarAlmoxarifados(){var e;console.log("üè™ AlmoxarifadosAdapter: Listando almoxarifados via estoque");try{try{const t=await me.get(this.baseEndpoint,{timeout:15e3,retries:1});let a=[];return t.data?a=Array.isArray(t.data)?t.data:t.data.items||[]:Array.isArray(t)&&(a=t),console.log("‚úÖ Almoxarifados listados via endpoint direto:",a.length),a}catch{console.log("‚ö†Ô∏è Endpoint direto n√£o dispon√≠vel, extraindo de estoque...");const a=await me.get("/estoque/itens?limit=100"),o=new Map;a.data.items.forEach(r=>{const s=r.almoxarifado;s&&!o.has(s.id)&&o.set(s.id,{id:s.id,nome:s.nome,unidade_negocio_id:s.unidadeNegocioId,is_principal:s.nome.toLowerCase().includes("central"),created_at:new Date().toISOString(),unidade_negocio:{id:s.unidadeNegocio.id,nome:s.unidadeNegocio.nome,codigo:s.unidadeNegocio.codigo}})});const l=Array.from(o.values());return console.log("‚úÖ Almoxarifados extra√≠dos do estoque:",l.length),l}}catch(t){if(console.error("‚ùå Erro ao listar almoxarifados:",t),t.name==="AbortError"||(e=t.message)!=null&&e.includes("timeout"))return console.warn("‚ö†Ô∏è Backend indispon√≠vel, usando dados de fallback"),this.getFallbackAlmoxarifados();throw new Error("N√£o foi poss√≠vel carregar os almoxarifados")}}async listarAlmoxarifadosPaginados(e){console.log("üè™ AlmoxarifadosAdapter: Listando almoxarifados com pagina√ß√£o",e);try{const t=new URLSearchParams;e!=null&&e.page&&t.append("page",e.page.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.search&&t.append("search",e.search);const a=`${this.baseEndpoint}?${t.toString()}`,o=await me.get(a);return console.log("‚úÖ Almoxarifados paginados listados:",o.data.pagination),{data:o.data.items,total:o.data.pagination.total,page:o.data.pagination.page,pageSize:o.data.pagination.limit,totalPages:o.data.pagination.totalPages}}catch(t){throw console.error("‚ùå Erro ao listar almoxarifados paginados:",t),new Error("N√£o foi poss√≠vel carregar os almoxarifados")}}async obterAlmoxarifado(e){console.log("üîç AlmoxarifadosAdapter: Buscando almoxarifado",e);try{const t=await me.get(`${this.baseEndpoint}/${e}`);return console.log("‚úÖ Almoxarifado encontrado:",t.data.nome),t.data}catch(t){throw console.error("‚ùå Erro ao buscar almoxarifado:",t),new Error("N√£o foi poss√≠vel encontrar o almoxarifado")}}async obterOpcoesSelect(){console.log("üîß AlmoxarifadosAdapter: Carregando op√ß√µes para select");try{const t=(await this.listarAlmoxarifados()).map(a=>{var o;return{value:a.id,label:a.nome,isPrincipal:a.is_principal,unidadeNegocio:(o=a.unidade_negocio)==null?void 0:o.nome}});return t.sort((a,o)=>a.isPrincipal&&!o.isPrincipal?-1:!a.isPrincipal&&o.isPrincipal?1:a.label.localeCompare(o.label)),console.log("‚úÖ Op√ß√µes de select criadas:",t.length),t}catch(e){return console.error("‚ùå Erro ao criar op√ß√µes de select:",e),[]}}async obterOpcoesSelectComCache(){const t=Date.now();if(this.selectOptionsCache&&t-this.selectOptionsCache.timestamp<3e5)return console.log("üíæ AlmoxarifadosAdapter: Usando cache para op√ß√µes select"),this.selectOptionsCache.data;const a=await this.obterOpcoesSelect();return this.selectOptionsCache={data:a,timestamp:t},a}limparCache(){this.selectOptionsCache=null,console.log("üóëÔ∏è AlmoxarifadosAdapter: Cache limpo")}clearCache(){this.limparCache()}async validarExistencia(e){try{return await this.obterAlmoxarifado(e),!0}catch{return!1}}async obterAlmoxarifadosPrincipais(){console.log("üèÜ AlmoxarifadosAdapter: Buscando almoxarifados principais");try{const t=(await this.listarAlmoxarifados()).filter(a=>a.is_principal);return console.log("‚úÖ Almoxarifados principais encontrados:",t.length),t}catch(e){throw console.error("‚ùå Erro ao buscar almoxarifados principais:",e),new Error("N√£o foi poss√≠vel carregar os almoxarifados principais")}}getFallbackAlmoxarifados(){return[{id:"567a1885-0763-4a13-b9f6-157daa39ddc3",nome:"Almoxarifado Central SP",unidade_negocio_id:"d42d0657-4671-4026-ae34-61b74806ad9d",is_principal:!0,created_at:new Date().toISOString(),unidade_negocio:{id:"d42d0657-4671-4026-ae34-61b74806ad9d",nome:"Matriz S√£o Paulo",codigo:"SP001"}},{id:"fallback-2",nome:"Almoxarifado Obra (Demo)",unidade_negocio_id:"unidade-2",is_principal:!1,created_at:new Date().toISOString(),unidade_negocio:{id:"unidade-2",nome:"Obra A",codigo:"OA01"}}]}}const Ha=new _o;class po{constructor(){Ke(this,"baseEndpoint","/tipos-epi");Ke(this,"selectOptionsCache",null)}async listarTiposEpi(e){var t;console.log("üõ°Ô∏è TiposEpiAdapter: Listando tipos de EPI",e);try{const a=new URLSearchParams;e!=null&&e.page&&a.append("page",e.page.toString()),e!=null&&e.limit&&a.append("limit",e.limit.toString()),e!=null&&e.search&&a.append("search",e.search),e!=null&&e.categoria&&a.append("categoria",e.categoria);const o=`${this.baseEndpoint}?${a.toString()}`,l=await me.get(o);return console.log("‚úÖ Tipos de EPI listados:",l.data.pagination),{data:l.data.items,total:l.data.pagination.total,page:l.data.pagination.page,pageSize:l.data.pagination.limit,totalPages:l.data.pagination.totalPages}}catch(a){if(console.error("‚ùå Erro ao listar tipos de EPI:",a),a.name==="AbortError"||(t=a.message)!=null&&t.includes("timeout")){console.warn("‚ö†Ô∏è Backend indispon√≠vel, usando dados de fallback para tipos EPI");const o=this.getFallbackTiposEPI();return{data:o,total:o.length,page:1,pageSize:o.length,totalPages:1}}throw new Error("N√£o foi poss√≠vel carregar os tipos de EPI")}}async obterTipoEpi(e){console.log("üîç TiposEpiAdapter: Buscando tipo de EPI",e);try{const t=await me.get(`${this.baseEndpoint}/${e}`);return console.log("‚úÖ Tipo de EPI encontrado:",t.data.nome_equipamento),t.data}catch(t){throw console.error("‚ùå Erro ao buscar tipo de EPI:",t),new Error("N√£o foi poss√≠vel encontrar o tipo de EPI")}}async obterOpcoesSelect(e){console.log("üîß TiposEpiAdapter: Carregando op√ß√µes para select",e);try{const t={page:1,limit:(e==null?void 0:e.limite)||100};e!=null&&e.categoria&&(t.categoria=e.categoria);const o=(await this.listarTiposEpi(t)).data.map(l=>{console.log("üîç Mapeando tipo EPI completo:",JSON.stringify(l,null,2)),console.log("üîç Campos dispon√≠veis:",Object.keys(l)),console.log("üîç nome_equipamento:",l.nome_equipamento),console.log("üîç nomeEquipamento:",l.nomeEquipamento),console.log("üîç nome:",l.nome),console.log("üîç name:",l.name);const r=l.nomeEquipamento||l.nome_equipamento||l.nome||l.name||"Nome n√£o identificado",s=l.numeroCa||l.numero_ca||l.numeroCA||l.ca||"N/A",i=l.categoria||l.category||"Sem categoria",c={value:l.id,label:`${r} (CA: ${s})`,categoria:i,numeroCA:s,custoUnitario:l.custo_unitario||l.custoUnitario||l.preco||0,status:l.status};return console.log("üéØ Op√ß√£o final criada:",c),c});return o.sort((l,r)=>l.label.localeCompare(r.label)),console.log("‚úÖ Op√ß√µes de select criadas:",o.length),o}catch(t){return console.error("‚ùå Erro ao criar op√ß√µes de select:",t),[]}}async obterOpcoesAgrupadasPorCategoria(){console.log("üìÇ TiposEpiAdapter: Agrupando op√ß√µes por categoria");try{const e=await this.obterOpcoesSelect({apenasAtivos:!0}),t={};return e.forEach(a=>{t[a.categoria]||(t[a.categoria]=[]),t[a.categoria].push(a)}),Object.keys(t).forEach(a=>{t[a].sort((o,l)=>o.label.localeCompare(l.label))}),console.log("‚úÖ Op√ß√µes agrupadas por categoria:",Object.keys(t)),t}catch(e){return console.error("‚ùå Erro ao agrupar op√ß√µes por categoria:",e),{}}}async obterOpcoesSelectComCache(e){const a=Date.now(),o=JSON.stringify(e||{});if(this.selectOptionsCache&&this.selectOptionsCache.key===o&&a-this.selectOptionsCache.timestamp<3e5)return console.log("üíæ TiposEpiAdapter: Usando cache para op√ß√µes select"),this.selectOptionsCache.data;const l=await this.obterOpcoesSelect(e);return this.selectOptionsCache={data:l,timestamp:a,key:o},l}async buscarTiposEpi(e){if(console.log("üîç TiposEpiAdapter: Buscando tipos de EPI",e),!e||e.length<2)return[];try{const a=(await this.listarTiposEpi({search:e,limit:20})).data.map(o=>{const l=o.nomeEquipamento||o.nome_equipamento||o.nome||o.name||"Nome n√£o identificado",r=o.numeroCa||o.numero_ca||o.numeroCA||o.ca||"N/A",s=o.categoria||o.category||"Sem categoria";return{value:o.id,label:`${l} (CA: ${r})`,categoria:s,numeroCA:r,custoUnitario:o.custo_unitario||o.custoUnitario||o.preco||0}});return console.log("‚úÖ Busca realizada, encontrados:",a.length),a}catch(t){return console.error("‚ùå Erro na busca de tipos de EPI:",t),[]}}async obterCategorias(){console.log("üìã TiposEpiAdapter: Carregando categorias");try{const e=await this.listarTiposEpi({limit:500}),t=[...new Set(e.data.map(a=>a.categoria))].filter(a=>a&&a.trim()!=="").sort();return console.log("‚úÖ Categorias encontradas:",t),t}catch(e){return console.error("‚ùå Erro ao carregar categorias:",e),[]}}async validarTipoEpiAtivo(e){try{return(await this.obterTipoEpi(e)).status==="ATIVO"}catch{return!1}}limparCache(){this.selectOptionsCache=null,console.log("üóëÔ∏è TiposEpiAdapter: Cache limpo")}clearCache(){this.limparCache()}async obterTiposPopulares(e=10){console.log("üåü TiposEpiAdapter: Carregando tipos populares");try{const a=(await this.listarTiposEpi({limit:e})).data.map(o=>{const l=o.nomeEquipamento||o.nome_equipamento||o.nome||o.name||"Nome n√£o identificado",r=o.numeroCa||o.numero_ca||o.numeroCA||o.ca||"N/A",s=o.categoria||o.category||"Sem categoria";return{value:o.id,label:`${l} (CA: ${r})`,categoria:s,numeroCA:r,custoUnitario:o.custo_unitario||o.custoUnitario||o.preco||0}});return console.log("‚úÖ Tipos populares carregados:",a.length),a}catch(t){return console.error("‚ùå Erro ao carregar tipos populares:",t),[]}}getFallbackTiposEPI(){return[{id:"fallback-1",nome_equipamento:"Capacete de Seguran√ßa (Demo)",numero_ca:"12345",categoria:"PROTECAO_CRANIO",custo_unitario:35.5,status:"ATIVO",created_at:new Date().toISOString()},{id:"fallback-2",nome_equipamento:"√ìculos de Prote√ß√£o (Demo)",numero_ca:"67890",categoria:"PROTECAO_OLHOS",custo_unitario:28.9,status:"ATIVO",created_at:new Date().toISOString()},{id:"fallback-3",nome_equipamento:"Luva de Seguran√ßa (Demo)",numero_ca:"54321",categoria:"PROTECAO_MAOS",custo_unitario:15.75,status:"ATIVO",created_at:new Date().toISOString()}]}}const go=new po;class ho{constructor(){Ke(this,"baseEndpoint","/estoque/itens");Ke(this,"itensDisponiveis",{})}async listarItensEstoque(e){console.log("üì¶ EstoqueItensAdapter: Listando itens de estoque",e);try{const t=new URLSearchParams;e!=null&&e.page&&t.append("page",e.page.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.search&&t.append("search",e.search),e!=null&&e.almoxarifado_id&&t.append("almoxarifado_id",e.almoxarifado_id),e!=null&&e.tipo_epi_id&&t.append("tipo_epi_id",e.tipo_epi_id),e!=null&&e.status&&e.status!=="todos"&&t.append("status",e.status),e!=null&&e.categoria&&t.append("categoria",e.categoria);const a=`${this.baseEndpoint}?${t.toString()}`,o=await me.get(a);return console.log("‚úÖ Itens de estoque listados:",o.data.pagination),{data:o.data.items,total:o.data.pagination.total,page:o.data.pagination.page,pageSize:o.data.pagination.limit,totalPages:o.data.pagination.totalPages}}catch(t){throw console.error("‚ùå Erro ao listar itens de estoque:",t),new Error("N√£o foi poss√≠vel carregar os itens de estoque")}}async obterItensDisponiveisParaSaida(e){console.log("üöö EstoqueItensAdapter: Buscando itens dispon√≠veis para sa√≠da",e);try{const a=(await this.listarItensEstoque({almoxarifado_id:e,status:"DISPONIVEL",limit:200})).data.filter(o=>o.quantidade>0).map(o=>({value:o.id,label:`${o.tipo_epi.nome_equipamento} - ${o.quantidade} dispon√≠vel`,quantidade:o.quantidade,equipamento:o.tipo_epi.nome_equipamento,categoria:o.tipo_epi.categoria,numeroCA:o.tipo_epi.numero_ca,almoxarifado:o.almoxarifado.nome,almoxarifadoId:o.almoxarifado.id,quantidadeMaxima:o.quantidade,status:o.status,dataValidade:o.data_validade,lote:o.lote}));return a.sort((o,l)=>o.equipamento.localeCompare(l.equipamento)),console.log("‚úÖ Itens dispon√≠veis para sa√≠da:",a.length),a}catch(t){return console.error("‚ùå Erro ao buscar itens dispon√≠veis para sa√≠da:",t),[]}}async buscarItensEstoque(e,t){if(console.log("üîç EstoqueItensAdapter: Buscando itens de estoque",e,t),!e||e.length<2)return[];try{const a={search:e,limit:20,status:"DISPONIVEL",almoxarifado_id:t},l=(await this.listarItensEstoque(a)).data.map(r=>({value:r.id,label:`${r.tipo_epi.nome_equipamento} (${r.quantidade} dispon√≠vel)`,quantidade:r.quantidade,equipamento:r.tipo_epi.nome_equipamento,categoria:r.tipo_epi.categoria,numeroCA:r.tipo_epi.numero_ca,almoxarifado:r.almoxarifado.nome,almoxarifadoId:r.almoxarifado.id,quantidadeMaxima:r.quantidade,status:r.status,dataValidade:r.data_validade,lote:r.lote}));return console.log("‚úÖ Busca realizada, encontrados:",l.length),l}catch(a){return console.error("‚ùå Erro na busca de itens de estoque:",a),[]}}async obterItemEstoque(e){console.log("üîç EstoqueItensAdapter: Buscando item de estoque",e);try{const t=await me.get(`${this.baseEndpoint}/${e}`);return console.log("‚úÖ Item de estoque encontrado:",t.data.tipo_epi.nome_equipamento),t.data}catch(t){throw console.error("‚ùå Erro ao buscar item de estoque:",t),new Error("N√£o foi poss√≠vel encontrar o item de estoque")}}async validarQuantidadeDisponivel(e,t){console.log("‚úÖ EstoqueItensAdapter: Validando quantidade dispon√≠vel",e,t);try{const a=await this.obterItemEstoque(e);return a.status!=="DISPONIVEL"?{valido:!1,quantidadeDisponivel:a.quantidade,motivo:`Item n√£o est√° dispon√≠vel (status: ${a.status})`}:t>a.quantidade?{valido:!1,quantidadeDisponivel:a.quantidade,motivo:`Quantidade desejada (${t}) √© maior que a dispon√≠vel (${a.quantidade})`}:t<=0?{valido:!1,quantidadeDisponivel:a.quantidade,motivo:"Quantidade deve ser maior que zero"}:{valido:!0,quantidadeDisponivel:a.quantidade}}catch(a){return console.error("‚ùå Erro ao validar quantidade dispon√≠vel:",a),{valido:!1,quantidadeDisponivel:0,motivo:"Erro ao validar item de estoque"}}}async obterItensAgrupadosPorTipo(e){console.log("üìä EstoqueItensAdapter: Agrupando itens por tipo de EPI",e);try{const t=await this.listarItensEstoque({almoxarifado_id:e,status:"DISPONIVEL",limit:500}),a={};return t.data.forEach(o=>{const l=o.tipo_epi.id;a[l]||(a[l]={tipo_epi:o.tipo_epi,itens:[],quantidade_total:0}),a[l].itens.push(o),a[l].quantidade_total+=o.quantidade}),console.log("‚úÖ Itens agrupados por tipo:",Object.keys(a).length),a}catch(t){return console.error("‚ùå Erro ao agrupar itens por tipo:",t),{}}}async obterItensDisponiveisComCache(e){const a=Date.now(),o=this.itensDisponiveis[e];if(o&&a-o.timestamp<12e4)return console.log("üíæ EstoqueItensAdapter: Usando cache para itens dispon√≠veis"),o.data;const l=await this.obterItensDisponiveisParaSaida(e);return this.itensDisponiveis[e]={data:l,timestamp:a},l}limparCache(e){e?(delete this.itensDisponiveis[e],console.log("üóëÔ∏è EstoqueItensAdapter: Cache limpo para almoxarifado",e)):(this.itensDisponiveis={},console.log("üóëÔ∏è EstoqueItensAdapter: Cache completo limpo"))}clearCache(){this.limparCache()}async obterItensBaixoEstoque(e){console.log("‚ö†Ô∏è EstoqueItensAdapter: Buscando itens com baixo estoque");try{const a=(await this.listarItensEstoque({almoxarifado_id:e,status:"BAIXO",limit:100})).data.map(o=>({value:o.id,label:`${o.tipo_epi.nome_equipamento} - ${o.quantidade} restante`,quantidade:o.quantidade,equipamento:o.tipo_epi.nome_equipamento,categoria:o.tipo_epi.categoria,numeroCA:o.tipo_epi.numero_ca,almoxarifado:o.almoxarifado.nome,almoxarifadoId:o.almoxarifado.id,quantidadeMaxima:o.quantidade,status:o.status,dataValidade:o.data_validade,lote:o.lote}));return console.log("‚úÖ Itens com baixo estoque:",a.length),a}catch(t){return console.error("‚ùå Erro ao buscar itens com baixo estoque:",t),[]}}async verificarDisponibilidadeRealTime(e){console.log("üîÑ EstoqueItensAdapter: Verificando disponibilidade em tempo real");const t=await Promise.all(e.map(async a=>{try{const o=await this.validarQuantidadeDisponivel(a.itemId,a.quantidade);return{itemId:a.itemId,disponivel:o.valido,quantidadeAtual:o.quantidadeDisponivel,motivo:o.motivo}}catch{return{itemId:a.itemId,disponivel:!1,quantidadeAtual:0,motivo:"Erro ao verificar item"}}}));return console.log("‚úÖ Verifica√ß√£o conclu√≠da:",t.length),t}}const vt=new ho,$o=n=>({}),Pt=n=>({});function bo(n){let e,t,a,o,l;const r=n[15].filters,s=Nt(r,n,n[19],Pt),i=n[15].default,c=Nt(i,n,n[19],null);let u=n[7]&&n[9]>1&&Ot(n);return{c(){s&&s.c(),e=y(),t=D("div"),c&&c.c(),a=y(),u&&u.c(),o=le(),this.h()},l(_){s&&s.l(_),e=T(_),t=I(_,"DIV",{class:!0});var m=z(t);c&&c.l(m),m.forEach(d),a=T(_),u&&u.l(_),o=le(),this.h()},h(){O(t,"class","overflow-x-auto")},m(_,m){s&&s.m(_,m),b(_,e,m),b(_,t,m),c&&c.m(t,null),b(_,a,m),u&&u.m(_,m),b(_,o,m),l=!0},p(_,m){s&&s.p&&(!l||m&524288)&&It(s,r,_,_[19],l?qt(r,_[19],m,$o):Dt(_[19]),Pt),c&&c.p&&(!l||m&524288)&&It(c,i,_,_[19],l?qt(i,_[19],m,null):Dt(_[19]),null),_[7]&&_[9]>1?u?(u.p(_,m),m&640&&v(u,1)):(u=Ot(_),u.c(),v(u,1),u.m(o.parentNode,o)):u&&(ie(),k(u,1,1,()=>{u=null}),ce())},i(_){l||(v(s,_),v(c,_),v(u),l=!0)},o(_){k(s,_),k(c,_),k(u),l=!1},d(_){_&&(d(e),d(t),d(a),d(o)),s&&s.d(_),c&&c.d(_),u&&u.d(_)}}}function vo(n){let e,t,a,o,l,r,s,i,c,u=n[3]&&Ft(n),_=n[6]&&Vt(n);return{c(){e=D("div"),u&&u.c(),t=y(),a=D("h3"),o=P(n[4]),l=y(),r=D("p"),s=P(n[5]),i=y(),_&&_.c(),this.h()},l(m){e=I(m,"DIV",{class:!0});var w=z(e);u&&u.l(w),t=T(w),a=I(w,"H3",{class:!0});var $=z(a);o=S($,n[4]),$.forEach(d),l=T(w),r=I(w,"P",{class:!0});var E=z(r);s=S(E,n[5]),E.forEach(d),i=T(w),_&&_.l(w),w.forEach(d),this.h()},h(){O(a,"class","text-lg font-semibold text-gray-900 dark:text-white mb-2"),O(r,"class","text-gray-500 dark:text-gray-400 max-w-sm mx-auto mb-6"),O(e,"class","p-16 text-center")},m(m,w){b(m,e,w),u&&u.m(e,null),h(e,t),h(e,a),h(a,o),h(e,l),h(e,r),h(r,s),h(e,i),_&&_.m(e,null),c=!0},p(m,w){m[3]?u?(u.p(m,w),w&8&&v(u,1)):(u=Ft(m),u.c(),v(u,1),u.m(e,t)):u&&(ie(),k(u,1,1,()=>{u=null}),ce()),(!c||w&16)&&te(o,m[4]),(!c||w&32)&&te(s,m[5]),m[6]?_?(_.p(m,w),w&64&&v(_,1)):(_=Vt(m),_.c(),v(_,1),_.m(e,null)):_&&(ie(),k(_,1,1,()=>{_=null}),ce())},i(m){c||(v(u),v(_),c=!0)},o(m){k(u),k(_),c=!1},d(m){m&&d(e),u&&u.d(),_&&_.d()}}}function Eo(n){let e,t,a;return t=new Ya({props:{message:n[1]}}),{c(){e=D("div"),R(t.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0});var l=z(e);L(t.$$.fragment,l),l.forEach(d),this.h()},h(){O(e,"class","p-8")},m(o,l){b(o,e,l),V(t,e,null),a=!0},p(o,l){const r={};l&2&&(r.message=o[1]),t.$set(r)},i(o){a||(v(t.$$.fragment,o),a=!0)},o(o){k(t.$$.fragment,o),a=!1},d(o){o&&d(e),F(t)}}}function wo(n){let e,t,a;return t=new kt({}),{c(){e=D("div"),R(t.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0});var l=z(e);L(t.$$.fragment,l),l.forEach(d),this.h()},h(){O(e,"class","p-8")},m(o,l){b(o,e,l),V(t,e,null),a=!0},p:he,i(o){a||(v(t.$$.fragment,o),a=!0)},o(o){k(t.$$.fragment,o),a=!1},d(o){o&&d(e),F(t)}}}function Ot(n){let e,t,a,o,l,r,s,i,c,u,_,m,w,$,E;return m=new Ve({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:n[8]===1,$$slots:{default:[ko]},$$scope:{ctx:n}}}),m.$on("click",n[17]),$=new Ve({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:n[8]===n[9],$$slots:{default:[Co]},$$scope:{ctx:n}}}),$.$on("click",n[18]),{c(){e=D("div"),t=D("div"),a=P("Mostrando "),o=P(n[12]),l=P(" a "),r=P(n[11]),s=P(" de "),i=P(n[10]),c=P(" resultados"),u=y(),_=D("div"),R(m.$$.fragment),w=y(),R($.$$.fragment),this.h()},l(A){e=I(A,"DIV",{class:!0});var p=z(e);t=I(p,"DIV",{class:!0});var f=z(t);a=S(f,"Mostrando "),o=S(f,n[12]),l=S(f," a "),r=S(f,n[11]),s=S(f," de "),i=S(f,n[10]),c=S(f," resultados"),f.forEach(d),u=T(p),_=I(p,"DIV",{class:!0});var g=z(_);L(m.$$.fragment,g),w=T(g),L($.$$.fragment,g),g.forEach(d),p.forEach(d),this.h()},h(){O(t,"class","text-sm text-gray-600 dark:text-gray-400"),O(_,"class","flex gap-2"),O(e,"class","flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700")},m(A,p){b(A,e,p),h(e,t),h(t,a),h(t,o),h(t,l),h(t,r),h(t,s),h(t,i),h(t,c),h(e,u),h(e,_),V(m,_,null),h(_,w),V($,_,null),E=!0},p(A,p){(!E||p&4096)&&te(o,A[12]),(!E||p&2048)&&te(r,A[11]),(!E||p&1024)&&te(i,A[10]);const f={};p&256&&(f.disabled=A[8]===1),p&524288&&(f.$$scope={dirty:p,ctx:A}),m.$set(f);const g={};p&768&&(g.disabled=A[8]===A[9]),p&524288&&(g.$$scope={dirty:p,ctx:A}),$.$set(g)},i(A){E||(v(m.$$.fragment,A),v($.$$.fragment,A),E=!0)},o(A){k(m.$$.fragment,A),k($.$$.fragment,A),E=!1},d(A){A&&d(e),F(m),F($)}}}function ko(n){let e;return{c(){e=P("Anterior")},l(t){e=S(t,"Anterior")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Co(n){let e;return{c(){e=P("Pr√≥ximo")},l(t){e=S(t,"Pr√≥ximo")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Ft(n){let e,t,a;var o=n[3];function l(r,s){return{props:{class:"w-8 h-8 text-gray-400"}}}return o&&(t=Tt(o,l())),{c(){e=D("div"),t&&R(t.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var s=z(e);t&&L(t.$$.fragment,s),s.forEach(d),this.h()},h(){O(e,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center")},m(r,s){b(r,e,s),t&&V(t,e,null),a=!0},p(r,s){if(s&8&&o!==(o=r[3])){if(t){ie();const i=t;k(i.$$.fragment,1,0,()=>{F(i,1)}),ce()}o?(t=Tt(o,l()),R(t.$$.fragment),v(t.$$.fragment,1),V(t,e,null)):t=null}},i(r){a||(t&&v(t.$$.fragment,r),a=!0)},o(r){t&&k(t.$$.fragment,r),a=!1},d(r){r&&d(e),t&&F(t)}}}function Vt(n){let e,t;return e=new Ve({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[Ao]},$$scope:{ctx:n}}}),e.$on("click",n[16]),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o&524352&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Ao(n){let e;return{c(){e=P(n[6])},l(t){e=S(t,n[6])},m(t,a){b(t,e,a)},p(t,a){a&64&&te(e,t[6])},d(t){t&&d(e)}}}function No(n){let e,t,a,o;const l=[wo,Eo,vo,bo],r=[];function s(i,c){return i[0]?0:i[1]?1:i[2]?2:3}return t=s(n),a=r[t]=l[t](n),{c(){e=D("div"),a.c(),this.h()},l(i){e=I(i,"DIV",{class:!0});var c=z(e);a.l(c),c.forEach(d),this.h()},h(){O(e,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden")},m(i,c){b(i,e,c),r[t].m(e,null),o=!0},p(i,[c]){let u=t;t=s(i),t===u?r[t].p(i,c):(ie(),k(r[u],1,1,()=>{r[u]=null}),ce(),a=r[t],a?a.p(i,c):(a=r[t]=l[t](i),a.c()),v(a,1),a.m(e,null))},i(i){o||(v(a),o=!0)},o(i){k(a),o=!1},d(i){i&&d(e),r[t].d()}}}function Io(n,e,t){let a,o,{$$slots:l={},$$scope:r}=e,{loading:s=!1}=e,{error:i=null}=e,{isEmpty:c=!1}=e,{emptyIcon:u=null}=e,{emptyTitle:_="Nenhum item encontrado"}=e,{emptyMessage:m="N√£o h√° dados para exibir"}=e,{emptyActionLabel:w=""}=e,{showPagination:$=!1}=e,{currentPage:E=1}=e,{totalPages:A=1}=e,{pageSize:p=20}=e,{total:f=0}=e;const g=it(),q=()=>g("emptyAction"),H=()=>g("pageChange",{page:E-1}),U=()=>g("pageChange",{page:E+1});return n.$$set=N=>{"loading"in N&&t(0,s=N.loading),"error"in N&&t(1,i=N.error),"isEmpty"in N&&t(2,c=N.isEmpty),"emptyIcon"in N&&t(3,u=N.emptyIcon),"emptyTitle"in N&&t(4,_=N.emptyTitle),"emptyMessage"in N&&t(5,m=N.emptyMessage),"emptyActionLabel"in N&&t(6,w=N.emptyActionLabel),"showPagination"in N&&t(7,$=N.showPagination),"currentPage"in N&&t(8,E=N.currentPage),"totalPages"in N&&t(9,A=N.totalPages),"pageSize"in N&&t(14,p=N.pageSize),"total"in N&&t(10,f=N.total),"$$scope"in N&&t(19,r=N.$$scope)},n.$$.update=()=>{n.$$.dirty&16640&&t(12,a=(E-1)*p+1),n.$$.dirty&17664&&t(11,o=Math.min(E*p,f))},[s,i,c,u,_,m,w,$,E,A,f,o,a,g,p,l,q,H,U,r]}class Do extends Xe{constructor(e){super(),Ze(this,e,Io,No,Ye,{loading:0,error:1,isEmpty:2,emptyIcon:3,emptyTitle:4,emptyMessage:5,emptyActionLabel:6,showPagination:7,currentPage:8,totalPages:9,pageSize:14,total:10})}}function Rt(n,e,t){const a=n.slice();return a[15]=e[t],a}function Lt(n,e,t){const a=n.slice();return a[18]=e[t],a}function xt(n){let e,t;function a(...o){return n[12](n[18],...o)}return e=new so({props:{options:n[18].options,value:n[18].value,placeholder:n[18].placeholder,class:"min-w-[140px]"}}),e.$on("change",a),{c(){R(e.$$.fragment)},l(o){L(e.$$.fragment,o)},m(o,l){V(e,o,l),t=!0},p(o,l){n=o;const r={};l&4&&(r.options=n[18].options),l&4&&(r.value=n[18].value),l&4&&(r.placeholder=n[18].placeholder),e.$set(r)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){k(e.$$.fragment,o),t=!1},d(o){F(e,o)}}}function qo(n){let e=n[15].label+"",t;return{c(){t=P(e)},l(a){t=S(a,e)},m(a,o){b(a,t,o)},p(a,o){o&8&&e!==(e=a[15].label+"")&&te(t,e)},d(a){a&&d(t)}}}function zt(n){let e,t,a,o;function l(...r){return n[13](n[15],...r)}return t=new no({props:{checked:n[15].checked,class:"text-sm",$$slots:{default:[qo]},$$scope:{ctx:n}}}),t.$on("change",l),{c(){e=D("div"),R(t.$$.fragment),a=y(),this.h()},l(r){e=I(r,"DIV",{class:!0});var s=z(e);L(t.$$.fragment,s),a=T(s),s.forEach(d),this.h()},h(){O(e,"class","flex items-center")},m(r,s){b(r,e,s),V(t,e,null),h(e,a),o=!0},p(r,s){n=r;const i={};s&8&&(i.checked=n[15].checked),s&2097160&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(r){o||(v(t.$$.fragment,r),o=!0)},o(r){k(t.$$.fragment,r),o=!1},d(r){r&&d(e),F(t)}}}function Mt(n){let e,t,a,o,l;return t=new Va({props:{class:"w-4 h-4 text-gray-600 dark:text-gray-400"}}),{c(){e=D("button"),R(t.$$.fragment),this.h()},l(r){e=I(r,"BUTTON",{type:!0,class:!0,title:!0});var s=z(e);L(t.$$.fragment,s),s.forEach(d),this.h()},h(){O(e,"type","button"),O(e,"class","p-2 rounded-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors"),O(e,"title","Limpar filtros")},m(r,s){b(r,e,s),V(t,e,null),a=!0,o||(l=ot(e,"click",n[11]),o=!0)},p:he,i(r){a||(v(t.$$.fragment,r),a=!0)},o(r){k(t.$$.fragment,r),a=!1},d(r){r&&d(e),F(t),o=!1,l()}}}function To(n){let e,t,a,o,l,r,s,i,c,u,_,m,w,$,E,A,p,f,g=n[4]!==1?"s":"",q,H;o=new ro({props:{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}}),r=new ut({props:{type:"text",placeholder:n[1],class:"pl-10 rounded-sm h-10 text-sm",value:n[0]}}),r.$on("input",n[8]);let U=de(n[2]),N=[];for(let B=0;B<U.length;B+=1)N[B]=xt(Lt(n,U,B));const X=B=>k(N[B],1,1,()=>{N[B]=null});let Q=de(n[3]),C=[];for(let B=0;B<Q.length;B+=1)C[B]=zt(Rt(n,Q,B));const x=B=>k(C[B],1,1,()=>{C[B]=null});let J=n[7]&&Mt(n);return{c(){e=D("div"),t=D("div"),a=D("div"),R(o.$$.fragment),l=y(),R(r.$$.fragment),s=y();for(let B=0;B<N.length;B+=1)N[B].c();i=y();for(let B=0;B<C.length;B+=1)C[B].c();c=y(),J&&J.c(),u=y(),_=D("div"),m=D("div"),w=P(n[4]),$=P(" de "),E=P(n[5]),A=y(),p=P(n[6]),f=P(" encontrado"),q=P(g),this.h()},l(B){e=I(B,"DIV",{class:!0});var K=z(e);t=I(K,"DIV",{class:!0});var ae=z(t);a=I(ae,"DIV",{class:!0});var Y=z(a);L(o.$$.fragment,Y),l=T(Y),L(r.$$.fragment,Y),Y.forEach(d),s=T(ae);for(let ne=0;ne<N.length;ne+=1)N[ne].l(ae);i=T(ae);for(let ne=0;ne<C.length;ne+=1)C[ne].l(ae);c=T(ae),J&&J.l(ae),ae.forEach(d),u=T(K),_=I(K,"DIV",{class:!0});var $e=z(_);m=I($e,"DIV",{class:!0});var G=z(m);w=S(G,n[4]),$=S(G," de "),E=S(G,n[5]),A=T(G),p=S(G,n[6]),f=S(G," encontrado"),q=S(G,g),G.forEach(d),$e.forEach(d),K.forEach(d),this.h()},h(){O(a,"class","relative flex-1 max-w-md"),O(t,"class","flex items-center gap-4 flex-wrap"),O(m,"class","text-sm text-gray-600 dark:text-gray-400"),O(_,"class","mt-3 pt-3 border-t border-gray-200 dark:border-gray-700"),O(e,"class","p-4 border-b border-gray-200 dark:border-gray-700")},m(B,K){b(B,e,K),h(e,t),h(t,a),V(o,a,null),h(a,l),V(r,a,null),h(t,s);for(let ae=0;ae<N.length;ae+=1)N[ae]&&N[ae].m(t,null);h(t,i);for(let ae=0;ae<C.length;ae+=1)C[ae]&&C[ae].m(t,null);h(t,c),J&&J.m(t,null),h(e,u),h(e,_),h(_,m),h(m,w),h(m,$),h(m,E),h(m,A),h(m,p),h(m,f),h(m,q),H=!0},p(B,[K]){const ae={};if(K&2&&(ae.placeholder=B[1]),K&1&&(ae.value=B[0]),r.$set(ae),K&516){U=de(B[2]);let Y;for(Y=0;Y<U.length;Y+=1){const $e=Lt(B,U,Y);N[Y]?(N[Y].p($e,K),v(N[Y],1)):(N[Y]=xt($e),N[Y].c(),v(N[Y],1),N[Y].m(t,i))}for(ie(),Y=U.length;Y<N.length;Y+=1)X(Y);ce()}if(K&1032){Q=de(B[3]);let Y;for(Y=0;Y<Q.length;Y+=1){const $e=Rt(B,Q,Y);C[Y]?(C[Y].p($e,K),v(C[Y],1)):(C[Y]=zt($e),C[Y].c(),v(C[Y],1),C[Y].m(t,c))}for(ie(),Y=Q.length;Y<C.length;Y+=1)x(Y);ce()}B[7]?J?(J.p(B,K),K&128&&v(J,1)):(J=Mt(B),J.c(),v(J,1),J.m(t,null)):J&&(ie(),k(J,1,1,()=>{J=null}),ce()),(!H||K&16)&&te(w,B[4]),(!H||K&32)&&te(E,B[5]),(!H||K&64)&&te(p,B[6]),(!H||K&16)&&g!==(g=B[4]!==1?"s":"")&&te(q,g)},i(B){if(!H){v(o.$$.fragment,B),v(r.$$.fragment,B);for(let K=0;K<U.length;K+=1)v(N[K]);for(let K=0;K<Q.length;K+=1)v(C[K]);v(J),H=!0}},o(B){k(o.$$.fragment,B),k(r.$$.fragment,B),N=N.filter(Boolean);for(let K=0;K<N.length;K+=1)k(N[K]);C=C.filter(Boolean);for(let K=0;K<C.length;K+=1)k(C[K]);k(J),H=!1},d(B){B&&d(e),F(o),F(r),He(N,B),He(C,B),J&&J.d()}}}function yo(n,e,t){let{searchValue:a=""}=e,{searchPlaceholder:o="Buscar..."}=e,{filters:l=[]}=e,{checkboxFilters:r=[]}=e,{resultCount:s=0}=e,{totalCount:i=0}=e,{resultLabel:c="resultados"}=e,{showClearButton:u=!1}=e;const _=it();function m(f){const g=f.target.value;_("searchChange",{value:g})}function w(f,g){_("filterChange",{key:f,value:g})}function $(f,g){_("checkboxChange",{key:f,checked:g})}function E(){_("clearFilters")}const A=(f,g)=>w(f.key,g.detail),p=(f,g)=>$(f.key,g.target.checked);return n.$$set=f=>{"searchValue"in f&&t(0,a=f.searchValue),"searchPlaceholder"in f&&t(1,o=f.searchPlaceholder),"filters"in f&&t(2,l=f.filters),"checkboxFilters"in f&&t(3,r=f.checkboxFilters),"resultCount"in f&&t(4,s=f.resultCount),"totalCount"in f&&t(5,i=f.totalCount),"resultLabel"in f&&t(6,c=f.resultLabel),"showClearButton"in f&&t(7,u=f.showClearButton)},[a,o,l,r,s,i,c,u,m,w,$,E,A,p]}class So extends Xe{constructor(e){super(),Ze(this,e,yo,To,Ye,{searchValue:0,searchPlaceholder:1,filters:2,checkboxFilters:3,resultCount:4,totalCount:5,resultLabel:6,showClearButton:7})}}function ct(n){return{ENTRADA:"Entrada",TRANSFERENCIA:"Transfer√™ncia",DESCARTE:"Descarte",ENTRADA_AJUSTE:"Entrada (Ajuste)",SAIDA_AJUSTE:"Sa√≠da (Ajuste)"}[n]||n}function Ut(n){return{RASCUNHO:"Rascunho",CONCLUIDA:"Conclu√≠da",CANCELADA:"Cancelada"}[n]||n}function Bt(n){return{RASCUNHO:"yellow",CONCLUIDA:"green",CANCELADA:"red"}[n]||"dark"}const{Boolean:Qa}=fo;function jt(n,e,t){const a=n.slice();return a[38]=e[t],a}function Ht(n,e,t){const a=n.slice();return a[41]=e[t],a}function Qt(n,e,t){const a=n.slice();return a[44]=e[t],a[46]=t,a}function Po(n){let e,t,a;return e=new Ct({props:{class:"w-4 h-4 mr-2"}}),{c(){R(e.$$.fragment),t=P(`
        Nova Nota`)},l(o){L(e.$$.fragment,o),t=S(o,`
        Nova Nota`)},m(o,l){V(e,o,l),b(o,t,l),a=!0},p:he,i(o){a||(v(e.$$.fragment,o),a=!0)},o(o){k(e.$$.fragment,o),a=!1},d(o){o&&d(t),F(e,o)}}}function Jt(n){let e,t;return e=new wt({props:{color:"gray",class:"rounded-sm text-xs",$$slots:{default:[Oo]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&8|o[1]&65536&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Oo(n){let e=n[3].total+"",t;return{c(){t=P(e)},l(a){t=S(a,e)},m(a,o){b(a,t,o)},p(a,o){o[0]&8&&e!==(e=a[3].total+"")&&te(t,e)},d(a){a&&d(t)}}}function Wt(n){let e,t,a,o=n[44].label+"",l,r,s,i,c,u,_,m=n[4].activeTab===n[46]&&n[3].total>0&&Jt(n);function w(){return n[20](n[46])}return{c(){e=D("button"),t=D("span"),a=D("span"),l=P(o),r=y(),m&&m.c(),s=y(),this.h()},l($){e=I($,"BUTTON",{class:!0});var E=z(e);t=I(E,"SPAN",{class:!0});var A=z(t);a=I(A,"SPAN",{});var p=z(a);l=S(p,o),p.forEach(d),r=T(A),m&&m.l(A),A.forEach(d),s=T(E),E.forEach(d),this.h()},h(){O(t,"class","flex items-center space-x-2"),O(e,"class",i="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm focus:outline-none transition-colors duration-200 -mb-px "+(n[4].activeTab===n[46]?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"))},m($,E){b($,e,E),h(e,t),h(t,a),h(a,l),h(t,r),m&&m.m(t,null),h(e,s),c=!0,u||(_=ot(e,"click",w),u=!0)},p($,E){n=$,n[4].activeTab===n[46]&&n[3].total>0?m?(m.p(n,E),E[0]&24&&v(m,1)):(m=Jt(n),m.c(),v(m,1),m.m(t,null)):m&&(ie(),k(m,1,1,()=>{m=null}),ce()),(!c||E[0]&16&&i!==(i="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm focus:outline-none transition-colors duration-200 -mb-px "+(n[4].activeTab===n[46]?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600")))&&O(e,"class",i)},i($){c||(v(m),c=!0)},o($){k(m),c=!1},d($){$&&d(e),m&&m.d(),u=!1,_()}}}function Fo(n){let e,t;return e=new Ma({props:{size:"sm",class:"rounded-sm",$$slots:{default:[zo]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&16|o[1]&65536&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Vo(n){let e,t;return e=new Do({props:{loading:n[1],error:n[2],isEmpty:n[0].length===0,$$slots:{filters:[$l],default:[hl]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&2&&(l.loading=a[1]),o[0]&4&&(l.error=a[2]),o[0]&1&&(l.isEmpty=a[0].length===0),o[0]&121|o[1]&65536&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Ro(n){let e,t;return e=new Ma({props:{size:"sm",class:"rounded-sm",$$slots:{default:[vl]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&12|o[1]&65536&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Lo(n){let e,t;return e=new kt({}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p:he,i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function xo(n){let e,t,a;return e=new Ct({props:{class:"w-4 h-4 mr-2"}}),{c(){R(e.$$.fragment),t=P(`
          Nova Nota`)},l(o){L(e.$$.fragment,o),t=S(o,`
          Nova Nota`)},m(o,l){V(e,o,l),b(o,t,l),a=!0},p:he,i(o){a||(v(e.$$.fragment,o),a=!0)},o(o){k(e.$$.fragment,o),a=!1},d(o){o&&d(t),F(e,o)}}}function zo(n){let e,t,a,o,l,r="Nenhuma nota encontrada",s,i,c=n[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece criando uma nova nota de movimenta√ß√£o",u,_,m,w;return a=new Ba({props:{class:"w-8 h-8 text-gray-400"}}),m=new Ve({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[xo]},$$scope:{ctx:n}}}),m.$on("click",n[12]),{c(){e=D("div"),t=D("div"),R(a.$$.fragment),o=y(),l=D("h3"),l.textContent=r,s=y(),i=D("p"),u=P(c),_=y(),R(m.$$.fragment),this.h()},l($){e=I($,"DIV",{class:!0});var E=z(e);t=I(E,"DIV",{class:!0});var A=z(t);L(a.$$.fragment,A),A.forEach(d),o=T(E),l=I(E,"H3",{class:!0,"data-svelte-h":!0}),be(l)!=="svelte-1a1xvm"&&(l.textContent=r),s=T(E),i=I(E,"P",{class:!0});var p=z(i);u=S(p,c),p.forEach(d),_=T(E),L(m.$$.fragment,E),E.forEach(d),this.h()},h(){O(t,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"),O(l,"class","text-lg font-medium text-gray-900 dark:text-white mb-2"),O(i,"class","text-gray-500 dark:text-gray-400 mb-6"),O(e,"class","text-center py-12")},m($,E){b($,e,E),h(e,t),V(a,t,null),h(e,o),h(e,l),h(e,s),h(e,i),h(i,u),h(e,_),V(m,e,null),w=!0},p($,E){(!w||E[0]&16)&&c!==(c=$[4].hasActiveFilters?"Tente ajustar os filtros ou termo de busca":"Comece criando uma nova nota de movimenta√ß√£o")&&te(u,c);const A={};E[1]&65536&&(A.$$scope={dirty:E,ctx:$}),m.$set(A)},i($){w||(v(a.$$.fragment,$),v(m.$$.fragment,$),w=!0)},o($){k(a.$$.fragment,$),k(m.$$.fragment,$),w=!1},d($){$&&d(e),F(a),F(m)}}}function Mo(n){let e;return{c(){e=P("N√∫mero/Tipo")},l(t){e=S(t,"N√∫mero/Tipo")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Uo(n){let e;return{c(){e=P("Data")},l(t){e=S(t,"Data")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Bo(n){let e;return{c(){e=P("Respons√°vel")},l(t){e=S(t,"Respons√°vel")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function jo(n){let e;return{c(){e=P("Almoxarifado")},l(t){e=S(t,"Almoxarifado")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Ho(n){let e;return{c(){e=P("Status")},l(t){e=S(t,"Status")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Qo(n){let e;return{c(){e=P("Qtd. Itens")},l(t){e=S(t,"Qtd. Itens")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Jo(n){let e;return{c(){e=P("Valor Total")},l(t){e=S(t,"Valor Total")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Wo(n){let e;return{c(){e=P("A√ß√µes")},l(t){e=S(t,"A√ß√µes")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Go(n){let e,t,a,o,l,r,s,i,c,u,_,m,w,$,E,A;return e=new De({props:{$$slots:{default:[Mo]},$$scope:{ctx:n}}}),a=new De({props:{$$slots:{default:[Uo]},$$scope:{ctx:n}}}),l=new De({props:{$$slots:{default:[Bo]},$$scope:{ctx:n}}}),s=new De({props:{$$slots:{default:[jo]},$$scope:{ctx:n}}}),c=new De({props:{$$slots:{default:[Ho]},$$scope:{ctx:n}}}),_=new De({props:{$$slots:{default:[Qo]},$$scope:{ctx:n}}}),w=new De({props:{$$slots:{default:[Jo]},$$scope:{ctx:n}}}),E=new De({props:{$$slots:{default:[Wo]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment),t=y(),R(a.$$.fragment),o=y(),R(l.$$.fragment),r=y(),R(s.$$.fragment),i=y(),R(c.$$.fragment),u=y(),R(_.$$.fragment),m=y(),R(w.$$.fragment),$=y(),R(E.$$.fragment)},l(p){L(e.$$.fragment,p),t=T(p),L(a.$$.fragment,p),o=T(p),L(l.$$.fragment,p),r=T(p),L(s.$$.fragment,p),i=T(p),L(c.$$.fragment,p),u=T(p),L(_.$$.fragment,p),m=T(p),L(w.$$.fragment,p),$=T(p),L(E.$$.fragment,p)},m(p,f){V(e,p,f),b(p,t,f),V(a,p,f),b(p,o,f),V(l,p,f),b(p,r,f),V(s,p,f),b(p,i,f),V(c,p,f),b(p,u,f),V(_,p,f),b(p,m,f),V(w,p,f),b(p,$,f),V(E,p,f),A=!0},p(p,f){const g={};f[1]&65536&&(g.$$scope={dirty:f,ctx:p}),e.$set(g);const q={};f[1]&65536&&(q.$$scope={dirty:f,ctx:p}),a.$set(q);const H={};f[1]&65536&&(H.$$scope={dirty:f,ctx:p}),l.$set(H);const U={};f[1]&65536&&(U.$$scope={dirty:f,ctx:p}),s.$set(U);const N={};f[1]&65536&&(N.$$scope={dirty:f,ctx:p}),c.$set(N);const X={};f[1]&65536&&(X.$$scope={dirty:f,ctx:p}),_.$set(X);const Q={};f[1]&65536&&(Q.$$scope={dirty:f,ctx:p}),w.$set(Q);const C={};f[1]&65536&&(C.$$scope={dirty:f,ctx:p}),E.$set(C)},i(p){A||(v(e.$$.fragment,p),v(a.$$.fragment,p),v(l.$$.fragment,p),v(s.$$.fragment,p),v(c.$$.fragment,p),v(_.$$.fragment,p),v(w.$$.fragment,p),v(E.$$.fragment,p),A=!0)},o(p){k(e.$$.fragment,p),k(a.$$.fragment,p),k(l.$$.fragment,p),k(s.$$.fragment,p),k(c.$$.fragment,p),k(_.$$.fragment,p),k(w.$$.fragment,p),k(E.$$.fragment,p),A=!1},d(p){p&&(d(t),d(o),d(r),d(i),d(u),d(m),d($)),F(e,p),F(a,p),F(l,p),F(s,p),F(c,p),F(_,p),F(w,p),F(E,p)}}}function Ko(n){let e,t,a=(n[38].numero||`#${n[38].id.slice(0,8)}`)+"",o,l,r,s=ct(n[38].tipo)+"",i;return{c(){e=D("div"),t=D("span"),o=P(a),l=y(),r=D("span"),i=P(s),this.h()},l(c){e=I(c,"DIV",{class:!0});var u=z(e);t=I(u,"SPAN",{class:!0});var _=z(t);o=S(_,a),_.forEach(d),l=T(u),r=I(u,"SPAN",{class:!0});var m=z(r);i=S(m,s),m.forEach(d),u.forEach(d),this.h()},h(){O(t,"class","font-medium text-gray-900 dark:text-white"),O(r,"class","text-sm text-gray-500 dark:text-gray-400"),O(e,"class","flex flex-col")},m(c,u){b(c,e,u),h(e,t),h(t,o),h(e,l),h(e,r),h(r,i)},p(c,u){u[0]&1&&a!==(a=(c[38].numero||`#${c[38].id.slice(0,8)}`)+"")&&te(o,a),u[0]&1&&s!==(s=ct(c[38].tipo)+"")&&te(i,s)},d(c){c&&d(e)}}}function Xo(n){let e,t=St(n[38].data_documento)+"",a;return{c(){e=D("span"),a=P(t),this.h()},l(o){e=I(o,"SPAN",{class:!0});var l=z(e);a=S(l,t),l.forEach(d),this.h()},h(){O(e,"class","text-sm")},m(o,l){b(o,e,l),h(e,a)},p(o,l){l[0]&1&&t!==(t=St(o[38].data_documento)+"")&&te(a,t)},d(o){o&&d(e)}}}function Zo(n){let e,t=(n[38].responsavel_nome||"N/A")+"",a;return{c(){e=D("span"),a=P(t),this.h()},l(o){e=I(o,"SPAN",{class:!0});var l=z(e);a=S(l,t),l.forEach(d),this.h()},h(){O(e,"class","text-sm")},m(o,l){b(o,e,l),h(e,a)},p(o,l){l[0]&1&&t!==(t=(o[38].responsavel_nome||"N/A")+"")&&te(a,t)},d(o){o&&d(e)}}}function Gt(n){let e,t,a=n[38].almoxarifado_destino_nome+"",o;return{c(){e=D("span"),t=P("‚Üí "),o=P(a),this.h()},l(l){e=I(l,"SPAN",{class:!0});var r=z(e);t=S(r,"‚Üí "),o=S(r,a),r.forEach(d),this.h()},h(){O(e,"class","text-xs text-gray-500")},m(l,r){b(l,e,r),h(e,t),h(e,o)},p(l,r){r[0]&1&&a!==(a=l[38].almoxarifado_destino_nome+"")&&te(o,a)},d(l){l&&d(e)}}}function Yo(n){let e,t,a=(n[38].almoxarifado_nome||"N/A")+"",o,l,r=n[38].almoxarifado_destino_nome&&n[38].tipo==="TRANSFERENCIA"&&Gt(n);return{c(){e=D("div"),t=D("span"),o=P(a),l=y(),r&&r.c(),this.h()},l(s){e=I(s,"DIV",{class:!0});var i=z(e);t=I(i,"SPAN",{class:!0});var c=z(t);o=S(c,a),c.forEach(d),l=T(i),r&&r.l(i),i.forEach(d),this.h()},h(){O(t,"class","text-sm"),O(e,"class","flex flex-col")},m(s,i){b(s,e,i),h(e,t),h(t,o),h(e,l),r&&r.m(e,null)},p(s,i){i[0]&1&&a!==(a=(s[38].almoxarifado_nome||"N/A")+"")&&te(o,a),s[38].almoxarifado_destino_nome&&s[38].tipo==="TRANSFERENCIA"?r?r.p(s,i):(r=Gt(s),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(s){s&&d(e),r&&r.d()}}}function el(n){let e=Ut(n[38].status)+"",t;return{c(){t=P(e)},l(a){t=S(a,e)},m(a,o){b(a,t,o)},p(a,o){o[0]&1&&e!==(e=Ut(a[38].status)+"")&&te(t,e)},d(a){a&&d(t)}}}function tl(n){let e,t;return e=new wt({props:{color:Bt(n[38].status),class:"w-fit rounded-sm",$$slots:{default:[el]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&1&&(l.color=Bt(a[38].status)),o[0]&1|o[1]&65536&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function al(n){var m,w;let e,t,a,o,l=(n[38].total_itens||((m=n[38].itens)==null?void 0:m.length)||0)+"",r,s,i,c=(n[38].total_itens||((w=n[38].itens)==null?void 0:w.length)||0)===1?"item":"itens",u,_;return t=new Ba({props:{class:"w-4 h-4 text-gray-400"}}),{c(){e=D("div"),R(t.$$.fragment),a=y(),o=D("span"),r=P(l),s=y(),i=D("span"),u=P(c),this.h()},l($){e=I($,"DIV",{class:!0});var E=z(e);L(t.$$.fragment,E),a=T(E),o=I(E,"SPAN",{class:!0});var A=z(o);r=S(A,l),A.forEach(d),s=T(E),i=I(E,"SPAN",{class:!0});var p=z(i);u=S(p,c),p.forEach(d),E.forEach(d),this.h()},h(){O(o,"class","text-sm font-medium"),O(i,"class","text-xs text-gray-500"),O(e,"class","flex items-center space-x-2")},m($,E){b($,e,E),V(t,e,null),h(e,a),h(e,o),h(o,r),h(e,s),h(e,i),h(i,u),_=!0},p($,E){var A,p;(!_||E[0]&1)&&l!==(l=($[38].total_itens||((A=$[38].itens)==null?void 0:A.length)||0)+"")&&te(r,l),(!_||E[0]&1)&&c!==(c=($[38].total_itens||((p=$[38].itens)==null?void 0:p.length)||0)===1?"item":"itens")&&te(u,c)},i($){_||(v(t.$$.fragment,$),_=!0)},o($){k(t.$$.fragment,$),_=!1},d($){$&&d(e),F(t)}}}function ol(n){let e,t="‚Äî";return{c(){e=D("span"),e.textContent=t,this.h()},l(a){e=I(a,"SPAN",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-1vb707v"&&(e.textContent=t),this.h()},h(){O(e,"class","text-sm text-gray-400")},m(a,o){b(a,e,o)},p:he,d(a){a&&d(e)}}}function ll(n){var _;let e,t,a,o=n[38].valor_total.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l,r,s,i,c=(n[38].valor_total/(n[38].total_itens||((_=n[38].itens)==null?void 0:_.length)||1)).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})+"",u;return{c(){e=D("div"),t=D("span"),a=P("R$ "),l=P(o),r=y(),s=D("span"),i=P("M√©dio: R$ "),u=P(c),this.h()},l(m){e=I(m,"DIV",{class:!0});var w=z(e);t=I(w,"SPAN",{class:!0});var $=z(t);a=S($,"R$ "),l=S($,o),$.forEach(d),r=T(w),s=I(w,"SPAN",{class:!0});var E=z(s);i=S(E,"M√©dio: R$ "),u=S(E,c),E.forEach(d),w.forEach(d),this.h()},h(){O(t,"class","text-sm font-medium text-green-600 dark:text-green-400"),O(s,"class","text-xs text-gray-500"),O(e,"class","flex flex-col")},m(m,w){b(m,e,w),h(e,t),h(t,a),h(t,l),h(e,r),h(e,s),h(s,i),h(s,u)},p(m,w){var $;w[0]&1&&o!==(o=m[38].valor_total.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&te(l,o),w[0]&1&&c!==(c=(m[38].valor_total/(m[38].total_itens||(($=m[38].itens)==null?void 0:$.length)||1)).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&te(u,c)},d(m){m&&d(e)}}}function nl(n){let e;function t(l,r){return l[38].valor_total&&l[38].valor_total>0?ll:ol}let a=t(n),o=a(n);return{c(){o.c(),e=le()},l(l){o.l(l),e=le()},m(l,r){o.m(l,r),b(l,e,r)},p(l,r){a===(a=t(l))&&o?o.p(l,r):(o.d(1),o=a(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&d(e),o.d(l)}}}function rl(n){let e,t,a,o,l,r,s;t=new Ua({props:{class:"w-4 h-4"}});function i(...c){return n[27](n[38],...c)}return{c(){e=D("button"),R(t.$$.fragment),a=y(),this.h()},l(c){e=I(c,"BUTTON",{class:!0,title:!0});var u=z(e);L(t.$$.fragment,u),a=T(u),u.forEach(d),this.h()},h(){O(e,"class","p-2 rounded-sm text-orange-500 dark:text-orange-400 hover:bg-orange-100 dark:hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-200 dark:focus:ring-orange-700 transition-colors"),O(e,"title",o=Qe("cancel",n[38]))},m(c,u){b(c,e,u),V(t,e,null),h(e,a),l=!0,r||(s=ot(e,"click",i),r=!0)},p(c,u){n=c,(!l||u[0]&1&&o!==(o=Qe("cancel",n[38])))&&O(e,"title",o)},i(c){l||(v(t.$$.fragment,c),l=!0)},o(c){k(t.$$.fragment,c),l=!1},d(c){c&&d(e),F(t),r=!1,s()}}}function sl(n){let e,t,a,o,l,r,s;t=new ao({props:{class:"w-4 h-4"}});function i(...c){return n[26](n[38],...c)}return{c(){e=D("button"),R(t.$$.fragment),a=y(),this.h()},l(c){e=I(c,"BUTTON",{class:!0,title:!0});var u=z(e);L(t.$$.fragment,u),a=T(u),u.forEach(d),this.h()},h(){O(e,"class","p-2 rounded-sm text-green-500 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-200 dark:focus:ring-green-700 transition-colors"),O(e,"title",o=Qe("conclude",n[38]))},m(c,u){b(c,e,u),V(t,e,null),h(e,a),l=!0,r||(s=ot(e,"click",i),r=!0)},p(c,u){n=c,(!l||u[0]&1&&o!==(o=Qe("conclude",n[38])))&&O(e,"title",o)},i(c){l||(v(t.$$.fragment,c),l=!0)},o(c){k(t.$$.fragment,c),l=!1},d(c){c&&d(e),F(t),r=!1,s()}}}function il(n){let e,t,a,o,l,r,s;t=new ja({props:{class:"w-4 h-4"}});function i(...c){return n[25](n[38],...c)}return{c(){e=D("button"),R(t.$$.fragment),a=y(),this.h()},l(c){e=I(c,"BUTTON",{class:!0,title:!0});var u=z(e);L(t.$$.fragment,u),a=T(u),u.forEach(d),this.h()},h(){O(e,"class","p-2 rounded-sm text-red-500 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-200 dark:focus:ring-red-700 transition-colors"),O(e,"title",o=Qe("delete",n[38]))},m(c,u){b(c,e,u),V(t,e,null),h(e,a),l=!0,r||(s=ot(e,"click",i),r=!0)},p(c,u){n=c,(!l||u[0]&1&&o!==(o=Qe("delete",n[38])))&&O(e,"title",o)},i(c){l||(v(t.$$.fragment,c),l=!0)},o(c){k(t.$$.fragment,c),l=!1},d(c){c&&d(e),F(t),r=!1,s()}}}function cl(n){let e,t,a,o,l,r,s;t=new lo({props:{class:"w-4 h-4"}});function i(...c){return n[24](n[38],...c)}return{c(){e=D("button"),R(t.$$.fragment),a=y(),this.h()},l(c){e=I(c,"BUTTON",{class:!0,title:!0});var u=z(e);L(t.$$.fragment,u),a=T(u),u.forEach(d),this.h()},h(){O(e,"class","p-2 rounded-sm text-blue-500 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-700 transition-colors"),O(e,"title",o=Qe("edit",n[38]))},m(c,u){b(c,e,u),V(t,e,null),h(e,a),l=!0,r||(s=ot(e,"click",i),r=!0)},p(c,u){n=c,(!l||u[0]&1&&o!==(o=Qe("edit",n[38])))&&O(e,"title",o)},i(c){l||(v(t.$$.fragment,c),l=!0)},o(c){k(t.$$.fragment,c),l=!1},d(c){c&&d(e),F(t),r=!1,s()}}}function ul(n){let e,t,a,o,l,r,s;t=new oo({props:{class:"w-4 h-4"}});function i(...c){return n[23](n[38],...c)}return{c(){e=D("button"),R(t.$$.fragment),a=y(),this.h()},l(c){e=I(c,"BUTTON",{class:!0,title:!0});var u=z(e);L(t.$$.fragment,u),a=T(u),u.forEach(d),this.h()},h(){O(e,"class","p-2 rounded-sm text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-700 transition-colors"),O(e,"title",o=Qe("view",n[38]))},m(c,u){b(c,e,u),V(t,e,null),h(e,a),l=!0,r||(s=ot(e,"click",i),r=!0)},p(c,u){n=c,(!l||u[0]&1&&o!==(o=Qe("view",n[38])))&&O(e,"title",o)},i(c){l||(v(t.$$.fragment,c),l=!0)},o(c){k(t.$$.fragment,c),l=!1},d(c){c&&d(e),F(t),r=!1,s()}}}function Kt(n){let e,t,a,o;const l=[ul,cl,il,sl,rl],r=[];function s(i,c){return i[41]==="view"?0:i[41]==="edit"?1:i[41]==="delete"?2:i[41]==="conclude"?3:i[41]==="cancel"?4:-1}return~(e=s(n))&&(t=r[e]=l[e](n)),{c(){t&&t.c(),a=le()},l(i){t&&t.l(i),a=le()},m(i,c){~e&&r[e].m(i,c),b(i,a,c),o=!0},p(i,c){let u=e;e=s(i),e===u?~e&&r[e].p(i,c):(t&&(ie(),k(r[u],1,1,()=>{r[u]=null}),ce()),~e?(t=r[e],t?t.p(i,c):(t=r[e]=l[e](i),t.c()),v(t,1),t.m(a.parentNode,a)):t=null)},i(i){o||(v(t),o=!0)},o(i){k(t),o=!1},d(i){i&&d(a),~e&&r[e].d(i)}}}function fl(n){let e,t,a=de(Yt(n[38])),o=[];for(let r=0;r<a.length;r+=1)o[r]=Kt(Ht(n,a,r));const l=r=>k(o[r],1,1,()=>{o[r]=null});return{c(){e=D("div");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=I(r,"DIV",{class:!0});var s=z(e);for(let i=0;i<o.length;i+=1)o[i].l(s);s.forEach(d),this.h()},h(){O(e,"class","flex space-x-1")},m(r,s){b(r,e,s);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(e,null);t=!0},p(r,s){if(s[0]&253953){a=de(Yt(r[38]));let i;for(i=0;i<a.length;i+=1){const c=Ht(r,a,i);o[i]?(o[i].p(c,s),v(o[i],1)):(o[i]=Kt(c),o[i].c(),v(o[i],1),o[i].m(e,null))}for(ie(),i=a.length;i<o.length;i+=1)l(i);ce()}},i(r){if(!t){for(let s=0;s<a.length;s+=1)v(o[s]);t=!0}},o(r){o=o.filter(Qa);for(let s=0;s<o.length;s+=1)k(o[s]);t=!1},d(r){r&&d(e),He(o,r)}}}function dl(n){let e,t,a,o,l,r,s,i,c,u,_,m,w,$,E,A,p;return e=new qe({props:{$$slots:{default:[Ko]},$$scope:{ctx:n}}}),a=new qe({props:{$$slots:{default:[Xo]},$$scope:{ctx:n}}}),l=new qe({props:{$$slots:{default:[Zo]},$$scope:{ctx:n}}}),s=new qe({props:{$$slots:{default:[Yo]},$$scope:{ctx:n}}}),c=new qe({props:{$$slots:{default:[tl]},$$scope:{ctx:n}}}),_=new qe({props:{$$slots:{default:[al]},$$scope:{ctx:n}}}),w=new qe({props:{$$slots:{default:[nl]},$$scope:{ctx:n}}}),E=new qe({props:{$$slots:{default:[fl]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment),t=y(),R(a.$$.fragment),o=y(),R(l.$$.fragment),r=y(),R(s.$$.fragment),i=y(),R(c.$$.fragment),u=y(),R(_.$$.fragment),m=y(),R(w.$$.fragment),$=y(),R(E.$$.fragment),A=y()},l(f){L(e.$$.fragment,f),t=T(f),L(a.$$.fragment,f),o=T(f),L(l.$$.fragment,f),r=T(f),L(s.$$.fragment,f),i=T(f),L(c.$$.fragment,f),u=T(f),L(_.$$.fragment,f),m=T(f),L(w.$$.fragment,f),$=T(f),L(E.$$.fragment,f),A=T(f)},m(f,g){V(e,f,g),b(f,t,g),V(a,f,g),b(f,o,g),V(l,f,g),b(f,r,g),V(s,f,g),b(f,i,g),V(c,f,g),b(f,u,g),V(_,f,g),b(f,m,g),V(w,f,g),b(f,$,g),V(E,f,g),b(f,A,g),p=!0},p(f,g){const q={};g[0]&1|g[1]&65536&&(q.$$scope={dirty:g,ctx:f}),e.$set(q);const H={};g[0]&1|g[1]&65536&&(H.$$scope={dirty:g,ctx:f}),a.$set(H);const U={};g[0]&1|g[1]&65536&&(U.$$scope={dirty:g,ctx:f}),l.$set(U);const N={};g[0]&1|g[1]&65536&&(N.$$scope={dirty:g,ctx:f}),s.$set(N);const X={};g[0]&1|g[1]&65536&&(X.$$scope={dirty:g,ctx:f}),c.$set(X);const Q={};g[0]&1|g[1]&65536&&(Q.$$scope={dirty:g,ctx:f}),_.$set(Q);const C={};g[0]&1|g[1]&65536&&(C.$$scope={dirty:g,ctx:f}),w.$set(C);const x={};g[0]&1|g[1]&65536&&(x.$$scope={dirty:g,ctx:f}),E.$set(x)},i(f){p||(v(e.$$.fragment,f),v(a.$$.fragment,f),v(l.$$.fragment,f),v(s.$$.fragment,f),v(c.$$.fragment,f),v(_.$$.fragment,f),v(w.$$.fragment,f),v(E.$$.fragment,f),p=!0)},o(f){k(e.$$.fragment,f),k(a.$$.fragment,f),k(l.$$.fragment,f),k(s.$$.fragment,f),k(c.$$.fragment,f),k(_.$$.fragment,f),k(w.$$.fragment,f),k(E.$$.fragment,f),p=!1},d(f){f&&(d(t),d(o),d(r),d(i),d(u),d(m),d($),d(A)),F(e,f),F(a,f),F(l,f),F(s,f),F(c,f),F(_,f),F(w,f),F(E,f)}}}function Xt(n,e){let t,a,o;function l(){return e[28](e[38])}return a=new za({props:{class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer",$$slots:{default:[dl]},$$scope:{ctx:e}}}),a.$on("click",l),{key:n,first:null,c(){t=le(),R(a.$$.fragment),this.h()},l(r){t=le(),L(a.$$.fragment,r),this.h()},h(){this.first=t},m(r,s){b(r,t,s),V(a,r,s),o=!0},p(r,s){e=r;const i={};s[0]&1|s[1]&65536&&(i.$$scope={dirty:s,ctx:e}),a.$set(i)},i(r){o||(v(a.$$.fragment,r),o=!0)},o(r){k(a.$$.fragment,r),o=!1},d(r){r&&d(t),F(a,r)}}}function ml(n){let e=[],t=new Map,a,o,l=de(n[0]);const r=s=>s[38].id;for(let s=0;s<l.length;s+=1){let i=jt(n,l,s),c=r(i);t.set(c,e[s]=Xt(c,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();a=le()},l(s){for(let i=0;i<e.length;i+=1)e[i].l(s);a=le()},m(s,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(s,i);b(s,a,i),o=!0},p(s,i){i[0]&253953&&(l=de(s[0]),ie(),e=Oa(e,i,r,1,s,l,t,a.parentNode,Fa,Xt,a,jt),ce())},i(s){if(!o){for(let i=0;i<l.length;i+=1)v(e[i]);o=!0}},o(s){for(let i=0;i<e.length;i+=1)k(e[i]);o=!1},d(s){s&&d(a);for(let i=0;i<e.length;i+=1)e[i].d(s)}}}function _l(n){let e,t,a,o;return e=new La({props:{$$slots:{default:[Go]},$$scope:{ctx:n}}}),a=new xa({props:{$$slots:{default:[ml]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment),t=y(),R(a.$$.fragment)},l(l){L(e.$$.fragment,l),t=T(l),L(a.$$.fragment,l)},m(l,r){V(e,l,r),b(l,t,r),V(a,l,r),o=!0},p(l,r){const s={};r[1]&65536&&(s.$$scope={dirty:r,ctx:l}),e.$set(s);const i={};r[0]&1|r[1]&65536&&(i.$$scope={dirty:r,ctx:l}),a.$set(i)},i(l){o||(v(e.$$.fragment,l),v(a.$$.fragment,l),o=!0)},o(l){k(e.$$.fragment,l),k(a.$$.fragment,l),o=!1},d(l){l&&d(t),F(e,l),F(a,l)}}}function Zt(n){let e,t,a,o=Math.min((n[3].currentPage-1)*n[3].pageSize+1,n[3].total)+"",l,r,s=Math.min(n[3].currentPage*n[3].pageSize,n[3].total)+"",i,c,u=n[3].total+"",_,m,w,$,E,A,p,f,g=n[3].currentPage+"",q,H,U=n[3].totalPages+"",N,X,Q,C;return E=new Ve({props:{color:"alternative",class:"rounded-sm",disabled:!n[3].hasPrev,$$slots:{default:[pl]},$$scope:{ctx:n}}}),E.$on("click",n[29]),Q=new Ve({props:{color:"alternative",class:"rounded-sm",disabled:!n[3].hasNext,$$slots:{default:[gl]},$$scope:{ctx:n}}}),Q.$on("click",n[30]),{c(){e=D("div"),t=D("div"),a=P("Mostrando "),l=P(o),r=P(" a "),i=P(s),c=P(" de "),_=P(u),m=P(" resultados"),w=y(),$=D("div"),R(E.$$.fragment),A=y(),p=D("span"),f=P("P√°gina "),q=P(g),H=P(" de "),N=P(U),X=y(),R(Q.$$.fragment),this.h()},l(x){e=I(x,"DIV",{class:!0});var J=z(e);t=I(J,"DIV",{class:!0});var B=z(t);a=S(B,"Mostrando "),l=S(B,o),r=S(B," a "),i=S(B,s),c=S(B," de "),_=S(B,u),m=S(B," resultados"),B.forEach(d),w=T(J),$=I(J,"DIV",{class:!0});var K=z($);L(E.$$.fragment,K),A=T(K),p=I(K,"SPAN",{class:!0});var ae=z(p);f=S(ae,"P√°gina "),q=S(ae,g),H=S(ae," de "),N=S(ae,U),ae.forEach(d),X=T(K),L(Q.$$.fragment,K),K.forEach(d),J.forEach(d),this.h()},h(){O(t,"class","text-sm text-gray-500 dark:text-gray-400"),O(p,"class","flex items-center px-3 text-sm text-gray-500 dark:text-gray-400"),O($,"class","flex space-x-2"),O(e,"class","flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700")},m(x,J){b(x,e,J),h(e,t),h(t,a),h(t,l),h(t,r),h(t,i),h(t,c),h(t,_),h(t,m),h(e,w),h(e,$),V(E,$,null),h($,A),h($,p),h(p,f),h(p,q),h(p,H),h(p,N),h($,X),V(Q,$,null),C=!0},p(x,J){(!C||J[0]&8)&&o!==(o=Math.min((x[3].currentPage-1)*x[3].pageSize+1,x[3].total)+"")&&te(l,o),(!C||J[0]&8)&&s!==(s=Math.min(x[3].currentPage*x[3].pageSize,x[3].total)+"")&&te(i,s),(!C||J[0]&8)&&u!==(u=x[3].total+"")&&te(_,u);const B={};J[0]&8&&(B.disabled=!x[3].hasPrev),J[1]&65536&&(B.$$scope={dirty:J,ctx:x}),E.$set(B),(!C||J[0]&8)&&g!==(g=x[3].currentPage+"")&&te(q,g),(!C||J[0]&8)&&U!==(U=x[3].totalPages+"")&&te(N,U);const K={};J[0]&8&&(K.disabled=!x[3].hasNext),J[1]&65536&&(K.$$scope={dirty:J,ctx:x}),Q.$set(K)},i(x){C||(v(E.$$.fragment,x),v(Q.$$.fragment,x),C=!0)},o(x){k(E.$$.fragment,x),k(Q.$$.fragment,x),C=!1},d(x){x&&d(e),F(E),F(Q)}}}function pl(n){let e;return{c(){e=P("Anterior")},l(t){e=S(t,"Anterior")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function gl(n){let e;return{c(){e=P("Pr√≥ximo")},l(t){e=S(t,"Pr√≥ximo")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function hl(n){let e,t,a,o,l;t=new Ra({props:{hoverable:!0,$$slots:{default:[_l]},$$scope:{ctx:n}}});let r=n[3].totalPages>1&&Zt(n);return{c(){e=D("div"),R(t.$$.fragment),a=y(),r&&r.c(),o=le(),this.h()},l(s){e=I(s,"DIV",{class:!0});var i=z(e);L(t.$$.fragment,i),i.forEach(d),a=T(s),r&&r.l(s),o=le(),this.h()},h(){O(e,"class","min-w-[1200px] overflow-x-auto")},m(s,i){b(s,e,i),V(t,e,null),b(s,a,i),r&&r.m(s,i),b(s,o,i),l=!0},p(s,i){const c={};i[0]&1|i[1]&65536&&(c.$$scope={dirty:i,ctx:s}),t.$set(c),s[3].totalPages>1?r?(r.p(s,i),i[0]&8&&v(r,1)):(r=Zt(s),r.c(),v(r,1),r.m(o.parentNode,o)):r&&(ie(),k(r,1,1,()=>{r=null}),ce())},i(s){l||(v(t.$$.fragment,s),v(r),l=!0)},o(s){k(t.$$.fragment,s),k(r),l=!1},d(s){s&&(d(e),d(a),d(o)),F(t),r&&r.d(s)}}}function $l(n){let e,t;return e=new So({props:{slot:"filters",searchValue:n[4].searchTerm,filters:n[6],dateFilters:n[5],resultCount:n[0].length,totalCount:n[3].total,hasActiveFilters:n[4].hasActiveFilters}}),e.$on("searchChange",n[22]),e.$on("filterChange",n[18]),e.$on("clearFilters",n[9]),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&16&&(l.searchValue=a[4].searchTerm),o[0]&64&&(l.filters=a[6]),o[0]&32&&(l.dateFilters=a[5]),o[0]&1&&(l.resultCount=a[0].length),o[0]&8&&(l.totalCount=a[3].total),o[0]&16&&(l.hasActiveFilters=a[4].hasActiveFilters),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function bl(n){let e,t,a;return e=new Va({props:{class:"w-4 h-4 mr-2"}}),{c(){R(e.$$.fragment),t=P(`
          Tentar novamente`)},l(o){L(e.$$.fragment,o),t=S(o,`
          Tentar novamente`)},m(o,l){V(e,o,l),b(o,t,l),a=!0},p:he,i(o){a||(v(e.$$.fragment,o),a=!0)},o(o){k(e.$$.fragment,o),a=!1},d(o){o&&d(t),F(e,o)}}}function vl(n){let e,t,a,o,l,r="Erro ao carregar dados",s,i,c,u,_,m;return a=new Ua({props:{class:"w-8 h-8 text-red-600 dark:text-red-400"}}),_=new Ve({props:{size:"sm",color:"red",class:"rounded-sm",$$slots:{default:[bl]},$$scope:{ctx:n}}}),_.$on("click",n[21]),{c(){e=D("div"),t=D("div"),R(a.$$.fragment),o=y(),l=D("h3"),l.textContent=r,s=y(),i=D("p"),c=P(n[2]),u=y(),R(_.$$.fragment),this.h()},l(w){e=I(w,"DIV",{class:!0});var $=z(e);t=I($,"DIV",{class:!0});var E=z(t);L(a.$$.fragment,E),E.forEach(d),o=T($),l=I($,"H3",{class:!0,"data-svelte-h":!0}),be(l)!=="svelte-aprdtf"&&(l.textContent=r),s=T($),i=I($,"P",{class:!0});var A=z(i);c=S(A,n[2]),A.forEach(d),u=T($),L(_.$$.fragment,$),$.forEach(d),this.h()},h(){O(t,"class","w-16 h-16 mx-auto mb-4 bg-red-100 dark:bg-red-800 rounded-full flex items-center justify-center"),O(l,"class","text-lg font-medium text-gray-900 dark:text-white mb-2"),O(i,"class","text-red-600 dark:text-red-400 mb-4"),O(e,"class","text-center py-8")},m(w,$){b(w,e,$),h(e,t),V(a,t,null),h(e,o),h(e,l),h(e,s),h(e,i),h(i,c),h(e,u),V(_,e,null),m=!0},p(w,$){(!m||$[0]&4)&&te(c,w[2]);const E={};$[1]&65536&&(E.$$scope={dirty:$,ctx:w}),_.$set(E)},i(w){m||(v(a.$$.fragment,w),v(_.$$.fragment,w),m=!0)},o(w){k(a.$$.fragment,w),k(_.$$.fragment,w),m=!1},d(w){w&&d(e),F(a),F(_)}}}function El(n){let e,t,a,o,l='<h1 class="text-xl font-medium text-gray-900 dark:text-white">Notas de Movimenta√ß√£o</h1> <p class="text-sm text-gray-600 dark:text-gray-400">Gerencie notas de entrada, transfer√™ncia e descarte de EPIs</p>',r,s,i,c,u,_,m,w,$,E;i=new Ve({props:{size:"sm",color:"primary",class:"rounded-sm",$$slots:{default:[Po]},$$scope:{ctx:n}}}),i.$on("click",n[12]);let A=de(n[8]),p=[];for(let U=0;U<A.length;U+=1)p[U]=Wt(Qt(n,A,U));const f=U=>k(p[U],1,1,()=>{p[U]=null}),g=[Lo,Ro,Vo,Fo],q=[];function H(U,N){return U[1]?0:U[2]?1:U[0].length>0?2:3}return w=H(n),$=q[w]=g[w](n),{c(){e=y(),t=D("div"),a=D("div"),o=D("div"),o.innerHTML=l,r=y(),s=D("div"),R(i.$$.fragment),c=y(),u=D("div"),_=D("nav");for(let U=0;U<p.length;U+=1)p[U].c();m=y(),$.c(),this.h()},l(U){Ga("svelte-17563br",document.head).forEach(d),e=T(U),t=I(U,"DIV",{class:!0});var X=z(t);a=I(X,"DIV",{class:!0});var Q=z(a);o=I(Q,"DIV",{"data-svelte-h":!0}),be(o)!=="svelte-1yas3jv"&&(o.innerHTML=l),r=T(Q),s=I(Q,"DIV",{class:!0});var C=z(s);L(i.$$.fragment,C),C.forEach(d),Q.forEach(d),c=T(X),u=I(X,"DIV",{class:!0});var x=z(u);_=I(x,"NAV",{class:!0,"aria-label":!0});var J=z(_);for(let B=0;B<p.length;B+=1)p[B].l(J);J.forEach(d),x.forEach(d),m=T(X),$.l(X),X.forEach(d),this.h()},h(){document.title="Notas de Movimenta√ß√£o - DataLife EPI",O(s,"class","flex space-x-2"),O(a,"class","flex items-center justify-between"),O(_,"class","flex space-x-4 px-4"),O(_,"aria-label","Tabs"),O(u,"class","border-b border-gray-200 dark:border-gray-700"),O(t,"class","space-y-6")},m(U,N){b(U,e,N),b(U,t,N),h(t,a),h(a,o),h(a,r),h(a,s),V(i,s,null),h(t,c),h(t,u),h(u,_);for(let X=0;X<p.length;X+=1)p[X]&&p[X].m(_,null);h(t,m),q[w].m(t,null),E=!0},p(U,N){const X={};if(N[1]&65536&&(X.$$scope={dirty:N,ctx:U}),i.$set(X),N[0]&1304){A=de(U[8]);let C;for(C=0;C<A.length;C+=1){const x=Qt(U,A,C);p[C]?(p[C].p(x,N),v(p[C],1)):(p[C]=Wt(x),p[C].c(),v(p[C],1),p[C].m(_,null))}for(ie(),C=A.length;C<p.length;C+=1)f(C);ce()}let Q=w;w=H(U),w===Q?q[w].p(U,N):(ie(),k(q[Q],1,1,()=>{q[Q]=null}),ce(),$=q[w],$?$.p(U,N):($=q[w]=g[w](U),$.c()),v($,1),$.m(t,null))},i(U){if(!E){v(i.$$.fragment,U);for(let N=0;N<A.length;N+=1)v(p[N]);v($),E=!0}},o(U){k(i.$$.fragment,U),p=p.filter(Qa);for(let N=0;N<p.length;N+=1)k(p[N]);k($),E=!1},d(U){U&&(d(e),d(t)),F(i),He(p,U),q[w].d()}}}function Yt(n){const e=["view"];switch(n.status){case"RASCUNHO":e.push("edit","delete","conclude");break;case"CONCLUIDA":e.push("cancel");break}return e}function Qe(n,e){var a,o;return{view:"Visualizar detalhes da nota",edit:"Editar nota (rascunho)",delete:"Excluir nota (rascunho)",conclude:`Concluir nota e processar ${e.total_itens||((a=e.itens)==null?void 0:a.length)||0} ${(e.total_itens||((o=e.itens)==null?void 0:o.length)||0)===1?"item":"itens"}`,cancel:"Cancelar nota (revers√≠vel)"}[n]||n}function wl(n,e,t){let a,o,{items:l=[]}=e,{loading:r=!1}=e,{error:s=null}=e,{pagination:i}=e,{filters:c}=e,{filterOptions:u}=e;const _=it(),m=[{label:"Conclu√≠das",count:0},{label:"Rascunhos",count:0},{label:"Canceladas",count:0}];function w(){_("clearFilters")}function $(G){_("tabChange",G.detail.activeTabValue)}function E(G){_("pageChange",G)}function A(){_("novaNota")}function p(G){_("editarNota",G)}function f(G){_("visualizarNota",G)}function g(G){_("excluirNota",G)}function q(G){_("concluirNota",G)}function H(G){_("cancelarNota",G)}function U(G){const{key:ne,value:ve}=G.detail;switch(ne){case"tipo":_("tipoFilterChange",ve);break;case"status":_("statusFilterChange",ve);break;case"responsavel":_("responsavelFilterChange",ve);break;case"almoxarifado":_("almoxarifadoFilterChange",ve);break;case"dataInicio":_("dataInicioChange",ve);break;case"dataFim":_("dataFimChange",ve);break}}const N=G=>$({detail:{activeTabValue:G}}),X=()=>E(i.currentPage),Q=G=>_("searchChange",G.detail),C=(G,ne)=>{ne.stopPropagation(),f(G)},x=(G,ne)=>{ne.stopPropagation(),p(G)},J=(G,ne)=>{ne.stopPropagation(),g(G)},B=(G,ne)=>{ne.stopPropagation(),q(G)},K=(G,ne)=>{ne.stopPropagation(),H(G)},ae=G=>f(G),Y=()=>E(i.currentPage-1),$e=()=>E(i.currentPage+1);return n.$$set=G=>{"items"in G&&t(0,l=G.items),"loading"in G&&t(1,r=G.loading),"error"in G&&t(2,s=G.error),"pagination"in G&&t(3,i=G.pagination),"filters"in G&&t(4,c=G.filters),"filterOptions"in G&&t(19,u=G.filterOptions)},n.$$.update=()=>{var G,ne,ve,Ne,W,re,oe,se,we;n.$$.dirty[0]&1&&l&&l.length>0&&console.log("üîç NotesTablePresenter: Dados recebidos",{quantidade:l.length,primeiraNota:{id:(G=l[0])==null?void 0:G.id,numero:(ne=l[0])==null?void 0:ne.numero,responsavel_nome:(ve=l[0])==null?void 0:ve.responsavel_nome,almoxarifado_nome:(Ne=l[0])==null?void 0:Ne.almoxarifado_nome,total_itens:(W=l[0])==null?void 0:W.total_itens,valor_total:(re=l[0])==null?void 0:re.valor_total,status:(oe=l[0])==null?void 0:oe.status,tipo:(se=l[0])==null?void 0:se.tipo,data_documento:(we=l[0])==null?void 0:we.data_documento}}),n.$$.dirty[0]&524304&&t(6,a=[{key:"tipo",value:c.tipoFilter,options:[{value:"todas",label:"Todos os Tipos"},...u.tipos],placeholder:"Tipo"},{key:"responsavel",value:c.responsavelFilter,options:u.responsaveis,placeholder:"Respons√°vel"},{key:"almoxarifado",value:c.almoxarifadoFilter,options:u.almoxarifados,placeholder:"Almoxarifado"}].filter(Boolean)),n.$$.dirty[0]&16&&t(5,o=[{key:"dataInicio",type:"date",value:c.dataInicioFilter,placeholder:"Data in√≠cio"},{key:"dataFim",type:"date",value:c.dataFimFilter,placeholder:"Data fim"}])},[l,r,s,i,c,o,a,_,m,w,$,E,A,p,f,g,q,H,U,u,N,X,Q,C,x,J,B,K,ae,Y,$e]}class kl extends Xe{constructor(e){super(),Ze(this,e,wl,El,Ye,{items:0,loading:1,error:2,pagination:3,filters:4,filterOptions:19},null,[-1,-1])}}function ea(n,e,t){const a=n.slice();return a[36]=e[t],a}function ta(n,e,t){const a=n.slice();return a[39]=e[t],a}function aa(n,e,t){const a=n.slice();return a[39]=e[t],a}function oa(n){let e,t=n[19]()+"",a,o,l=n[19]()===1?"item":"itens",r,s;return{c(){e=P("("),a=P(t),o=y(),r=P(l),s=P(")")},l(i){e=S(i,"("),a=S(i,t),o=T(i),r=S(i,l),s=S(i,")")},m(i,c){b(i,e,c),b(i,a,c),b(i,o,c),b(i,r,c),b(i,s,c)},p:he,d(i){i&&(d(e),d(a),d(o),d(r),d(s))}}}function la(n){let e,t,a=n[20]().toFixed(2)+"",o;return{c(){e=D("p"),t=P("Valor total: R$ "),o=P(a),this.h()},l(l){e=I(l,"P",{class:!0});var r=z(e);t=S(r,"Valor total: R$ "),o=S(r,a),r.forEach(d),this.h()},h(){O(e,"class","text-sm text-gray-500")},m(l,r){b(l,e,r),h(e,t),h(e,o)},p:he,d(l){l&&d(e)}}}function na(n){let e,t;return e=new Ve({props:{size:"sm",color:"primary",class:"rounded-sm",disabled:n[5]||n[9],$$slots:{default:[Cl]},$$scope:{ctx:n}}}),e.$on("click",n[14]),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&544&&(l.disabled=a[5]||a[9]),o[1]&8192&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Cl(n){let e,t,a;return e=new Ct({props:{class:"w-4 h-4 mr-2"}}),{c(){R(e.$$.fragment),t=P(`
        Adicionar Item`)},l(o){L(e.$$.fragment,o),t=S(o,`
        Adicionar Item`)},m(o,l){V(e,o,l),b(o,t,l),a=!0},p:he,i(o){a||(v(e.$$.fragment,o),a=!0)},o(o){k(e.$$.fragment,o),a=!1},d(o){o&&d(t),F(e,o)}}}function ra(n){let e,t;return e=new pt({props:{color:"yellow",class:"text-sm",$$slots:{default:[Il]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&22|o[1]&8192&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Al(n){let e;return{c(){e=P("Selecione o almoxarifado de destino para adicionar itens.")},l(t){e=S(t,"Selecione o almoxarifado de destino para adicionar itens.")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Nl(n){let e;return{c(){e=P("Selecione um almoxarifado para adicionar itens.")},l(t){e=S(t,"Selecione um almoxarifado para adicionar itens.")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Il(n){let e;function t(l,r){if(!l[1])return Nl;if(l[4]&&!l[2])return Al}let a=t(n),o=a&&a(n);return{c(){o&&o.c(),e=le()},l(l){o&&o.l(l),e=le()},m(l,r){o&&o.m(l,r),b(l,e,r)},p(l,r){a!==(a=t(l))&&(o&&o.d(1),o=a&&a(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&d(e),o&&o.d(l)}}}function sa(n){let e,t,a=n[11]?"Adicionar Tipo de EPI":"Adicionar Item do Estoque",o,l,r,s,i,c,u,_,m,w,$,E,A,p,f,g,q;function H(C){n[23](C)}let U={disabled:n[9],class:"rounded-sm text-sm",placeholder:n[11]?"Selecione um tipo de EPI...":"Selecione um item do estoque...",$$slots:{default:[Tl]},$$scope:{ctx:n}};n[6].item_id!==void 0&&(U.value=n[6].item_id),i=new _t({props:U}),Me.push(()=>Ue(i,"value",H));function N(C){n[24](C)}let X={type:"number",min:"1",placeholder:"Qtd",class:"rounded-sm text-sm"};n[6].quantidade!==void 0&&(X.value=n[6].quantidade),m=new ut({props:X}),Me.push(()=>Ue(m,"value",N));let Q=n[11]&&ua(n);return p=new Ve({props:{size:"sm",color:"alternative",class:"rounded-sm",$$slots:{default:[yl]},$$scope:{ctx:n}}}),p.$on("click",n[16]),g=new Ve({props:{size:"sm",color:"primary",class:"rounded-sm",disabled:!n[6].item_id||Number(n[6].quantidade)<=0,$$slots:{default:[Sl]},$$scope:{ctx:n}}}),g.$on("click",n[15]),{c(){e=D("div"),t=D("h5"),o=P(a),l=y(),r=D("div"),s=D("div"),R(i.$$.fragment),u=y(),_=D("div"),R(m.$$.fragment),$=y(),Q&&Q.c(),E=y(),A=D("div"),R(p.$$.fragment),f=y(),R(g.$$.fragment),this.h()},l(C){e=I(C,"DIV",{class:!0});var x=z(e);t=I(x,"H5",{class:!0});var J=z(t);o=S(J,a),J.forEach(d),l=T(x),r=I(x,"DIV",{class:!0});var B=z(r);s=I(B,"DIV",{class:!0});var K=z(s);L(i.$$.fragment,K),K.forEach(d),u=T(B),_=I(B,"DIV",{});var ae=z(_);L(m.$$.fragment,ae),ae.forEach(d),$=T(B),Q&&Q.l(B),B.forEach(d),E=T(x),A=I(x,"DIV",{class:!0});var Y=z(A);L(p.$$.fragment,Y),f=T(Y),L(g.$$.fragment,Y),Y.forEach(d),x.forEach(d),this.h()},h(){O(t,"class","text-sm font-medium mb-3"),O(s,"class","md:col-span-2"),O(r,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),O(A,"class","flex justify-end space-x-2 mt-4"),O(e,"class","p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border")},m(C,x){b(C,e,x),h(e,t),h(t,o),h(e,l),h(e,r),h(r,s),V(i,s,null),h(r,u),h(r,_),V(m,_,null),h(r,$),Q&&Q.m(r,null),h(e,E),h(e,A),V(p,A,null),h(A,f),V(g,A,null),q=!0},p(C,x){(!q||x[0]&2048)&&a!==(a=C[11]?"Adicionar Tipo de EPI":"Adicionar Item do Estoque")&&te(o,a);const J={};x[0]&512&&(J.disabled=C[9]),x[0]&2048&&(J.placeholder=C[11]?"Selecione um tipo de EPI...":"Selecione um item do estoque..."),x[0]&2432|x[1]&8192&&(J.$$scope={dirty:x,ctx:C}),!c&&x[0]&64&&(c=!0,J.value=C[6].item_id,Be(()=>c=!1)),i.$set(J);const B={};!w&&x[0]&64&&(w=!0,B.value=C[6].quantidade,Be(()=>w=!1)),m.$set(B),C[11]?Q?(Q.p(C,x),x[0]&2048&&v(Q,1)):(Q=ua(C),Q.c(),v(Q,1),Q.m(r,null)):Q&&(ie(),k(Q,1,1,()=>{Q=null}),ce());const K={};x[1]&8192&&(K.$$scope={dirty:x,ctx:C}),p.$set(K);const ae={};x[0]&64&&(ae.disabled=!C[6].item_id||Number(C[6].quantidade)<=0),x[1]&8192&&(ae.$$scope={dirty:x,ctx:C}),g.$set(ae)},i(C){q||(v(i.$$.fragment,C),v(m.$$.fragment,C),v(Q),v(p.$$.fragment,C),v(g.$$.fragment,C),q=!0)},o(C){k(i.$$.fragment,C),k(m.$$.fragment,C),k(Q),k(p.$$.fragment,C),k(g.$$.fragment,C),q=!1},d(C){C&&d(e),F(i),F(m),Q&&Q.d(),F(p),F(g)}}}function Dl(n){let e,t=de(n[8]),a=[];for(let o=0;o<t.length;o+=1)a[o]=ia(ta(n,t,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=le()},l(o){for(let l=0;l<a.length;l+=1)a[l].l(o);e=le()},m(o,l){for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(o,l);b(o,e,l)},p(o,l){if(l[0]&256){t=de(o[8]);let r;for(r=0;r<t.length;r+=1){const s=ta(o,t,r);a[r]?a[r].p(s,l):(a[r]=ia(s),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=t.length}},d(o){o&&d(e),He(a,o)}}}function ql(n){let e,t=de(n[7]),a=[];for(let o=0;o<t.length;o+=1)a[o]=ca(aa(n,t,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=le()},l(o){for(let l=0;l<a.length;l+=1)a[l].l(o);e=le()},m(o,l){for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(o,l);b(o,e,l)},p(o,l){if(l[0]&128){t=de(o[7]);let r;for(r=0;r<t.length;r+=1){const s=aa(o,t,r);a[r]?a[r].p(s,l):(a[r]=ca(s),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=t.length}},d(o){o&&d(e),He(a,o)}}}function ia(n){let e,t=n[39].label+"",a,o;return{c(){e=D("option"),a=P(t),this.h()},l(l){e=I(l,"OPTION",{});var r=z(e);a=S(r,t),r.forEach(d),this.h()},h(){e.__value=o=n[39].value,ye(e,e.__value)},m(l,r){b(l,e,r),h(e,a)},p(l,r){r[0]&256&&t!==(t=l[39].label+"")&&te(a,t),r[0]&256&&o!==(o=l[39].value)&&(e.__value=o,ye(e,e.__value))},d(l){l&&d(e)}}}function ca(n){let e,t=n[39].label+"",a,o;return{c(){e=D("option"),a=P(t),this.h()},l(l){e=I(l,"OPTION",{});var r=z(e);a=S(r,t),r.forEach(d),this.h()},h(){e.__value=o=n[39].value,ye(e,e.__value)},m(l,r){b(l,e,r),h(e,a)},p(l,r){r[0]&128&&t!==(t=l[39].label+"")&&te(a,t),r[0]&128&&o!==(o=l[39].value)&&(e.__value=o,ye(e,e.__value))},d(l){l&&d(e)}}}function Tl(n){let e,t=n[11]?"Selecione um tipo de EPI":"Selecione um item do estoque",a,o,l;function r(c,u){return c[11]?ql:Dl}let s=r(n),i=s(n);return{c(){e=D("option"),a=P(t),o=y(),i.c(),l=le(),this.h()},l(c){e=I(c,"OPTION",{});var u=z(e);a=S(u,t),u.forEach(d),o=T(c),i.l(c),l=le(),this.h()},h(){e.__value="",ye(e,e.__value)},m(c,u){b(c,e,u),h(e,a),b(c,o,u),i.m(c,u),b(c,l,u)},p(c,u){u[0]&2048&&t!==(t=c[11]?"Selecione um tipo de EPI":"Selecione um item do estoque")&&te(a,t),s===(s=r(c))&&i?i.p(c,u):(i.d(1),i=s(c),i&&(i.c(),i.m(l.parentNode,l)))},d(c){c&&(d(e),d(o),d(l)),i.d(c)}}}function ua(n){let e,t,a,o;function l(s){n[25](s)}let r={type:"number",min:"0",step:"0.01",placeholder:"Custo unit√°rio (R$)",class:"rounded-sm text-sm"};return n[6].custo_unitario!==void 0&&(r.value=n[6].custo_unitario),t=new ut({props:r}),Me.push(()=>Ue(t,"value",l)),t.$on("input",n[26]),{c(){e=D("div"),R(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var i=z(e);L(t.$$.fragment,i),i.forEach(d),this.h()},h(){O(e,"class","md:col-span-3")},m(s,i){b(s,e,i),V(t,e,null),o=!0},p(s,i){const c={};!a&&i[0]&64&&(a=!0,c.value=s[6].custo_unitario,Be(()=>a=!1)),t.$set(c)},i(s){o||(v(t.$$.fragment,s),o=!0)},o(s){k(t.$$.fragment,s),o=!1},d(s){s&&d(e),F(t)}}}function yl(n){let e;return{c(){e=P("Cancelar")},l(t){e=S(t,"Cancelar")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Sl(n){let e;return{c(){e=P("Adicionar")},l(t){e=S(t,"Adicionar")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Pl(n){let e,t,a="Nenhum item adicionado ainda.",o,l=n[13]&&!n[3]&&fa();return{c(){e=D("div"),t=D("p"),t.textContent=a,o=y(),l&&l.c(),this.h()},l(r){e=I(r,"DIV",{class:!0});var s=z(e);t=I(s,"P",{class:!0,"data-svelte-h":!0}),be(t)!=="svelte-gcov4b"&&(t.textContent=a),o=T(s),l&&l.l(s),s.forEach(d),this.h()},h(){O(t,"class","text-sm"),O(e,"class","text-center py-8 text-gray-500 dark:text-gray-400")},m(r,s){b(r,e,s),h(e,t),h(e,o),l&&l.m(e,null)},p(r,s){r[13]&&!r[3]?l||(l=fa(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:he,o:he,d(r){r&&d(e),l&&l.d()}}}function Ol(n){let e,t,a,o,l,r,s=n[19]()+"",i,c,u=n[19]()===1?"item":"itens",_,m,w=n[11]&&n[20]()>0,$;t=new Ra({props:{hoverable:!0,$$slots:{default:[mn]},$$scope:{ctx:n}}});let E=w&&ga(n);return{c(){e=D("div"),R(t.$$.fragment),a=y(),o=D("div"),l=D("div"),r=P("Total: "),i=P(s),c=y(),_=P(u),m=y(),E&&E.c(),this.h()},l(A){e=I(A,"DIV",{class:!0});var p=z(e);L(t.$$.fragment,p),p.forEach(d),a=T(A),o=I(A,"DIV",{class:!0});var f=z(o);l=I(f,"DIV",{class:!0});var g=z(l);r=S(g,"Total: "),i=S(g,s),c=T(g),_=S(g,u),g.forEach(d),m=T(f),E&&E.l(f),f.forEach(d),this.h()},h(){O(e,"class","border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden"),O(l,"class","text-sm text-gray-600 dark:text-gray-400"),O(o,"class","flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg")},m(A,p){b(A,e,p),V(t,e,null),b(A,a,p),b(A,o,p),h(o,l),h(l,r),h(l,i),h(l,c),h(l,_),h(o,m),E&&E.m(o,null),$=!0},p(A,p){const f={};p[0]&3081|p[1]&8192&&(f.$$scope={dirty:p,ctx:A}),t.$set(f),p[0]&2048&&(w=A[11]&&A[20]()>0),w?E?E.p(A,p):(E=ga(A),E.c(),E.m(o,null)):E&&(E.d(1),E=null)},i(A){$||(v(t.$$.fragment,A),$=!0)},o(A){k(t.$$.fragment,A),$=!1},d(A){A&&(d(e),d(a),d(o)),F(t),E&&E.d()}}}function fa(n){let e,t='Clique em "Adicionar Item" para come√ßar.';return{c(){e=D("p"),e.textContent=t,this.h()},l(a){e=I(a,"P",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-15abw13"&&(e.textContent=t),this.h()},h(){O(e,"class","text-xs mt-1")},m(a,o){b(a,e,o)},d(a){a&&d(e)}}}function Fl(n){let e;return{c(){e=P("Equipamento")},l(t){e=S(t,"Equipamento")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Vl(n){let e;return{c(){e=P("Categoria")},l(t){e=S(t,"Categoria")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Rl(n){let e;return{c(){e=P("CA")},l(t){e=S(t,"CA")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Ll(n){let e;return{c(){e=P("Quantidade")},l(t){e=S(t,"Quantidade")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function xl(n){let e,t;return e=new De({props:{$$slots:{default:[Ml]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function zl(n){let e,t,a,o;return e=new De({props:{$$slots:{default:[Ul]},$$scope:{ctx:n}}}),a=new De({props:{$$slots:{default:[Bl]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment),t=y(),R(a.$$.fragment)},l(l){L(e.$$.fragment,l),t=T(l),L(a.$$.fragment,l)},m(l,r){V(e,l,r),b(l,t,r),V(a,l,r),o=!0},i(l){o||(v(e.$$.fragment,l),v(a.$$.fragment,l),o=!0)},o(l){k(e.$$.fragment,l),k(a.$$.fragment,l),o=!1},d(l){l&&d(t),F(e,l),F(a,l)}}}function Ml(n){let e;return{c(){e=P("Dispon√≠vel")},l(t){e=S(t,"Dispon√≠vel")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Ul(n){let e;return{c(){e=P("Custo Unit.")},l(t){e=S(t,"Custo Unit.")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Bl(n){let e;return{c(){e=P("Subtotal")},l(t){e=S(t,"Subtotal")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function da(n){let e,t;return e=new De({props:{$$slots:{default:[jl]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function jl(n){let e;return{c(){e=P("A√ß√µes")},l(t){e=S(t,"A√ß√µes")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Hl(n){let e,t,a,o,l,r,s,i,c,u,_,m,w;e=new De({props:{$$slots:{default:[Fl]},$$scope:{ctx:n}}}),a=new De({props:{$$slots:{default:[Vl]},$$scope:{ctx:n}}}),l=new De({props:{$$slots:{default:[Rl]},$$scope:{ctx:n}}}),s=new De({props:{$$slots:{default:[Ll]},$$scope:{ctx:n}}});const $=[zl,xl],E=[];function A(f,g){return f[11]?0:1}c=A(n),u=E[c]=$[c](n);let p=!n[3]&&da(n);return{c(){R(e.$$.fragment),t=y(),R(a.$$.fragment),o=y(),R(l.$$.fragment),r=y(),R(s.$$.fragment),i=y(),u.c(),_=y(),p&&p.c(),m=le()},l(f){L(e.$$.fragment,f),t=T(f),L(a.$$.fragment,f),o=T(f),L(l.$$.fragment,f),r=T(f),L(s.$$.fragment,f),i=T(f),u.l(f),_=T(f),p&&p.l(f),m=le()},m(f,g){V(e,f,g),b(f,t,g),V(a,f,g),b(f,o,g),V(l,f,g),b(f,r,g),V(s,f,g),b(f,i,g),E[c].m(f,g),b(f,_,g),p&&p.m(f,g),b(f,m,g),w=!0},p(f,g){const q={};g[1]&8192&&(q.$$scope={dirty:g,ctx:f}),e.$set(q);const H={};g[1]&8192&&(H.$$scope={dirty:g,ctx:f}),a.$set(H);const U={};g[1]&8192&&(U.$$scope={dirty:g,ctx:f}),l.$set(U);const N={};g[1]&8192&&(N.$$scope={dirty:g,ctx:f}),s.$set(N);let X=c;c=A(f),c!==X&&(ie(),k(E[X],1,1,()=>{E[X]=null}),ce(),u=E[c],u||(u=E[c]=$[c](f),u.c()),v(u,1),u.m(_.parentNode,_)),f[3]?p&&(ie(),k(p,1,1,()=>{p=null}),ce()):p?g[0]&8&&v(p,1):(p=da(f),p.c(),v(p,1),p.m(m.parentNode,m))},i(f){w||(v(e.$$.fragment,f),v(a.$$.fragment,f),v(l.$$.fragment,f),v(s.$$.fragment,f),v(u),v(p),w=!0)},o(f){k(e.$$.fragment,f),k(a.$$.fragment,f),k(l.$$.fragment,f),k(s.$$.fragment,f),k(u),k(p),w=!1},d(f){f&&(d(t),d(o),d(r),d(i),d(_),d(m)),F(e,f),F(a,f),F(l,f),F(s,f),E[c].d(f),p&&p.d(f)}}}function Ql(n){let e=n[36].equipamento_nome+"",t;return{c(){t=P(e)},l(a){t=S(a,e)},m(a,o){b(a,t,o)},p(a,o){o[0]&1&&e!==(e=a[36].equipamento_nome+"")&&te(t,e)},d(a){a&&d(t)}}}function Jl(n){let e=(n[36].categoria||"N/A")+"",t;return{c(){t=P(e)},l(a){t=S(a,e)},m(a,o){b(a,t,o)},p(a,o){o[0]&1&&e!==(e=(a[36].categoria||"N/A")+"")&&te(t,e)},d(a){a&&d(t)}}}function Wl(n){let e,t;return e=new wt({props:{color:"gray",class:"w-fit rounded-sm",$$slots:{default:[Jl]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&1|o[1]&8192&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Gl(n){let e=(n[36].numero_ca||"N/A")+"",t;return{c(){t=P(e)},l(a){t=S(a,e)},m(a,o){b(a,t,o)},p(a,o){o[0]&1&&e!==(e=(a[36].numero_ca||"N/A")+"")&&te(t,e)},d(a){a&&d(t)}}}function Kl(n){let e,t,a,o;function l(...s){return n[27](n[36],...s)}e=new ut({props:{type:"number",min:"1",max:n[36].quantidade_disponivel,value:n[36].quantidade,class:"w-20 text-sm rounded-sm "+(n[10][n[36].temp_id]?"border-red-500":"")}}),e.$on("input",l);let r=n[10][n[36].temp_id]&&ma(n);return{c(){R(e.$$.fragment),t=y(),r&&r.c(),a=le()},l(s){L(e.$$.fragment,s),t=T(s),r&&r.l(s),a=le()},m(s,i){V(e,s,i),b(s,t,i),r&&r.m(s,i),b(s,a,i),o=!0},p(s,i){n=s;const c={};i[0]&1&&(c.max=n[36].quantidade_disponivel),i[0]&1&&(c.value=n[36].quantidade),i[0]&1025&&(c.class="w-20 text-sm rounded-sm "+(n[10][n[36].temp_id]?"border-red-500":"")),e.$set(c),n[10][n[36].temp_id]?r?r.p(n,i):(r=ma(n),r.c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},i(s){o||(v(e.$$.fragment,s),o=!0)},o(s){k(e.$$.fragment,s),o=!1},d(s){s&&(d(t),d(a)),F(e,s),r&&r.d(s)}}}function Xl(n){let e,t=n[36].quantidade+"",a;return{c(){e=D("span"),a=P(t),this.h()},l(o){e=I(o,"SPAN",{class:!0});var l=z(e);a=S(l,t),l.forEach(d),this.h()},h(){O(e,"class","font-medium")},m(o,l){b(o,e,l),h(e,a)},p(o,l){l[0]&1&&t!==(t=o[36].quantidade+"")&&te(a,t)},i:he,o:he,d(o){o&&d(e)}}}function ma(n){let e,t=n[10][n[36].temp_id]+"",a;return{c(){e=D("p"),a=P(t),this.h()},l(o){e=I(o,"P",{class:!0});var l=z(e);a=S(l,t),l.forEach(d),this.h()},h(){O(e,"class","text-xs text-red-500 mt-1")},m(o,l){b(o,e,l),h(e,a)},p(o,l){l[0]&1025&&t!==(t=o[10][o[36].temp_id]+"")&&te(a,t)},d(o){o&&d(e)}}}function Zl(n){let e,t,a,o;const l=[Xl,Kl],r=[];function s(i,c){return i[3]?0:1}return e=s(n),t=r[e]=l[e](n),{c(){t.c(),a=le()},l(i){t.l(i),a=le()},m(i,c){r[e].m(i,c),b(i,a,c),o=!0},p(i,c){let u=e;e=s(i),e===u?r[e].p(i,c):(ie(),k(r[u],1,1,()=>{r[u]=null}),ce(),t=r[e],t?t.p(i,c):(t=r[e]=l[e](i),t.c()),v(t,1),t.m(a.parentNode,a))},i(i){o||(v(t),o=!0)},o(i){k(t),o=!1},d(i){i&&d(a),r[e].d(i)}}}function Yl(n){let e,t;return e=new qe({props:{class:"text-sm text-gray-600",$$slots:{default:[tn]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&1|o[1]&8192&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function en(n){let e,t,a,o;return e=new qe({props:{class:"text-sm",$$slots:{default:[ln]},$$scope:{ctx:n}}}),a=new qe({props:{class:"text-sm font-medium",$$slots:{default:[sn]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment),t=y(),R(a.$$.fragment)},l(l){L(e.$$.fragment,l),t=T(l),L(a.$$.fragment,l)},m(l,r){V(e,l,r),b(l,t,r),V(a,l,r),o=!0},p(l,r){const s={};r[0]&1|r[1]&8192&&(s.$$scope={dirty:r,ctx:l}),e.$set(s);const i={};r[0]&1|r[1]&8192&&(i.$$scope={dirty:r,ctx:l}),a.$set(i)},i(l){o||(v(e.$$.fragment,l),v(a.$$.fragment,l),o=!0)},o(l){k(e.$$.fragment,l),k(a.$$.fragment,l),o=!1},d(l){l&&d(t),F(e,l),F(a,l)}}}function tn(n){let e=(n[36].quantidade_disponivel||"N/A")+"",t;return{c(){t=P(e)},l(a){t=S(a,e)},m(a,o){b(a,t,o)},p(a,o){o[0]&1&&e!==(e=(a[36].quantidade_disponivel||"N/A")+"")&&te(t,e)},d(a){a&&d(t)}}}function an(n){let e,t="N/A";return{c(){e=D("span"),e.textContent=t,this.h()},l(a){e=I(a,"SPAN",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-1tct16n"&&(e.textContent=t),this.h()},h(){O(e,"class","text-gray-400")},m(a,o){b(a,e,o)},p:he,d(a){a&&d(e)}}}function on(n){let e,t=n[36].custo_unitario.toFixed(2)+"",a;return{c(){e=P("R$ "),a=P(t)},l(o){e=S(o,"R$ "),a=S(o,t)},m(o,l){b(o,e,l),b(o,a,l)},p(o,l){l[0]&1&&t!==(t=o[36].custo_unitario.toFixed(2)+"")&&te(a,t)},d(o){o&&(d(e),d(a))}}}function ln(n){let e,t;function a(r,s){return s[0]&1&&(e=null),e==null&&(e=r[36].custo_unitario!=null&&typeof r[36].custo_unitario=="number"&&!isNaN(r[36].custo_unitario)),e?on:an}let o=a(n,[-1,-1]),l=o(n);return{c(){l.c(),t=le()},l(r){l.l(r),t=le()},m(r,s){l.m(r,s),b(r,t,s)},p(r,s){o===(o=a(r,s))&&l?l.p(r,s):(l.d(1),l=o(r),l&&(l.c(),l.m(t.parentNode,t)))},d(r){r&&d(t),l.d(r)}}}function nn(n){let e,t="N/A";return{c(){e=D("span"),e.textContent=t,this.h()},l(a){e=I(a,"SPAN",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-1tct16n"&&(e.textContent=t),this.h()},h(){O(e,"class","text-gray-400")},m(a,o){b(a,e,o)},p:he,d(a){a&&d(e)}}}function rn(n){let e,t=(n[36].custo_unitario*n[36].quantidade).toFixed(2)+"",a;return{c(){e=P("R$ "),a=P(t)},l(o){e=S(o,"R$ "),a=S(o,t)},m(o,l){b(o,e,l),b(o,a,l)},p(o,l){l[0]&1&&t!==(t=(o[36].custo_unitario*o[36].quantidade).toFixed(2)+"")&&te(a,t)},d(o){o&&(d(e),d(a))}}}function sn(n){let e,t;function a(r,s){return s[0]&1&&(e=null),e==null&&(e=r[36].custo_unitario!=null&&typeof r[36].custo_unitario=="number"&&!isNaN(r[36].custo_unitario)),e?rn:nn}let o=a(n,[-1,-1]),l=o(n);return{c(){l.c(),t=le()},l(r){l.l(r),t=le()},m(r,s){l.m(r,s),b(r,t,s)},p(r,s){o===(o=a(r,s))&&l?l.p(r,s):(l.d(1),l=o(r),l&&(l.c(),l.m(t.parentNode,t)))},d(r){r&&d(t),l.d(r)}}}function _a(n){let e,t;return e=new qe({props:{$$slots:{default:[un]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&1|o[1]&8192&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function cn(n){let e,t;return e=new ja({props:{class:"w-3 h-3"}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p:he,i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function un(n){let e,t;function a(){return n[28](n[36])}return e=new Ve({props:{size:"xs",color:"red",class:"rounded-sm",$$slots:{default:[cn]},$$scope:{ctx:n}}}),e.$on("click",a),{c(){R(e.$$.fragment)},l(o){L(e.$$.fragment,o)},m(o,l){V(e,o,l),t=!0},p(o,l){n=o;const r={};l[1]&8192&&(r.$$scope={dirty:l,ctx:n}),e.$set(r)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){k(e.$$.fragment,o),t=!1},d(o){F(e,o)}}}function fn(n){let e,t,a,o,l,r,s,i,c,u,_,m,w;e=new qe({props:{class:"font-medium",$$slots:{default:[Ql]},$$scope:{ctx:n}}}),a=new qe({props:{$$slots:{default:[Wl]},$$scope:{ctx:n}}}),l=new qe({props:{class:"text-sm text-gray-600",$$slots:{default:[Gl]},$$scope:{ctx:n}}}),s=new qe({props:{$$slots:{default:[Zl]},$$scope:{ctx:n}}});const $=[en,Yl],E=[];function A(f,g){return f[11]?0:1}c=A(n),u=E[c]=$[c](n);let p=!n[3]&&_a(n);return{c(){R(e.$$.fragment),t=y(),R(a.$$.fragment),o=y(),R(l.$$.fragment),r=y(),R(s.$$.fragment),i=y(),u.c(),_=y(),p&&p.c(),m=y()},l(f){L(e.$$.fragment,f),t=T(f),L(a.$$.fragment,f),o=T(f),L(l.$$.fragment,f),r=T(f),L(s.$$.fragment,f),i=T(f),u.l(f),_=T(f),p&&p.l(f),m=T(f)},m(f,g){V(e,f,g),b(f,t,g),V(a,f,g),b(f,o,g),V(l,f,g),b(f,r,g),V(s,f,g),b(f,i,g),E[c].m(f,g),b(f,_,g),p&&p.m(f,g),b(f,m,g),w=!0},p(f,g){const q={};g[0]&1|g[1]&8192&&(q.$$scope={dirty:g,ctx:f}),e.$set(q);const H={};g[0]&1|g[1]&8192&&(H.$$scope={dirty:g,ctx:f}),a.$set(H);const U={};g[0]&1|g[1]&8192&&(U.$$scope={dirty:g,ctx:f}),l.$set(U);const N={};g[0]&1033|g[1]&8192&&(N.$$scope={dirty:g,ctx:f}),s.$set(N);let X=c;c=A(f),c===X?E[c].p(f,g):(ie(),k(E[X],1,1,()=>{E[X]=null}),ce(),u=E[c],u?u.p(f,g):(u=E[c]=$[c](f),u.c()),v(u,1),u.m(_.parentNode,_)),f[3]?p&&(ie(),k(p,1,1,()=>{p=null}),ce()):p?(p.p(f,g),g[0]&8&&v(p,1)):(p=_a(f),p.c(),v(p,1),p.m(m.parentNode,m))},i(f){w||(v(e.$$.fragment,f),v(a.$$.fragment,f),v(l.$$.fragment,f),v(s.$$.fragment,f),v(u),v(p),w=!0)},o(f){k(e.$$.fragment,f),k(a.$$.fragment,f),k(l.$$.fragment,f),k(s.$$.fragment,f),k(u),k(p),w=!1},d(f){f&&(d(t),d(o),d(r),d(i),d(_),d(m)),F(e,f),F(a,f),F(l,f),F(s,f),E[c].d(f),p&&p.d(f)}}}function pa(n,e){let t,a,o;return a=new za({props:{$$slots:{default:[fn]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=le(),R(a.$$.fragment),this.h()},l(l){t=le(),L(a.$$.fragment,l),this.h()},h(){this.first=t},m(l,r){b(l,t,r),V(a,l,r),o=!0},p(l,r){e=l;const s={};r[0]&3081|r[1]&8192&&(s.$$scope={dirty:r,ctx:e}),a.$set(s)},i(l){o||(v(a.$$.fragment,l),o=!0)},o(l){k(a.$$.fragment,l),o=!1},d(l){l&&d(t),F(a,l)}}}function dn(n){let e=[],t=new Map,a,o,l=de(n[0]);const r=s=>s[36].temp_id;for(let s=0;s<l.length;s+=1){let i=ea(n,l,s),c=r(i);t.set(c,e[s]=pa(c,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();a=le()},l(s){for(let i=0;i<e.length;i+=1)e[i].l(s);a=le()},m(s,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(s,i);b(s,a,i),o=!0},p(s,i){i[0]&396297&&(l=de(s[0]),ie(),e=Oa(e,i,r,1,s,l,t,a.parentNode,Fa,pa,a,ea),ce())},i(s){if(!o){for(let i=0;i<l.length;i+=1)v(e[i]);o=!0}},o(s){for(let i=0;i<e.length;i+=1)k(e[i]);o=!1},d(s){s&&d(a);for(let i=0;i<e.length;i+=1)e[i].d(s)}}}function mn(n){let e,t,a,o;return e=new La({props:{$$slots:{default:[Hl]},$$scope:{ctx:n}}}),a=new xa({props:{$$slots:{default:[dn]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment),t=y(),R(a.$$.fragment)},l(l){L(e.$$.fragment,l),t=T(l),L(a.$$.fragment,l)},m(l,r){V(e,l,r),b(l,t,r),V(a,l,r),o=!0},p(l,r){const s={};r[0]&2056|r[1]&8192&&(s.$$scope={dirty:r,ctx:l}),e.$set(s);const i={};r[0]&3081|r[1]&8192&&(i.$$scope={dirty:r,ctx:l}),a.$set(i)},i(l){o||(v(e.$$.fragment,l),v(a.$$.fragment,l),o=!0)},o(l){k(e.$$.fragment,l),k(a.$$.fragment,l),o=!1},d(l){l&&d(t),F(e,l),F(a,l)}}}function ga(n){let e,t,a=n[20]().toFixed(2)+"",o;return{c(){e=D("div"),t=P("Total: R$ "),o=P(a),this.h()},l(l){e=I(l,"DIV",{class:!0});var r=z(e);t=S(r,"Total: R$ "),o=S(r,a),r.forEach(d),this.h()},h(){O(e,"class","text-sm font-medium")},m(l,r){b(l,e,r),h(e,t),h(e,o)},p:he,d(l){l&&d(e)}}}function _n(n){let e,t;return e=new pt({props:{color:"red",class:"text-sm",$$slots:{default:[pn]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function pn(n){let e;return{c(){e=P("Corrija os erros nos itens antes de continuar.")},l(t){e=S(t,"Corrija os erros nos itens antes de continuar.")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function gn(n){let e,t,a,o,l,r,s=n[11]&&n[20]()>0,i,c,u,_,m,w,$,E=n[21](),A,p=n[12]&&oa(n),f=s&&la(n),g=n[13]&&!n[3]&&na(n),q=!n[13]&&ra(n),H=n[5]&&sa(n);const U=[Ol,Pl],N=[];function X(C,x){return C[12]?0:1}m=X(n),w=N[m]=U[m](n);let Q=E&&_n(n);return{c(){e=D("div"),t=D("div"),a=D("div"),o=D("h4"),l=P("Itens da Nota "),p&&p.c(),r=y(),f&&f.c(),i=y(),g&&g.c(),c=y(),q&&q.c(),u=y(),H&&H.c(),_=y(),w.c(),$=y(),Q&&Q.c(),this.h()},l(C){e=I(C,"DIV",{class:!0});var x=z(e);t=I(x,"DIV",{class:!0});var J=z(t);a=I(J,"DIV",{});var B=z(a);o=I(B,"H4",{class:!0});var K=z(o);l=S(K,"Itens da Nota "),p&&p.l(K),K.forEach(d),r=T(B),f&&f.l(B),B.forEach(d),i=T(J),g&&g.l(J),J.forEach(d),c=T(x),q&&q.l(x),u=T(x),H&&H.l(x),_=T(x),w.l(x),$=T(x),Q&&Q.l(x),x.forEach(d),this.h()},h(){O(o,"class","text-lg font-medium text-gray-900 dark:text-white"),O(t,"class","flex items-center justify-between"),O(e,"class","space-y-4")},m(C,x){b(C,e,x),h(e,t),h(t,a),h(a,o),h(o,l),p&&p.m(o,null),h(a,r),f&&f.m(a,null),h(t,i),g&&g.m(t,null),h(e,c),q&&q.m(e,null),h(e,u),H&&H.m(e,null),h(e,_),N[m].m(e,null),h(e,$),Q&&Q.m(e,null),A=!0},p(C,x){C[12]?p?p.p(C,x):(p=oa(C),p.c(),p.m(o,null)):p&&(p.d(1),p=null),x[0]&2048&&(s=C[11]&&C[20]()>0),s?f?f.p(C,x):(f=la(C),f.c(),f.m(a,null)):f&&(f.d(1),f=null),C[13]&&!C[3]?g?(g.p(C,x),x[0]&8200&&v(g,1)):(g=na(C),g.c(),v(g,1),g.m(t,null)):g&&(ie(),k(g,1,1,()=>{g=null}),ce()),C[13]?q&&(ie(),k(q,1,1,()=>{q=null}),ce()):q?(q.p(C,x),x[0]&8192&&v(q,1)):(q=ra(C),q.c(),v(q,1),q.m(e,u)),C[5]?H?(H.p(C,x),x[0]&32&&v(H,1)):(H=sa(C),H.c(),v(H,1),H.m(e,_)):H&&(ie(),k(H,1,1,()=>{H=null}),ce());let J=m;m=X(C),m===J?N[m].p(C,x):(ie(),k(N[J],1,1,()=>{N[J]=null}),ce(),w=N[m],w?w.p(C,x):(w=N[m]=U[m](C),w.c()),v(w,1),w.m(e,$))},i(C){A||(v(g),v(q),v(H),v(w),v(Q),A=!0)},o(C){k(g),k(q),k(H),k(w),k(Q),A=!1},d(C){C&&d(e),p&&p.d(),f&&f.d(),g&&g.d(),q&&q.d(),H&&H.d(),N[m].d(),Q&&Q.d()}}}function ha(){return`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function hn(n,e,t){let a,o,l,r,{tipo:s}=e,{almoxarifadoId:i}=e,{almoxarifadoDestinoId:c=""}=e,{itens:u=[]}=e,{readonly:_=!1}=e;const m=it();let w=!1,$={item_id:"",quantidade:1,custo_unitario:0},E=[],A=[],p=[],f=!1,g={};Et(async()=>{console.log("üèóÔ∏è NotaItensManager: Inicializando",{tipo:s,almoxarifadoId:i}),await q()});async function q(){try{t(9,f=!0),o&&(E=await Ha.obterOpcoesSelectComCache()),i&&await H(i)}catch(W){console.error("Erro ao carregar op√ß√µes iniciais:",W)}finally{t(9,f=!1)}}async function H(W){try{a?t(7,A=await go.obterOpcoesSelectComCache({apenasAtivos:!0})):t(8,p=await vt.obterItensDisponiveisComCache(W))}catch(re){console.error("Erro ao carregar op√ß√µes para almoxarifado:",re)}}function U(){t(5,w=!0),N()}function N(){t(6,$={item_id:"",quantidade:1,custo_unitario:0})}async function X(){if(console.log("üîµ Iniciando adi√ß√£o de item:",{item_id:$.item_id,quantidade:$.quantidade,isEntrada:a,tipoEpiOptionsCount:A.length}),!$.item_id||Number($.quantidade)<=0){console.error("‚ùå Valida√ß√£o falhou: item_id ou quantidade inv√°lidos");return}try{let W;if(a){console.log("üîç Procurando tipo EPI com ID:",$.item_id),console.log("üîç Op√ß√µes dispon√≠veis:",A.map(se=>({value:se.value,label:se.label})));const oe=A.find(se=>se.value===$.item_id);if(!oe){console.error("‚ùå Tipo EPI n√£o encontrado!",{procurado:$.item_id,dispon√≠veis:A.map(se=>se.value)});return}console.log("‚úÖ Tipo EPI encontrado:",oe),W={temp_id:ha(),tipo_epi_id:oe.value,quantidade:Number($.quantidade),custo_unitario:Number($.custo_unitario)||oe.custoUnitario,equipamento_nome:oe.label,categoria:oe.categoria,numero_ca:oe.numeroCA},console.log("üì¶ Novo item criado:",W)}else{console.log("üîç Procurando item de estoque com ID:",$.item_id),console.log("üîç Op√ß√µes de estoque dispon√≠veis:",p.map(we=>({value:we.value,label:we.equipamento})));const oe=p.find(we=>we.value===$.item_id);if(!oe){console.error("‚ùå Item de estoque n√£o encontrado!",{procurado:$.item_id,dispon√≠veis:p.map(we=>we.value)});return}console.log("‚úÖ Item de estoque encontrado:",oe);const se=await vt.validarQuantidadeDisponivel(oe.value,Number($.quantidade));if(!se.valido){m("validationError",se.motivo||"Quantidade inv√°lida");return}W={temp_id:ha(),estoque_item_id:oe.value,quantidade:Number($.quantidade),equipamento_nome:oe.equipamento,categoria:oe.categoria,numero_ca:oe.numeroCA,quantidade_disponivel:oe.quantidadeMaxima,almoxarifado_origem:oe.almoxarifado}}const re=u.find(oe=>a&&oe.tipo_epi_id===W.tipo_epi_id||!a&&oe.estoque_item_id===W.estoque_item_id);re?await x(re.temp_id,re.quantidade+W.quantidade):(t(0,u=[...u,W]),J()),t(5,w=!1),N()}catch(W){console.error("Erro ao adicionar item:",W),m("validationError","Erro ao adicionar item")}}function Q(){t(5,w=!1),N()}async function C(W){t(0,u=u.filter(re=>re.temp_id!==W)),delete g[W],J()}async function x(W,re){if(re<=0){t(10,g[W]="Quantidade deve ser maior que zero",g);return}const oe=u.find(se=>se.temp_id===W);if(oe){if(!a&&oe.estoque_item_id)try{const se=await vt.validarQuantidadeDisponivel(oe.estoque_item_id,re);if(!se.valido){t(10,g[W]=se.motivo||"Quantidade inv√°lida",g);return}}catch{t(10,g[W]="Erro ao validar quantidade",g);return}delete g[W],t(0,u=u.map(se=>se.temp_id===W?{...se,quantidade:re}:se)),J()}}function J(){console.log("üì§ Emitindo mudan√ßa de itens:",u.map(W=>({temp_id:W.temp_id,tipo_epi_id:W.tipo_epi_id,estoque_item_id:W.estoque_item_id,quantidade:W.quantidade}))),m("itensChanged",u)}function B(){return u.reduce((W,re)=>W+re.quantidade,0)}function K(){return u.reduce((W,re)=>{const oe=re.custo_unitario!=null&&typeof re.custo_unitario=="number"&&!isNaN(re.custo_unitario)?re.custo_unitario:0;return W+oe*re.quantidade},0)}function ae(){return Object.keys(g).length>0}function Y(W){n.$$.not_equal($.item_id,W)&&($.item_id=W,t(6,$))}function $e(W){n.$$.not_equal($.quantidade,W)&&($.quantidade=W,t(6,$))}function G(W){n.$$.not_equal($.custo_unitario,W)&&($.custo_unitario=W,t(6,$))}const ne=W=>{const re=W.currentTarget.value;t(6,$.custo_unitario=re?parseFloat(re):0,$)},ve=(W,re)=>x(W.temp_id,parseInt(re.currentTarget.value)||0),Ne=W=>C(W.temp_id);return n.$$set=W=>{"tipo"in W&&t(22,s=W.tipo),"almoxarifadoId"in W&&t(1,i=W.almoxarifadoId),"almoxarifadoDestinoId"in W&&t(2,c=W.almoxarifadoDestinoId),"itens"in W&&t(0,u=W.itens),"readonly"in W&&t(3,_=W.readonly)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&t(11,a=s==="ENTRADA"||s==="ENTRADA_AJUSTE"),n.$$.dirty[0]&4194304,n.$$.dirty[0]&4194304&&t(4,o=s==="TRANSFERENCIA"),n.$$.dirty[0]&22&&t(13,l=i&&(!o||c)),n.$$.dirty[0]&1&&t(12,r=u.length>0),n.$$.dirty[0]&2&&i&&H(i)},[u,i,c,_,o,w,$,A,p,f,g,a,r,l,U,X,Q,C,x,B,K,ae,s,Y,$e,G,ne,ve,Ne]}class $n extends Xe{constructor(e){super(),Ze(this,e,hn,gn,Ye,{tipo:22,almoxarifadoId:1,almoxarifadoDestinoId:2,itens:0,readonly:3},null,[-1,-1])}}function $a(n,e,t){const a=n.slice();return a[45]=e[t],a}function ba(n,e,t){const a=n.slice();return a[45]=e[t],a}function va(n,e,t){const a=n.slice();return a[50]=e[t],a}function Ea(n,e,t){const a=n.slice();return a[50]=e[t],a}function bn(n){let e=n[9]&&(Object.keys(n[8]).length>0||n[7].length>0),t,a,o,l,r="Dados da Nota",s,i,c,u,_,m,w,$,E,A,p,f,g,q,H,U,N,X,Q,C,x,J,B,K,ae,Y,$e,G,ne,ve,Ne,W,re,oe,se,we,Se,Re,lt="Itens da Nota",et,Z,_e,Le,tt,pe=e&&wa(n);u=new st({props:{for:"tipo",class:"mb-2",$$slots:{default:[wn]},$$scope:{ctx:n}}});function gt(j){n[30](j)}let ft={id:"tipo",disabled:n[0]==="view",class:"rounded-sm "+(n[8].tipo?"border-red-500":""),$$slots:{default:[kn]},$$scope:{ctx:n}};n[1].tipo!==void 0&&(ft.value=n[1].tipo),m=new _t({props:ft}),Me.push(()=>Ue(m,"value",gt));let ke=n[8].tipo&&Aa(n);p=new st({props:{for:"data_documento",class:"mb-2",$$slots:{default:[Cn]},$$scope:{ctx:n}}});function ht(j){n[31](j)}let dt={id:"data_documento",type:"date",disabled:n[0]==="view",class:"rounded-sm "+(n[8].data_documento?"border-red-500":"")};n[1].data_documento!==void 0&&(dt.value=n[1].data_documento),g=new ut({props:dt}),Me.push(()=>Ue(g,"value",ht));let Ce=n[8].data_documento&&Na(n);X=new st({props:{for:"almoxarifado_id",class:"mb-2",$$slots:{default:[An]},$$scope:{ctx:n}}});function $t(j){n[32](j)}let mt={id:"almoxarifado_id",disabled:n[0]==="view",class:"rounded-sm "+(n[8].almoxarifado_id?"border-red-500":""),$$slots:{default:[Nn]},$$scope:{ctx:n}};n[1].almoxarifado_id!==void 0&&(mt.value=n[1].almoxarifado_id),C=new _t({props:mt}),Me.push(()=>Ue(C,"value",$t));let Ae=n[8].almoxarifado_id&&Da(n),ge=n[1].tipo==="TRANSFERENCIA"&&qa(n);Y=new st({props:{for:"descricao",class:"mb-2",$$slots:{default:[qn]},$$scope:{ctx:n}}});function M(j){n[34](j)}let fe={id:"descricao",disabled:n[0]==="view",placeholder:"Descri√ß√£o da movimenta√ß√£o...",rows:"3",class:"rounded-sm"};n[1].descricao!==void 0&&(fe.value=n[1].descricao),G=new yt({props:fe}),Me.push(()=>Ue(G,"value",M)),W=new st({props:{for:"observacoes",class:"mb-2",$$slots:{default:[Tn]},$$scope:{ctx:n}}});function ue(j){n[35](j)}let Ie={id:"observacoes",disabled:n[0]==="view",placeholder:"Observa√ß√µes adicionais...",rows:"2",class:"rounded-sm"};n[1].observacoes!==void 0&&(Ie.value=n[1].observacoes),oe=new yt({props:Ie}),Me.push(()=>Ue(oe,"value",ue));function Fe(j){n[36](j)}let nt={tipo:n[1].tipo,almoxarifadoId:n[1].almoxarifado_id,almoxarifadoDestinoId:n[1].almoxarifado_destino_id,readonly:n[0]==="view"};n[2]!==void 0&&(nt.itens=n[2]),Z=new $n({props:nt}),Me.push(()=>Ue(Z,"itens",Fe)),Z.$on("itensChanged",n[20]),Z.$on("validationError",n[21]);let Ee=n[5]>0&&Sa(n);return{c(){pe&&pe.c(),t=y(),a=D("div"),o=D("div"),l=D("h3"),l.textContent=r,s=y(),i=D("div"),c=D("div"),R(u.$$.fragment),_=y(),R(m.$$.fragment),$=y(),ke&&ke.c(),E=y(),A=D("div"),R(p.$$.fragment),f=y(),R(g.$$.fragment),H=y(),Ce&&Ce.c(),U=y(),N=D("div"),R(X.$$.fragment),Q=y(),R(C.$$.fragment),J=y(),Ae&&Ae.c(),B=y(),ge&&ge.c(),K=y(),ae=D("div"),R(Y.$$.fragment),$e=y(),R(G.$$.fragment),ve=y(),Ne=D("div"),R(W.$$.fragment),re=y(),R(oe.$$.fragment),we=y(),Se=D("div"),Re=D("h3"),Re.textContent=lt,et=y(),R(Z.$$.fragment),Le=y(),Ee&&Ee.c(),this.h()},l(j){pe&&pe.l(j),t=T(j),a=I(j,"DIV",{class:!0});var ee=z(a);o=I(ee,"DIV",{class:!0});var xe=z(o);l=I(xe,"H3",{class:!0,"data-svelte-h":!0}),be(l)!=="svelte-in15tf"&&(l.textContent=r),s=T(xe),i=I(xe,"DIV",{class:!0});var Te=z(i);c=I(Te,"DIV",{});var Je=z(c);L(u.$$.fragment,Je),_=T(Je),L(m.$$.fragment,Je),$=T(Je),ke&&ke.l(Je),Je.forEach(d),E=T(Te),A=I(Te,"DIV",{});var ze=z(A);L(p.$$.fragment,ze),f=T(ze),L(g.$$.fragment,ze),H=T(ze),Ce&&Ce.l(ze),ze.forEach(d),U=T(Te),N=I(Te,"DIV",{});var We=z(N);L(X.$$.fragment,We),Q=T(We),L(C.$$.fragment,We),J=T(We),Ae&&Ae.l(We),We.forEach(d),B=T(Te),ge&&ge.l(Te),Te.forEach(d),K=T(xe),ae=I(xe,"DIV",{});var je=z(ae);L(Y.$$.fragment,je),$e=T(je),L(G.$$.fragment,je),je.forEach(d),ve=T(xe),Ne=I(xe,"DIV",{});var at=z(Ne);L(W.$$.fragment,at),re=T(at),L(oe.$$.fragment,at),at.forEach(d),xe.forEach(d),we=T(ee),Se=I(ee,"DIV",{class:!0});var Ge=z(Se);Re=I(Ge,"H3",{class:!0,"data-svelte-h":!0}),be(Re)!=="svelte-144dq33"&&(Re.textContent=lt),et=T(Ge),L(Z.$$.fragment,Ge),Ge.forEach(d),Le=T(ee),Ee&&Ee.l(ee),ee.forEach(d),this.h()},h(){O(l,"class","text-lg font-semibold text-gray-900 dark:text-white"),O(i,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),O(o,"class","space-y-4"),O(Re,"class","text-lg font-semibold text-gray-900 dark:text-white mb-4"),O(Se,"class","border-t border-gray-200 dark:border-gray-700 pt-6"),O(a,"class","p-6 space-y-6")},m(j,ee){pe&&pe.m(j,ee),b(j,t,ee),b(j,a,ee),h(a,o),h(o,l),h(o,s),h(o,i),h(i,c),V(u,c,null),h(c,_),V(m,c,null),h(c,$),ke&&ke.m(c,null),h(i,E),h(i,A),V(p,A,null),h(A,f),V(g,A,null),h(A,H),Ce&&Ce.m(A,null),h(i,U),h(i,N),V(X,N,null),h(N,Q),V(C,N,null),h(N,J),Ae&&Ae.m(N,null),h(i,B),ge&&ge.m(i,null),h(o,K),h(o,ae),V(Y,ae,null),h(ae,$e),V(G,ae,null),h(o,ve),h(o,Ne),V(W,Ne,null),h(Ne,re),V(oe,Ne,null),h(a,we),h(a,Se),h(Se,Re),h(Se,et),V(Z,Se,null),h(a,Le),Ee&&Ee.m(a,null),tt=!0},p(j,ee){ee[0]&896&&(e=j[9]&&(Object.keys(j[8]).length>0||j[7].length>0)),e?pe?(pe.p(j,ee),ee[0]&896&&v(pe,1)):(pe=wa(j),pe.c(),v(pe,1),pe.m(t.parentNode,t)):pe&&(ie(),k(pe,1,1,()=>{pe=null}),ce());const xe={};ee[1]&16777216&&(xe.$$scope={dirty:ee,ctx:j}),u.$set(xe);const Te={};ee[0]&1&&(Te.disabled=j[0]==="view"),ee[0]&256&&(Te.class="rounded-sm "+(j[8].tipo?"border-red-500":"")),ee[1]&16777216&&(Te.$$scope={dirty:ee,ctx:j}),!w&&ee[0]&2&&(w=!0,Te.value=j[1].tipo,Be(()=>w=!1)),m.$set(Te),j[8].tipo?ke?ke.p(j,ee):(ke=Aa(j),ke.c(),ke.m(c,null)):ke&&(ke.d(1),ke=null);const Je={};ee[1]&16777216&&(Je.$$scope={dirty:ee,ctx:j}),p.$set(Je);const ze={};ee[0]&1&&(ze.disabled=j[0]==="view"),ee[0]&256&&(ze.class="rounded-sm "+(j[8].data_documento?"border-red-500":"")),!q&&ee[0]&2&&(q=!0,ze.value=j[1].data_documento,Be(()=>q=!1)),g.$set(ze),j[8].data_documento?Ce?Ce.p(j,ee):(Ce=Na(j),Ce.c(),Ce.m(A,null)):Ce&&(Ce.d(1),Ce=null);const We={};ee[1]&16777216&&(We.$$scope={dirty:ee,ctx:j}),X.$set(We);const je={};ee[0]&1&&(je.disabled=j[0]==="view"),ee[0]&256&&(je.class="rounded-sm "+(j[8].almoxarifado_id?"border-red-500":"")),ee[0]&1024|ee[1]&16777216&&(je.$$scope={dirty:ee,ctx:j}),!x&&ee[0]&2&&(x=!0,je.value=j[1].almoxarifado_id,Be(()=>x=!1)),C.$set(je),j[8].almoxarifado_id?Ae?Ae.p(j,ee):(Ae=Da(j),Ae.c(),Ae.m(N,null)):Ae&&(Ae.d(1),Ae=null),j[1].tipo==="TRANSFERENCIA"?ge?(ge.p(j,ee),ee[0]&2&&v(ge,1)):(ge=qa(j),ge.c(),v(ge,1),ge.m(i,null)):ge&&(ie(),k(ge,1,1,()=>{ge=null}),ce());const at={};ee[1]&16777216&&(at.$$scope={dirty:ee,ctx:j}),Y.$set(at);const Ge={};ee[0]&1&&(Ge.disabled=j[0]==="view"),!ne&&ee[0]&2&&(ne=!0,Ge.value=j[1].descricao,Be(()=>ne=!1)),G.$set(Ge);const At={};ee[1]&16777216&&(At.$$scope={dirty:ee,ctx:j}),W.$set(At);const bt={};ee[0]&1&&(bt.disabled=j[0]==="view"),!se&&ee[0]&2&&(se=!0,bt.value=j[1].observacoes,Be(()=>se=!1)),oe.$set(bt);const rt={};ee[0]&2&&(rt.tipo=j[1].tipo),ee[0]&2&&(rt.almoxarifadoId=j[1].almoxarifado_id),ee[0]&2&&(rt.almoxarifadoDestinoId=j[1].almoxarifado_destino_id),ee[0]&1&&(rt.readonly=j[0]==="view"),!_e&&ee[0]&4&&(_e=!0,rt.itens=j[2],Be(()=>_e=!1)),Z.$set(rt),j[5]>0?Ee?Ee.p(j,ee):(Ee=Sa(j),Ee.c(),Ee.m(a,null)):Ee&&(Ee.d(1),Ee=null)},i(j){tt||(v(pe),v(u.$$.fragment,j),v(m.$$.fragment,j),v(p.$$.fragment,j),v(g.$$.fragment,j),v(X.$$.fragment,j),v(C.$$.fragment,j),v(ge),v(Y.$$.fragment,j),v(G.$$.fragment,j),v(W.$$.fragment,j),v(oe.$$.fragment,j),v(Z.$$.fragment,j),tt=!0)},o(j){k(pe),k(u.$$.fragment,j),k(m.$$.fragment,j),k(p.$$.fragment,j),k(g.$$.fragment,j),k(X.$$.fragment,j),k(C.$$.fragment,j),k(ge),k(Y.$$.fragment,j),k(G.$$.fragment,j),k(W.$$.fragment,j),k(oe.$$.fragment,j),k(Z.$$.fragment,j),tt=!1},d(j){j&&(d(t),d(a)),pe&&pe.d(j),F(u),F(m),ke&&ke.d(),F(p),F(g),Ce&&Ce.d(),F(X),F(C),Ae&&Ae.d(),ge&&ge.d(),F(Y),F(G),F(W),F(oe),F(Z),Ee&&Ee.d()}}}function vn(n){let e,t,a;return t=new kt({}),{c(){e=D("div"),R(t.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0});var l=z(e);L(t.$$.fragment,l),l.forEach(d),this.h()},h(){O(e,"class","flex justify-center items-center py-12")},m(o,l){b(o,e,l),V(t,e,null),a=!0},p:he,i(o){a||(v(t.$$.fragment,o),a=!0)},o(o){k(t.$$.fragment,o),a=!1},d(o){o&&d(e),F(t)}}}function wa(n){let e,t,a;return t=new pt({props:{color:"red",class:"rounded-sm",$$slots:{default:[En]},$$scope:{ctx:n}}}),{c(){e=D("div"),R(t.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0});var l=z(e);L(t.$$.fragment,l),l.forEach(d),this.h()},h(){O(e,"class","p-6 pb-0")},m(o,l){b(o,e,l),V(t,e,null),a=!0},p(o,l){const r={};l[0]&384|l[1]&16777216&&(r.$$scope={dirty:l,ctx:o}),t.$set(r)},i(o){a||(v(t.$$.fragment,o),a=!0)},o(o){k(t.$$.fragment,o),a=!1},d(o){o&&d(e),F(t)}}}function ka(n){let e,t=n[50]+"",a;return{c(){e=D("li"),a=P(t)},l(o){e=I(o,"LI",{});var l=z(e);a=S(l,t),l.forEach(d)},m(o,l){b(o,e,l),h(e,a)},p(o,l){l[0]&256&&t!==(t=o[50]+"")&&te(a,t)},d(o){o&&d(e)}}}function Ca(n){let e,t=n[50]+"",a;return{c(){e=D("li"),a=P(t)},l(o){e=I(o,"LI",{});var l=z(e);a=S(l,t),l.forEach(d)},m(o,l){b(o,e,l),h(e,a)},p(o,l){l[0]&128&&t!==(t=o[50]+"")&&te(a,t)},d(o){o&&d(e)}}}function En(n){let e,t="Erros de valida√ß√£o:",a,o,l,r=de(Object.values(n[8])),s=[];for(let u=0;u<r.length;u+=1)s[u]=ka(Ea(n,r,u));let i=de(n[7]),c=[];for(let u=0;u<i.length;u+=1)c[u]=Ca(va(n,i,u));return{c(){e=D("span"),e.textContent=t,a=y(),o=D("ul");for(let u=0;u<s.length;u+=1)s[u].c();l=y();for(let u=0;u<c.length;u+=1)c[u].c();this.h()},l(u){e=I(u,"SPAN",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-19ugpdw"&&(e.textContent=t),a=T(u),o=I(u,"UL",{class:!0});var _=z(o);for(let m=0;m<s.length;m+=1)s[m].l(_);l=T(_);for(let m=0;m<c.length;m+=1)c[m].l(_);_.forEach(d),this.h()},h(){O(e,"class","font-medium"),O(o,"class","mt-2 list-disc list-inside")},m(u,_){b(u,e,_),b(u,a,_),b(u,o,_);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(o,null);h(o,l);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(o,null)},p(u,_){if(_[0]&256){r=de(Object.values(u[8]));let m;for(m=0;m<r.length;m+=1){const w=Ea(u,r,m);s[m]?s[m].p(w,_):(s[m]=ka(w),s[m].c(),s[m].m(o,l))}for(;m<s.length;m+=1)s[m].d(1);s.length=r.length}if(_[0]&128){i=de(u[7]);let m;for(m=0;m<i.length;m+=1){const w=va(u,i,m);c[m]?c[m].p(w,_):(c[m]=Ca(w),c[m].c(),c[m].m(o,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=i.length}},d(u){u&&(d(e),d(a),d(o)),He(s,u),He(c,u)}}}function wn(n){let e;return{c(){e=P("Tipo de Nota")},l(t){e=S(t,"Tipo de Nota")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function kn(n){let e,t="Entrada",a,o,l="Transfer√™ncia",r,s,i="Descarte";return{c(){e=D("option"),e.textContent=t,a=y(),o=D("option"),o.textContent=l,r=y(),s=D("option"),s.textContent=i,this.h()},l(c){e=I(c,"OPTION",{"data-svelte-h":!0}),be(e)!=="svelte-qgq2us"&&(e.textContent=t),a=T(c),o=I(c,"OPTION",{"data-svelte-h":!0}),be(o)!=="svelte-4m889r"&&(o.textContent=l),r=T(c),s=I(c,"OPTION",{"data-svelte-h":!0}),be(s)!=="svelte-urwv3a"&&(s.textContent=i),this.h()},h(){e.__value="ENTRADA",ye(e,e.__value),o.__value="TRANSFERENCIA",ye(o,o.__value),s.__value="DESCARTE",ye(s,s.__value)},m(c,u){b(c,e,u),b(c,a,u),b(c,o,u),b(c,r,u),b(c,s,u)},p:he,d(c){c&&(d(e),d(a),d(o),d(r),d(s))}}}function Aa(n){let e,t=n[8].tipo+"",a;return{c(){e=D("p"),a=P(t),this.h()},l(o){e=I(o,"P",{class:!0});var l=z(e);a=S(l,t),l.forEach(d),this.h()},h(){O(e,"class","text-red-500 text-sm mt-1")},m(o,l){b(o,e,l),h(e,a)},p(o,l){l[0]&256&&t!==(t=o[8].tipo+"")&&te(a,t)},d(o){o&&d(e)}}}function Cn(n){let e;return{c(){e=P("Data do Documento")},l(t){e=S(t,"Data do Documento")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Na(n){let e,t=n[8].data_documento+"",a;return{c(){e=D("p"),a=P(t),this.h()},l(o){e=I(o,"P",{class:!0});var l=z(e);a=S(l,t),l.forEach(d),this.h()},h(){O(e,"class","text-red-500 text-sm mt-1")},m(o,l){b(o,e,l),h(e,a)},p(o,l){l[0]&256&&t!==(t=o[8].data_documento+"")&&te(a,t)},d(o){o&&d(e)}}}function An(n){let e;return{c(){e=P("Almoxarifado")},l(t){e=S(t,"Almoxarifado")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Ia(n){let e,t=n[45].label+"",a,o;return{c(){e=D("option"),a=P(t),this.h()},l(l){e=I(l,"OPTION",{});var r=z(e);a=S(r,t),r.forEach(d),this.h()},h(){e.__value=o=n[45].value,ye(e,e.__value)},m(l,r){b(l,e,r),h(e,a)},p(l,r){r[0]&1024&&t!==(t=l[45].label+"")&&te(a,t),r[0]&1024&&o!==(o=l[45].value)&&(e.__value=o,ye(e,e.__value))},d(l){l&&d(e)}}}function Nn(n){let e,t="Selecione um almoxarifado",a,o,l=de(n[10]),r=[];for(let s=0;s<l.length;s+=1)r[s]=Ia(ba(n,l,s));return{c(){e=D("option"),e.textContent=t,a=y();for(let s=0;s<r.length;s+=1)r[s].c();o=le(),this.h()},l(s){e=I(s,"OPTION",{"data-svelte-h":!0}),be(e)!=="svelte-wj0l5g"&&(e.textContent=t),a=T(s);for(let i=0;i<r.length;i+=1)r[i].l(s);o=le(),this.h()},h(){e.__value="",ye(e,e.__value)},m(s,i){b(s,e,i),b(s,a,i);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(s,i);b(s,o,i)},p(s,i){if(i[0]&1024){l=de(s[10]);let c;for(c=0;c<l.length;c+=1){const u=ba(s,l,c);r[c]?r[c].p(u,i):(r[c]=Ia(u),r[c].c(),r[c].m(o.parentNode,o))}for(;c<r.length;c+=1)r[c].d(1);r.length=l.length}},d(s){s&&(d(e),d(a),d(o)),He(r,s)}}}function Da(n){let e,t=n[8].almoxarifado_id+"",a;return{c(){e=D("p"),a=P(t),this.h()},l(o){e=I(o,"P",{class:!0});var l=z(e);a=S(l,t),l.forEach(d),this.h()},h(){O(e,"class","text-red-500 text-sm mt-1")},m(o,l){b(o,e,l),h(e,a)},p(o,l){l[0]&256&&t!==(t=o[8].almoxarifado_id+"")&&te(a,t)},d(o){o&&d(e)}}}function qa(n){let e,t,a,o,l,r,s;t=new st({props:{for:"almoxarifado_destino_id",class:"mb-2",$$slots:{default:[In]},$$scope:{ctx:n}}});function i(_){n[33](_)}let c={id:"almoxarifado_destino_id",disabled:n[0]==="view",class:"rounded-sm "+(n[8].almoxarifado_destino_id?"border-red-500":""),$$slots:{default:[Dn]},$$scope:{ctx:n}};n[1].almoxarifado_destino_id!==void 0&&(c.value=n[1].almoxarifado_destino_id),o=new _t({props:c}),Me.push(()=>Ue(o,"value",i));let u=n[8].almoxarifado_destino_id&&ya(n);return{c(){e=D("div"),R(t.$$.fragment),a=y(),R(o.$$.fragment),r=y(),u&&u.c()},l(_){e=I(_,"DIV",{});var m=z(e);L(t.$$.fragment,m),a=T(m),L(o.$$.fragment,m),r=T(m),u&&u.l(m),m.forEach(d)},m(_,m){b(_,e,m),V(t,e,null),h(e,a),V(o,e,null),h(e,r),u&&u.m(e,null),s=!0},p(_,m){const w={};m[1]&16777216&&(w.$$scope={dirty:m,ctx:_}),t.$set(w);const $={};m[0]&1&&($.disabled=_[0]==="view"),m[0]&256&&($.class="rounded-sm "+(_[8].almoxarifado_destino_id?"border-red-500":"")),m[0]&2048|m[1]&16777216&&($.$$scope={dirty:m,ctx:_}),!l&&m[0]&2&&(l=!0,$.value=_[1].almoxarifado_destino_id,Be(()=>l=!1)),o.$set($),_[8].almoxarifado_destino_id?u?u.p(_,m):(u=ya(_),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(_){s||(v(t.$$.fragment,_),v(o.$$.fragment,_),s=!0)},o(_){k(t.$$.fragment,_),k(o.$$.fragment,_),s=!1},d(_){_&&d(e),F(t),F(o),u&&u.d()}}}function In(n){let e;return{c(){e=P("Almoxarifado Destino")},l(t){e=S(t,"Almoxarifado Destino")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Ta(n){let e,t=n[45].label+"",a,o;return{c(){e=D("option"),a=P(t),this.h()},l(l){e=I(l,"OPTION",{});var r=z(e);a=S(r,t),r.forEach(d),this.h()},h(){e.__value=o=n[45].value,ye(e,e.__value)},m(l,r){b(l,e,r),h(e,a)},p(l,r){r[0]&2048&&t!==(t=l[45].label+"")&&te(a,t),r[0]&2048&&o!==(o=l[45].value)&&(e.__value=o,ye(e,e.__value))},d(l){l&&d(e)}}}function Dn(n){let e,t="Selecione o destino",a,o,l=de(n[11]),r=[];for(let s=0;s<l.length;s+=1)r[s]=Ta($a(n,l,s));return{c(){e=D("option"),e.textContent=t,a=y();for(let s=0;s<r.length;s+=1)r[s].c();o=le(),this.h()},l(s){e=I(s,"OPTION",{"data-svelte-h":!0}),be(e)!=="svelte-1814uxc"&&(e.textContent=t),a=T(s);for(let i=0;i<r.length;i+=1)r[i].l(s);o=le(),this.h()},h(){e.__value="",ye(e,e.__value)},m(s,i){b(s,e,i),b(s,a,i);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(s,i);b(s,o,i)},p(s,i){if(i[0]&2048){l=de(s[11]);let c;for(c=0;c<l.length;c+=1){const u=$a(s,l,c);r[c]?r[c].p(u,i):(r[c]=Ta(u),r[c].c(),r[c].m(o.parentNode,o))}for(;c<r.length;c+=1)r[c].d(1);r.length=l.length}},d(s){s&&(d(e),d(a),d(o)),He(r,s)}}}function ya(n){let e,t=n[8].almoxarifado_destino_id+"",a;return{c(){e=D("p"),a=P(t),this.h()},l(o){e=I(o,"P",{class:!0});var l=z(e);a=S(l,t),l.forEach(d),this.h()},h(){O(e,"class","text-red-500 text-sm mt-1")},m(o,l){b(o,e,l),h(e,a)},p(o,l){l[0]&256&&t!==(t=o[8].almoxarifado_destino_id+"")&&te(a,t)},d(o){o&&d(e)}}}function qn(n){let e;return{c(){e=P("Descri√ß√£o")},l(t){e=S(t,"Descri√ß√£o")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Tn(n){let e;return{c(){e=P("Observa√ß√µes")},l(t){e=S(t,"Observa√ß√µes")},m(t,a){b(t,e,a)},d(t){t&&d(e)}}}function Sa(n){let e,t,a="Resumo",o,l,r,s,i="Total de itens:",c,u,_,m,w,$,E="Valor total:",A,p,f,g=n[4].toFixed(2)+"",q;return{c(){e=D("div"),t=D("h4"),t.textContent=a,o=y(),l=D("div"),r=D("div"),s=D("span"),s.textContent=i,c=y(),u=D("span"),_=P(n[5]),m=y(),w=D("div"),$=D("span"),$.textContent=E,A=y(),p=D("span"),f=P("R$ "),q=P(g),this.h()},l(H){e=I(H,"DIV",{class:!0});var U=z(e);t=I(U,"H4",{class:!0,"data-svelte-h":!0}),be(t)!=="svelte-3i5efz"&&(t.textContent=a),o=T(U),l=I(U,"DIV",{class:!0});var N=z(l);r=I(N,"DIV",{});var X=z(r);s=I(X,"SPAN",{class:!0,"data-svelte-h":!0}),be(s)!=="svelte-18up8m1"&&(s.textContent=i),c=T(X),u=I(X,"SPAN",{class:!0});var Q=z(u);_=S(Q,n[5]),Q.forEach(d),X.forEach(d),m=T(N),w=I(N,"DIV",{});var C=z(w);$=I(C,"SPAN",{class:!0,"data-svelte-h":!0}),be($)!=="svelte-j9jcfb"&&($.textContent=E),A=T(C),p=I(C,"SPAN",{class:!0});var x=z(p);f=S(x,"R$ "),q=S(x,g),x.forEach(d),C.forEach(d),N.forEach(d),U.forEach(d),this.h()},h(){O(t,"class","font-medium text-gray-900 dark:text-white mb-2"),O(s,"class","text-gray-600 dark:text-gray-400"),O(u,"class","font-medium ml-2"),O($,"class","text-gray-600 dark:text-gray-400"),O(p,"class","font-medium ml-2 text-green-600 dark:text-green-400"),O(l,"class","grid grid-cols-2 gap-4 text-sm"),O(e,"class","bg-gray-50 dark:bg-gray-800 rounded-lg p-4")},m(H,U){b(H,e,U),h(e,t),h(e,o),h(e,l),h(l,r),h(r,s),h(r,c),h(r,u),h(u,_),h(l,m),h(l,w),h(w,$),h(w,A),h(w,p),h(p,f),h(p,q)},p(H,U){U[0]&32&&te(_,H[5]),U[0]&16&&g!==(g=H[4].toFixed(2)+"")&&te(q,g)},d(H){H&&d(e)}}}function yn(n){let e,t,a,o,l,r;e=new co({props:{title:n[16],objectType:"NOTA DE MOVIMENTA√á√ÉO",iconName:"FileDocOutline",status:n[13],statusType:"movimento",additionalInfo:n[12],primaryAction:n[15],secondaryAction:n[14]}}),e.$on("close",n[19]),e.$on("primaryAction",n[18]),e.$on("secondaryAction",n[17]);const s=[vn,bn],i=[];function c(u,_){return u[3]?0:1}return a=c(n),o=i[a]=s[a](n),{c(){R(e.$$.fragment),t=y(),o.c(),l=le()},l(u){L(e.$$.fragment,u),t=T(u),o.l(u),l=le()},m(u,_){V(e,u,_),b(u,t,_),i[a].m(u,_),b(u,l,_),r=!0},p(u,_){const m={};_[0]&65536&&(m.title=u[16]),_[0]&8192&&(m.status=u[13]),_[0]&4096&&(m.additionalInfo=u[12]),_[0]&32768&&(m.primaryAction=u[15]),_[0]&16384&&(m.secondaryAction=u[14]),e.$set(m);let w=a;a=c(u),a===w?i[a].p(u,_):(ie(),k(i[w],1,1,()=>{i[w]=null}),ce(),o=i[a],o?o.p(u,_):(o=i[a]=s[a](u),o.c()),v(o,1),o.m(l.parentNode,l))},i(u){r||(v(e.$$.fragment,u),v(o),r=!0)},o(u){k(e.$$.fragment,u),k(o),r=!1},d(u){u&&(d(t),d(l)),F(e,u),i[a].d(u)}}}function Sn(n){let e,t,a;function o(r){n[37](r)}let l={placement:"right",width:"w-full max-w-[940px]",backdrop:!0,activateClickOutside:!0,bgOpacity:"bg-black/50",position:"fixed",id:"notas-detail-drawer",class:"drawer-notas",$$slots:{default:[yn]},$$scope:{ctx:n}};return n[6]!==void 0&&(l.hidden=n[6]),e=new io({props:l}),Me.push(()=>Ue(e,"hidden",o)),{c(){R(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){V(e,r,s),a=!0},p(r,s){const i={};s[0]&131007|s[1]&16777216&&(i.$$scope={dirty:s,ctx:r}),!t&&s[0]&64&&(t=!0,i.hidden=r[6],Be(()=>t=!1)),e.$set(i)},i(r){a||(v(e.$$.fragment,r),a=!0)},o(r){k(e.$$.fragment,r),a=!1},d(r){F(e,r)}}}function Pn(n,e,t){let a,o,l,r,s,i,c,u,_,{open:m=!1}=e,{mode:w="create"}=e,{tipo:$="ENTRADA"}=e,{nota:E=null}=e;const A=!1,p=it();let f=!m,g=m,q={tipo:"ENTRADA",almoxarifado_id:"",almoxarifado_destino_id:"",descricao:"",observacoes:"",data_documento:new Date().toISOString().split("T")[0],itens:[]},H=[],U=[],N={},X=!1,Q=[],C=[],x=!1,J=!1;Et(async()=>{await B()});async function B(){t(3,J=!0);try{const Z=await Ha.listarAlmoxarifados();t(10,Q=Z),t(27,C=Z),w==="edit"&&E?await K():t(1,q.tipo=$,q)}catch(Z){console.error("Erro ao carregar dados do formul√°rio:",Z)}finally{t(3,J=!1)}}async function K(){var Z;if(E)try{t(1,q={tipo:E.tipo,almoxarifado_id:E.almoxarifado_id||"",almoxarifado_destino_id:E.almoxarifado_destino_id||"",descricao:E.descricao||"",observacoes:E.observacoes||"",data_documento:((Z=E.data_documento)==null?void 0:Z.split("T")[0])||new Date().toISOString().split("T")[0],itens:[]}),E.itens&&E.itens.length>0&&t(2,H=E.itens.map(_e=>({tipo_epi_id:_e.tipo_epi_id,quantidade:_e.quantidade,custo_unitario:_e.custo_unitario||0,observacoes:_e.observacoes||""})))}catch(_e){console.error("Erro ao carregar dados da nota:",_e)}}function ae(){t(1,q={tipo:$,almoxarifado_id:"",almoxarifado_destino_id:"",descricao:"",observacoes:"",data_documento:new Date().toISOString().split("T")[0],itens:[]}),t(2,H=[]),t(8,N={}),t(9,X=!1),t(7,U=[])}function Y(){return t(8,N={}),q.almoxarifado_id||t(8,N.almoxarifado_id="Almoxarifado √© obrigat√≥rio",N),q.tipo==="TRANSFERENCIA"&&!q.almoxarifado_destino_id&&t(8,N.almoxarifado_destino_id="Almoxarifado de destino √© obrigat√≥rio para transfer√™ncia",N),q.tipo==="TRANSFERENCIA"&&q.almoxarifado_id===q.almoxarifado_destino_id&&t(8,N.almoxarifado_destino_id="Almoxarifado de destino deve ser diferente do origem",N),q.data_documento||t(8,N.data_documento="Data do documento √© obrigat√≥ria",N),H.length===0?(t(7,U=["Pelo menos um item deve ser adicionado"]),!1):Object.keys(N).length===0}async function $e(){if(!Y()){t(9,X=!0);return}await ne("rascunho")}async function G(){if(!Y()){t(9,X=!0);return}await ne("concluida")}async function ne(Z){t(28,x=!0);try{const _e={...q,itens:H};let Le;if(w==="create")Le=(await Oe.criarNota(_e)).id;else{if(!(E!=null&&E.id))throw new Error("ID da nota n√£o encontrado");await Oe.atualizarNota(E.id,_e),Le=E.id}p("salvar",{notaId:Le,modo:Z})}catch(_e){throw console.error("Erro ao salvar nota:",_e),_e}finally{t(28,x=!1)}}function ve(){p("close")}function Ne(Z){t(2,H=Z.detail),t(1,q.itens=H,q),H.length>0&&t(7,U=[])}function W(Z){Z.detail?t(7,U=[Z.detail]):t(7,U=[])}function re(Z){n.$$.not_equal(q.tipo,Z)&&(q.tipo=Z,t(1,q))}function oe(Z){n.$$.not_equal(q.data_documento,Z)&&(q.data_documento=Z,t(1,q))}function se(Z){n.$$.not_equal(q.almoxarifado_id,Z)&&(q.almoxarifado_id=Z,t(1,q))}function we(Z){n.$$.not_equal(q.almoxarifado_destino_id,Z)&&(q.almoxarifado_destino_id=Z,t(1,q))}function Se(Z){n.$$.not_equal(q.descricao,Z)&&(q.descricao=Z,t(1,q))}function Re(Z){n.$$.not_equal(q.observacoes,Z)&&(q.observacoes=Z,t(1,q))}function lt(Z){H=Z,t(2,H)}function et(Z){f=Z,t(6,f),t(22,m),t(26,g)}return n.$$set=Z=>{"open"in Z&&t(22,m=Z.open),"mode"in Z&&t(0,w=Z.mode),"tipo"in Z&&t(23,$=Z.tipo),"nota"in Z&&t(24,E=Z.nota)},n.$$.update=()=>{n.$$.dirty[0]&71303168&&m!==g&&(t(6,f=!m),t(26,g=m)),n.$$.dirty[0]&4194304&&m&&(ae(),B()),n.$$.dirty[0]&2&&q.tipo!=="TRANSFERENCIA"&&t(1,q.almoxarifado_destino_id="",q),n.$$.dirty[0]&3&&t(16,a=w==="create"?`Nova Nota - ${ct(q.tipo)}`:w==="edit"?`Editar Nota - ${ct(q.tipo)}`:`Visualizar Nota - ${ct(q.tipo)}`),n.$$.dirty[0]&4&&t(5,o=H.length),n.$$.dirty[0]&4&&t(4,l=H.reduce((Z,_e)=>{const Le=typeof _e.custo_unitario=="number"?_e.custo_unitario:0;return Z+_e.quantidade*Le},0)),n.$$.dirty[0]&268435465&&t(29,r=!x&&!J&&w!=="view"),n.$$.dirty[0]&536870913&&t(15,s=w==="view"?null:{text:"Concluir",icon:"CheckOutline",disabled:!r}),n.$$.dirty[0]&536870913&&t(14,i=w==="view"?null:{text:"Salvar Rascunho",icon:"FloppyDiskOutline",disabled:!r}),n.$$.dirty[0]&16777217&&t(13,c=w==="create"?"NOVA":w==="edit"?"EDITANDO":(E==null?void 0:E.status)||"VISUALIZANDO"),n.$$.dirty[0]&48&&t(12,u=[`${o} ${o===1?"item":"itens"}`,l>0?`R$ ${l.toFixed(2)}`:"Sem valor"]),n.$$.dirty[0]&134217730&&t(11,_=C.filter(Z=>Z.value!==q.almoxarifado_id))},[w,q,H,J,l,o,f,U,N,X,Q,_,u,c,i,s,a,$e,G,ve,Ne,W,m,$,E,A,g,C,x,r,re,oe,se,we,Se,Re,lt,et]}class On extends Xe{constructor(e){super(),Ze(this,e,Pn,Sn,Ye,{open:22,mode:0,tipo:23,nota:24,loading:25},null,[-1,-1])}get loading(){return this.$$.ctx[25]}}function Pa(n){let e,t;return e=new pt({props:{color:"yellow",class:"mb-4",$$slots:{icon:[Vn],default:[Fn]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o&6&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Fn(n){let e,t="Modo Offline:",a,o,l,r,s="O sistema est√° funcionando com dados de demonstra√ß√£o. As opera√ß√µes ser√£o limitadas at√© que a conex√£o seja restabelecida.";return{c(){e=D("span"),e.textContent=t,a=y(),o=P(n[1]),l=y(),r=D("span"),r.textContent=s,this.h()},l(i){e=I(i,"SPAN",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-u3uqae"&&(e.textContent=t),a=T(i),o=S(i,n[1]),l=T(i),r=I(i,"SPAN",{class:!0,"data-svelte-h":!0}),be(r)!=="svelte-rrnpjt"&&(r.textContent=s),this.h()},h(){O(e,"class","font-medium"),O(r,"class","block text-sm mt-1")},m(i,c){b(i,e,c),b(i,a,c),b(i,o,c),b(i,l,c),b(i,r,c)},p(i,c){c&2&&te(o,i[1])},d(i){i&&(d(e),d(a),d(o),d(l),d(r))}}}function Vn(n){let e,t;return e=new uo({props:{slot:"icon",class:"w-4 h-4"}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p:he,i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Rn(n){let e,t,a=n[0]&&Pa(n);return{c(){a&&a.c(),e=le()},l(o){a&&a.l(o),e=le()},m(o,l){a&&a.m(o,l),b(o,e,l),t=!0},p(o,[l]){o[0]?a?(a.p(o,l),l&1&&v(a,1)):(a=Pa(o),a.c(),v(a,1),a.m(e.parentNode,e)):a&&(ie(),k(a,1,1,()=>{a=null}),ce())},i(o){t||(v(a),t=!0)},o(o){k(a),t=!1},d(o){o&&d(e),a&&a.d(o)}}}function Ln(n,e,t){let{visible:a=!1}=e,{message:o="Backend indispon√≠vel - usando dados de demonstra√ß√£o"}=e;return n.$$set=l=>{"visible"in l&&t(0,a=l.visible),"message"in l&&t(1,o=l.message)},[a,o]}class xn extends Xe{constructor(e){super(),Ze(this,e,Ln,Rn,Ye,{visible:0,message:1})}}function zn(n){let e,t,a,o,l,r;return e=new xn({props:{visible:n[5]}}),a=new kl({props:{items:n[6].items,loading:n[6].loading,error:n[6].error,pagination:n[6].pagination,filters:n[6].filters,filterOptions:n[6].filterOptions}}),a.$on("searchChange",n[40]),a.$on("tipoFilterChange",n[41]),a.$on("statusFilterChange",n[42]),a.$on("responsavelFilterChange",n[43]),a.$on("almoxarifadoFilterChange",n[44]),a.$on("dataInicioChange",n[45]),a.$on("dataFimChange",n[46]),a.$on("clearFilters",n[16]),a.$on("tabChange",n[47]),a.$on("pageChange",n[48]),a.$on("pageSizeChange",n[49]),a.$on("novaNota",n[19]),a.$on("editarNota",n[50]),a.$on("visualizarNota",n[51]),a.$on("excluirNota",n[52]),a.$on("concluirNota",n[53]),a.$on("cancelarNota",n[54]),l=new On({props:{open:n[2],mode:n[0],tipo:n[1],nota:n[3],loading:n[4]}}),l.$on("salvar",n[25]),l.$on("cancelar",n[26]),l.$on("close",n[27]),{c(){R(e.$$.fragment),t=y(),R(a.$$.fragment),o=y(),R(l.$$.fragment)},l(s){L(e.$$.fragment,s),t=T(s),L(a.$$.fragment,s),o=T(s),L(l.$$.fragment,s)},m(s,i){V(e,s,i),b(s,t,i),V(a,s,i),b(s,o,i),V(l,s,i),r=!0},p(s,i){const c={};i[0]&32&&(c.visible=s[5]),e.$set(c);const u={};i[0]&64&&(u.items=s[6].items),i[0]&64&&(u.loading=s[6].loading),i[0]&64&&(u.error=s[6].error),i[0]&64&&(u.pagination=s[6].pagination),i[0]&64&&(u.filters=s[6].filters),i[0]&64&&(u.filterOptions=s[6].filterOptions),a.$set(u);const _={};i[0]&4&&(_.open=s[2]),i[0]&1&&(_.mode=s[0]),i[0]&2&&(_.tipo=s[1]),i[0]&8&&(_.nota=s[3]),i[0]&16&&(_.loading=s[4]),l.$set(_)},i(s){r||(v(e.$$.fragment,s),v(a.$$.fragment,s),v(l.$$.fragment,s),r=!0)},o(s){k(e.$$.fragment,s),k(a.$$.fragment,s),k(l.$$.fragment,s),r=!1},d(s){s&&(d(t),d(o)),F(e,s),F(a,s),F(l,s)}}}function Mn(n,e,t){let a,o,l,{initialPageSize:r=20}=e;const s=it(),i=eo(M=>Oe.listarNotas(M),{initialPageSize:r,enableCache:!0,cacheTimeout:3*60*1e3,debounceDelay:300});Ka(n,i,M=>t(39,l=M));let c="",u="todas",_="todos",m="todos",w="todos",$="",E="",A=0,p=!1,f="create",g="ENTRADA",q=null,H=!1,U=!1,N={responsaveis:[{value:"todos",label:"Todos os Respons√°veis"}],almoxarifados:[{value:"todos",label:"Todos os Almoxarifados"}],tipos:[],status:[]};Et(async()=>{console.log("üìã NotesContainer: Inicializando..."),await to.initialize(),await X(),ne(),console.log("‚úÖ NotesContainer: Inicializado")}),Xa(()=>{});async function X(){var M,fe,ue;try{const Ie=await Oe.obterOpcoesFilters();t(37,N={responsaveis:[{value:"todos",label:"Todos os Respons√°veis"},...Ie.responsaveis],almoxarifados:[{value:"todos",label:"Todos os Almoxarifados"},...Ie.almoxarifados],tipos:Ie.tipos,status:[{value:"todos",label:"Todos os Status"},...Ie.status.map(Fe=>({value:Fe.value,label:Fe.label}))]})}catch(Ie){console.error("Erro ao carregar op√ß√µes de filtros:",Ie),((M=Ie.message)!=null&&M.includes("Backend pode estar iniciando")||(fe=Ie.message)!=null&&fe.includes("timeout")||(ue=Ie.message)!=null&&ue.includes("fallback"))&&t(5,U=!0)}}function Q(){const M={search:c||void 0,dataInicio:$||void 0,dataFim:E||void 0};switch(u!=="todas"&&(M.tipo=u),A){case 0:M.status="CONCLUIDA";break;case 1:M.status="RASCUNHO";break;case 2:M.status="CANCELADA";break;default:M.status="CONCLUIDA";break}return m!=="todos"&&(M.responsavel_id=m),w!=="todos"&&(M.almoxarifado_id=w),console.log("üîç BuildFilters: activeTab =",A,", status filter =",M.status),M}function C(M){t(36,A=M),ne()}function x(M){t(29,c=M),i.setSearch(M)}function J(M){t(30,u=M),ne()}function B(M){t(31,_=M),ne()}function K(M){t(32,m=M),ne()}function ae(M){t(33,w=M),ne()}function Y(M){t(34,$=M),ne()}function $e(M){t(35,E=M),ne()}function G(){t(29,c=""),t(30,u="todas"),t(31,_="todos"),t(32,m="todos"),t(33,w="todos"),t(34,$=""),t(35,E=""),t(36,A=0),ne()}function ne(){const M=Q();i.setFilters(M)}function ve(M){i.goToPage(M)}function Ne(M){i.fetchPage({limit:M,page:1})}function W(){t(3,q=null),t(0,f="create"),t(1,g="ENTRADA"),t(2,p=!0)}async function re(M){var fe;try{console.log("‚úèÔ∏è Carregando dados completos da nota para edi√ß√£o:",M.id);const ue=await Oe.obterNota(M.id);t(3,q=ue),t(0,f="edit"),t(1,g=ue.tipo_nota||ue.tipo),t(2,p=!0),console.log("‚úÖ Dados completos carregados para edi√ß√£o:",{id:ue.id,itens:((fe=ue.itens)==null?void 0:fe.length)||0,status:ue.status})}catch(ue){console.error("‚ùå Erro ao carregar dados completos da nota:",ue),t(3,q=M),t(0,f="edit"),t(1,g=M.tipo),t(2,p=!0),Pe.warning("Aviso","Alguns detalhes podem n√£o estar dispon√≠veis")}}async function oe(M){var fe;try{console.log("üëÅÔ∏è Carregando dados completos da nota para visualiza√ß√£o:",M.id);const ue=await Oe.obterNota(M.id);t(3,q=ue),t(0,f="view"),t(1,g=ue.tipo_nota||ue.tipo),t(2,p=!0),console.log("‚úÖ Dados completos carregados:",{id:ue.id,itens:((fe=ue.itens)==null?void 0:fe.length)||0,status:ue.status})}catch(ue){console.error("‚ùå Erro ao carregar dados completos da nota:",ue),t(3,q=M),t(0,f="view"),t(1,g=M.tipo),t(2,p=!0),Pe.warning("Aviso","Alguns detalhes podem n√£o estar dispon√≠veis")}}async function se(M){try{await Oe.excluirNota(M.id),Pe.success("Nota removida",`Nota ${M.numero||M.id.slice(0,8)} foi removida`),i.reload(),s("notaDeleted",M.id)}catch(fe){console.error("Erro ao excluir nota:",fe),Pe.error("Erro ao excluir","N√£o foi poss√≠vel remover a nota")}}async function we(M){var fe,ue,Ie;try{const Fe=await Oe.validarNotaAntesConcluir(M.id);if(!Fe.pode_concluir){Pe.error("N√£o √© poss√≠vel concluir",Fe.erros.join(", "));return}console.log("‚úÖ Valida√ß√£o local passou, prosseguindo com conclus√£o...");const nt=await Oe.concluirNota(M.id);console.log("üìã Resposta da conclus√£o:",nt);const Ee=nt.data||nt,j=((fe=Ee.movimentacoesCriadas)==null?void 0:fe.length)||((Ie=(ue=Ee.data)==null?void 0:ue.movimentacoesCriadas)==null?void 0:Ie.length)||Ee.movimentacoes_criadas||"N/A";try{const ee=await Oe.obterNota(M.id);if(ee.status!=="CONCLUIDA"&&ee._status!=="CONCLUIDA")throw new Error("Nota n√£o foi conclu√≠da no backend");console.log("‚úÖ Confirmado: Nota foi conclu√≠da no backend")}catch(ee){console.error("‚ùå Erro na verifica√ß√£o p√≥s-conclus√£o:",ee),Pe.error("Erro na conclus√£o","Nota pode n√£o ter sido conclu√≠da corretamente");return}Pe.success("Nota conclu√≠da",`Nota conclu√≠da com sucesso! ${j!=="N/A"&&j!==0?`${j} movimenta√ß√µes criadas`:"Verificar movimenta√ß√µes no backend"}`),i.reload(),s("notaConcluida",{...M,status:"CONCLUIDA"})}catch(Fe){console.error("Erro ao concluir nota:",Fe),Pe.error("Erro ao concluir","N√£o foi poss√≠vel concluir a nota")}}async function Se(M){try{const fe=await Oe.validarCancelamento(M.id);if(!fe.pode_cancelar){Pe.error("N√£o √© poss√≠vel cancelar",fe.motivo||"Nota n√£o pode ser cancelada");return}await Oe.cancelarNota(M.id),Pe.success("Nota cancelada",`Nota ${M.numero||M.id.slice(0,8)} foi cancelada`),i.reload(),s("notaCancelada",M.id)}catch(fe){console.error("Erro ao cancelar nota:",fe),Pe.error("Erro ao cancelar","N√£o foi poss√≠vel cancelar a nota")}}async function Re(M){t(4,H=!0);try{const{notaId:fe,modo:ue}=M.detail;ue==="concluida"&&await we({id:fe}),i.reload(),await X(),t(2,p=!1),t(3,q=null);const Ie=ue==="rascunho"?"Rascunho salvo com sucesso":"Nota conclu√≠da com sucesso";if(Pe.success("Sucesso",Ie),ue==="rascunho"){const Fe=await Oe.obterNota(fe);s(f==="create"?"notaCreated":"notaUpdated",Fe)}}catch(fe){console.error("Erro ao salvar nota:",fe),Pe.error("Erro ao salvar","N√£o foi poss√≠vel salvar a nota")}finally{t(4,H=!1)}}function lt(){t(2,p=!1),t(3,q=null),t(4,H=!1)}function et(){t(2,p=!1),t(3,q=null),t(4,H=!1)}const Z=M=>x(M.detail),_e=M=>J(M.detail),Le=M=>B(M.detail),tt=M=>K(M.detail),pe=M=>ae(M.detail),gt=M=>Y(M.detail),ft=M=>$e(M.detail),ke=M=>C(M.detail),ht=M=>ve(M.detail),dt=M=>Ne(M.detail),Ce=M=>{re(M.detail)},$t=M=>{oe(M.detail)},mt=M=>se(M.detail),Ae=M=>we(M.detail),ge=M=>Se(M.detail);return n.$$set=M=>{"initialPageSize"in M&&t(28,r=M.initialPageSize)},n.$$.update=()=>{n.$$.dirty[0]&1610612736|n.$$.dirty[1]&31&&t(38,a=c!==""||u!=="todas"||_!=="todos"||m!=="todos"||w!=="todos"||$!==""||E!==""),n.$$.dirty[0]&3,n.$$.dirty[1]&256&&l.items.some(M=>M.id.startsWith("fallback-"))&&t(5,U=!0),n.$$.dirty[0]&1610612736|n.$$.dirty[1]&511&&t(6,o={items:l.items,loading:l.loading,error:l.error,pagination:{currentPage:l.page,totalPages:l.totalPages,pageSize:l.pageSize,total:l.total,hasNext:i.hasNext(),hasPrev:i.hasPrev()},filters:{searchTerm:c,tipoFilter:u,statusFilter:_,responsavelFilter:m,almoxarifadoFilter:w,dataInicioFilter:$,dataFimFilter:E,hasActiveFilters:a,activeTab:A},filterOptions:N})},[f,g,p,q,H,U,o,i,C,x,J,B,K,ae,Y,$e,G,ve,Ne,W,re,oe,se,we,Se,Re,lt,et,r,c,u,_,m,w,$,E,A,N,a,l,Z,_e,Le,tt,pe,gt,ft,ke,ht,dt,Ce,$t,mt,Ae,ge]}class Un extends Xe{constructor(e){super(),Ze(this,e,Mn,zn,Ye,{initialPageSize:28},null,[-1,-1])}}function Bn(n){let e,t;return e=new Un({props:{initialPageSize:10}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p:he,i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}class ur extends Xe{constructor(e){super(),Ze(this,e,null,Bn,Ye,{})}}export{ur as component};
