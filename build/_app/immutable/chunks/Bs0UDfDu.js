var sa=Object.defineProperty;var na=(l,e,t)=>e in l?sa(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var mt=(l,e,t)=>na(l,typeof e!="symbol"?e+"":e,t);import{S as lt,i as ot,s as st,G as ia,x as $t,d,m as v,o as _,J as fa,K as ua,L as ca,I as wt,b as C,e as b,f as x,j as E,u as kt,X as da,y as It,p as Ee,q as we,O as I,Y as ut,n as Xe,A as F,B as T,C as N,D as V,c as p,h as A,k as P,a as Z,T as xe,g as j,t as H,r as pe,H as ma,M as yt,Z as tt,a7 as at,a8 as rt,z as Xt,V as Ct,l as gt,U as ga}from"./BMdB51sm.js";import"./IHki7fMi.js";import{b as xt,g as $a,c as We,a as ne,B as Qe,e as pt}from"./Dwq3Do7L.js";import{i as Dt,k as pa}from"./J1Pyr5dP.js";import"./D1bAV70r.js";import{I as Yt,c as _a,s as ha,b as va,n as Ze}from"./DV0aLKez.js";import{a as ba,E as Ea,T as Zt,c as ea,d as ta,R as wa,e as qe,f as aa,g as ze,L as et,i as ka,h as Ia}from"./CWIIKvcO.js";import{e as Ye,u as ya,o as Ca}from"./BIKDjfmO.js";import{A as _t,a as xa,C as ct,b as Da,c as ra}from"./Cg173IHk.js";import{S as Aa}from"./zy2cWNNC.js";import{S as la,T as Pa}from"./-GdxS4z8.js";import{R as At}from"./BgZg3u6D.js";import{M as oa}from"./DmcNV7vt.js";import{A as Sa}from"./BMFRB0f-.js";import{C as Fa}from"./aoLga--r.js";import{F as ft}from"./B_tc1dUb.js";import{a as Pt}from"./5lP0jMhK.js";import{N as Ta}from"./6Z6Jr2QN.js";function Va(l){let e,t,a;const r=l[5].default,o=ia(r,l,l[4],null);let n=[l[1],{class:t=xt(l[0],l[2].class)},{role:"group"}],i={};for(let s=0;s<n.length;s+=1)i=$t(i,n[s]);return{c(){e=E("div"),o&&o.c(),this.h()},l(s){e=b(s,"DIV",{class:!0,role:!0});var u=x(e);o&&o.l(u),u.forEach(d),this.h()},h(){wt(e,i)},m(s,u){C(s,e,u),o&&o.m(e,null),a=!0},p(s,[u]){o&&o.p&&(!a||u&16)&&fa(o,r,s,s[4],a?ca(r,s[4],u,null):ua(s[4]),null),wt(e,i=$a(n,[u&2&&s[1],(!a||u&5&&t!==(t=xt(s[0],s[2].class)))&&{class:t},{role:"group"}]))},i(s){a||(_(o,s),a=!0)},o(s){v(o,s),a=!1},d(s){s&&d(e),o&&o.d(s)}}}function Na(l,e,t){const a=["size","divClass"];let r=kt(e,a),{$$slots:o={},$$scope:n}=e,{size:i="md"}=e,{divClass:s="inline-flex rounded-lg shadow-xs"}=e;return da("group",{size:i}),l.$$set=u=>{t(2,e=$t($t({},e),It(u))),t(1,r=kt(e,a)),"size"in u&&t(3,i=u.size),"divClass"in u&&t(0,s=u.divClass),"$$scope"in u&&t(4,n=u.$$scope)},e=It(e),[s,r,e,i,n,o]}class Ma extends lt{constructor(e){super(),ot(this,e,Na,Va,st,{size:3,divClass:0})}}class Oa{constructor(){mt(this,"cache",new Map);mt(this,"CACHE_DURATION",5*60*1e3)}async getContratadas(e={}){const t=We("/contratadas",{ativo:e.ativo,page:e.page,limit:e.limit,sort:e.sort,order:e.order});return ne.get(t)}async getContratadaById(e){return ne.get(`/contratadas/${e}`)}async createContratada(e){return ne.post("/contratadas",e)}async updateContratada(e,t){return ne.put(`/contratadas/${e}`,t)}async deleteContratada(e){return ne.delete(`/contratadas/${e}`)}async getColaboradores(e={}){const t=We("/colaboradores",{contratadaId:e.contratadaId,ativo:e.ativo,includeRelations:e.includeRelations,page:e.page,limit:e.limit,sort:e.sort,order:e.order,search:e.search,...e.filters||{}});return ne.get(t)}async getColaboradoresByContratada(e,t={}){const a=We("/colaboradores",{contratadaId:e,ativo:t.ativo,includeRelations:t.includeRelations,page:t.page,limit:t.limit,sort:t.sort,order:t.order});return!t.page&&!t.limit?ne.get(a):(await ne.get(a)).data}async getColaboradorById(e,t=!1){const a=We(`/colaboradores/${e}`,{includeRelations:t});return ne.get(a)}async createColaborador(e){return ne.post("/colaboradores",e)}async updateColaborador(e,t){return ne.put(`/colaboradores/${e}`,t)}async deleteColaborador(e){return ne.delete(`/colaboradores/${e}`)}async getTiposEPI(e={}){try{const t=await ne.get("/tipos-epi",e),a=t.data.items||[];return{data:a,total:t.data.total||a.length,page:e.page||1,pageSize:e.limit||50,totalPages:Math.ceil((t.data.total||a.length)/(e.limit||50))}}catch(t){throw console.error("‚ùå Erro ao buscar tipos EPI:",t),t}}async getTiposEPIByCategoria(e,t={}){const a=We("/tipos-epi",{categoria:e,ativo:t.ativo,page:t.page,limit:t.limit,sort:t.sort,order:t.order});return!t.page&&!t.limit?ne.get(a):(await ne.get(a)).data}async getTipoEPIById(e){return ne.get(`/tipos-epi/${e}`)}async getTipoEPIByCA(e){try{const t=We("/tipos-epi/search",{numeroCA:e});return await ne.get(t)}catch{return null}}async createTipoEPI(e){return ne.post("/tipos-epi",e)}async updateTipoEPI(e,t){return ne.put(`/tipos-epi/${e}`,t)}async deleteTipoEPI(e){return ne.delete(`/tipos-epi/${e}`)}async getAlmoxarifados(e={}){try{const t=[{id:"1",nome:"Almoxarifado Central",codigo:"ALM-001",localizacao:"Setor A - Galp√£o 1",ativo:!0,unidadeNegocioId:"1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"2",nome:"Almoxarifado Secund√°rio",codigo:"ALM-002",localizacao:"Setor B - Galp√£o 2",ativo:!0,unidadeNegocioId:"1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"3",nome:"Almoxarifado Obras",codigo:"ALM-003",localizacao:"Canteiro - Container 1",ativo:!0,unidadeNegocioId:"1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];let a=t;return e.ativo!==void 0&&(a=t.filter(r=>r.ativo===e.ativo)),a}catch(t){throw console.error("‚ùå Erro ao buscar almoxarifados:",t),t}}async getAlmoxarifadoById(e){return ne.get(`/almoxarifados/${e}`)}async createAlmoxarifado(e){return ne.post("/almoxarifados",e)}async updateAlmoxarifado(e,t){return ne.put(`/almoxarifados/${e}`,t)}async deleteAlmoxarifado(e){return ne.delete(`/almoxarifados/${e}`)}async getContratadaWithColaboradores(e){const[t,a]=await Promise.all([this.getContratadaById(e),this.getColaboradoresByContratada(e,{ativo:!0})]);return{...t,colaboradores:a}}async getContratadasWithStats(){const e=await this.getContratadas({ativo:!0});return await Promise.all(e.map(async a=>{const r=await this.getColaboradoresByContratada(a.id),o=r.filter(n=>n.ativo);return{...a,totalColaboradores:r.length,colaboradoresAtivos:o.length}}))}async getTiposEPIMaisUtilizados(e=10){const t=We("/tipos-epi/mais-utilizados",{limit:e});return ne.get(t)}async getContratadasCached(){const e="contratadas_ativas",t=this.cache.get(e);if(t&&Date.now()-t.timestamp<this.CACHE_DURATION)return t.data;const a=await this.getContratadas({ativo:!0});return this.cache.set(e,{data:a,timestamp:Date.now()}),a}clearCache(){this.cache.clear()}}const St=new Oa;function Ft(l,e,t){const a=l.slice();a[29]=e[t];const r=ir(a[29].status);return a[30]=r,a}function qa(l){let e,t,a,r,o,n,i="Nenhum item encontrado",s,u,g=l[10]||l[11]?"Tente ajustar os filtros ou termo de busca para encontrar itens":'Use o bot√£o "Nova Movimenta√ß√£o" acima para come√ßar',m,f;return r=new _t({props:{class:"w-8 h-8 text-gray-400"}}),{c(){e=E("div"),t=E("div"),a=E("div"),V(r.$$.fragment),o=P(),n=E("h3"),n.textContent=i,s=P(),u=E("p"),m=H(g),this.h()},l(c){e=b(c,"DIV",{class:!0});var $=x(e);t=b($,"DIV",{class:!0});var y=x(t);a=b(y,"DIV",{class:!0});var M=x(a);N(r.$$.fragment,M),M.forEach(d),o=A(y),n=b(y,"H3",{class:!0,"data-svelte-h":!0}),xe(n)!=="svelte-bz2goa"&&(n.textContent=i),s=A(y),u=b(y,"P",{class:!0});var w=x(u);m=j(w,g),w.forEach(d),y.forEach(d),$.forEach(d),this.h()},h(){I(a,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center"),I(n,"class","text-lg font-semibold text-gray-900 dark:text-white mb-2"),I(u,"class","text-gray-500 dark:text-gray-400 mb-6 max-w-sm mx-auto"),I(t,"class","text-center py-16 px-6"),I(e,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700")},m(c,$){C(c,e,$),p(e,t),p(t,a),T(r,a,null),p(t,o),p(t,n),p(t,s),p(t,u),p(u,m),f=!0},p(c,$){(!f||$[0]&3072)&&g!==(g=c[10]||c[11]?"Tente ajustar os filtros ou termo de busca para encontrar itens":'Use o bot√£o "Nova Movimenta√ß√£o" acima para come√ßar')&&Z(m,g)},i(c){f||(_(r.$$.fragment,c),f=!0)},o(c){v(r.$$.fragment,c),f=!1},d(c){c&&d(e),F(r)}}}function za(l){let e,t,a,r,o,n,i,s,u,g,m,f,c,$,y,M;o=new Aa({props:{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}}),i=new Yt({props:{type:"text",placeholder:"Buscar por equipamento ou CA...",class:"pl-10 rounded-sm h-10 text-sm",value:l[10]}}),i.$on("input",l[12]);let w=!l[6]&&l[9]&&l[9].length>0&&Tt(l);g=new la({props:{options:l[8],value:l[7].categoria||"todas",placeholder:"Categoria",class:"min-w-[140px]"}}),g.$on("change",l[21]);let k=l[11]&&Vt(l);$=new Zt({props:{hoverable:!0,$$slots:{default:[lr]},$$scope:{ctx:l}}});let O=l[5]>1&&Mt(l);return{c(){e=E("div"),t=E("div"),a=E("div"),r=E("div"),V(o.$$.fragment),n=P(),V(i.$$.fragment),s=P(),w&&w.c(),u=P(),V(g.$$.fragment),m=P(),k&&k.c(),f=P(),c=E("div"),V($.$$.fragment),y=P(),O&&O.c(),this.h()},l(h){e=b(h,"DIV",{class:!0});var S=x(e);t=b(S,"DIV",{class:!0});var ee=x(t);a=b(ee,"DIV",{class:!0});var B=x(a);r=b(B,"DIV",{class:!0});var U=x(r);N(o.$$.fragment,U),n=A(U),N(i.$$.fragment,U),U.forEach(d),s=A(B),w&&w.l(B),u=A(B),N(g.$$.fragment,B),m=A(B),k&&k.l(B),B.forEach(d),ee.forEach(d),f=A(S),c=b(S,"DIV",{class:!0});var G=x(c);N($.$$.fragment,G),G.forEach(d),y=A(S),O&&O.l(S),S.forEach(d),this.h()},h(){I(r,"class","relative flex-1 max-w-md"),I(a,"class","flex items-center gap-4"),I(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),I(c,"class","overflow-x-auto"),I(e,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden")},m(h,S){C(h,e,S),p(e,t),p(t,a),p(a,r),T(o,r,null),p(r,n),T(i,r,null),p(a,s),w&&w.m(a,null),p(a,u),T(g,a,null),p(a,m),k&&k.m(a,null),p(e,f),p(e,c),T($,c,null),p(e,y),O&&O.m(e,null),M=!0},p(h,S){const ee={};S[0]&1024&&(ee.value=h[10]),i.$set(ee),!h[6]&&h[9]&&h[9].length>0?w?(w.p(h,S),S[0]&576&&_(w,1)):(w=Tt(h),w.c(),_(w,1),w.m(a,u)):w&&(Ee(),v(w,1,1,()=>{w=null}),we());const B={};S[0]&256&&(B.options=h[8]),S[0]&128&&(B.value=h[7].categoria||"todas"),g.$set(B),h[11]?k?(k.p(h,S),S[0]&2048&&_(k,1)):(k=Vt(h),k.c(),_(k,1),k.m(a,null)):k&&(Ee(),v(k,1,1,()=>{k=null}),we());const U={};S[0]&1|S[1]&4&&(U.$$scope={dirty:S,ctx:h}),$.$set(U),h[5]>1?O?(O.p(h,S),S[0]&32&&_(O,1)):(O=Mt(h),O.c(),_(O,1),O.m(e,null)):O&&(Ee(),v(O,1,1,()=>{O=null}),we())},i(h){M||(_(o.$$.fragment,h),_(i.$$.fragment,h),_(w),_(g.$$.fragment,h),_(k),_($.$$.fragment,h),_(O),M=!0)},o(h){v(o.$$.fragment,h),v(i.$$.fragment,h),v(w),v(g.$$.fragment,h),v(k),v($.$$.fragment,h),v(O),M=!1},d(h){h&&d(e),F(o),F(i),w&&w.d(),F(g),k&&k.d(),F($),O&&O.d()}}}function Ra(l){let e,t;return e=new Ea({props:{error:l[2],onRetry:l[19]}}),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p(a,r){const o={};r[0]&4&&(o.error=a[2]),r[0]&16&&(o.onRetry=a[19]),e.$set(o)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Ba(l){let e,t;return e=new ba({}),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p:Xe,i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Tt(l){let e,t;return e=new la({props:{options:l[9],value:l[7].status||"todos",placeholder:"Status",class:"min-w-[140px]"}}),e.$on("change",l[20]),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p(a,r){const o={};r[0]&512&&(o.options=a[9]),r[0]&128&&(o.value=a[7].status||"todos"),e.$set(o)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Vt(l){let e,t;return e=new Qe({props:{color:"alternative",class:"rounded-sm h-10 px-3",title:"Limpar Filtros",$$slots:{default:[ja]},$$scope:{ctx:l}}}),e.$on("click",l[14]),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p(a,r){const o={};r[1]&4&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function ja(l){let e,t;return e=new wa({props:{class:"w-4 h-4"}}),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p:Xe,i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Ha(l){let e;return{c(){e=H("Equipamento")},l(t){e=j(t,"Equipamento")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function La(l){let e;return{c(){e=H("Categoria")},l(t){e=j(t,"Categoria")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function Ua(l){let e;return{c(){e=H("Quantidade")},l(t){e=j(t,"Quantidade")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function Ga(l){let e;return{c(){e=H("Status")},l(t){e=j(t,"Status")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function Qa(l){let e;return{c(){e=H("A√ß√µes")},l(t){e=j(t,"A√ß√µes")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function Ka(l){let e,t,a,r,o,n,i,s,u,g;return e=new qe({props:{class:"py-3 px-6 font-semibold text-xs uppercase text-gray-600 dark:text-gray-300",$$slots:{default:[Ha]},$$scope:{ctx:l}}}),a=new qe({props:{class:"py-3 px-6 font-semibold text-xs uppercase text-gray-600 dark:text-gray-300 hidden md:table-cell",$$slots:{default:[La]},$$scope:{ctx:l}}}),o=new qe({props:{class:"py-3 px-6 font-semibold text-xs uppercase text-gray-600 dark:text-gray-300 text-center",$$slots:{default:[Ua]},$$scope:{ctx:l}}}),i=new qe({props:{class:"py-3 px-6 font-semibold text-xs uppercase text-gray-600 dark:text-gray-300 hidden lg:table-cell",$$slots:{default:[Ga]},$$scope:{ctx:l}}}),u=new qe({props:{class:"py-3 px-6 font-semibold text-xs uppercase text-gray-600 dark:text-gray-300 text-center",$$slots:{default:[Qa]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment),t=P(),V(a.$$.fragment),r=P(),V(o.$$.fragment),n=P(),V(i.$$.fragment),s=P(),V(u.$$.fragment)},l(m){N(e.$$.fragment,m),t=A(m),N(a.$$.fragment,m),r=A(m),N(o.$$.fragment,m),n=A(m),N(i.$$.fragment,m),s=A(m),N(u.$$.fragment,m)},m(m,f){T(e,m,f),C(m,t,f),T(a,m,f),C(m,r,f),T(o,m,f),C(m,n,f),T(i,m,f),C(m,s,f),T(u,m,f),g=!0},p(m,f){const c={};f[1]&4&&(c.$$scope={dirty:f,ctx:m}),e.$set(c);const $={};f[1]&4&&($.$$scope={dirty:f,ctx:m}),a.$set($);const y={};f[1]&4&&(y.$$scope={dirty:f,ctx:m}),o.$set(y);const M={};f[1]&4&&(M.$$scope={dirty:f,ctx:m}),i.$set(M);const w={};f[1]&4&&(w.$$scope={dirty:f,ctx:m}),u.$set(w)},i(m){g||(_(e.$$.fragment,m),_(a.$$.fragment,m),_(o.$$.fragment,m),_(i.$$.fragment,m),_(u.$$.fragment,m),g=!0)},o(m){v(e.$$.fragment,m),v(a.$$.fragment,m),v(o.$$.fragment,m),v(i.$$.fragment,m),v(u.$$.fragment,m),g=!1},d(m){m&&(d(t),d(r),d(n),d(s)),F(e,m),F(a,m),F(o,m),F(i,m),F(u,m)}}}function Ja(l){let e=l[30].label+"",t;return{c(){t=H(e)},l(a){t=j(a,e)},m(a,r){C(a,t,r)},p(a,r){r[0]&1&&e!==(e=a[30].label+"")&&Z(t,e)},d(a){a&&d(t)}}}function Wa(l){var h,S,ee;let e,t,a,r=(((h=l[29].tipoEPI)==null?void 0:h.nomeEquipamento)||"EPI n√£o encontrado")+"",o,n,i,s,u=(((S=l[29].tipoEPI)==null?void 0:S.numeroCA)||"-")+"",g,m,f,c,$=(((ee=l[29].tipoEPI)==null?void 0:ee.categoria)||"Sem categoria")+"",y,M,w,k,O;return k=new pt({props:{color:l[30].color,class:"w-fit rounded-sm text-xs",$$slots:{default:[Ja]},$$scope:{ctx:l}}}),{c(){e=E("div"),t=E("div"),a=E("p"),o=H(r),n=P(),i=E("p"),s=H("CA "),g=H(u),m=P(),f=E("div"),c=E("p"),y=H($),M=P(),w=E("div"),V(k.$$.fragment),this.h()},l(B){e=b(B,"DIV",{class:!0});var U=x(e);t=b(U,"DIV",{class:!0});var G=x(t);a=b(G,"P",{class:!0});var W=x(a);o=j(W,r),W.forEach(d),n=A(G),i=b(G,"P",{class:!0});var X=x(i);s=j(X,"CA "),g=j(X,u),X.forEach(d),m=A(G),f=b(G,"DIV",{class:!0});var te=x(f);c=b(te,"P",{class:!0});var Q=x(c);y=j(Q,$),Q.forEach(d),M=A(te),w=b(te,"DIV",{class:!0});var fe=x(w);N(k.$$.fragment,fe),fe.forEach(d),te.forEach(d),G.forEach(d),U.forEach(d),this.h()},h(){I(a,"class","font-medium text-gray-900 dark:text-white truncate"),I(i,"class","text-sm text-gray-500 dark:text-gray-400 truncate"),I(c,"class","text-xs text-gray-500 dark:text-gray-400"),I(w,"class","lg:hidden"),I(f,"class","md:hidden mt-1 space-y-1"),I(t,"class","min-w-0 flex-1"),I(e,"class","flex items-center space-x-3")},m(B,U){C(B,e,U),p(e,t),p(t,a),p(a,o),p(t,n),p(t,i),p(i,s),p(i,g),p(t,m),p(t,f),p(f,c),p(c,y),p(f,M),p(f,w),T(k,w,null),O=!0},p(B,U){var W,X,te;(!O||U[0]&1)&&r!==(r=(((W=B[29].tipoEPI)==null?void 0:W.nomeEquipamento)||"EPI n√£o encontrado")+"")&&Z(o,r),(!O||U[0]&1)&&u!==(u=(((X=B[29].tipoEPI)==null?void 0:X.numeroCA)||"-")+"")&&Z(g,u),(!O||U[0]&1)&&$!==($=(((te=B[29].tipoEPI)==null?void 0:te.categoria)||"Sem categoria")+"")&&Z(y,$);const G={};U[0]&1&&(G.color=B[30].color),U[0]&1|U[1]&4&&(G.$$scope={dirty:U,ctx:B}),k.$set(G)},i(B){O||(_(k.$$.fragment,B),O=!0)},o(B){v(k.$$.fragment,B),O=!1},d(B){B&&d(e),F(k)}}}function Xa(l){var r;let e,t=(((r=l[29].tipoEPI)==null?void 0:r.categoria)||"-")+"",a;return{c(){e=E("span"),a=H(t),this.h()},l(o){e=b(o,"SPAN",{class:!0});var n=x(e);a=j(n,t),n.forEach(d),this.h()},h(){I(e,"class","text-sm text-gray-900 dark:text-white")},m(o,n){C(o,e,n),p(e,a)},p(o,n){var i;n[0]&1&&t!==(t=(((i=o[29].tipoEPI)==null?void 0:i.categoria)||"-")+"")&&Z(a,t)},d(o){o&&d(e)}}}function Ya(l){let e,t=l[29].quantidade+"",a;return{c(){e=E("span"),a=H(t),this.h()},l(r){e=b(r,"SPAN",{class:!0});var o=x(e);a=j(o,t),o.forEach(d),this.h()},h(){I(e,"class","font-semibold text-lg text-gray-900 dark:text-white")},m(r,o){C(r,e,o),p(e,a)},p(r,o){o[0]&1&&t!==(t=r[29].quantidade+"")&&Z(a,t)},d(r){r&&d(e)}}}function Za(l){let e=l[30].label+"",t;return{c(){t=H(e)},l(a){t=j(a,e)},m(a,r){C(a,t,r)},p(a,r){r[0]&1&&e!==(e=a[30].label+"")&&Z(t,e)},d(a){a&&d(t)}}}function er(l){let e,t;return e=new pt({props:{color:l[30].color,class:"w-fit rounded-sm",$$slots:{default:[Za]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p(a,r){const o={};r[0]&1&&(o.color=a[30].color),r[0]&1|r[1]&4&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function tr(l){let e,t,a,r,o,n,i,s,u;a=new xa({props:{class:"w-4 h-4"}});function g(...f){return l[22](l[29],...f)}n=new ct({props:{class:"w-4 h-4"}});function m(...f){return l[23](l[29],...f)}return{c(){e=E("div"),t=E("button"),V(a.$$.fragment),r=P(),o=E("button"),V(n.$$.fragment),this.h()},l(f){e=b(f,"DIV",{class:!0});var c=x(e);t=b(c,"BUTTON",{class:!0,title:!0});var $=x(t);N(a.$$.fragment,$),$.forEach(d),r=A(c),o=b(c,"BUTTON",{class:!0,title:!0});var y=x(o);N(n.$$.fragment,y),y.forEach(d),c.forEach(d),this.h()},h(){I(t,"class","p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-700"),I(t,"title","Ajustar quantidade"),I(o,"class","p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-700"),I(o,"title","Ver hist√≥rico"),I(e,"class","flex items-center justify-center space-x-1")},m(f,c){C(f,e,c),p(e,t),T(a,t,null),p(e,r),p(e,o),T(n,o,null),i=!0,s||(u=[yt(t,"click",g),yt(o,"click",m)],s=!0)},p(f,c){l=f},i(f){i||(_(a.$$.fragment,f),_(n.$$.fragment,f),i=!0)},o(f){v(a.$$.fragment,f),v(n.$$.fragment,f),i=!1},d(f){f&&d(e),F(a),F(n),s=!1,ma(u)}}}function ar(l){let e,t,a,r,o,n,i,s,u,g,m;return e=new ze({props:{class:"py-4 px-6",$$slots:{default:[Wa]},$$scope:{ctx:l}}}),a=new ze({props:{class:"py-4 px-6 hidden md:table-cell",$$slots:{default:[Xa]},$$scope:{ctx:l}}}),o=new ze({props:{class:"py-4 px-6 text-center",$$slots:{default:[Ya]},$$scope:{ctx:l}}}),i=new ze({props:{class:"py-4 px-6 hidden lg:table-cell",$$slots:{default:[er]},$$scope:{ctx:l}}}),u=new ze({props:{class:"py-4 px-6",$$slots:{default:[tr]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment),t=P(),V(a.$$.fragment),r=P(),V(o.$$.fragment),n=P(),V(i.$$.fragment),s=P(),V(u.$$.fragment),g=P()},l(f){N(e.$$.fragment,f),t=A(f),N(a.$$.fragment,f),r=A(f),N(o.$$.fragment,f),n=A(f),N(i.$$.fragment,f),s=A(f),N(u.$$.fragment,f),g=A(f)},m(f,c){T(e,f,c),C(f,t,c),T(a,f,c),C(f,r,c),T(o,f,c),C(f,n,c),T(i,f,c),C(f,s,c),T(u,f,c),C(f,g,c),m=!0},p(f,c){const $={};c[0]&1|c[1]&4&&($.$$scope={dirty:c,ctx:f}),e.$set($);const y={};c[0]&1|c[1]&4&&(y.$$scope={dirty:c,ctx:f}),a.$set(y);const M={};c[0]&1|c[1]&4&&(M.$$scope={dirty:c,ctx:f}),o.$set(M);const w={};c[0]&1|c[1]&4&&(w.$$scope={dirty:c,ctx:f}),i.$set(w);const k={};c[0]&1|c[1]&4&&(k.$$scope={dirty:c,ctx:f}),u.$set(k)},i(f){m||(_(e.$$.fragment,f),_(a.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),_(u.$$.fragment,f),m=!0)},o(f){v(e.$$.fragment,f),v(a.$$.fragment,f),v(o.$$.fragment,f),v(i.$$.fragment,f),v(u.$$.fragment,f),m=!1},d(f){f&&(d(t),d(r),d(n),d(s),d(g)),F(e,f),F(a,f),F(o,f),F(i,f),F(u,f)}}}function Nt(l,e){let t,a,r;function o(){return e[24](e[29])}return a=new aa({props:{class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer",$$slots:{default:[ar]},$$scope:{ctx:e}}}),a.$on("click",o),{key:l,first:null,c(){t=pe(),V(a.$$.fragment),this.h()},l(n){t=pe(),N(a.$$.fragment,n),this.h()},h(){this.first=t},m(n,i){C(n,t,i),T(a,n,i),r=!0},p(n,i){e=n;const s={};i[0]&1|i[1]&4&&(s.$$scope={dirty:i,ctx:e}),a.$set(s)},i(n){r||(_(a.$$.fragment,n),r=!0)},o(n){v(a.$$.fragment,n),r=!1},d(n){n&&d(t),F(a,n)}}}function rr(l){let e=[],t=new Map,a,r,o=Ye(l[0]);const n=i=>i[29].id;for(let i=0;i<o.length;i+=1){let s=Ft(l,o,i),u=n(s);t.set(u,e[i]=Nt(u,s))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();a=pe()},l(i){for(let s=0;s<e.length;s+=1)e[s].l(i);a=pe()},m(i,s){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(i,s);C(i,a,s),r=!0},p(i,s){s[0]&98305&&(o=Ye(i[0]),Ee(),e=ya(e,s,n,1,i,o,t,a.parentNode,Ca,Nt,a,Ft),we())},i(i){if(!r){for(let s=0;s<o.length;s+=1)_(e[s]);r=!0}},o(i){for(let s=0;s<e.length;s+=1)v(e[s]);r=!1},d(i){i&&d(a);for(let s=0;s<e.length;s+=1)e[s].d(i)}}}function lr(l){let e,t,a,r;return e=new ea({props:{class:"bg-gray-50 dark:bg-gray-700",$$slots:{default:[Ka]},$$scope:{ctx:l}}}),a=new ta({props:{class:"divide-y divide-gray-200 dark:divide-gray-700",$$slots:{default:[rr]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment),t=P(),V(a.$$.fragment)},l(o){N(e.$$.fragment,o),t=A(o),N(a.$$.fragment,o)},m(o,n){T(e,o,n),C(o,t,n),T(a,o,n),r=!0},p(o,n){const i={};n[1]&4&&(i.$$scope={dirty:n,ctx:o}),e.$set(i);const s={};n[0]&1|n[1]&4&&(s.$$scope={dirty:n,ctx:o}),a.$set(s)},i(o){r||(_(e.$$.fragment,o),_(a.$$.fragment,o),r=!0)},o(o){v(e.$$.fragment,o),v(a.$$.fragment,o),r=!1},d(o){o&&d(t),F(e,o),F(a,o)}}}function Mt(l){let e,t,a,r=(l[4]-1)*20+1+"",o,n,i=Math.min(l[4]*20,l[3])+"",s,u,g,m,f,c,$,y,M,w;return $=new Qe({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[4]===1,$$slots:{default:[or]},$$scope:{ctx:l}}}),$.$on("click",l[25]),M=new Qe({props:{size:"sm",color:"alternative",class:"rounded-sm",disabled:l[4]===l[5],$$slots:{default:[sr]},$$scope:{ctx:l}}}),M.$on("click",l[26]),{c(){e=E("div"),t=E("div"),a=H("Mostrando "),o=H(r),n=H(" a "),s=H(i),u=H(" de "),g=H(l[3]),m=H(" resultados"),f=P(),c=E("div"),V($.$$.fragment),y=P(),V(M.$$.fragment),this.h()},l(k){e=b(k,"DIV",{class:!0});var O=x(e);t=b(O,"DIV",{class:!0});var h=x(t);a=j(h,"Mostrando "),o=j(h,r),n=j(h," a "),s=j(h,i),u=j(h," de "),g=j(h,l[3]),m=j(h," resultados"),h.forEach(d),f=A(O),c=b(O,"DIV",{class:!0});var S=x(c);N($.$$.fragment,S),y=A(S),N(M.$$.fragment,S),S.forEach(d),O.forEach(d),this.h()},h(){I(t,"class","text-sm text-gray-600 dark:text-gray-400"),I(c,"class","flex gap-2"),I(e,"class","flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700")},m(k,O){C(k,e,O),p(e,t),p(t,a),p(t,o),p(t,n),p(t,s),p(t,u),p(t,g),p(t,m),p(e,f),p(e,c),T($,c,null),p(c,y),T(M,c,null),w=!0},p(k,O){(!w||O[0]&16)&&r!==(r=(k[4]-1)*20+1+"")&&Z(o,r),(!w||O[0]&24)&&i!==(i=Math.min(k[4]*20,k[3])+"")&&Z(s,i),(!w||O[0]&8)&&Z(g,k[3]);const h={};O[0]&16&&(h.disabled=k[4]===1),O[1]&4&&(h.$$scope={dirty:O,ctx:k}),$.$set(h);const S={};O[0]&48&&(S.disabled=k[4]===k[5]),O[1]&4&&(S.$$scope={dirty:O,ctx:k}),M.$set(S)},i(k){w||(_($.$$.fragment,k),_(M.$$.fragment,k),w=!0)},o(k){v($.$$.fragment,k),v(M.$$.fragment,k),w=!1},d(k){k&&d(e),F($),F(M)}}}function or(l){let e;return{c(){e=H("Anterior")},l(t){e=j(t,"Anterior")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function sr(l){let e;return{c(){e=H("Pr√≥ximo")},l(t){e=j(t,"Pr√≥ximo")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function nr(l){let e,t,a,r;const o=[Ba,Ra,za,qa],n=[];function i(s,u){return s[1]?0:s[2]?1:s[0].length>0?2:3}return t=i(l),a=n[t]=o[t](l),{c(){e=E("div"),a.c(),this.h()},l(s){e=b(s,"DIV",{class:!0});var u=x(e);a.l(u),u.forEach(d),this.h()},h(){I(e,"class","space-y-6")},m(s,u){C(s,e,u),n[t].m(e,null),r=!0},p(s,u){let g=t;t=i(s),t===g?n[t].p(s,u):(Ee(),v(n[g],1,1,()=>{n[g]=null}),we(),a=n[t],a?a.p(s,u):(a=n[t]=o[t](s),a.c()),_(a,1),a.m(e,null))},i(s){r||(_(a),r=!0)},o(s){v(a),r=!1},d(s){s&&d(e),n[t].d()}}}function ir(l){switch(l==null?void 0:l.toLowerCase()){case"disponivel":case"ativo":return{color:"green",label:"Dispon√≠vel"};case"baixo":return{color:"yellow",label:"Estoque baixo"};case"indisponivel":case"inativo":return{color:"red",label:"Indispon√≠vel"};case"vencendo":return{color:"yellow",label:"Pr√≥ximo ao vencimento"};case"vencido":return{color:"red",label:"Vencido"};case"esgotado":case"zero":return{color:"dark",label:"Esgotado"};case"bloqueado":return{color:"red",label:"Bloqueado"};case"quarentena":return{color:"yellow",label:"Em Quarentena"};case"aguarda_inspecao":return{color:"yellow",label:"Aguarda Inspe√ß√£o"};default:return{color:"blue",label:l||"Indefinido"}}}function fr(l,e,t){let a,{items:r=[]}=e,{loading:o=!1}=e,{error:n=null}=e,{total:i=0}=e,{page:s=1}=e,{totalPages:u=1}=e,{searchTerm:g=""}=e,{hideStatusFilter:m=!1}=e,{filters:f}=e,{categoriaOptions:c=[]}=e,{statusOptions:$=[]}=e;const y=ut();let M="";function w(D){const J=D.target.value;t(10,M=J),y("searchChange",{value:J})}function k(D,J){y("filterChange",{key:D,value:J})}function O(){t(10,M=""),y("clearFilters")}function h(D){y("itemEdit",{item:D})}function S(D){y("itemHistory",{item:D})}function ee(D){y("pageChange",{page:D})}const B=()=>ee(s),U=D=>k("status",D.detail),G=D=>k("categoria",D.detail),W=(D,J)=>{J.stopPropagation(),h(D)},X=(D,J)=>{J.stopPropagation(),S(D)},te=D=>S(D),Q=()=>ee(s-1),fe=()=>ee(s+1);return l.$$set=D=>{"items"in D&&t(0,r=D.items),"loading"in D&&t(1,o=D.loading),"error"in D&&t(2,n=D.error),"total"in D&&t(3,i=D.total),"page"in D&&t(4,s=D.page),"totalPages"in D&&t(5,u=D.totalPages),"searchTerm"in D&&t(18,g=D.searchTerm),"hideStatusFilter"in D&&t(6,m=D.hideStatusFilter),"filters"in D&&t(7,f=D.filters),"categoriaOptions"in D&&t(8,c=D.categoriaOptions),"statusOptions"in D&&t(9,$=D.statusOptions)},l.$$.update=()=>{l.$$.dirty[0]&7&&console.log("üé® PRESENTER: items recebidos:",{itemsLength:(r==null?void 0:r.length)||0,items:r,loading:o,error:n}),l.$$.dirty[0]&263168&&g!==void 0&&g!==M&&t(10,M=g),l.$$.dirty[0]&1216&&t(11,a=M||!m&&f.status&&f.status!=="todos"||f.categoria&&f.categoria!=="todas")},[r,o,n,i,s,u,m,f,c,$,M,a,w,k,O,h,S,ee,g,B,U,G,W,X,te,Q,fe]}class ur extends lt{constructor(e){super(),ot(this,e,fr,nr,st,{items:0,loading:1,error:2,total:3,page:4,totalPages:5,searchTerm:18,hideStatusFilter:6,filters:7,categoriaOptions:8,statusOptions:9},null,[-1,-1])}}function Ot(l){var ke;let e,t,a,r,o=(((ke=l[1].tipoEPI)==null?void 0:ke.nomeEquipamento)||"EPI n√£o encontrado")+"",n,i,s,u,g=l[1].quantidade+"",m,f,c,$,y,M,w,k,O,h,S,ee,B,U,G,W,X,te,Q,fe,D,J,L,K,re,_e=l[3].tipo==="entrada"?"+":"-",le,ge,ve,ie,me,De,Ae,ue,$e,ye,be,He,Pe,he;M=new et({props:{class:"mb-3 block",$$slots:{default:[cr]},$$scope:{ctx:l}}});function Ue(R){l[9](R)}let Ge={name:"tipo",value:"entrada",class:"mr-2"};l[3].tipo!==void 0&&(Ge.group=l[3].tipo),h=new At({props:Ge}),tt.push(()=>at(h,"group",Ue)),B=new et({props:{class:"text-sm font-normal",$$slots:{default:[dr]},$$scope:{ctx:l}}});function q(R){l[10](R)}let oe={name:"tipo",value:"saida",class:"mr-2"};l[3].tipo!==void 0&&(oe.group=l[3].tipo),W=new At({props:oe}),tt.push(()=>at(W,"group",q)),Q=new et({props:{class:"text-sm font-normal",$$slots:{default:[mr]},$$scope:{ctx:l}}}),J=new et({props:{for:"quantidade",class:"mb-2",$$slots:{default:[gr]},$$scope:{ctx:l}}});function Fe(R){l[11](R)}let de={id:"quantidade",type:"number",min:"1",step:"1",size:"sm",class:"rounded-sm pl-8",color:l[4].quantidade?"red":"base"};l[3].quantidade!==void 0&&(de.value=l[3].quantidade),ie=new Yt({props:de}),tt.push(()=>at(ie,"value",Fe)),ie.$on("input",l[8]);let Y=l[4].quantidade&&qt(l);$e=new et({props:{for:"motivo",class:"mb-2",$$slots:{default:[$r]},$$scope:{ctx:l}}});function Te(R){l[12](R)}let ce={id:"motivo",placeholder:"Descreva o motivo da movimenta√ß√£o...",rows:2,class:"rounded-sm resize-none",color:l[4].motivo?"red":"base"};l[3].motivo!==void 0&&(ce.value=l[3].motivo),be=new Pa({props:ce}),tt.push(()=>at(be,"value",Te)),be.$on("input",kr);let se=l[4].motivo&&zt(l);return{c(){e=E("div"),t=E("div"),a=E("div"),r=E("h4"),n=H(o),i=P(),s=E("span"),u=H("Estoque atual = "),m=H(g),f=P(),c=E("div"),$=E("div"),y=E("div"),V(M.$$.fragment),w=P(),k=E("div"),O=E("div"),V(h.$$.fragment),ee=P(),V(B.$$.fragment),U=P(),G=E("div"),V(W.$$.fragment),te=P(),V(Q.$$.fragment),fe=P(),D=E("div"),V(J.$$.fragment),L=P(),K=E("div"),re=E("span"),le=H(_e),ve=P(),V(ie.$$.fragment),De=P(),Y&&Y.c(),Ae=P(),ue=E("div"),V($e.$$.fragment),ye=P(),V(be.$$.fragment),Pe=P(),se&&se.c(),this.h()},l(R){e=b(R,"DIV",{class:!0});var z=x(e);t=b(z,"DIV",{class:!0});var ae=x(t);a=b(ae,"DIV",{class:!0});var Ie=x(a);r=b(Ie,"H4",{class:!0});var Re=x(r);n=j(Re,o),Re.forEach(d),i=A(Ie),s=b(Ie,"SPAN",{class:!0});var Ve=x(s);u=j(Ve,"Estoque atual = "),m=j(Ve,g),Ve.forEach(d),Ie.forEach(d),ae.forEach(d),f=A(z),c=b(z,"DIV",{class:!0});var Be=x(c);$=b(Be,"DIV",{class:!0});var je=x($);y=b(je,"DIV",{});var Ne=x(y);N(M.$$.fragment,Ne),w=A(Ne),k=b(Ne,"DIV",{class:!0});var Se=x(k);O=b(Se,"DIV",{class:!0});var Ce=x(O);N(h.$$.fragment,Ce),ee=A(Ce),N(B.$$.fragment,Ce),Ce.forEach(d),U=A(Se),G=b(Se,"DIV",{class:!0});var Me=x(G);N(W.$$.fragment,Me),te=A(Me),N(Q.$$.fragment,Me),Me.forEach(d),Se.forEach(d),Ne.forEach(d),fe=A(je),D=b(je,"DIV",{});var Le=x(D);N(J.$$.fragment,Le),L=A(Le),K=b(Le,"DIV",{class:!0});var Ke=x(K);re=b(Ke,"SPAN",{class:!0});var Je=x(re);le=j(Je,_e),Je.forEach(d),ve=A(Ke),N(ie.$$.fragment,Ke),Ke.forEach(d),De=A(Le),Y&&Y.l(Le),Le.forEach(d),je.forEach(d),Ae=A(Be),ue=b(Be,"DIV",{});var Oe=x(ue);N($e.$$.fragment,Oe),ye=A(Oe),N(be.$$.fragment,Oe),Pe=A(Oe),se&&se.l(Oe),Oe.forEach(d),Be.forEach(d),z.forEach(d),this.h()},h(){I(r,"class","font-medium text-gray-900 dark:text-white"),I(s,"class","text-sm font-light text-gray-600 dark:text-gray-400"),I(a,"class","flex items-center justify-between"),I(t,"class","bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"),I(O,"class","flex items-center"),I(G,"class","flex items-center"),I(k,"class","flex gap-6"),I(re,"class",ge="absolute left-3 top-1/2 transform -translate-y-1/2 "+(l[3].tipo==="entrada"?"text-green-600":"text-red-600")+" font-medium"),I(K,"class","relative"),I($,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),I(c,"class","space-y-4"),I(e,"class","space-y-4")},m(R,z){C(R,e,z),p(e,t),p(t,a),p(a,r),p(r,n),p(a,i),p(a,s),p(s,u),p(s,m),p(e,f),p(e,c),p(c,$),p($,y),T(M,y,null),p(y,w),p(y,k),p(k,O),T(h,O,null),p(O,ee),T(B,O,null),p(k,U),p(k,G),T(W,G,null),p(G,te),T(Q,G,null),p($,fe),p($,D),T(J,D,null),p(D,L),p(D,K),p(K,re),p(re,le),p(K,ve),T(ie,K,null),p(D,De),Y&&Y.m(D,null),p(c,Ae),p(c,ue),T($e,ue,null),p(ue,ye),T(be,ue,null),p(ue,Pe),se&&se.m(ue,null),he=!0},p(R,z){var Me;(!he||z&2)&&o!==(o=(((Me=R[1].tipoEPI)==null?void 0:Me.nomeEquipamento)||"EPI n√£o encontrado")+"")&&Z(n,o),(!he||z&2)&&g!==(g=R[1].quantidade+"")&&Z(m,g);const ae={};z&262144&&(ae.$$scope={dirty:z,ctx:R}),M.$set(ae);const Ie={};!S&&z&8&&(S=!0,Ie.group=R[3].tipo,rt(()=>S=!1)),h.$set(Ie);const Re={};z&262144&&(Re.$$scope={dirty:z,ctx:R}),B.$set(Re);const Ve={};!X&&z&8&&(X=!0,Ve.group=R[3].tipo,rt(()=>X=!1)),W.$set(Ve);const Be={};z&262144&&(Be.$$scope={dirty:z,ctx:R}),Q.$set(Be);const je={};z&262144&&(je.$$scope={dirty:z,ctx:R}),J.$set(je),(!he||z&8)&&_e!==(_e=R[3].tipo==="entrada"?"+":"-")&&Z(le,_e),(!he||z&8&&ge!==(ge="absolute left-3 top-1/2 transform -translate-y-1/2 "+(R[3].tipo==="entrada"?"text-green-600":"text-red-600")+" font-medium"))&&I(re,"class",ge);const Ne={};z&16&&(Ne.color=R[4].quantidade?"red":"base"),!me&&z&8&&(me=!0,Ne.value=R[3].quantidade,rt(()=>me=!1)),ie.$set(Ne),R[4].quantidade?Y?Y.p(R,z):(Y=qt(R),Y.c(),Y.m(D,null)):Y&&(Y.d(1),Y=null);const Se={};z&262144&&(Se.$$scope={dirty:z,ctx:R}),$e.$set(Se);const Ce={};z&16&&(Ce.color=R[4].motivo?"red":"base"),!He&&z&8&&(He=!0,Ce.value=R[3].motivo,rt(()=>He=!1)),be.$set(Ce),R[4].motivo?se?se.p(R,z):(se=zt(R),se.c(),se.m(ue,null)):se&&(se.d(1),se=null)},i(R){he||(_(M.$$.fragment,R),_(h.$$.fragment,R),_(B.$$.fragment,R),_(W.$$.fragment,R),_(Q.$$.fragment,R),_(J.$$.fragment,R),_(ie.$$.fragment,R),_($e.$$.fragment,R),_(be.$$.fragment,R),he=!0)},o(R){v(M.$$.fragment,R),v(h.$$.fragment,R),v(B.$$.fragment,R),v(W.$$.fragment,R),v(Q.$$.fragment,R),v(J.$$.fragment,R),v(ie.$$.fragment,R),v($e.$$.fragment,R),v(be.$$.fragment,R),he=!1},d(R){R&&d(e),F(M),F(h),F(B),F(W),F(Q),F(J),F(ie),Y&&Y.d(),F($e),F(be),se&&se.d()}}}function cr(l){let e;return{c(){e=H("Tipo de Movimenta√ß√£o *")},l(t){e=j(t,"Tipo de Movimenta√ß√£o *")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function dr(l){let e;return{c(){e=H("Aumentar")},l(t){e=j(t,"Aumentar")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function mr(l){let e;return{c(){e=H("Retirar")},l(t){e=j(t,"Retirar")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function gr(l){let e;return{c(){e=H("Quantidade *")},l(t){e=j(t,"Quantidade *")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function qt(l){let e,t=l[4].quantidade+"",a;return{c(){e=E("p"),a=H(t),this.h()},l(r){e=b(r,"P",{class:!0});var o=x(e);a=j(o,t),o.forEach(d),this.h()},h(){I(e,"class","text-red-600 text-xs mt-1")},m(r,o){C(r,e,o),p(e,a)},p(r,o){o&16&&t!==(t=r[4].quantidade+"")&&Z(a,t)},d(r){r&&d(e)}}}function $r(l){let e;return{c(){e=H("Motivo *")},l(t){e=j(t,"Motivo *")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function zt(l){let e,t=l[4].motivo+"",a;return{c(){e=E("p"),a=H(t),this.h()},l(r){e=b(r,"P",{class:!0});var o=x(e);a=j(o,t),o.forEach(d),this.h()},h(){I(e,"class","text-red-600 text-xs mt-1")},m(r,o){C(r,e,o),p(e,a)},p(r,o){o&16&&t!==(t=r[4].motivo+"")&&Z(a,t)},d(r){r&&d(e)}}}function pr(l){let e,t,a=l[1]&&Ot(l);return{c(){a&&a.c(),e=pe()},l(r){a&&a.l(r),e=pe()},m(r,o){a&&a.m(r,o),C(r,e,o),t=!0},p(r,o){r[1]?a?(a.p(r,o),o&2&&_(a,1)):(a=Ot(r),a.c(),_(a,1),a.m(e.parentNode,e)):a&&(Ee(),v(a,1,1,()=>{a=null}),we())},i(r){t||(_(a),t=!0)},o(r){v(a),t=!1},d(r){r&&d(e),a&&a.d(r)}}}function Rt(l){let e,t,a,r,o;return t=new Qe({props:{color:"alternative",class:"rounded-sm",disabled:l[2],$$slots:{default:[_r]},$$scope:{ctx:l}}}),t.$on("click",l[7]),r=new Qe({props:{color:"primary",class:"rounded-sm",disabled:l[2],$$slots:{default:[br]},$$scope:{ctx:l}}}),r.$on("click",l[6]),{c(){e=E("div"),V(t.$$.fragment),a=P(),V(r.$$.fragment),this.h()},l(n){e=b(n,"DIV",{class:!0});var i=x(e);N(t.$$.fragment,i),a=A(i),N(r.$$.fragment,i),i.forEach(d),this.h()},h(){I(e,"class","flex items-center gap-3")},m(n,i){C(n,e,i),T(t,e,null),p(e,a),T(r,e,null),o=!0},p(n,i){const s={};i&4&&(s.disabled=n[2]),i&262144&&(s.$$scope={dirty:i,ctx:n}),t.$set(s);const u={};i&4&&(u.disabled=n[2]),i&262148&&(u.$$scope={dirty:i,ctx:n}),r.$set(u)},i(n){o||(_(t.$$.fragment,n),_(r.$$.fragment,n),o=!0)},o(n){v(t.$$.fragment,n),v(r.$$.fragment,n),o=!1},d(n){n&&d(e),F(t),F(r)}}}function _r(l){let e;return{c(){e=H("Cancelar")},l(t){e=j(t,"Cancelar")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function hr(l){let e;return{c(){e=H("Salvar Movimenta√ß√£o")},l(t){e=j(t,"Salvar Movimenta√ß√£o")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function vr(l){let e,t=`<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
              Salvando...`;return{c(){e=E("div"),e.innerHTML=t,this.h()},l(a){e=b(a,"DIV",{class:!0,"data-svelte-h":!0}),xe(e)!=="svelte-1x71bel"&&(e.innerHTML=t),this.h()},h(){I(e,"class","flex items-center")},m(a,r){C(a,e,r)},d(a){a&&d(e)}}}function br(l){let e;function t(o,n){return o[2]?vr:hr}let a=t(l),r=a(l);return{c(){r.c(),e=pe()},l(o){r.l(o),e=pe()},m(o,n){r.m(o,n),C(o,e,n)},p(o,n){a!==(a=t(o))&&(r.d(1),r=a(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&d(e),r.d(o)}}}function Er(l){let e,t,a=l[1]&&Rt(l);return{c(){a&&a.c(),e=pe()},l(r){a&&a.l(r),e=pe()},m(r,o){a&&a.m(r,o),C(r,e,o),t=!0},p(r,o){r[1]?a?(a.p(r,o),o&2&&_(a,1)):(a=Rt(r),a.c(),_(a,1),a.m(e.parentNode,e)):a&&(Ee(),v(a,1,1,()=>{a=null}),we())},i(r){t||(_(a),t=!0)},o(r){v(a),t=!1},d(r){r&&d(e),a&&a.d(r)}}}function wr(l){let e,t,a;function r(n){l[13](n)}let o={title:l[5],size:"md",autoclose:!1,outsideclose:!1,$$slots:{footer:[Er],default:[pr]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.open=l[0]),e=new oa({props:o}),tt.push(()=>at(e,"open",r)),{c(){V(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,i){T(e,n,i),a=!0},p(n,[i]){const s={};i&32&&(s.title=n[5]),i&262174&&(s.$$scope={dirty:i,ctx:n}),!t&&i&1&&(t=!0,s.open=n[0],rt(()=>t=!1)),e.$set(s)},i(n){a||(_(e.$$.fragment,n),a=!0)},o(n){v(e.$$.fragment,n),a=!1},d(n){F(e,n)}}}function kr(l){const e=l.target;e.style.height="auto",e.style.height=Math.max(40,e.scrollHeight)+"px"}function Ir(l,e,t){let a,{item:r=null}=e,{loading:o=!1}=e,{show:n=!0}=e;const i=ut();let s={tipo:"entrada",quantidade:0,motivo:""},u={};function g(){t(3,s={tipo:"entrada",quantidade:0,motivo:""}),t(4,u={})}function m(){const h={};return(!s.quantidade||s.quantidade===0)&&(h.quantidade="Quantidade √© obrigat√≥ria e deve ser diferente de zero"),s.motivo.trim()||(h.motivo="Motivo √© obrigat√≥rio"),t(4,u=h),Object.keys(h).length===0}function f(){m()&&(i("save",{tipoEPIId:(r==null?void 0:r.tipoEPIId)||"",almoxarifadoId:(r==null?void 0:r.almoxarifadoId)||"",tipoMovimentacao:s.tipo==="entrada"?"AJUSTE_POSITIVO":"AJUSTE_NEGATIVO",quantidade:s.quantidade,motivo:s.motivo,observacoes:"",itemEstoqueId:r==null?void 0:r.id}),c())}function c(){t(0,n=!1),i("cancel")}function $(h){const S=h.target;t(3,s.quantidade=parseFloat(S.value)||0,s)}function y(h){l.$$.not_equal(s.tipo,h)&&(s.tipo=h,t(3,s))}function M(h){l.$$.not_equal(s.tipo,h)&&(s.tipo=h,t(3,s))}function w(h){l.$$.not_equal(s.quantidade,h)&&(s.quantidade=h,t(3,s))}function k(h){l.$$.not_equal(s.motivo,h)&&(s.motivo=h,t(3,s))}function O(h){n=h,t(0,n)}return l.$$set=h=>{"item"in h&&t(1,r=h.item),"loading"in h&&t(2,o=h.loading),"show"in h&&t(0,n=h.show)},l.$$.update=()=>{l.$$.dirty&3&&n&&r&&g(),l.$$.dirty&8&&(s.tipo==="entrada"?`${s.quantidade}`:`${s.quantidade}`),l.$$.dirty&2&&t(5,a=r?"Ajustar Estoque":"Nova Movimenta√ß√£o")},[n,r,o,s,u,a,f,c,$,y,M,w,k,O]}class yr extends lt{constructor(e){super(),ot(this,e,Ir,wr,st,{item:1,loading:2,show:0})}}function Bt(l,e,t){const a=l.slice();a[14]=e[t];const r=a[10](a[14].tipoMovimentacao);a[15]=r;const o=al(a[14].tipoMovimentacao);return a[16]=o,a}function jt(l,e,t){const a=l.slice();return a[19]=e[t],a}function Ht(l){let e,t;return{c(){e=E("p"),t=H(l[5]),this.h()},l(a){e=b(a,"P",{class:!0});var r=x(e);t=j(r,l[5]),r.forEach(d),this.h()},h(){I(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(a,r){C(a,e,r),p(e,t)},p(a,r){r&32&&Z(t,a[5])},d(a){a&&d(e)}}}function Cr(l){let e,t;return e=new Fa({props:{class:"w-5 h-5"}}),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p:Xe,i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function xr(l){let e=l[19].label+"",t,a;return{c(){t=H(e),a=P()},l(r){t=j(r,e),a=A(r)},m(r,o){C(r,t,o),C(r,a,o)},p:Xe,d(r){r&&(d(t),d(a))}}}function Lt(l){let e,t;function a(){return l[12](l[19])}return e=new Qe({props:{size:"sm",color:l[4]===l[19].value?"primary":"alternative",class:"rounded-none first:rounded-l-sm last:rounded-r-sm",$$slots:{default:[xr]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){V(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,o){T(e,r,o),t=!0},p(r,o){l=r;const n={};o&16&&(n.color=l[4]===l[19].value?"primary":"alternative"),o&4194304&&(n.$$scope={dirty:o,ctx:l}),e.$set(n)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){F(e,r)}}}function Dr(l){let e,t,a=Ye(l[7]),r=[];for(let n=0;n<a.length;n+=1)r[n]=Lt(jt(l,a,n));const o=n=>v(r[n],1,1,()=>{r[n]=null});return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=pe()},l(n){for(let i=0;i<r.length;i+=1)r[i].l(n);e=pe()},m(n,i){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(n,i);C(n,e,i),t=!0},p(n,i){if(i&656){a=Ye(n[7]);let s;for(s=0;s<a.length;s+=1){const u=jt(n,a,s);r[s]?(r[s].p(u,i),_(r[s],1)):(r[s]=Lt(u),r[s].c(),_(r[s],1),r[s].m(e.parentNode,e))}for(Ee(),s=a.length;s<r.length;s+=1)o(s);we()}},i(n){if(!t){for(let i=0;i<a.length;i+=1)_(r[i]);t=!0}},o(n){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)v(r[i]);t=!1},d(n){n&&d(e),Xt(r,n)}}}function Ar(l){let e,t,a,r,o,n="Selecione um item",i,s,u="Escolha um item da tabela para ver seu hist√≥rico de movimenta√ß√µes.",g;return a=new ct({props:{class:"w-8 h-8 text-gray-400"}}),{c(){e=E("div"),t=E("div"),V(a.$$.fragment),r=P(),o=E("h3"),o.textContent=n,i=P(),s=E("p"),s.textContent=u,this.h()},l(m){e=b(m,"DIV",{class:!0});var f=x(e);t=b(f,"DIV",{class:!0});var c=x(t);N(a.$$.fragment,c),c.forEach(d),r=A(f),o=b(f,"H3",{class:!0,"data-svelte-h":!0}),xe(o)!=="svelte-1d96tj7"&&(o.textContent=n),i=A(f),s=b(f,"P",{class:!0,"data-svelte-h":!0}),xe(s)!=="svelte-1em2gzl"&&(s.textContent=u),f.forEach(d),this.h()},h(){I(t,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center"),I(o,"class","text-lg font-semibold text-gray-900 dark:text-white mb-2"),I(s,"class","text-gray-500 dark:text-gray-400"),I(e,"class","text-center py-12")},m(m,f){C(m,e,f),p(e,t),T(a,t,null),p(e,r),p(e,o),p(e,i),p(e,s),g=!0},p:Xe,i(m){g||(_(a.$$.fragment,m),g=!0)},o(m){v(a.$$.fragment,m),g=!1},d(m){m&&d(e),F(a)}}}function Pr(l){let e,t,a,r,o,n="Saldo Inicial",i,s,u=l[1].saldoInicial+"",g,m,f,c,$,y,M,w,k,O="Total Entradas",h,S,ee,B=l[1].totalEntradas+"",U,G,W,X,te,Q,fe,D,J,L="Total Sa√≠das",K,re,_e,le=l[1].totalSaidas+"",ge,ve,ie,me,De,Ae,ue,$e,ye,be="Saldo Final",He,Pe,he=l[1].saldoFinal+"",Ue,Ge,q,oe,Fe,de,Y,Te,ce;c=new ft({props:{class:"w-5 h-5 text-blue-600 dark:text-blue-400"}}),X=new _t({props:{class:"w-5 h-5 text-green-600 dark:text-green-400"}}),me=new ra({props:{class:"w-5 h-5 text-red-600 dark:text-red-400"}}),oe=new ft({props:{class:"w-5 h-5 text-blue-600 dark:text-blue-400"}});const se=[Vr,Tr],ke=[];function R(z,ae){return z[1].movimentacoes.length>0?0:1}return de=R(l),Y=ke[de]=se[de](l),{c(){e=E("div"),t=E("div"),a=E("div"),r=E("div"),o=E("p"),o.textContent=n,i=P(),s=E("p"),g=H(u),m=P(),f=E("div"),V(c.$$.fragment),$=P(),y=E("div"),M=E("div"),w=E("div"),k=E("p"),k.textContent=O,h=P(),S=E("p"),ee=H("+"),U=H(B),G=P(),W=E("div"),V(X.$$.fragment),te=P(),Q=E("div"),fe=E("div"),D=E("div"),J=E("p"),J.textContent=L,K=P(),re=E("p"),_e=H("-"),ge=H(le),ve=P(),ie=E("div"),V(me.$$.fragment),De=P(),Ae=E("div"),ue=E("div"),$e=E("div"),ye=E("p"),ye.textContent=be,He=P(),Pe=E("p"),Ue=H(he),Ge=P(),q=E("div"),V(oe.$$.fragment),Fe=P(),Y.c(),Te=pe(),this.h()},l(z){e=b(z,"DIV",{class:!0});var ae=x(e);t=b(ae,"DIV",{class:!0});var Ie=x(t);a=b(Ie,"DIV",{class:!0});var Re=x(a);r=b(Re,"DIV",{});var Ve=x(r);o=b(Ve,"P",{class:!0,"data-svelte-h":!0}),xe(o)!=="svelte-mz28fp"&&(o.textContent=n),i=A(Ve),s=b(Ve,"P",{class:!0});var Be=x(s);g=j(Be,u),Be.forEach(d),Ve.forEach(d),m=A(Re),f=b(Re,"DIV",{class:!0});var je=x(f);N(c.$$.fragment,je),je.forEach(d),Re.forEach(d),Ie.forEach(d),$=A(ae),y=b(ae,"DIV",{class:!0});var Ne=x(y);M=b(Ne,"DIV",{class:!0});var Se=x(M);w=b(Se,"DIV",{});var Ce=x(w);k=b(Ce,"P",{class:!0,"data-svelte-h":!0}),xe(k)!=="svelte-8u5mwd"&&(k.textContent=O),h=A(Ce),S=b(Ce,"P",{class:!0});var Me=x(S);ee=j(Me,"+"),U=j(Me,B),Me.forEach(d),Ce.forEach(d),G=A(Se),W=b(Se,"DIV",{class:!0});var Le=x(W);N(X.$$.fragment,Le),Le.forEach(d),Se.forEach(d),Ne.forEach(d),te=A(ae),Q=b(ae,"DIV",{class:!0});var Ke=x(Q);fe=b(Ke,"DIV",{class:!0});var Je=x(fe);D=b(Je,"DIV",{});var Oe=x(D);J=b(Oe,"P",{class:!0,"data-svelte-h":!0}),xe(J)!=="svelte-1i8700w"&&(J.textContent=L),K=A(Oe),re=b(Oe,"P",{class:!0});var dt=x(re);_e=j(dt,"-"),ge=j(dt,le),dt.forEach(d),Oe.forEach(d),ve=A(Je),ie=b(Je,"DIV",{class:!0});var ht=x(ie);N(me.$$.fragment,ht),ht.forEach(d),Je.forEach(d),Ke.forEach(d),De=A(ae),Ae=b(ae,"DIV",{class:!0});var vt=x(Ae);ue=b(vt,"DIV",{class:!0});var nt=x(ue);$e=b(nt,"DIV",{});var it=x($e);ye=b(it,"P",{class:!0,"data-svelte-h":!0}),xe(ye)!=="svelte-sbjso6"&&(ye.textContent=be),He=A(it),Pe=b(it,"P",{class:!0});var bt=x(Pe);Ue=j(bt,he),bt.forEach(d),it.forEach(d),Ge=A(nt),q=b(nt,"DIV",{class:!0});var Et=x(q);N(oe.$$.fragment,Et),Et.forEach(d),nt.forEach(d),vt.forEach(d),ae.forEach(d),Fe=A(z),Y.l(z),Te=pe(),this.h()},h(){I(o,"class","text-sm text-gray-600 dark:text-gray-400"),I(s,"class","text-xl font-semibold text-gray-900 dark:text-white"),I(f,"class","p-2 bg-blue-100 dark:bg-blue-900 rounded-lg"),I(a,"class","flex items-center justify-between"),I(t,"class","bg-gray-50 dark:bg-gray-700 rounded-lg p-4"),I(k,"class","text-sm text-green-600 dark:text-green-400"),I(S,"class","text-xl font-semibold text-green-900 dark:text-green-100"),I(W,"class","p-2 bg-green-100 dark:bg-green-800 rounded-lg"),I(M,"class","flex items-center justify-between"),I(y,"class","bg-green-50 dark:bg-green-900 rounded-lg p-4"),I(J,"class","text-sm text-red-600 dark:text-red-400"),I(re,"class","text-xl font-semibold text-red-900 dark:text-red-100"),I(ie,"class","p-2 bg-red-100 dark:bg-red-800 rounded-lg"),I(fe,"class","flex items-center justify-between"),I(Q,"class","bg-red-50 dark:bg-red-900 rounded-lg p-4"),I(ye,"class","text-sm text-blue-600 dark:text-blue-400"),I(Pe,"class","text-xl font-semibold text-blue-900 dark:text-blue-100"),I(q,"class","p-2 bg-blue-100 dark:bg-blue-800 rounded-lg"),I(ue,"class","flex items-center justify-between"),I(Ae,"class","bg-blue-50 dark:bg-blue-900 rounded-lg p-4"),I(e,"class","grid grid-cols-2 md:grid-cols-4 gap-4")},m(z,ae){C(z,e,ae),p(e,t),p(t,a),p(a,r),p(r,o),p(r,i),p(r,s),p(s,g),p(a,m),p(a,f),T(c,f,null),p(e,$),p(e,y),p(y,M),p(M,w),p(w,k),p(w,h),p(w,S),p(S,ee),p(S,U),p(M,G),p(M,W),T(X,W,null),p(e,te),p(e,Q),p(Q,fe),p(fe,D),p(D,J),p(D,K),p(D,re),p(re,_e),p(re,ge),p(fe,ve),p(fe,ie),T(me,ie,null),p(e,De),p(e,Ae),p(Ae,ue),p(ue,$e),p($e,ye),p($e,He),p($e,Pe),p(Pe,Ue),p(ue,Ge),p(ue,q),T(oe,q,null),C(z,Fe,ae),ke[de].m(z,ae),C(z,Te,ae),ce=!0},p(z,ae){(!ce||ae&2)&&u!==(u=z[1].saldoInicial+"")&&Z(g,u),(!ce||ae&2)&&B!==(B=z[1].totalEntradas+"")&&Z(U,B),(!ce||ae&2)&&le!==(le=z[1].totalSaidas+"")&&Z(ge,le),(!ce||ae&2)&&he!==(he=z[1].saldoFinal+"")&&Z(Ue,he);let Ie=de;de=R(z),de===Ie?ke[de].p(z,ae):(Ee(),v(ke[Ie],1,1,()=>{ke[Ie]=null}),we(),Y=ke[de],Y?Y.p(z,ae):(Y=ke[de]=se[de](z),Y.c()),_(Y,1),Y.m(Te.parentNode,Te))},i(z){ce||(_(c.$$.fragment,z),_(X.$$.fragment,z),_(me.$$.fragment,z),_(oe.$$.fragment,z),_(Y),ce=!0)},o(z){v(c.$$.fragment,z),v(X.$$.fragment,z),v(me.$$.fragment,z),v(oe.$$.fragment,z),v(Y),ce=!1},d(z){z&&(d(e),d(Fe),d(Te)),F(c),F(X),F(me),F(oe),ke[de].d(z)}}}function Sr(l){let e,t;return e=new Sa({props:{color:"red",class:"rounded-sm",$$slots:{default:[Yr]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p(a,r){const o={};r&4194312&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Fr(l){let e,t,a,r,o="Carregando hist√≥rico...",n;return t=new ka({props:{class:"w-8 h-8"}}),{c(){e=E("div"),V(t.$$.fragment),a=P(),r=E("span"),r.textContent=o,this.h()},l(i){e=b(i,"DIV",{class:!0});var s=x(e);N(t.$$.fragment,s),a=A(s),r=b(s,"SPAN",{class:!0,"data-svelte-h":!0}),xe(r)!=="svelte-1i33544"&&(r.textContent=o),s.forEach(d),this.h()},h(){I(r,"class","ml-3 text-gray-600 dark:text-gray-400"),I(e,"class","flex items-center justify-center py-12")},m(i,s){C(i,e,s),T(t,e,null),p(e,a),p(e,r),n=!0},p:Xe,i(i){n||(_(t.$$.fragment,i),n=!0)},o(i){v(t.$$.fragment,i),n=!1},d(i){i&&d(e),F(t)}}}function Tr(l){let e,t,a,r,o,n="Nenhuma movimenta√ß√£o encontrada",i,s,u="N√£o h√° movimenta√ß√µes registradas para este item no per√≠odo selecionado.",g;return a=new ct({props:{class:"w-8 h-8 text-gray-400"}}),{c(){e=E("div"),t=E("div"),V(a.$$.fragment),r=P(),o=E("h3"),o.textContent=n,i=P(),s=E("p"),s.textContent=u,this.h()},l(m){e=b(m,"DIV",{class:!0});var f=x(e);t=b(f,"DIV",{class:!0});var c=x(t);N(a.$$.fragment,c),c.forEach(d),r=A(f),o=b(f,"H3",{class:!0,"data-svelte-h":!0}),xe(o)!=="svelte-18q0j8j"&&(o.textContent=n),i=A(f),s=b(f,"P",{class:!0,"data-svelte-h":!0}),xe(s)!=="svelte-1jc8szp"&&(s.textContent=u),f.forEach(d),this.h()},h(){I(t,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center"),I(o,"class","text-lg font-semibold text-gray-900 dark:text-white mb-2"),I(s,"class","text-gray-500 dark:text-gray-400"),I(e,"class","text-center py-12")},m(m,f){C(m,e,f),p(e,t),T(a,t,null),p(e,r),p(e,o),p(e,i),p(e,s),g=!0},p:Xe,i(m){g||(_(a.$$.fragment,m),g=!0)},o(m){v(a.$$.fragment,m),g=!1},d(m){m&&d(e),F(a)}}}function Vr(l){let e,t,a,r;return a=new Zt({props:{$$slots:{default:[Xr]},$$scope:{ctx:l}}}),{c(){e=E("div"),t=E("div"),V(a.$$.fragment),this.h()},l(o){e=b(o,"DIV",{class:!0});var n=x(e);t=b(n,"DIV",{class:!0});var i=x(t);N(a.$$.fragment,i),i.forEach(d),n.forEach(d),this.h()},h(){I(t,"class","overflow-x-auto"),I(e,"class","bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden")},m(o,n){C(o,e,n),p(e,t),T(a,t,null),r=!0},p(o,n){const i={};n&4194306&&(i.$$scope={dirty:n,ctx:o}),a.$set(i)},i(o){r||(_(a.$$.fragment,o),r=!0)},o(o){v(a.$$.fragment,o),r=!1},d(o){o&&d(e),F(a)}}}function Nr(l){let e;return{c(){e=H("Data")},l(t){e=j(t,"Data")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function Mr(l){let e;return{c(){e=H("Documento")},l(t){e=j(t,"Documento")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function Or(l){let e;return{c(){e=H("Tipo")},l(t){e=j(t,"Tipo")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function qr(l){let e;return{c(){e=H("Quantidade")},l(t){e=j(t,"Quantidade")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function zr(l){let e;return{c(){e=H("Saldo")},l(t){e=j(t,"Saldo")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function Rr(l){let e;return{c(){e=H("Observa√ß√µes")},l(t){e=j(t,"Observa√ß√µes")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function Br(l){let e,t,a,r,o,n,i,s,u,g,m,f;return e=new qe({props:{class:"py-3 px-4 font-semibold text-xs uppercase text-gray-600 dark:text-gray-300",$$slots:{default:[Nr]},$$scope:{ctx:l}}}),a=new qe({props:{class:"py-3 px-4 font-semibold text-xs uppercase text-gray-600 dark:text-gray-300",$$slots:{default:[Mr]},$$scope:{ctx:l}}}),o=new qe({props:{class:"py-3 px-4 font-semibold text-xs uppercase text-gray-600 dark:text-gray-300",$$slots:{default:[Or]},$$scope:{ctx:l}}}),i=new qe({props:{class:"py-3 px-4 font-semibold text-xs uppercase text-gray-600 dark:text-gray-300 text-center",$$slots:{default:[qr]},$$scope:{ctx:l}}}),u=new qe({props:{class:"py-3 px-4 font-semibold text-xs uppercase text-gray-600 dark:text-gray-300 text-center",$$slots:{default:[zr]},$$scope:{ctx:l}}}),m=new qe({props:{class:"py-3 px-4 font-semibold text-xs uppercase text-gray-600 dark:text-gray-300",$$slots:{default:[Rr]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment),t=P(),V(a.$$.fragment),r=P(),V(o.$$.fragment),n=P(),V(i.$$.fragment),s=P(),V(u.$$.fragment),g=P(),V(m.$$.fragment)},l(c){N(e.$$.fragment,c),t=A(c),N(a.$$.fragment,c),r=A(c),N(o.$$.fragment,c),n=A(c),N(i.$$.fragment,c),s=A(c),N(u.$$.fragment,c),g=A(c),N(m.$$.fragment,c)},m(c,$){T(e,c,$),C(c,t,$),T(a,c,$),C(c,r,$),T(o,c,$),C(c,n,$),T(i,c,$),C(c,s,$),T(u,c,$),C(c,g,$),T(m,c,$),f=!0},p(c,$){const y={};$&4194304&&(y.$$scope={dirty:$,ctx:c}),e.$set(y);const M={};$&4194304&&(M.$$scope={dirty:$,ctx:c}),a.$set(M);const w={};$&4194304&&(w.$$scope={dirty:$,ctx:c}),o.$set(w);const k={};$&4194304&&(k.$$scope={dirty:$,ctx:c}),i.$set(k);const O={};$&4194304&&(O.$$scope={dirty:$,ctx:c}),u.$set(O);const h={};$&4194304&&(h.$$scope={dirty:$,ctx:c}),m.$set(h)},i(c){f||(_(e.$$.fragment,c),_(a.$$.fragment,c),_(o.$$.fragment,c),_(i.$$.fragment,c),_(u.$$.fragment,c),_(m.$$.fragment,c),f=!0)},o(c){v(e.$$.fragment,c),v(a.$$.fragment,c),v(o.$$.fragment,c),v(i.$$.fragment,c),v(u.$$.fragment,c),v(m.$$.fragment,c),f=!1},d(c){c&&(d(t),d(r),d(n),d(s),d(g)),F(e,c),F(a,c),F(o,c),F(i,c),F(u,c),F(m,c)}}}function jr(l){let e,t=Pt(l[14].data)+"",a,r,o,n=new Date(l[14].data).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})+"",i;return{c(){e=E("div"),a=H(t),r=P(),o=E("div"),i=H(n),this.h()},l(s){e=b(s,"DIV",{class:!0});var u=x(e);a=j(u,t),u.forEach(d),r=A(s),o=b(s,"DIV",{class:!0});var g=x(o);i=j(g,n),g.forEach(d),this.h()},h(){I(e,"class","text-sm text-gray-900 dark:text-white"),I(o,"class","text-xs text-gray-500 dark:text-gray-400")},m(s,u){C(s,e,u),p(e,a),C(s,r,u),C(s,o,u),p(o,i)},p(s,u){u&2&&t!==(t=Pt(s[14].data)+"")&&Z(a,t),u&2&&n!==(n=new Date(s[14].data).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})+"")&&Z(i,n)},d(s){s&&(d(e),d(r),d(o))}}}function Hr(l){let e,t,a,r,o,n=l[14].documento+"",i,s;return a=new ft({props:{class:"w-3 h-3 text-gray-500 dark:text-gray-400"}}),{c(){e=E("div"),t=E("div"),V(a.$$.fragment),r=P(),o=E("span"),i=H(n),this.h()},l(u){e=b(u,"DIV",{class:!0});var g=x(e);t=b(g,"DIV",{class:!0});var m=x(t);N(a.$$.fragment,m),m.forEach(d),r=A(g),o=b(g,"SPAN",{class:!0});var f=x(o);i=j(f,n),f.forEach(d),g.forEach(d),this.h()},h(){I(t,"class","p-1 bg-gray-100 dark:bg-gray-700 rounded"),I(o,"class","text-sm font-medium text-gray-900 dark:text-white"),I(e,"class","flex items-center space-x-2")},m(u,g){C(u,e,g),p(e,t),T(a,t,null),p(e,r),p(e,o),p(o,i),s=!0},p(u,g){(!s||g&2)&&n!==(n=u[14].documento+"")&&Z(i,n)},i(u){s||(_(a.$$.fragment,u),s=!0)},o(u){v(a.$$.fragment,u),s=!1},d(u){u&&d(e),F(a)}}}function Lr(l){let e,t,a,r,o,n,i=Gt(l[14].tipoMovimentacao)+"",s,u;var g=l[15];function m(f,c){return{props:{class:"w-3 h-3 "+(f[16]==="green"?"text-green-600 dark:text-green-400":f[16]==="red"?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400")}}}return g&&(a=Ct(g,m(l))),{c(){e=E("div"),t=E("div"),a&&V(a.$$.fragment),o=P(),n=E("span"),s=H(i),this.h()},l(f){e=b(f,"DIV",{class:!0});var c=x(e);t=b(c,"DIV",{class:!0});var $=x(t);a&&N(a.$$.fragment,$),$.forEach(d),o=A(c),n=b(c,"SPAN",{class:!0});var y=x(n);s=j(y,i),y.forEach(d),c.forEach(d),this.h()},h(){I(t,"class",r="p-1 "+(l[16]==="green"?"bg-green-100 dark:bg-green-900":l[16]==="red"?"bg-red-100 dark:bg-red-900":"bg-blue-100 dark:bg-blue-900")+" rounded"),I(n,"class","text-sm text-gray-900 dark:text-white"),I(e,"class","flex items-center space-x-2")},m(f,c){C(f,e,c),p(e,t),a&&T(a,t,null),p(e,o),p(e,n),p(n,s),u=!0},p(f,c){if(c&2&&g!==(g=f[15])){if(a){Ee();const $=a;v($.$$.fragment,1,0,()=>{F($,1)}),we()}g?(a=Ct(g,m(f)),V(a.$$.fragment),_(a.$$.fragment,1),T(a,t,null)):a=null}else if(g){const $={};c&2&&($.class="w-3 h-3 "+(f[16]==="green"?"text-green-600 dark:text-green-400":f[16]==="red"?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400")),a.$set($)}(!u||c&2&&r!==(r="p-1 "+(f[16]==="green"?"bg-green-100 dark:bg-green-900":f[16]==="red"?"bg-red-100 dark:bg-red-900":"bg-blue-100 dark:bg-blue-900")+" rounded"))&&I(t,"class",r),(!u||c&2)&&i!==(i=Gt(f[14].tipoMovimentacao)+"")&&Z(s,i)},i(f){u||(a&&_(a.$$.fragment,f),u=!0)},o(f){a&&v(a.$$.fragment,f),u=!1},d(f){f&&d(e),a&&F(a)}}}function Ur(l){let e=Qt(l[14].entrada,l[14].saida)+"",t;return{c(){t=H(e)},l(a){t=j(a,e)},m(a,r){C(a,t,r)},p(a,r){r&2&&e!==(e=Qt(a[14].entrada,a[14].saida)+"")&&Z(t,e)},d(a){a&&d(t)}}}function Gr(l){let e,t;return e=new pt({props:{color:l[14].entrada>0?"green":"red",class:"w-fit rounded-sm",$$slots:{default:[Ur]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p(a,r){const o={};r&2&&(o.color=a[14].entrada>0?"green":"red"),r&4194306&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Qr(l){let e,t=l[14].saldo+"",a;return{c(){e=E("span"),a=H(t),this.h()},l(r){e=b(r,"SPAN",{class:!0});var o=x(e);a=j(o,t),o.forEach(d),this.h()},h(){I(e,"class","font-semibold text-gray-900 dark:text-white")},m(r,o){C(r,e,o),p(e,a)},p(r,o){o&2&&t!==(t=r[14].saldo+"")&&Z(a,t)},d(r){r&&d(e)}}}function Kr(l){let e,t=(l[14].observacoes||"-")+"",a;return{c(){e=E("span"),a=H(t),this.h()},l(r){e=b(r,"SPAN",{class:!0});var o=x(e);a=j(o,t),o.forEach(d),this.h()},h(){I(e,"class","text-sm text-gray-600 dark:text-gray-400")},m(r,o){C(r,e,o),p(e,a)},p(r,o){o&2&&t!==(t=(r[14].observacoes||"-")+"")&&Z(a,t)},d(r){r&&d(e)}}}function Jr(l){let e,t,a,r,o,n,i,s,u,g,m,f,c;return e=new ze({props:{class:"py-3 px-4",$$slots:{default:[jr]},$$scope:{ctx:l}}}),a=new ze({props:{class:"py-3 px-4",$$slots:{default:[Hr]},$$scope:{ctx:l}}}),o=new ze({props:{class:"py-3 px-4",$$slots:{default:[Lr]},$$scope:{ctx:l}}}),i=new ze({props:{class:"py-3 px-4 text-center",$$slots:{default:[Gr]},$$scope:{ctx:l}}}),u=new ze({props:{class:"py-3 px-4 text-center",$$slots:{default:[Qr]},$$scope:{ctx:l}}}),m=new ze({props:{class:"py-3 px-4",$$slots:{default:[Kr]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment),t=P(),V(a.$$.fragment),r=P(),V(o.$$.fragment),n=P(),V(i.$$.fragment),s=P(),V(u.$$.fragment),g=P(),V(m.$$.fragment),f=P()},l($){N(e.$$.fragment,$),t=A($),N(a.$$.fragment,$),r=A($),N(o.$$.fragment,$),n=A($),N(i.$$.fragment,$),s=A($),N(u.$$.fragment,$),g=A($),N(m.$$.fragment,$),f=A($)},m($,y){T(e,$,y),C($,t,y),T(a,$,y),C($,r,y),T(o,$,y),C($,n,y),T(i,$,y),C($,s,y),T(u,$,y),C($,g,y),T(m,$,y),C($,f,y),c=!0},p($,y){const M={};y&4194306&&(M.$$scope={dirty:y,ctx:$}),e.$set(M);const w={};y&4194306&&(w.$$scope={dirty:y,ctx:$}),a.$set(w);const k={};y&4194306&&(k.$$scope={dirty:y,ctx:$}),o.$set(k);const O={};y&4194306&&(O.$$scope={dirty:y,ctx:$}),i.$set(O);const h={};y&4194306&&(h.$$scope={dirty:y,ctx:$}),u.$set(h);const S={};y&4194306&&(S.$$scope={dirty:y,ctx:$}),m.$set(S)},i($){c||(_(e.$$.fragment,$),_(a.$$.fragment,$),_(o.$$.fragment,$),_(i.$$.fragment,$),_(u.$$.fragment,$),_(m.$$.fragment,$),c=!0)},o($){v(e.$$.fragment,$),v(a.$$.fragment,$),v(o.$$.fragment,$),v(i.$$.fragment,$),v(u.$$.fragment,$),v(m.$$.fragment,$),c=!1},d($){$&&(d(t),d(r),d(n),d(s),d(g),d(f)),F(e,$),F(a,$),F(o,$),F(i,$),F(u,$),F(m,$)}}}function Ut(l){let e,t;return e=new aa({props:{class:"hover:bg-gray-50 dark:hover:bg-gray-700",$$slots:{default:[Jr]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p(a,r){const o={};r&4194306&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Wr(l){let e,t,a=Ye(l[1].movimentacoes),r=[];for(let n=0;n<a.length;n+=1)r[n]=Ut(Bt(l,a,n));const o=n=>v(r[n],1,1,()=>{r[n]=null});return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=pe()},l(n){for(let i=0;i<r.length;i+=1)r[i].l(n);e=pe()},m(n,i){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(n,i);C(n,e,i),t=!0},p(n,i){if(i&1026){a=Ye(n[1].movimentacoes);let s;for(s=0;s<a.length;s+=1){const u=Bt(n,a,s);r[s]?(r[s].p(u,i),_(r[s],1)):(r[s]=Ut(u),r[s].c(),_(r[s],1),r[s].m(e.parentNode,e))}for(Ee(),s=a.length;s<r.length;s+=1)o(s);we()}},i(n){if(!t){for(let i=0;i<a.length;i+=1)_(r[i]);t=!0}},o(n){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)v(r[i]);t=!1},d(n){n&&d(e),Xt(r,n)}}}function Xr(l){let e,t,a,r;return e=new ea({props:{class:"bg-gray-50 dark:bg-gray-700",$$slots:{default:[Br]},$$scope:{ctx:l}}}),a=new ta({props:{class:"divide-y divide-gray-200 dark:divide-gray-700",$$slots:{default:[Wr]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment),t=P(),V(a.$$.fragment)},l(o){N(e.$$.fragment,o),t=A(o),N(a.$$.fragment,o)},m(o,n){T(e,o,n),C(o,t,n),T(a,o,n),r=!0},p(o,n){const i={};n&4194304&&(i.$$scope={dirty:n,ctx:o}),e.$set(i);const s={};n&4194306&&(s.$$scope={dirty:n,ctx:o}),a.$set(s)},i(o){r||(_(e.$$.fragment,o),_(a.$$.fragment,o),r=!0)},o(o){v(e.$$.fragment,o),v(a.$$.fragment,o),r=!1},d(o){o&&d(t),F(e,o),F(a,o)}}}function Yr(l){let e,t="Erro ao carregar hist√≥rico:",a,r;return{c(){e=E("span"),e.textContent=t,a=P(),r=H(l[3]),this.h()},l(o){e=b(o,"SPAN",{class:!0,"data-svelte-h":!0}),xe(e)!=="svelte-1gnoq2l"&&(e.textContent=t),a=A(o),r=j(o,l[3]),this.h()},h(){I(e,"class","font-medium")},m(o,n){C(o,e,n),C(o,a,n),C(o,r,n)},p(o,n){n&8&&Z(r,o[3])},d(o){o&&(d(e),d(a),d(r))}}}function Zr(l){let e;return{c(){e=H("Fechar")},l(t){e=j(t,"Fechar")},m(t,a){C(t,e,a)},d(t){t&&d(e)}}}function el(l){let e,t,a,r,o,n,i,s,u,g,m,f,c,$,y,M,w,k,O="Per√≠odo:",h,S,ee,B,U,G,W,X,te;r=new ct({props:{class:"w-5 h-5 text-blue-600 dark:text-blue-400"}});let Q=l[5]&&Ht(l);m=new Qe({props:{color:"alternative",class:"rounded-sm p-2",$$slots:{default:[Cr]},$$scope:{ctx:l}}}),m.$on("click",l[8]),M=new Da({props:{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}}),S=new Ma({props:{class:"rounded-sm",$$slots:{default:[Dr]},$$scope:{ctx:l}}});const fe=[Fr,Sr,Pr,Ar],D=[];function J(L,K){return L[2]?0:L[3]?1:L[1]?2:3}return B=J(l),U=D[B]=fe[B](l),X=new Qe({props:{color:"alternative",class:"rounded-sm",$$slots:{default:[Zr]},$$scope:{ctx:l}}}),X.$on("click",l[8]),{c(){e=E("div"),t=E("div"),a=E("div"),V(r.$$.fragment),o=P(),n=E("div"),i=E("h3"),s=H(l[6]),u=P(),Q&&Q.c(),g=P(),V(m.$$.fragment),f=P(),c=E("div"),$=E("div"),y=E("div"),V(M.$$.fragment),w=P(),k=E("span"),k.textContent=O,h=P(),V(S.$$.fragment),ee=P(),U.c(),G=P(),W=E("div"),V(X.$$.fragment),this.h()},l(L){e=b(L,"DIV",{class:!0});var K=x(e);t=b(K,"DIV",{class:!0});var re=x(t);a=b(re,"DIV",{class:!0});var _e=x(a);N(r.$$.fragment,_e),_e.forEach(d),o=A(re),n=b(re,"DIV",{});var le=x(n);i=b(le,"H3",{class:!0});var ge=x(i);s=j(ge,l[6]),ge.forEach(d),u=A(le),Q&&Q.l(le),le.forEach(d),re.forEach(d),g=A(K),N(m.$$.fragment,K),K.forEach(d),f=A(L),c=b(L,"DIV",{class:!0});var ve=x(c);$=b(ve,"DIV",{class:!0});var ie=x($);y=b(ie,"DIV",{class:!0});var me=x(y);N(M.$$.fragment,me),w=A(me),k=b(me,"SPAN",{class:!0,"data-svelte-h":!0}),xe(k)!=="svelte-b385pc"&&(k.textContent=O),me.forEach(d),h=A(ie),N(S.$$.fragment,ie),ie.forEach(d),ee=A(ve),U.l(ve),ve.forEach(d),G=A(L),W=b(L,"DIV",{class:!0});var De=x(W);N(X.$$.fragment,De),De.forEach(d),this.h()},h(){I(a,"class","p-2 bg-blue-100 dark:bg-blue-900 rounded-lg"),I(i,"class","text-lg font-semibold text-gray-900 dark:text-white"),I(t,"class","flex items-center space-x-3"),I(e,"class","flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-600"),I(k,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),I(y,"class","flex items-center space-x-2"),I($,"class","flex items-center justify-between"),I(c,"class","p-6 space-y-6"),I(W,"class","flex items-center justify-end p-6 border-t border-gray-200 dark:border-gray-600 space-x-3")},m(L,K){C(L,e,K),p(e,t),p(t,a),T(r,a,null),p(t,o),p(t,n),p(n,i),p(i,s),p(n,u),Q&&Q.m(n,null),p(e,g),T(m,e,null),C(L,f,K),C(L,c,K),p(c,$),p($,y),T(M,y,null),p(y,w),p(y,k),p($,h),T(S,$,null),p(c,ee),D[B].m(c,null),C(L,G,K),C(L,W,K),T(X,W,null),te=!0},p(L,K){(!te||K&64)&&Z(s,L[6]),L[5]?Q?Q.p(L,K):(Q=Ht(L),Q.c(),Q.m(n,null)):Q&&(Q.d(1),Q=null);const re={};K&4194304&&(re.$$scope={dirty:K,ctx:L}),m.$set(re);const _e={};K&4194320&&(_e.$$scope={dirty:K,ctx:L}),S.$set(_e);let le=B;B=J(L),B===le?D[B].p(L,K):(Ee(),v(D[le],1,1,()=>{D[le]=null}),we(),U=D[B],U?U.p(L,K):(U=D[B]=fe[B](L),U.c()),_(U,1),U.m(c,null));const ge={};K&4194304&&(ge.$$scope={dirty:K,ctx:L}),X.$set(ge)},i(L){te||(_(r.$$.fragment,L),_(m.$$.fragment,L),_(M.$$.fragment,L),_(S.$$.fragment,L),_(U),_(X.$$.fragment,L),te=!0)},o(L){v(r.$$.fragment,L),v(m.$$.fragment,L),v(M.$$.fragment,L),v(S.$$.fragment,L),v(U),v(X.$$.fragment,L),te=!1},d(L){L&&(d(e),d(f),d(c),d(G),d(W)),F(r),Q&&Q.d(),F(m),F(M),F(S),D[B].d(),F(X)}}}function tl(l){let e,t;return e=new oa({props:{open:l[0],size:"xl",class:"rounded-sm",outsideclose:!0,$$slots:{default:[el]},$$scope:{ctx:l}}}),e.$on("close",l[8]),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p(a,[r]){const o={};r&1&&(o.open=a[0]),r&4194430&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function al(l){return l.includes("ENTRADA")?"green":l.includes("SAIDA")?"red":"blue"}function Gt(l){return{ENTRADA_NOTA:"Entrada por Nota",SAIDA_ENTREGA:"Sa√≠da - Entrega",SAIDA_TRANSFERENCIA:"Sa√≠da - Transfer√™ncia",ENTRADA_TRANSFERENCIA:"Entrada - Transfer√™ncia",ENTRADA_DEVOLUCAO:"Entrada - Devolu√ß√£o",SAIDA_DESCARTE:"Sa√≠da - Descarte",AJUSTE_POSITIVO:"Ajuste Positivo",AJUSTE_NEGATIVO:"Ajuste Negativo"}[l]||l}function Qt(l,e){return l>0?`+${l}`:e>0?`-${e}`:"0"}function rl(l,e,t){let a,r,{showModal:o=!1}=e,{item:n=null}=e,{kardexData:i=null}=e,{loading:s=!1}=e,{error:u=null}=e;const g=ut();let m="all";const f=[{value:"7",label:"7 dias"},{value:"30",label:"30 dias"},{value:"90",label:"90 dias"},{value:"all",label:"Todos"}];function c(){g("close")}function $(w){if(t(4,m=w),w==="all")g("periodFilter",{period:w});else{const k=parseInt(w),O=new Date().toISOString().split("T")[0],h=new Date(Date.now()-k*24*60*60*1e3).toISOString().split("T")[0];g("periodFilter",{period:w,dataInicio:h,dataFim:O})}}function y(w){return w.includes("ENTRADA")?_t:w.includes("SAIDA")?ra:ft}const M=w=>$(w.value);return l.$$set=w=>{"showModal"in w&&t(0,o=w.showModal),"item"in w&&t(11,n=w.item),"kardexData"in w&&t(1,i=w.kardexData),"loading"in w&&t(2,s=w.loading),"error"in w&&t(3,u=w.error)},l.$$.update=()=>{var w,k;l.$$.dirty&2048&&t(6,a=n?`Hist√≥rico - ${((w=n.tipoEPI)==null?void 0:w.nomeEquipamento)||"Item"}`:"Hist√≥rico"),l.$$.dirty&2048&&t(5,r=n?`CA ${((k=n.tipoEPI)==null?void 0:k.numeroCA)||"-"}`:"")},[o,i,s,u,m,r,a,f,c,$,y,n,M]}class ll extends lt{constructor(e){super(),ot(this,e,rl,tl,st,{showModal:0,item:11,kardexData:1,loading:2,error:3})}}function Kt(l){let e,t;return e=new yr({props:{item:l[5],tiposEPI:l[11],almoxarifados:l[1],loading:l[7],show:l[2]}}),e.$on("save",l[21]),e.$on("cancel",l[22]),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p(a,r){const o={};r[0]&32&&(o.item=a[5]),r[0]&2048&&(o.tiposEPI=a[11]),r[0]&2&&(o.almoxarifados=a[1]),r[0]&128&&(o.loading=a[7]),r[0]&4&&(o.show=a[2]),e.$set(o)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Jt(l){let e,t;return e=new ll({props:{showModal:l[3],item:l[6],kardexData:l[10],loading:l[8],error:l[9]}}),e.$on("close",l[23]),e.$on("periodFilter",l[24]),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p(a,r){const o={};r[0]&8&&(o.showModal=a[3]),r[0]&64&&(o.item=a[6]),r[0]&1024&&(o.kardexData=a[10]),r[0]&256&&(o.loading=a[8]),r[0]&512&&(o.error=a[9]),e.$set(o)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function Wt(l){let e,t;return e=new Ta({props:{open:l[4],mode:"create"}}),e.$on("close",l[26]),e.$on("save",l[27]),{c(){V(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,r){T(e,a,r),t=!0},p(a,r){const o={};r[0]&16&&(o.open=a[4]),e.$set(o)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){F(e,a)}}}function ol(l){let e,t,a,r,o,n;e=new ur({props:{items:l[12].items,loading:l[12].loading,error:l[12].error,total:l[12].pagination.total,page:l[12].pagination.currentPage,totalPages:l[12].pagination.totalPages,searchTerm:l[12].filters.searchTerm,filters:{status:l[12].filters.statusFilter,categoria:l[12].filters.categoriaFilter},categoriaOptions:l[12].filterOptions.categorias,statusOptions:l[12].filterOptions.status,hideStatusFilter:!!l[0]}}),e.$on("searchChange",l[41]),e.$on("filterChange",l[42]),e.$on("clearFilters",l[17]),e.$on("pageChange",l[43]),e.$on("itemEdit",l[44]),e.$on("itemHistory",l[20]),e.$on("newMovement",l[25]);let i=l[2]&&Kt(l),s=l[3]&&Jt(l),u=l[4]&&Wt(l);return{c(){V(e.$$.fragment),t=P(),i&&i.c(),a=P(),s&&s.c(),r=P(),u&&u.c(),o=pe()},l(g){N(e.$$.fragment,g),t=A(g),i&&i.l(g),a=A(g),s&&s.l(g),r=A(g),u&&u.l(g),o=pe()},m(g,m){T(e,g,m),C(g,t,m),i&&i.m(g,m),C(g,a,m),s&&s.m(g,m),C(g,r,m),u&&u.m(g,m),C(g,o,m),n=!0},p(g,m){const f={};m[0]&4096&&(f.items=g[12].items),m[0]&4096&&(f.loading=g[12].loading),m[0]&4096&&(f.error=g[12].error),m[0]&4096&&(f.total=g[12].pagination.total),m[0]&4096&&(f.page=g[12].pagination.currentPage),m[0]&4096&&(f.totalPages=g[12].pagination.totalPages),m[0]&4096&&(f.searchTerm=g[12].filters.searchTerm),m[0]&4096&&(f.filters={status:g[12].filters.statusFilter,categoria:g[12].filters.categoriaFilter}),m[0]&4096&&(f.categoriaOptions=g[12].filterOptions.categorias),m[0]&4096&&(f.statusOptions=g[12].filterOptions.status),m[0]&1&&(f.hideStatusFilter=!!g[0]),e.$set(f),g[2]?i?(i.p(g,m),m[0]&4&&_(i,1)):(i=Kt(g),i.c(),_(i,1),i.m(a.parentNode,a)):i&&(Ee(),v(i,1,1,()=>{i=null}),we()),g[3]?s?(s.p(g,m),m[0]&8&&_(s,1)):(s=Jt(g),s.c(),_(s,1),s.m(r.parentNode,r)):s&&(Ee(),v(s,1,1,()=>{s=null}),we()),g[4]?u?(u.p(g,m),m[0]&16&&_(u,1)):(u=Wt(g),u.c(),_(u,1),u.m(o.parentNode,o)):u&&(Ee(),v(u,1,1,()=>{u=null}),we())},i(g){n||(_(e.$$.fragment,g),_(i),_(s),_(u),n=!0)},o(g){v(e.$$.fragment,g),v(i),v(s),v(u),n=!1},d(g){g&&(d(t),d(a),d(r),d(o)),F(e,g),i&&i.d(g),s&&s.d(g),u&&u.d(g)}}}function sl(l,e,t){let a,r,o,n,i,s,u;gt(l,_a,q=>t(39,s=q)),gt(l,ha,q=>t(40,u=q));let{initialPageSize:g=20}=e,{key:m="default"}=e,{statusFilter:f=""}=e;const c=!1,$=3e4,y=ut(),M=Ia(q=>Dt.getInventoryItems({...q,includeExpanded:!0}),{initialPageSize:g});gt(l,M,q=>t(38,i=q));let w=!1,k=!1,O=!1,h=null,S=null,ee=!1,B=!1,U=null,G=null,W=[],X=[],te=!0;ga(async()=>{console.log("üö® CONTAINER INICIADO: InventoryContainer carregando...",{key:m,statusFilter:f});try{await va.initialize(),await fe(),f&&(console.log("üîç Aplicando filtro de status autom√°tico:",f),t(33,D={...D,status:f}),le()),console.log("üö® CHAMANDO loadInventoryData..."),await Q(),console.log("‚úÖ InventoryContainer: Inicializado com sucesso")}catch(q){console.error("‚ùå Erro ao inicializar InventoryContainer:",q)}finally{t(32,te=!1)}});async function Q(){try{await M.fetchPage(),console.log("üì¶ Dados de invent√°rio carregados")}catch(q){console.error("‚ùå Erro ao carregar invent√°rio:",q),Ze.error("Erro ao carregar invent√°rio","N√£o foi poss√≠vel carregar os dados do estoque")}}async function fe(){try{const[q,oe]=await Promise.all([St.getTiposEPI({ativo:!0}),St.getAlmoxarifados({ativo:!0})]);t(11,W=q.data||[]),t(1,X=oe),console.log(`üìã Carregados ${W.length} tipos EPI e ${X.length} almoxarifados`)}catch(q){console.error("‚ùå Erro ao carregar dados auxiliares:",q)}}let D={status:"todos",categoria:"todas"},J="";function L(q){t(34,J=q),le()}function K(q){t(33,D={...D,status:q}),le()}function re(q){t(33,D={...D,categoria:q}),le()}function _e(){t(34,J=""),t(33,D={status:"todos",categoria:"todas"}),le()}function le(){const q={};J&&J.trim()!==""&&(q.search=J.trim()),f&&f!==""?(q.status=f,console.log("üéØ FILTRO DE TAB APLICADO:",f)):D.status&&D.status!=="todos"&&(q.status=D.status,console.log("üîß Filtro manual de status aplicado:",D.status)),D.categoria&&D.categoria!=="todas"&&(q.categoria=D.categoria),console.log("üîß Aplicando filtros finais:",q,{statusFilter:f,manualStatus:D.status,key:m}),M.setFilters(q)}function ge(q){M.goToPage(q)}function ve(q){t(5,h=q.detail.item),t(2,w=!0),console.log("‚úèÔ∏è Editando item:",h.id)}async function ie(q){t(6,S=q.detail.item),t(3,k=!0),await me(),console.log("üìä Abrindo hist√≥rico do item:",S.id)}async function me(q,oe){var Fe,de,Y,Te;if(S){t(8,B=!0),t(9,U=null),t(10,G=null);try{console.log("üìä DEBUG: Item selecionado para hist√≥rico:",S),console.log("üìä DEBUG: Campos dispon√≠veis:",Object.keys(S));const ce=S.almoxarifadoId||((Fe=S.almoxarifado)==null?void 0:Fe.id)||S.almoxarife_id,se=S.tipoEPIId||S.tipoEpiId||S.tipo_epi_id||((de=S.tipoEPI)==null?void 0:de.id);if(console.log("üìä DEBUG: IDs extra√≠dos:",{almoxarifadoId:ce,tipoEpiId:se}),!ce||!se)throw console.error("‚ùå DEBUG: IDs n√£o encontrados:",{almoxarifadoId:!!ce,tipoEpiId:!!se,itemCompleto:S}),new Error(`Item n√£o possui dados necess√°rios para buscar hist√≥rico. Almoxarifado: ${!!ce}, TipoEPI: ${!!se}`);const ke={almoxarifadoId:ce,tipoEpiId:se,dataInicio:q,dataFim:oe};console.log("üìä Buscando kardex com par√¢metros:",ke),t(10,G=await pa.obterKardex(ke)),console.log(`üìä Kardex carregado: ${G.movimentacoes.length} movimenta√ß√µes`),console.log("üìä RESPOSTA COMPLETA DO KARDEX:",{saldoInicial:G.saldoInicial,saldoFinal:G.saldoFinal,totalEntradas:G.totalEntradas,totalSaidas:G.totalSaidas,primeiraMovimentacao:G.movimentacoes[0],ultimaMovimentacao:G.movimentacoes[G.movimentacoes.length-1],movimentacoesCompletas:G.movimentacoes});const R=S.quantidade,z=G.saldoFinal;R!==z?console.warn("üö® INCONSIST√äNCIA DETECTADA:",{item:((Y=S.tipoEPI)==null?void 0:Y.nomeEquipamento)||"Item n√£o identificado",numeroCA:((Te=S.tipoEPI)==null?void 0:Te.numeroCA)||"CA n√£o identificado",estoqueAtualListagem:R,saldoFinalKardex:z,diferenca:R-z,problemaTipo:R>z?"READ_model_maior":"event_log_maior",possiveisProblemas:["Desincroniza√ß√£o Read Model vs Event Log","Ajuste manual n√£o refletido no Event Log","Bug na proje√ß√£o/c√°lculo","Movimenta√ß√£o n√£o processada corretamente"]}):console.log("‚úÖ Estoque consistente:",{estoqueAtual:R,saldoKardex:z})}catch(ce){console.error("‚ùå Erro ao carregar hist√≥rico:",ce),t(9,U=ce instanceof Error?ce.message:"Erro desconhecido")}finally{t(8,B=!1)}}}async function De(q){t(7,ee=!0);try{console.log("üíæ Salvando movimenta√ß√£o:",q.detail);const oe=await Dt.registerMovement(q.detail);console.log("‚úÖ Movimenta√ß√£o registrada:",oe.id),t(2,w=!1),t(5,h=null),await Q(),y("dataChanged"),Ze.success("Movimenta√ß√£o registrada",`${q.detail.tipoMovimentacao} de ${q.detail.quantidade} unidades`)}catch(oe){console.error("‚ùå Erro ao salvar movimenta√ß√£o:",oe),Ze.error("Erro ao salvar","N√£o foi poss√≠vel registrar a movimenta√ß√£o")}finally{t(7,ee=!1)}}function Ae(){t(2,w=!1),t(5,h=null),console.log("‚ùå Movimenta√ß√£o cancelada")}function ue(){t(3,k=!1),t(6,S=null),t(10,G=null),t(9,U=null),t(8,B=!1),console.log("‚ùå Modal de hist√≥rico fechado")}async function $e(q){const{period:oe,dataInicio:Fe,dataFim:de}=q.detail;await me(Fe,de),console.log("üìÖ Per√≠odo do hist√≥rico alterado:",oe)}function ye(){t(5,h=null),t(4,O=!0),console.log("‚ûï Nova movimenta√ß√£o")}function be(){t(4,O=!1),t(5,h=null),console.log("‚ùå Drawer de notas fechado")}async function He(q){try{console.log("üíæ Salvando nota:",q.detail),t(4,O=!1),t(5,h=null),await Q(),y("dataChanged"),Ze.success("Nota salva","Movimenta√ß√£o registrada com sucesso")}catch(oe){console.error("‚ùå Erro ao salvar nota:",oe),Ze.error("Erro ao salvar","N√£o foi poss√≠vel registrar a movimenta√ß√£o")}}const Pe=q=>L(q.detail.value),he=q=>{q.detail.key==="status"?K(q.detail.value):q.detail.key==="categoria"&&re(q.detail.value)},Ue=q=>ge(q.detail.page),Ge=q=>ve(q.detail.item);return l.$$set=q=>{"initialPageSize"in q&&t(28,g=q.initialPageSize),"key"in q&&t(29,m=q.key),"statusFilter"in q&&t(0,f=q.statusFilter)},l.$$.update=()=>{var q;l.$$.dirty[1]&512&&t(36,a=[{value:"todos",label:"Todos os Status"},...u]),l.$$.dirty[1]&256&&t(35,r=[{value:"todas",label:"Todas as Categorias"},...s]),l.$$.dirty[0]&2&&[...X.map(oe=>({value:oe.id,label:oe.nome}))],l.$$.dirty[1]&12&&t(37,o=J!==""||D.status!=="todos"||D.categoria!=="todas"),l.$$.dirty[1]&128&&console.log("üèóÔ∏è CONTAINER: dados do store:",{storeItems:((q=i.items)==null?void 0:q.length)||0,storeLoading:i.loading,storeError:i.error,storeTotal:i.total}),l.$$.dirty[1]&254&&t(12,n={items:i.items||[],loading:te||i.loading,error:i.error,pagination:{currentPage:i.page,totalPages:i.totalPages,pageSize:i.pageSize,total:i.total,hasNext:M.hasNext(),hasPrev:M.hasPrev()},filters:{searchTerm:J,statusFilter:D.status,categoriaFilter:D.categoria,hasActiveFilters:o},filterOptions:{status:a,categorias:r}})},[f,X,w,k,O,h,S,ee,B,U,G,W,n,M,L,K,re,_e,ge,ve,ie,De,Ae,ue,$e,ye,be,He,g,m,c,$,te,D,J,r,a,o,i,s,u,Pe,he,Ue,Ge]}class Cl extends lt{constructor(e){super(),ot(this,e,sl,ol,st,{initialPageSize:28,key:29,statusFilter:0,autoRefresh:30,refreshInterval:31},null,[-1,-1])}get autoRefresh(){return this.$$.ctx[30]}get refreshInterval(){return this.$$.ctx[31]}}export{Cl as default};
