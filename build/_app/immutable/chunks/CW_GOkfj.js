var Ze=Object.defineProperty;var xe=(a,e,r)=>e in a?Ze(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r;var B=(a,e,r)=>xe(a,typeof e!="symbol"?e+"":e,r);import{w as _,d as b}from"./sdCM-dK-.js";import{S as be,i as _e,s as W,d as k,o as v,p as h,C as F,q as z,b as y,B as A,E as U,H as O,I as K,L as q,O as M,P as R,Q as D,ad as re,$ as $e,e as V,f as Y,j as Q,m as ve,r as Ce,x as Ee,y as ke,F as et,_ as tt,G as se,h as G,k as H,J as E,u as L,M as at,N as ne,a2 as ie,R as C,ae as g}from"./BwBa27U2.js";import{g as ye,t as I,C as ot,b as X}from"./K6YgHZ2F.js";import"./IHki7fMi.js";function rt(){const{subscribe:a,set:e,update:r}=_("light");return{subscribe:a,initialize:()=>{const t=localStorage.getItem("theme");if(t==="dark"||t==="light"){e(t),document.documentElement.classList.toggle("dark",t==="dark");return}const n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e(n),document.documentElement.classList.toggle("dark",n==="dark")},toggle:()=>{r(t=>{const o=t==="light"?"dark":"light";return localStorage.setItem("theme",o),document.documentElement.classList.toggle("dark",o==="dark"),o})},set:t=>{localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",t==="dark"),e(t)}}}const Lt=rt();function st(a){let e;const r=a[5].default,t=q(r,a,a[4],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,n){t&&t.m(o,n),e=!0},p(o,n){t&&t.p&&(!e||n&16)&&M(t,r,o,o[4],e?D(r,o[4],n,null):R(o[4]),null)},i(o){e||(h(t,o),e=!0)},o(o){v(t,o),e=!1},d(o){t&&t.d(o)}}}function nt(a){let e=a[0],r,t,o=a[0]&&J(a);return{c(){o&&o.c(),r=A()},l(n){o&&o.l(n),r=A()},m(n,s){o&&o.m(n,s),y(n,r,s),t=!0},p(n,s){n[0]?e?W(e,n[0])?(o.d(1),o=J(n),e=n[0],o.c(),o.m(r.parentNode,r)):o.p(n,s):(o=J(n),e=n[0],o.c(),o.m(r.parentNode,r)):e&&(o.d(1),o=null,e=n[0])},i(n){t||(h(o,n),t=!0)},o(n){v(o,n),t=!1},d(n){n&&k(r),o&&o.d(n)}}}function J(a){let e,r,t,o;const n=a[5].default,s=q(n,a,a[4],null);let f=[a[3]],u={};for(let i=0;i<f.length;i+=1)u=O(u,f[i]);return{c(){e=Q(a[0]),s&&s.c(),this.h()},l(i){e=V(i,(a[0]||"null").toUpperCase(),{});var l=Y(e);s&&s.l(l),l.forEach(k),this.h()},h(){re(a[0])(e,u)},m(i,l){y(i,e,l),s&&s.m(e,null),r=!0,t||(o=$e(a[2].call(null,e)),t=!0)},p(i,l){s&&s.p&&(!r||l&16)&&M(s,n,i,i[4],r?D(n,i[4],l,null):R(i[4]),null),re(i[0])(e,u=ye(f,[l&8&&i[3]]))},i(i){r||(h(s,i),r=!0)},o(i){v(s,i),r=!1},d(i){i&&k(e),s&&s.d(i),t=!1,o()}}}function it(a){let e,r,t,o;const n=[nt,st],s=[];function f(u,i){return u[1]?0:1}return e=f(a),r=s[e]=n[e](a),{c(){r.c(),t=A()},l(u){r.l(u),t=A()},m(u,i){s[e].m(u,i),y(u,t,i),o=!0},p(u,[i]){let l=e;e=f(u),e===l?s[e].p(u,i):(F(),v(s[l],1,1,()=>{s[l]=null}),z(),r=s[e],r?r.p(u,i):(r=s[e]=n[e](u),r.c()),h(r,1),r.m(t.parentNode,t))},i(u){o||(h(r),o=!0)},o(u){v(r),o=!1},d(u){u&&k(t),s[e].d(u)}}}function lt(a,e,r){const t=["tag","show","use"];let o=U(e,t),{$$slots:n={},$$scope:s}=e,{tag:f="div"}=e,{show:u}=e,{use:i=()=>{}}=e;return a.$$set=l=>{e=O(O({},e),K(l)),r(3,o=U(e,t)),"tag"in l&&r(0,f=l.tag),"show"in l&&r(1,u=l.show),"use"in l&&r(2,i=l.use),"$$scope"in l&&r(4,s=l.$$scope)},[f,u,i,o,s,n]}class ct extends be{constructor(e){super(),_e(this,e,lt,it,W,{tag:0,show:1,use:2})}}const dt=a=>({}),le=a=>({}),ut=a=>({props:a[0]&2304}),ce=a=>({props:{...a[11],class:a[8]}}),ft=a=>({}),de=a=>({});function ue(a){let e,r,t;const o=a[15].left,n=q(o,a,a[30],de);return{c(){e=Q("div"),n&&n.c(),this.h()},l(s){e=V(s,"DIV",{class:!0});var f=Y(e);n&&n.l(f),f.forEach(k),this.h()},h(){L(e,"class",r=I(a[4],a[5])+" start-0 ps-2.5 pointer-events-none")},m(s,f){y(s,e,f),n&&n.m(e,null),t=!0},p(s,f){n&&n.p&&(!t||f[0]&1073741824)&&M(n,o,s,s[30],t?D(o,s[30],f,ft):R(s[30]),de),(!t||f[0]&48&&r!==(r=I(s[4],s[5])+" start-0 ps-2.5 pointer-events-none"))&&L(e,"class",r)},i(s){t||(h(n,s),t=!0)},o(s){v(n,s),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function gt(a){let e,r,t,o=[a[11],{type:a[1]},{class:a[8]}],n={};for(let s=0;s<o.length;s+=1)n=O(n,o[s]);return{c(){e=Q("input"),this.h()},l(s){e=V(s,"INPUT",{class:!0}),this.h()},h(){ne(e,n)},m(s,f){y(s,e,f),e.autofocus&&e.focus(),ie(e,a[0]),r||(t=[C(e,"input",a[29]),C(e,"blur",a[16]),C(e,"change",a[17]),C(e,"click",a[18]),C(e,"contextmenu",a[19]),C(e,"focus",a[20]),C(e,"keydown",a[21]),C(e,"keypress",a[22]),C(e,"keyup",a[23]),C(e,"mouseover",a[24]),C(e,"mouseenter",a[25]),C(e,"mouseleave",a[26]),C(e,"paste",a[27]),C(e,"input",a[28])],r=!0)},p(s,f){ne(e,n=ye(o,[f[0]&2048&&s[11],f[0]&2&&{type:s[1]},f[0]&256&&{class:s[8]}])),f[0]&1&&e.value!==s[0]&&ie(e,s[0])},d(s){s&&k(e),r=!1,at(t)}}}function fe(a){let e,r,t;const o=a[15].right,n=q(o,a,a[30],le);return{c(){e=Q("div"),n&&n.c(),this.h()},l(s){e=V(s,"DIV",{class:!0});var f=Y(e);n&&n.l(f),f.forEach(k),this.h()},h(){L(e,"class",r=I(a[4],a[6])+" end-0 pe-2.5")},m(s,f){y(s,e,f),n&&n.m(e,null),t=!0},p(s,f){n&&n.p&&(!t||f[0]&1073741824)&&M(n,o,s,s[30],t?D(o,s[30],f,dt):R(s[30]),le),(!t||f[0]&80&&r!==(r=I(s[4],s[6])+" end-0 pe-2.5"))&&L(e,"class",r)},i(s){t||(h(n,s),t=!0)},o(s){v(n,s),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function ge(a){let e,r;return e=new ot({props:{size:a[2],color:"none",class:I(a[4],a[6])+" focus:ring-0 end-1",tabindex:-1}}),e.$on("click",a[9]),{c(){ke(e.$$.fragment)},l(t){Ee(e.$$.fragment,t)},m(t,o){Ce(e,t,o),r=!0},p(t,o){const n={};o[0]&4&&(n.size=t[2]),o[0]&80&&(n.class=I(t[4],t[6])+" focus:ring-0 end-1"),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){ve(e,t)}}}function mt(a){let e,r,t,o,n,s=a[10].left&&ue(a);const f=a[15].default,u=q(f,a,a[30],ce),i=u||gt(a);let l=a[10].right&&fe(a),m=a[3]&&a[0]&&`${a[0]}`.length>0&&ge(a);return{c(){s&&s.c(),e=H(),i&&i.c(),r=H(),l&&l.c(),t=H(),m&&m.c(),o=A()},l(d){s&&s.l(d),e=G(d),i&&i.l(d),r=G(d),l&&l.l(d),t=G(d),m&&m.l(d),o=A()},m(d,p){s&&s.m(d,p),y(d,e,p),i&&i.m(d,p),y(d,r,p),l&&l.m(d,p),y(d,t,p),m&&m.m(d,p),y(d,o,p),n=!0},p(d,p){d[10].left?s?(s.p(d,p),p[0]&1024&&h(s,1)):(s=ue(d),s.c(),h(s,1),s.m(e.parentNode,e)):s&&(F(),v(s,1,1,()=>{s=null}),z()),u?u.p&&(!n||p[0]&1073744128)&&M(u,f,d,d[30],n?D(f,d[30],p,ut):R(d[30]),ce):i&&i.p&&(!n||p[0]&2307)&&i.p(d,n?p:[-1,-1]),d[10].right?l?(l.p(d,p),p[0]&1024&&h(l,1)):(l=fe(d),l.c(),h(l,1),l.m(t.parentNode,t)):l&&(F(),v(l,1,1,()=>{l=null}),z()),d[3]&&d[0]&&`${d[0]}`.length>0?m?(m.p(d,p),p[0]&9&&h(m,1)):(m=ge(d),m.c(),h(m,1),m.m(o.parentNode,o)):m&&(F(),v(m,1,1,()=>{m=null}),z())},i(d){n||(h(s),h(i,d),h(l),h(m),n=!0)},o(d){v(s),v(i,d),v(l),v(m),n=!1},d(d){d&&(k(e),k(r),k(t),k(o)),s&&s.d(d),i&&i.d(d),l&&l.d(d),m&&m.d(d)}}}function pt(a){let e,r;return e=new ct({props:{class:a[7],show:a[10].left||a[10].right||!!a[3],$$slots:{default:[mt]},$$scope:{ctx:a}}}),{c(){ke(e.$$.fragment)},l(t){Ee(e.$$.fragment,t)},m(t,o){Ce(e,t,o),r=!0},p(t,o){const n={};o[0]&128&&(n.class=t[7]),o[0]&1032&&(n.show=t[10].left||t[10].right||!!t[3]),o[0]&1073745279&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){ve(e,t)}}}function ht(a){return a&&a==="xs"?"sm":a==="xl"?"lg":a}function bt(a,e,r){let t;const o=["type","value","size","clearable","defaultClass","color","floatClass","classLeft","classRight","wrapperClass"];let n=U(e,o),{$$slots:s={},$$scope:f}=e;const u=et(s);let{type:i="text"}=e,{value:l=void 0}=e,{size:m=void 0}=e,{clearable:d=!1}=e,{defaultClass:p="block w-full disabled:cursor-not-allowed disabled:opacity-50 rtl:text-right"}=e,{color:N="base"}=e,{floatClass:$="flex absolute inset-y-0 items-center text-gray-500 dark:text-gray-400"}=e,{classLeft:ee=""}=e,{classRight:te=""}=e,{wrapperClass:ae="relative w-auto"}=e;const Te=tt(),Ae={base:"border border-gray-300 dark:border-gray-600",tinted:"border border-gray-300 dark:border-gray-500",green:"border border-green-500 dark:border-green-400",red:"border border-red-500 dark:border-red-400"},Oe={base:"focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500",green:"focus:ring-green-500 focus:border-green-500 dark:focus:border-green-500 dark:focus:ring-green-500",red:"focus:ring-red-500 focus:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500"},Ne={base:"bg-gray-50 text-gray-900 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400",tinted:"bg-gray-50 text-gray-900 dark:bg-gray-600 dark:text-white dark:placeholder-gray-400",green:"bg-green-50 text-green-900 placeholder-green-700 dark:text-green-400 dark:placeholder-green-500 dark:bg-gray-700",red:"bg-red-50 text-red-900 placeholder-red-700 dark:text-red-500 dark:placeholder-red-500 dark:bg-gray-700"};let qe=se("background"),T=se("group");const Me={sm:"sm:text-xs",md:"text-sm",lg:"sm:text-base"},Re={sm:"ps-9",md:"ps-10",lg:"ps-11"},De={sm:"pe-9",md:"pe-10",lg:"pe-11"},Be={sm:"p-2",md:"p-2.5",lg:"p-3"};let oe;const we=c=>{c.stopPropagation(),r(0,l=void 0),Te("change")};function Fe(c){E.call(this,a,c)}function ze(c){E.call(this,a,c)}function Ue(c){E.call(this,a,c)}function Le(c){E.call(this,a,c)}function Ve(c){E.call(this,a,c)}function Qe(c){E.call(this,a,c)}function je(c){E.call(this,a,c)}function Ge(c){E.call(this,a,c)}function He(c){E.call(this,a,c)}function Je(c){E.call(this,a,c)}function Ke(c){E.call(this,a,c)}function We(c){E.call(this,a,c)}function Ye(c){E.call(this,a,c)}function Xe(){l=this.value,r(0,l)}return a.$$set=c=>{r(41,e=O(O({},e),K(c))),r(11,n=U(e,o)),"type"in c&&r(1,i=c.type),"value"in c&&r(0,l=c.value),"size"in c&&r(2,m=c.size),"clearable"in c&&r(3,d=c.clearable),"defaultClass"in c&&r(12,p=c.defaultClass),"color"in c&&r(13,N=c.color),"floatClass"in c&&r(4,$=c.floatClass),"classLeft"in c&&r(5,ee=c.classLeft),"classRight"in c&&r(6,te=c.classRight),"wrapperClass"in c&&r(7,ae=c.wrapperClass),"$$scope"in c&&r(30,f=c.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&4&&r(14,t=m||ht(T==null?void 0:T.size)||"md");{const c=N==="base"&&qe?"tinted":N;r(8,oe=I([p,Be[t],u.left&&Re[t]||(d||u.right)&&De[t],Oe[N],Ne[c],Ae[c],Me[t],T||"rounded-lg",T&&"first:rounded-s-lg last:rounded-e-lg",T&&"not-first:-ms-px",e.class]))}},e=K(e),[l,i,m,d,$,ee,te,ae,oe,we,u,n,p,N,t,s,Fe,ze,Ue,Le,Ve,Qe,je,Ge,He,Je,Ke,We,Ye,Xe,f]}class Vt extends be{constructor(e){super(),_e(this,e,bt,pt,W,{type:1,value:0,size:2,clearable:3,defaultClass:12,color:13,floatClass:4,classLeft:5,classRight:6,wrapperClass:7},null,[-1,-1])}}const me={tiposMovimentacao:[{code:"entrada_nota",label:"Entrada por Nota",description:"Entrada de itens via nota fiscal"},{code:"saida_entrega",label:"Sa√≠da por Entrega",description:"Sa√≠da para entrega a colaborador"},{code:"transferencia",label:"Transfer√™ncia",description:"Transfer√™ncia entre almoxarifados"},{code:"ajuste_positivo",label:"Ajuste Positivo",description:"Ajuste para aumentar estoque"},{code:"ajuste_negativo",label:"Ajuste Negativo",description:"Ajuste para diminuir estoque"},{code:"devolucao",label:"Devolu√ß√£o",description:"Devolu√ß√£o de item por colaborador"},{code:"descarte",label:"Descarte",description:"Descarte de item vencido ou danificado"},{code:"estorno",label:"Estorno",description:"Estorno de movimenta√ß√£o anterior"}],categoriasEPI:[{code:"protecao_cabeca",label:"Prote√ß√£o da Cabe√ßa",description:"Capacetes, bon√©s, etc."},{code:"protecao_olhos",label:"Prote√ß√£o dos Olhos",description:"√ìculos, viseiras, etc."},{code:"protecao_auditiva",label:"Prote√ß√£o Auditiva",description:"Protetores auriculares"},{code:"protecao_respiratoria",label:"Prote√ß√£o Respirat√≥ria",description:"M√°scaras, respiradores"},{code:"protecao_tronco",label:"Prote√ß√£o do Tronco",description:"Aventais, coletes, jaquetas"},{code:"protecao_maos",label:"Prote√ß√£o das M√£os",description:"Luvas de diversos tipos"},{code:"protecao_pes",label:"Prote√ß√£o dos P√©s",description:"Cal√ßados de seguran√ßa"},{code:"protecao_queda",label:"Prote√ß√£o contra Quedas",description:"Cintos, talabartes, etc."}],statusEntrega:[{code:"pendente_assinatura",label:"Pendente de Assinatura",description:"Aguardando assinatura do colaborador"},{code:"assinada",label:"Assinada",description:"Entrega confirmada e assinada"},{code:"devolvido",label:"Devolvido",description:"Item devolvido pelo colaborador"},{code:"vencido",label:"Vencido",description:"Item vencido e deve ser substitu√≠do"},{code:"cancelada",label:"Cancelada",description:"Entrega cancelada"}],statusFicha:[{code:"ativa",label:"Ativa",description:"Ficha ativa do colaborador"},{code:"inativa",label:"Inativa",description:"Ficha inativada"},{code:"pendente",label:"Pendente",description:"Ficha com pend√™ncias"},{code:"completa",label:"Completa",description:"Ficha com todos os EPIs entregues"}],statusEstoque:[{code:"disponivel",label:"Dispon√≠vel",description:"Item dispon√≠vel em estoque"},{code:"baixo",label:"Estoque Baixo",description:"Quantidade abaixo do m√≠nimo"},{code:"vencendo",label:"Pr√≥ximo ao Vencimento",description:"Vence em at√© 30 dias"},{code:"vencido",label:"Vencido",description:"Item com validade expirada"},{code:"esgotado",label:"Esgotado",description:"Sem itens em estoque"},{code:"bloqueado",label:"Bloqueado",description:"Item bloqueado para uso"}],tiposNota:[{code:"entrada",label:"Entrada",description:"Nota de entrada de mercadorias"},{code:"transferencia",label:"Transfer√™ncia",description:"Nota de transfer√™ncia"},{code:"devolucao",label:"Devolu√ß√£o",description:"Nota de devolu√ß√£o"},{code:"descarte",label:"Descarte",description:"Nota de descarte"}]};class _t{constructor(){B(this,"cache",null);B(this,"cacheExpiry",0);B(this,"CACHE_DURATION",5*60*1e3)}async loadBusinessRules(){if(this.cache&&Date.now()<this.cacheExpiry)return this.cache;try{const e=await X.get("/api/v1/configuration");if(!e){console.warn("‚ö†Ô∏è Backend n√£o dispon√≠vel, usando configura√ß√£o mock"),await new Promise(t=>setTimeout(t,100));const r=me}return this.cache=e,this.cacheExpiry=Date.now()+this.CACHE_DURATION,e}catch(e){return console.error("Erro ao carregar configura√ß√µes de neg√≥cio:",e),this.cache?(console.warn("Usando configura√ß√µes do cache devido ao erro"),this.cache):(console.warn("Usando configura√ß√µes mock devido ao erro"),me)}}async getConfigByCategory(e){return(await this.loadBusinessRules())[e]||[]}async getConfigItem(e,r){return(await this.getConfigByCategory(e)).find(o=>o.code===r)||null}clearCache(){this.cache=null,this.cacheExpiry=0}isCacheValid(){return this.cache!==null&&Date.now()<this.cacheExpiry}}const pe=new _t;async function Qt(){try{console.log("‚öôÔ∏è Carregando configura√ß√µes do sistema...");const a=await X.get("/configuracoes");return console.log("‚úÖ Configura√ß√µes do sistema carregadas:",a.data.length),a.data}catch(a){throw console.error("‚ùå Erro ao carregar configura√ß√µes do sistema:",a),a}}async function vt(a,e){try{console.log("üíæ Atualizando configura√ß√£o do sistema:",a,"‚Üí",e);const r=await X.put(`/configuracoes/${a}`,{valor:e});return console.log("‚úÖ Configura√ß√£o do sistema atualizada:",{chave:a,valorAnterior:r.data.valorAnterior,valorNovo:r.data.configuracao.valor}),r.data.configuracao}catch(r){throw console.error("‚ùå Erro ao atualizar configura√ß√£o do sistema:",r),r}}async function jt(a,e){return vt(a,e.toString())}const Gt={PERMITIR_ESTOQUE_NEGATIVO:"PERMITIR_ESTOQUE_NEGATIVO",PERMITIR_AJUSTES_FORCADOS:"PERMITIR_AJUSTES_FORCADOS",ESTOQUE_MINIMO_EQUIPAMENTO:"ESTOQUE_MINIMO_EQUIPAMENTO"},he={data:null,loading:!1,error:null,lastUpdated:null};function Ct(){const{subscribe:a,set:e,update:r}=_(he);return{subscribe:a,async initialize(){r(t=>({...t,loading:!0,error:null}));try{const t=await pe.loadBusinessRules();e({data:t,loading:!1,error:null,lastUpdated:Date.now()}),console.log("‚úÖ Configura√ß√µes de neg√≥cio carregadas com sucesso")}catch(t){const o=t instanceof Error?t.message:"Erro desconhecido";r(n=>({...n,loading:!1,error:`Erro ao carregar configura√ß√µes: ${o}`})),console.error("‚ùå Erro ao carregar configura√ß√µes de neg√≥cio:",t)}},async reload(){pe.clearCache(),await this.initialize()},reset(){e(he)},isReady(){let t=!1;return a(o=>{t=o.data!==null&&!o.loading&&!o.error})(),t}}}const P=Ct(),Et=b(P,a=>{var e;return((e=a.data)==null?void 0:e.tiposMovimentacao)||[]}),kt=b(P,a=>{var e;return((e=a.data)==null?void 0:e.categoriasEPI)||[]}),yt=b(P,a=>{var e;return((e=a.data)==null?void 0:e.statusEntrega)||[]});b(P,a=>{var e;return((e=a.data)==null?void 0:e.statusFicha)||[]});const St=b(P,a=>{var e;return((e=a.data)==null?void 0:e.statusEstoque)||[]});b(P,a=>{var e;return((e=a.data)==null?void 0:e.tiposNota)||[]});b(P,a=>a.data!==null&&!a.loading&&!a.error);function j(a,e=!0){const r=a.map(t=>({value:t.code,label:t.label}));return e?[{value:"",label:"Selecionar..."},...r]:r}b(Et,a=>j(a));const Ht=b(kt,a=>j(a));b(yt,a=>j(a));const Jt=b(St,a=>j(a));function It(){const{subscribe:a,update:e}=_([]);return{subscribe:a,add:r=>{const t=Math.random().toString(36).substring(7),o={id:t,...r};e(s=>[...s,o]);const n=r.duration||5e3;return n>0&&setTimeout(()=>{e(s=>s.filter(f=>f.id!==t))},n),t},remove:r=>{e(t=>t.filter(o=>o.id!==r))},clear:()=>{e(()=>[])}}}const w=It(),Kt={success:(a,e,r)=>w.add({type:"success",title:a,message:e,duration:r}),error:(a,e,r)=>w.add({type:"error",title:a,message:e,duration:r}),warning:(a,e,r)=>w.add({type:"warning",title:a,message:e,duration:r}),info:(a,e,r)=>w.add({type:"info",title:a,message:e,duration:r})};function Z(a){const e=_(a),r=_(""),t=_(1),o=_(10),n=_(""),s=_("asc"),f=b([e,r,t,o,n,s],([u,i,l,m,d,p])=>({filters:u,search:{term:i,fields:[]},pagination:{currentPage:l,itemsPerPage:m,totalItems:0,totalPages:0},sort:{field:d,direction:p}}));return{filters:e,searchTerm:r,currentPage:t,itemsPerPage:o,sortField:n,sortDirection:s,filtersState:f,updateFilter:(u,i)=>{e.update(l=>({...l,[u]:i})),t.set(1)},setSearchTerm:u=>{r.set(u),t.set(1)},setCurrentPage:u=>{t.set(u)},setItemsPerPage:u=>{o.set(u),t.set(1)},setSorting:(u,i)=>{const l=g(s),m=g(n);u===m&&!i?s.set(l==="asc"?"desc":"asc"):(n.set(u),s.set(i||"asc"))},resetFilters:()=>{e.set(a),r.set(""),t.set(1),n.set(""),s.set("asc")},resetPagination:()=>{t.set(1)},getCurrentFilters:()=>g(e),getCurrentSearchTerm:()=>g(r),getCurrentPage:()=>g(t),getCurrentSort:()=>({field:g(n),direction:g(s)})}}Z({status:"todos",categoria:"todas",fabricante:"todos"});Z({status:"todos",estoque:"todos",categoria:"todas",vencimento:"todos"});Z({cargo:"todos",empresa:"todas",devolucaoPendente:!1});function Pt(){const{subscribe:a,set:e,update:r}=_([]);return{subscribe:a,set:e,add:t=>r(o=>[...o,t]),update:(t,o)=>r(n=>n.map(s=>s.id===t?{...s,...o}:s)),remove:t=>r(o=>o.filter(n=>n.id!==t)),getById:t=>g({subscribe:a}).find(o=>o.id===t),clear:()=>e([])}}function Tt(){const{subscribe:a,set:e,update:r}=_([]);return{subscribe:a,set:e,add:t=>r(o=>[...o,t]),update:(t,o)=>r(n=>n.map(s=>s.id===t?{...s,...o}:s)),remove:t=>r(o=>o.filter(n=>n.id!==t)),updateQuantidade:(t,o)=>r(n=>n.map(s=>s.id===t?{...s,quantidade:o}:s)),getById:t=>g({subscribe:a}).find(o=>o.id===t),getByTipoEPI:t=>g({subscribe:a}).filter(o=>o.tipoEPIId===t),clear:()=>e([])}}function At(){const{subscribe:a,set:e,update:r}=_([]);return{subscribe:a,set:e,add:t=>r(o=>[...o,t]),update:(t,o)=>r(n=>n.map(s=>s.id===t?{...s,...o}:s)),remove:t=>r(o=>o.filter(n=>n.id!==t)),getById:t=>g({subscribe:a}).find(o=>o.id===t),getByColaborador:t=>g({subscribe:a}).filter(o=>o.colaboradorId===t),getAtivas:()=>g({subscribe:a}).filter(t=>t.status==="ativo"),getVencidas:()=>g({subscribe:a}).filter(t=>t.status==="vencido"),clear:()=>e([])}}function Ot(){const{subscribe:a,set:e,update:r}=_([]);return{subscribe:a,set:e,add:t=>r(o=>[...o,t]),update:(t,o)=>r(n=>n.map(s=>s.id===t?{...s,...o}:s)),remove:t=>r(o=>o.filter(n=>n.id!==t)),getById:t=>g({subscribe:a}).find(o=>o.id===t),getByEmpresa:t=>g({subscribe:a}).filter(o=>o.empresaId===t),getAtivos:()=>g({subscribe:a}).filter(t=>t.status==="ativo"),clear:()=>e([])}}function Nt(){const{subscribe:a,set:e,update:r}=_([]);return{subscribe:a,set:e,add:t=>r(o=>[...o,t]),update:(t,o)=>r(n=>n.map(s=>s.id===t?{...s,...o}:s)),remove:t=>r(o=>o.filter(n=>n.id!==t)),getById:t=>g({subscribe:a}).find(o=>o.id===t),getAtivas:()=>g({subscribe:a}).filter(t=>t.status==="ativa"),clear:()=>e([])}}function qt(){const{subscribe:a,set:e,update:r}=_([]);return{subscribe:a,set:e,add:t=>r(o=>[...o,t]),update:(t,o)=>r(n=>n.map(s=>s.id===t?{...s,...o}:s)),remove:t=>r(o=>o.filter(n=>n.id!==t)),getById:t=>g({subscribe:a}).find(o=>o.id===t),getByFicha:t=>g({subscribe:a}).filter(o=>o.fichaEPIId===t),getPendentes:()=>g({subscribe:a}).filter(t=>t.status==="nao_assinado"||t.status==="pendente"),clear:()=>e([])}}function Mt(){const{subscribe:a,set:e,update:r}=_([]);return{subscribe:a,set:e,add:t=>r(o=>[t,...o]),update:(t,o)=>r(n=>n.map(s=>s.id===t?{...s,...o}:s)),remove:t=>r(o=>o.filter(n=>n.id!==t)),markAsRead:t=>r(o=>o.map(n=>n.id===t?{...n,lida:!0}:n)),markAllAsRead:()=>r(t=>t.map(o=>({...o,lida:!0}))),getNaoLidas:()=>g({subscribe:a}).filter(t=>!t.lida),getByTipo:t=>g({subscribe:a}).filter(o=>o.tipo===t),clear:()=>e([])}}Pt();const x=Tt(),Se=At(),Ie=Ot();Nt();qt();const Rt=Mt();b(x,a=>a.filter(e=>e.quantidade>0&&e.status==="disponivel"));b(x,a=>a.filter(e=>e.quantidadeMinima&&e.quantidade<=e.quantidadeMinima));b(Se,a=>a.filter(e=>e.status==="vencido"));b(Ie,a=>a.filter(e=>e.status==="ativo"));const Pe=b(Rt,a=>a.filter(e=>!e.lida));b(Pe,a=>a.length);b([x,Se,Ie,Pe],([a,e,r,t])=>({totalEstoque:a.reduce((o,n)=>o+n.quantidade,0),fichasAtivas:e.filter(o=>o.status==="ativo").length,fichasVencidas:e.filter(o=>o.status==="vencido").length,colaboradoresAtivos:r.filter(o=>o.status==="ativo").length,notificacoesPendentes:t.length,estoqueComProblemas:a.filter(o=>o.status==="baixo_estoque"||o.status==="vencido"||o.status==="esgotado").length}));function S(){const{subscribe:a,set:e,update:r}=_({isOpen:!1,mode:"create",data:void 0});return{subscribe:a,open:(t="create",o)=>{e({isOpen:!0,mode:t,data:o})},close:()=>{e({isOpen:!1,mode:"create",data:void 0})},setData:t=>{r(o=>({...o,data:t}))},setMode:t=>{r(o=>({...o,mode:t}))},isOpen:()=>g({subscribe:a}).isOpen,isMode:t=>g({subscribe:a}).mode===t,getData:()=>g({subscribe:a}).data}}S();S();S();S();S();S();S();S();function Dt(){const{subscribe:a,set:e,update:r}=_({isOpen:!1,title:"",message:"",confirmText:"Confirmar",cancelText:"Cancelar",confirmColor:"red"});return{subscribe:a,confirm:t=>{e({isOpen:!0,title:t.title,message:t.message,confirmText:t.confirmText||"Confirmar",cancelText:t.cancelText||"Cancelar",confirmColor:t.confirmColor||"red",onConfirm:t.onConfirm,onCancel:t.onCancel})},close:()=>{e({isOpen:!1,title:"",message:"",confirmText:"Confirmar",cancelText:"Cancelar",confirmColor:"red"})},handleConfirm:async()=>{const t=g({subscribe:a});t.onConfirm&&await t.onConfirm(),e({isOpen:!1,title:"",message:"",confirmText:"Confirmar",cancelText:"Cancelar",confirmColor:"red"})},handleCancel:()=>{const t=g({subscribe:a});t.onCancel&&t.onCancel(),e({isOpen:!1,title:"",message:"",confirmText:"Confirmar",cancelText:"Cancelar",confirmColor:"red"})}}}Dt();export{Gt as C,Vt as I,ct as W,w as a,P as b,Ht as c,Qt as g,Kt as n,Jt as s,Lt as t,jt as u};
